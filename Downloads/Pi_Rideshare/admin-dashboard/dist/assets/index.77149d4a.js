import{a as Ha,r as l,b as Qo}from"./vendor.d1041584.js";import{a as e,j as t,F as ve}from"./stripe.54f5758b.js";import{R as To,A as Ln,C as Ko,X as Xo,Y as Eo,T as Do,a as Nn,P as Va,b as Ga,c as Ya,L as $n,d as tn,e as hr,B as Ja,f as Ka}from"./charts.7d4d0307.js";const Xa=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function r(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(s){if(s.ep)return;s.ep=!0;const d=r(s);fetch(s.href,d)}};Xa();var ia,On=Ha.exports;ia=On.createRoot,On.hydrateRoot;const Za="modulepreload",Qa=function(i){return"/"+i},jn={},el=function(o,r,n){return!r||r.length===0?o():Promise.all(r.map(s=>{if(s=Qa(s),s in jn)return;jn[s]=!0;const d=s.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Za,d||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),d)return new Promise((c,v)=>{h.addEventListener("load",c),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>o())};var Un="popstate";function tl(i={}){function o(n,s){let{pathname:d,search:p,hash:h}=n.location;return sn("",{pathname:d,search:p,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Di(s)}return il(o,r,null,i)}function We(i,o){if(i===!1||i===null||typeof i>"u")throw new Error(o)}function Lt(i,o){if(!i){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function ol(){return Math.random().toString(36).substring(2,10)}function qn(i,o){return{usr:i.state,key:i.key,idx:o}}function sn(i,o,r=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof o=="string"?ii(o):o,state:r,key:o&&o.key||n||ol()}}function Di({pathname:i="/",search:o="",hash:r=""}){return o&&o!=="?"&&(i+=o.charAt(0)==="?"?o:"?"+o),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function ii(i){let o={};if(i){let r=i.indexOf("#");r>=0&&(o.hash=i.substring(r),i=i.substring(0,r));let n=i.indexOf("?");n>=0&&(o.search=i.substring(n),i=i.substring(0,n)),i&&(o.pathname=i)}return o}function il(i,o,r,n={}){let{window:s=document.defaultView,v5Compat:d=!1}=n,p=s.history,h="POP",c=null,v=u();v==null&&(v=0,p.replaceState({...p.state,idx:v},""));function u(){return(p.state||{idx:null}).idx}function x(){h="POP";let S=u(),m=S==null?null:S-v;v=S,c&&c({action:h,location:b.location,delta:m})}function z(S,m){h="PUSH";let y=sn(b.location,S,m);r&&r(y,S),v=u()+1;let f=qn(y,v),w=b.createHref(y);try{p.pushState(f,"",w)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(w)}d&&c&&c({action:h,location:b.location,delta:1})}function E(S,m){h="REPLACE";let y=sn(b.location,S,m);r&&r(y,S),v=u();let f=qn(y,v),w=b.createHref(y);p.replaceState(f,"",w),d&&c&&c({action:h,location:b.location,delta:0})}function F(S){return rl(S)}let b={get action(){return h},get location(){return i(s,p)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Un,x),c=S,()=>{s.removeEventListener(Un,x),c=null}},createHref(S){return o(s,S)},createURL:F,encodeLocation(S){let m=F(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:z,replace:E,go(S){return p.go(S)}};return b}function rl(i,o=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),We(r,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Di(i);return n=n.replace(/ $/,"%20"),!o&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function ra(i,o,r="/"){return nl(i,o,r,!1)}function nl(i,o,r,n){let s=typeof o=="string"?ii(o):o,d=io(s.pathname||"/",r);if(d==null)return null;let p=na(i);al(p);let h=null;for(let c=0;h==null&&c<p.length;++c){let v=ml(d);h=fl(p[c],v,n)}return h}function na(i,o=[],r=[],n="",s=!1){let d=(p,h,c=s,v)=>{let u={relativePath:v===void 0?p.path||"":v,caseSensitive:p.caseSensitive===!0,childrenIndex:h,route:p};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;We(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let x=to([n,u.relativePath]),z=r.concat(u);p.children&&p.children.length>0&&(We(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),na(p.children,o,z,x,c)),!(p.path==null&&!p.index)&&o.push({path:x,score:hl(x,p.index),routesMeta:z})};return i.forEach((p,h)=>{var c;if(p.path===""||!((c=p.path)!=null&&c.includes("?")))d(p,h);else for(let v of aa(p.path))d(p,h,!0,v)}),o}function aa(i){let o=i.split("/");if(o.length===0)return[];let[r,...n]=o,s=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return s?[d,""]:[d];let p=aa(n.join("/")),h=[];return h.push(...p.map(c=>c===""?d:[d,c].join("/"))),s&&h.push(...p),h.map(c=>i.startsWith("/")&&c===""?"/":c)}function al(i){i.sort((o,r)=>o.score!==r.score?r.score-o.score:gl(o.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ll=/^:[\w-]+$/,sl=3,dl=2,cl=1,pl=10,ul=-2,Hn=i=>i==="*";function hl(i,o){let r=i.split("/"),n=r.length;return r.some(Hn)&&(n+=ul),o&&(n+=dl),r.filter(s=>!Hn(s)).reduce((s,d)=>s+(ll.test(d)?sl:d===""?cl:pl),n)}function gl(i,o){return i.length===o.length&&i.slice(0,-1).every((n,s)=>n===o[s])?i[i.length-1]-o[o.length-1]:0}function fl(i,o,r=!1){let{routesMeta:n}=i,s={},d="/",p=[];for(let h=0;h<n.length;++h){let c=n[h],v=h===n.length-1,u=d==="/"?o:o.slice(d.length)||"/",x=Cr({path:c.relativePath,caseSensitive:c.caseSensitive,end:v},u),z=c.route;if(!x&&v&&r&&!n[n.length-1].route.index&&(x=Cr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!x)return null;Object.assign(s,x.params),p.push({params:s,pathname:to([d,x.pathname]),pathnameBase:Sl(to([d,x.pathnameBase])),route:z}),x.pathnameBase!=="/"&&(d=to([d,x.pathnameBase]))}return p}function Cr(i,o){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,n]=xl(i.path,i.caseSensitive,i.end),s=o.match(r);if(!s)return null;let d=s[0],p=d.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:n.reduce((v,{paramName:u,isOptional:x},z)=>{if(u==="*"){let F=h[z]||"";p=d.slice(0,d.length-F.length).replace(/(.)\/+$/,"$1")}const E=h[z];return x&&!E?v[u]=void 0:v[u]=(E||"").replace(/%2F/g,"/"),v},{}),pathname:d,pathnameBase:p,pattern:i}}function xl(i,o=!1,r=!0){Lt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,h,c)=>(n.push({paramName:h,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,o?void 0:"i"),n]}function ml(i){try{return i.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Lt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),i}}function io(i,o){if(o==="/")return i;if(!i.toLowerCase().startsWith(o.toLowerCase()))return null;let r=o.endsWith("/")?o.length-1:o.length,n=i.charAt(r);return n&&n!=="/"?null:i.slice(r)||"/"}function yl(i,o="/"){let{pathname:r,search:n="",hash:s=""}=typeof i=="string"?ii(i):i;return{pathname:r?r.startsWith("/")?r:bl(r,o):o,search:wl(n),hash:kl(s)}}function bl(i,o){let r=o.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function on(i,o,r,n){return`Cannot include a '${i}' character in a manually specified \`to.${o}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vl(i){return i.filter((o,r)=>r===0||o.route.path&&o.route.path.length>0)}function la(i){let o=vl(i);return o.map((r,n)=>n===o.length-1?r.pathname:r.pathnameBase)}function sa(i,o,r,n=!1){let s;typeof i=="string"?s=ii(i):(s={...i},We(!s.pathname||!s.pathname.includes("?"),on("?","pathname","search",s)),We(!s.pathname||!s.pathname.includes("#"),on("#","pathname","hash",s)),We(!s.search||!s.search.includes("#"),on("#","search","hash",s)));let d=i===""||s.pathname==="",p=d?"/":s.pathname,h;if(p==null)h=r;else{let x=o.length-1;if(!n&&p.startsWith("..")){let z=p.split("/");for(;z[0]==="..";)z.shift(),x-=1;s.pathname=z.join("/")}h=x>=0?o[x]:"/"}let c=yl(s,h),v=p&&p!=="/"&&p.endsWith("/"),u=(d||p===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(v||u)&&(c.pathname+="/"),c}var to=i=>i.join("/").replace(/\/\/+/g,"/"),Sl=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),wl=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,kl=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Cl(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var zl=["POST","PUT","PATCH","DELETE"];[...zl];var ri=l.exports.createContext(null);ri.displayName="DataRouter";var Tr=l.exports.createContext(null);Tr.displayName="DataRouterState";l.exports.createContext(!1);var da=l.exports.createContext({isTransitioning:!1});da.displayName="ViewTransition";var Rl=l.exports.createContext(new Map);Rl.displayName="Fetchers";var Fl=l.exports.createContext(null);Fl.displayName="Await";var jt=l.exports.createContext(null);jt.displayName="Navigation";var _i=l.exports.createContext(null);_i.displayName="Location";var Ut=l.exports.createContext({outlet:null,matches:[],isDataRoute:!1});Ut.displayName="Route";var yn=l.exports.createContext(null);yn.displayName="RouteError";function Al(i,{relative:o}={}){We(Pi(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=l.exports.useContext(jt),{hash:s,pathname:d,search:p}=Li(i,{relative:o}),h=d;return r!=="/"&&(h=d==="/"?r:to([r,d])),n.createHref({pathname:h,search:p,hash:s})}function Pi(){return l.exports.useContext(_i)!=null}function bo(){return We(Pi(),"useLocation() may be used only in the context of a <Router> component."),l.exports.useContext(_i).location}var ca="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pa(i){l.exports.useContext(jt).static||l.exports.useLayoutEffect(i)}function Er(){let{isDataRoute:i}=l.exports.useContext(Ut);return i?Ul():Il()}function Il(){We(Pi(),"useNavigate() may be used only in the context of a <Router> component.");let i=l.exports.useContext(ri),{basename:o,navigator:r}=l.exports.useContext(jt),{matches:n}=l.exports.useContext(Ut),{pathname:s}=bo(),d=JSON.stringify(la(n)),p=l.exports.useRef(!1);return pa(()=>{p.current=!0}),l.exports.useCallback((c,v={})=>{if(Lt(p.current,ca),!p.current)return;if(typeof c=="number"){r.go(c);return}let u=sa(c,JSON.parse(d),s,v.relative==="path");i==null&&o!=="/"&&(u.pathname=u.pathname==="/"?o:to([o,u.pathname])),(v.replace?r.replace:r.push)(u,v.state,v)},[o,r,d,s,i])}var Tl=l.exports.createContext(null);function El(i){let o=l.exports.useContext(Ut).outlet;return o&&l.exports.createElement(Tl.Provider,{value:i},o)}function Li(i,{relative:o}={}){let{matches:r}=l.exports.useContext(Ut),{pathname:n}=bo(),s=JSON.stringify(la(r));return l.exports.useMemo(()=>sa(i,JSON.parse(s),n,o==="path"),[i,s,n,o])}function Dl(i,o){return ua(i,o)}function ua(i,o,r,n,s){var y;We(Pi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=l.exports.useContext(jt),{matches:p}=l.exports.useContext(Ut),h=p[p.length-1],c=h?h.params:{},v=h?h.pathname:"/",u=h?h.pathnameBase:"/",x=h&&h.route;{let f=x&&x.path||"";ha(v,!x||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let z=bo(),E;if(o){let f=typeof o=="string"?ii(o):o;We(u==="/"||((y=f.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${f.pathname}" was given in the \`location\` prop.`),E=f}else E=z;let F=E.pathname||"/",b=F;if(u!=="/"){let f=u.replace(/^\//,"").split("/"),w=F.replace(/^\//,"").split("/");b="/"+w.slice(f.length).join("/")}let S=ra(i,{pathname:b});Lt(x||S!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Lt(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=Pl(S&&S.map(f=>Object.assign({},f,{params:Object.assign({},c,f.params),pathname:to([u,d.encodeLocation?d.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?u:to([u,d.encodeLocation?d.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),p,r,n,s);return o&&m?l.exports.createElement(_i.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},m):m}function Bl(){let i=jl(),o=Cl(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},d={padding:"2px 4px",backgroundColor:n},p=null;return console.error("Error handled by React Router default ErrorBoundary:",i),p=l.exports.createElement(l.exports.Fragment,null,l.exports.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),l.exports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",l.exports.createElement("code",{style:d},"ErrorBoundary")," or"," ",l.exports.createElement("code",{style:d},"errorElement")," prop on your route.")),l.exports.createElement(l.exports.Fragment,null,l.exports.createElement("h2",null,"Unexpected Application Error!"),l.exports.createElement("h3",{style:{fontStyle:"italic"}},o),r?l.exports.createElement("pre",{style:s},r):null,p)}var Wl=l.exports.createElement(Bl,null),Ml=class extends l.exports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,o){return o.location!==i.location||o.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:o.error,location:o.location,revalidation:i.revalidation||o.revalidation}}componentDidCatch(i,o){this.props.unstable_onError?this.props.unstable_onError(i,o):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?l.exports.createElement(Ut.Provider,{value:this.props.routeContext},l.exports.createElement(yn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _l({routeContext:i,match:o,children:r}){let n=l.exports.useContext(ri);return n&&n.static&&n.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=o.route.id),l.exports.createElement(Ut.Provider,{value:i},r)}function Pl(i,o=[],r=null,n=null,s=null){if(i==null){if(!r)return null;if(r.errors)i=r.matches;else if(o.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let d=i,p=r==null?void 0:r.errors;if(p!=null){let v=d.findIndex(u=>u.route.id&&(p==null?void 0:p[u.route.id])!==void 0);We(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),d=d.slice(0,Math.min(d.length,v+1))}let h=!1,c=-1;if(r)for(let v=0;v<d.length;v++){let u=d[v];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=v),u.route.id){let{loaderData:x,errors:z}=r,E=u.route.loader&&!x.hasOwnProperty(u.route.id)&&(!z||z[u.route.id]===void 0);if(u.route.lazy||E){h=!0,c>=0?d=d.slice(0,c+1):d=[d[0]];break}}}return d.reduceRight((v,u,x)=>{let z,E=!1,F=null,b=null;r&&(z=p&&u.route.id?p[u.route.id]:void 0,F=u.route.errorElement||Wl,h&&(c<0&&x===0?(ha("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,b=null):c===x&&(E=!0,b=u.route.hydrateFallbackElement||null)));let S=o.concat(d.slice(0,x+1)),m=()=>{let y;return z?y=F:E?y=b:u.route.Component?y=l.exports.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=v,l.exports.createElement(_l,{match:u,routeContext:{outlet:v,matches:S,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||x===0)?l.exports.createElement(Ml,{location:r.location,revalidation:r.revalidation,component:F,error:z,children:m(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):m()},null)}function bn(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ll(i){let o=l.exports.useContext(ri);return We(o,bn(i)),o}function Nl(i){let o=l.exports.useContext(Tr);return We(o,bn(i)),o}function $l(i){let o=l.exports.useContext(Ut);return We(o,bn(i)),o}function vn(i){let o=$l(i),r=o.matches[o.matches.length-1];return We(r.route.id,`${i} can only be used on routes that contain a unique "id"`),r.route.id}function Ol(){return vn("useRouteId")}function jl(){var n;let i=l.exports.useContext(yn),o=Nl("useRouteError"),r=vn("useRouteError");return i!==void 0?i:(n=o.errors)==null?void 0:n[r]}function Ul(){let{router:i}=Ll("useNavigate"),o=vn("useNavigate"),r=l.exports.useRef(!1);return pa(()=>{r.current=!0}),l.exports.useCallback(async(s,d={})=>{Lt(r.current,ca),r.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:o,...d}))},[i,o])}var Vn={};function ha(i,o,r){!o&&!Vn[i]&&(Vn[i]=!0,Lt(!1,r))}l.exports.memo(ql);function ql({routes:i,future:o,state:r,unstable_onError:n}){return ua(i,void 0,r,n,o)}function Hl(i){return El(i.context)}function ke(i){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vl({basename:i="/",children:o=null,location:r,navigationType:n="POP",navigator:s,static:d=!1}){We(!Pi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=i.replace(/^\/*/,"/"),h=l.exports.useMemo(()=>({basename:p,navigator:s,static:d,future:{}}),[p,s,d]);typeof r=="string"&&(r=ii(r));let{pathname:c="/",search:v="",hash:u="",state:x=null,key:z="default"}=r,E=l.exports.useMemo(()=>{let F=io(c,p);return F==null?null:{location:{pathname:F,search:v,hash:u,state:x,key:z},navigationType:n}},[p,c,v,u,x,z,n]);return Lt(E!=null,`<Router basename="${p}"> is not able to match the URL "${c}${v}${u}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:l.exports.createElement(jt.Provider,{value:h},l.exports.createElement(_i.Provider,{children:o,value:E}))}function Gl({children:i,location:o}){return Dl(dn(i),o)}function dn(i,o=[]){let r=[];return l.exports.Children.forEach(i,(n,s)=>{if(!l.exports.isValidElement(n))return;let d=[...o,s];if(n.type===l.exports.Fragment){r.push.apply(r,dn(n.props.children,d));return}We(n.type===ke,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!n.props.index||!n.props.children,"An index route cannot have child routes.");let p={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(p.children=dn(n.props.children,d)),r.push(p)}),r}var yr="get",br="application/x-www-form-urlencoded";function Dr(i){return i!=null&&typeof i.tagName=="string"}function Yl(i){return Dr(i)&&i.tagName.toLowerCase()==="button"}function Jl(i){return Dr(i)&&i.tagName.toLowerCase()==="form"}function Kl(i){return Dr(i)&&i.tagName.toLowerCase()==="input"}function Xl(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Zl(i,o){return i.button===0&&(!o||o==="_self")&&!Xl(i)}var gr=null;function Ql(){if(gr===null)try{new FormData(document.createElement("form"),0),gr=!1}catch{gr=!0}return gr}var es=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rn(i){return i!=null&&!es.has(i)?(Lt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${br}"`),null):i}function ts(i,o){let r,n,s,d,p;if(Jl(i)){let h=i.getAttribute("action");n=h?io(h,o):null,r=i.getAttribute("method")||yr,s=rn(i.getAttribute("enctype"))||br,d=new FormData(i)}else if(Yl(i)||Kl(i)&&(i.type==="submit"||i.type==="image")){let h=i.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||h.getAttribute("action");if(n=c?io(c,o):null,r=i.getAttribute("formmethod")||h.getAttribute("method")||yr,s=rn(i.getAttribute("formenctype"))||rn(h.getAttribute("enctype"))||br,d=new FormData(h,i),!Ql()){let{name:v,type:u,value:x}=i;if(u==="image"){let z=v?`${v}.`:"";d.append(`${z}x`,"0"),d.append(`${z}y`,"0")}else v&&d.append(v,x)}}else{if(Dr(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yr,n=null,s=br,p=i}return d&&s==="text/plain"&&(p=d,d=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:d,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sn(i,o){if(i===!1||i===null||typeof i>"u")throw new Error(o)}function os(i,o,r){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${r}`:o&&io(n.pathname,o)==="/"?n.pathname=`${o.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function is(i,o){if(i.id in o)return o[i.id];try{let r=await el(()=>import(i.module),[]);return o[i.id]=r,r}catch(r){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rs(i){return i!=null&&typeof i.page=="string"}function ns(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function as(i,o,r){let n=await Promise.all(i.map(async s=>{let d=o.routes[s.route.id];if(d){let p=await is(d,r);return p.links?p.links():[]}return[]}));return cs(n.flat(1).filter(ns).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gn(i,o,r,n,s,d){let p=(c,v)=>r[v]?c.route.id!==r[v].route.id:!0,h=(c,v)=>{var u;return r[v].pathname!==c.pathname||((u=r[v].route.path)==null?void 0:u.endsWith("*"))&&r[v].params["*"]!==c.params["*"]};return d==="assets"?o.filter((c,v)=>p(c,v)||h(c,v)):d==="data"?o.filter((c,v)=>{var x;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(p(c,v)||h(c,v))return!0;if(c.route.shouldRevalidate){let z=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof z=="boolean")return z}return!0}):[]}function ls(i,o,{includeHydrateFallback:r}={}){return ss(i.map(n=>{let s=o.routes[n.route.id];if(!s)return[];let d=[s.module];return s.clientActionModule&&(d=d.concat(s.clientActionModule)),s.clientLoaderModule&&(d=d.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(d=d.concat(s.hydrateFallbackModule)),s.imports&&(d=d.concat(s.imports)),d}).flat(1))}function ss(i){return[...new Set(i)]}function ds(i){let o={},r=Object.keys(i).sort();for(let n of r)o[n]=i[n];return o}function cs(i,o){let r=new Set,n=new Set(o);return i.reduce((s,d)=>{if(o&&!rs(d)&&d.as==="script"&&d.href&&n.has(d.href))return s;let h=JSON.stringify(ds(d));return r.has(h)||(r.add(h),s.push({key:h,link:d})),s},[])}function ga(){let i=l.exports.useContext(ri);return Sn(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function ps(){let i=l.exports.useContext(Tr);return Sn(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wn=l.exports.createContext(void 0);wn.displayName="FrameworkContext";function fa(){let i=l.exports.useContext(wn);return Sn(i,"You must render this element inside a <HydratedRouter> element"),i}function us(i,o){let r=l.exports.useContext(wn),[n,s]=l.exports.useState(!1),[d,p]=l.exports.useState(!1),{onFocus:h,onBlur:c,onMouseEnter:v,onMouseLeave:u,onTouchStart:x}=o,z=l.exports.useRef(null);l.exports.useEffect(()=>{if(i==="render"&&p(!0),i==="viewport"){let b=m=>{m.forEach(y=>{p(y.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return z.current&&S.observe(z.current),()=>{S.disconnect()}}},[i]),l.exports.useEffect(()=>{if(n){let b=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(b)}}},[n]);let E=()=>{s(!0)},F=()=>{s(!1),p(!1)};return r?i!=="intent"?[d,z,{}]:[d,z,{onFocus:Fi(h,E),onBlur:Fi(c,F),onMouseEnter:Fi(v,E),onMouseLeave:Fi(u,F),onTouchStart:Fi(x,E)}]:[!1,z,{}]}function Fi(i,o){return r=>{i&&i(r),r.defaultPrevented||o(r)}}function hs({page:i,...o}){let{router:r}=ga(),n=l.exports.useMemo(()=>ra(r.routes,i,r.basename),[r.routes,i,r.basename]);return n?l.exports.createElement(fs,{page:i,matches:n,...o}):null}function gs(i){let{manifest:o,routeModules:r}=fa(),[n,s]=l.exports.useState([]);return l.exports.useEffect(()=>{let d=!1;return as(i,o,r).then(p=>{d||s(p)}),()=>{d=!0}},[i,o,r]),n}function fs({page:i,matches:o,...r}){let n=bo(),{manifest:s,routeModules:d}=fa(),{basename:p}=ga(),{loaderData:h,matches:c}=ps(),v=l.exports.useMemo(()=>Gn(i,o,c,s,n,"data"),[i,o,c,s,n]),u=l.exports.useMemo(()=>Gn(i,o,c,s,n,"assets"),[i,o,c,s,n]),x=l.exports.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let F=new Set,b=!1;if(o.forEach(m=>{var f;let y=s.routes[m.route.id];!y||!y.hasLoader||(!v.some(w=>w.route.id===m.route.id)&&m.route.id in h&&((f=d[m.route.id])==null?void 0:f.shouldRevalidate)||y.hasClientLoader?b=!0:F.add(m.route.id))}),F.size===0)return[];let S=os(i,p,"data");return b&&F.size>0&&S.searchParams.set("_routes",o.filter(m=>F.has(m.route.id)).map(m=>m.route.id).join(",")),[S.pathname+S.search]},[p,h,n,s,v,o,i,d]),z=l.exports.useMemo(()=>ls(u,s),[u,s]),E=gs(u);return l.exports.createElement(l.exports.Fragment,null,x.map(F=>l.exports.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...r})),z.map(F=>l.exports.createElement("link",{key:F,rel:"modulepreload",href:F,...r})),E.map(({key:F,link:b})=>l.exports.createElement("link",{key:F,nonce:r.nonce,...b})))}function xs(...i){return o=>{i.forEach(r=>{typeof r=="function"?r(o):r!=null&&(r.current=o)})}}var xa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xa&&(window.__reactRouterVersion="7.8.2")}catch{}function ms({basename:i,children:o,window:r}){let n=l.exports.useRef();n.current==null&&(n.current=tl({window:r,v5Compat:!0}));let s=n.current,[d,p]=l.exports.useState({action:s.action,location:s.location}),h=l.exports.useCallback(c=>{l.exports.startTransition(()=>p(c))},[p]);return l.exports.useLayoutEffect(()=>s.listen(h),[s,h]),l.exports.createElement(Vl,{basename:i,children:o,location:d.location,navigationType:d.action,navigator:s})}var ma=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Br=l.exports.forwardRef(function({onClick:o,discover:r="render",prefetch:n="none",relative:s,reloadDocument:d,replace:p,state:h,target:c,to:v,preventScrollReset:u,viewTransition:x,...z},E){let{basename:F}=l.exports.useContext(jt),b=typeof v=="string"&&ma.test(v),S,m=!1;if(typeof v=="string"&&b&&(S=v,xa))try{let Y=new URL(window.location.href),B=v.startsWith("//")?new URL(Y.protocol+v):new URL(v),V=io(B.pathname,F);B.origin===Y.origin&&V!=null?v=V+B.search+B.hash:m=!0}catch{Lt(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Al(v,{relative:s}),[f,w,L]=us(n,z),A=Ss(v,{replace:p,state:h,target:c,preventScrollReset:u,relative:s,viewTransition:x});function H(Y){o&&o(Y),Y.defaultPrevented||A(Y)}let W=l.exports.createElement("a",{...z,...L,href:S||y,onClick:m||d?o:H,ref:xs(E,w),target:c,"data-discover":!b&&r==="render"?"true":void 0});return f&&!b?l.exports.createElement(l.exports.Fragment,null,W,l.exports.createElement(hs,{page:y})):W});Br.displayName="Link";var ys=l.exports.forwardRef(function({"aria-current":o="page",caseSensitive:r=!1,className:n="",end:s=!1,style:d,to:p,viewTransition:h,children:c,...v},u){let x=Li(p,{relative:v.relative}),z=bo(),E=l.exports.useContext(Tr),{navigator:F,basename:b}=l.exports.useContext(jt),S=E!=null&&Rs(x)&&h===!0,m=F.encodeLocation?F.encodeLocation(x).pathname:x.pathname,y=z.pathname,f=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(y=y.toLowerCase(),f=f?f.toLowerCase():null,m=m.toLowerCase()),f&&b&&(f=io(f,b)||f);const w=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let L=y===m||!s&&y.startsWith(m)&&y.charAt(w)==="/",A=f!=null&&(f===m||!s&&f.startsWith(m)&&f.charAt(m.length)==="/"),H={isActive:L,isPending:A,isTransitioning:S},W=L?o:void 0,Y;typeof n=="function"?Y=n(H):Y=[n,L?"active":null,A?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof d=="function"?d(H):d;return l.exports.createElement(Br,{...v,"aria-current":W,className:Y,ref:u,style:B,to:p,viewTransition:h},typeof c=="function"?c(H):c)});ys.displayName="NavLink";var bs=l.exports.forwardRef(({discover:i="render",fetcherKey:o,navigate:r,reloadDocument:n,replace:s,state:d,method:p=yr,action:h,onSubmit:c,relative:v,preventScrollReset:u,viewTransition:x,...z},E)=>{let F=Cs(),b=zs(h,{relative:v}),S=p.toLowerCase()==="get"?"get":"post",m=typeof h=="string"&&ma.test(h),y=f=>{if(c&&c(f),f.defaultPrevented)return;f.preventDefault();let w=f.nativeEvent.submitter,L=(w==null?void 0:w.getAttribute("formmethod"))||p;F(w||f.currentTarget,{fetcherKey:o,method:L,navigate:r,replace:s,state:d,relative:v,preventScrollReset:u,viewTransition:x})};return l.exports.createElement("form",{ref:E,method:S,action:b,onSubmit:n?c:y,...z,"data-discover":!m&&i==="render"?"true":void 0})});bs.displayName="Form";function vs(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ya(i){let o=l.exports.useContext(ri);return We(o,vs(i)),o}function Ss(i,{target:o,replace:r,state:n,preventScrollReset:s,relative:d,viewTransition:p}={}){let h=Er(),c=bo(),v=Li(i,{relative:d});return l.exports.useCallback(u=>{if(Zl(u,o)){u.preventDefault();let x=r!==void 0?r:Di(c)===Di(v);h(i,{replace:x,state:n,preventScrollReset:s,relative:d,viewTransition:p})}},[c,h,v,r,n,o,i,s,d,p])}var ws=0,ks=()=>`__${String(++ws)}__`;function Cs(){let{router:i}=ya("useSubmit"),{basename:o}=l.exports.useContext(jt),r=Ol();return l.exports.useCallback(async(n,s={})=>{let{action:d,method:p,encType:h,formData:c,body:v}=ts(n,o);if(s.navigate===!1){let u=s.fetcherKey||ks();await i.fetch(u,r,s.action||d,{preventScrollReset:s.preventScrollReset,formData:c,body:v,formMethod:s.method||p,formEncType:s.encType||h,flushSync:s.flushSync})}else await i.navigate(s.action||d,{preventScrollReset:s.preventScrollReset,formData:c,body:v,formMethod:s.method||p,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,o,r])}function zs(i,{relative:o}={}){let{basename:r}=l.exports.useContext(jt),n=l.exports.useContext(Ut);We(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),d={...Li(i||".",{relative:o})},p=bo();if(i==null){d.search=p.search;let h=new URLSearchParams(d.search),c=h.getAll("index");if(c.some(u=>u==="")){h.delete("index"),c.filter(x=>x).forEach(x=>h.append("index",x));let u=h.toString();d.search=u?`?${u}`:""}}return(!i||i===".")&&s.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:to([r,d.pathname])),Di(d)}function Rs(i,{relative:o}={}){let r=l.exports.useContext(da);We(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ya("useViewTransitionState"),s=Li(i,{relative:o});if(!r.isTransitioning)return!1;let d=io(r.currentLocation.pathname,n)||r.currentLocation.pathname,p=io(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Cr(s.pathname,p)!=null||Cr(s.pathname,d)!=null}/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),As=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,r,n)=>n?n.toUpperCase():r.toLowerCase()),Yn=i=>{const o=As(i);return o.charAt(0).toUpperCase()+o.slice(1)},ba=(...i)=>i.filter((o,r,n)=>Boolean(o)&&o.trim()!==""&&n.indexOf(o)===r).join(" ").trim(),Is=i=>{for(const o in i)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ts={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=l.exports.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:d,iconNode:p,...h},c)=>l.exports.createElement("svg",{ref:c,...Ts,width:o,height:o,stroke:i,strokeWidth:n?Number(r)*24/Number(o):r,className:ba("lucide",s),...!d&&!Is(h)&&{"aria-hidden":"true"},...h},[...p.map(([v,u])=>l.exports.createElement(v,u)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(i,o)=>{const r=l.exports.forwardRef(({className:n,...s},d)=>l.exports.createElement(Es,{ref:d,iconNode:o,className:ba(`lucide-${Fs(Yn(i))}`,`lucide-${i}`,n),...s}));return r.displayName=Yn(i),r};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bs=Z("activity",Ds);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],va=Z("apple",Ws);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],_s=Z("arrow-down",Ms);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cn=Z("arrow-left",Ps);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ns=Z("arrow-up",Ls);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Os=Z("battery",$s);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ei=Z("bell",js);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],fr=Z("bot",Us);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ni=Z("building-2",qs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],kn=Z("calendar",Hs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fo=Z("camera",Vs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Ys=Z("car-front",Gs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],rt=Z("car",Js);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ni=Z("chart-column",Ks);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Zs=Z("chart-pie",Xs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],go=Z("check",Qs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],td=Z("chevron-down",ed);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],id=Z("chevron-up",od);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ro=Z("circle-alert",rd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bt=Z("circle-check-big",nd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Bi=Z("circle-x",ad);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kt=Z("clock",ld);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Bo=Z("credit-card",sd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],cd=Z("database",dd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Nt=Z("dollar-sign",pd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$i=Z("download",ud);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Wr=Z("ellipsis-vertical",hd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fd=Z("external-link",gd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wi=Z("eye-off",xd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$t=Z("eye",md);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],bd=Z("file-image",yd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yt=Z("file-text",vd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],wd=Z("fuel",Sd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Sa=Z("globe",kd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zd=Z("info",Cd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],wa=Z("key",Rd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ad=Z("layout-dashboard",Fd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ti=Z("lock",Id);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ti=Z("mail",Td);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ge=Z("map-pin",Ed);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Bd=Z("menu",Dd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Mr=Z("message-circle",Wd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cn=Z("message-square",Md);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Jn=Z("mic-off",_d);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],pn=Z("mic",Pd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Nd=Z("minimize-2",Ld);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],zr=Z("navigation",$d);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jd=Z("pause",Od);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qd=Z("pen-line",Ud);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Oi=Z("phone",Hd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],vr=Z("plane",Vd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ka=Z("play",Gd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ca=Z("plus",Yd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Kn=Z("power",Jd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zo=Z("refresh-cw",Kd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Zd=Z("rotate-ccw",Xd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],ec=Z("route",Qd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zn=Z("save",tc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ji=Z("search",oc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rn=Z("send",ic);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rr=Z("settings",rc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mo=Z("shield",nc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],za=Z("smartphone",ac);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Fn=Z("square-pen",lc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],oo=Z("star",sc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xn=Z("target",dc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_r=Z("trash-2",cc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Mi=Z("trending-up",pc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yo=Z("triangle-alert",uc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],An=Z("upload",hc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fc=Z("user-check",gc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],mc=Z("user-x",xc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],je=Z("user",yc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],no=Z("users",bc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oi=Z("x",vc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Fr=Z("zap",Sc),Ra="https://ethiocode-ai-pi-rideshare.onrender.com",ie=i=>{const o=i.startsWith("/")?i.slice(1):i;return`${Ra}/${o}`},Fa=()=>Ra,wc=({onLogin:i})=>{const[o,r]=l.exports.useState({email:"demo@rider.com",password:"admin123"}),[n,s]=l.exports.useState(!1),[d,p]=l.exports.useState(!1),[h,c]=l.exports.useState(""),v=async x=>{x.preventDefault(),p(!0),c("");try{const z=await fetch(ie("api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),E=await z.json();z.ok?(localStorage.setItem("token",E.token),localStorage.setItem("authToken",E.token),localStorage.setItem("user",JSON.stringify(E.user)),i(E.token,E.user)):c(E.error||"Login failed")}catch(z){console.error("Login error:",z),c("Network error. Please try again.")}finally{p(!1)}},u=()=>{r({email:"demo@rider.com",password:"admin123"})};return e("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"40px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",width:"100%",maxWidth:"400px"},children:[t("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e("div",{style:{width:"64px",height:"64px",backgroundColor:"#4F46E5",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:e(Ti,{size:32,color:"white"})}),e("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1F2937",margin:"0 0 8px 0"},children:"\u03C0 Admin"}),e("p",{style:{fontSize:"14px",color:"#6B7280",margin:0},children:"Sign in to access the admin dashboard"})]}),h&&e("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #FECACA",color:"#DC2626",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"20px"},children:h}),t("form",{onSubmit:v,children:[t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Email"}),t("div",{style:{position:"relative"},children:[e(je,{size:18,color:"#9CA3AF",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e("input",{type:"email",value:o.email,onChange:x=>r(z=>({...z,email:x.target.value})),required:!0,style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(Ti,{size:18,color:"#9CA3AF",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e("input",{type:n?"text":"password",value:o.password,onChange:x=>r(z=>({...z,password:x.target.value})),required:!0,style:{width:"100%",padding:"12px 44px 12px 44px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>s(!n),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#9CA3AF"},children:n?e(Wi,{size:18}):e($t,{size:18})})]})]}),e("button",{type:"submit",disabled:d,style:{width:"100%",backgroundColor:d?"#9CA3AF":"#4F46E5",color:"white",border:"none",borderRadius:"8px",padding:"12px",fontSize:"14px",fontWeight:"600",cursor:d?"not-allowed":"pointer",transition:"background-color 0.2s",marginBottom:"16px"},children:d?"Signing in...":"Sign In"})]}),t("div",{style:{padding:"16px",backgroundColor:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"Demo Credentials"}),e("p",{style:{fontSize:"12px",color:"#6B7280",margin:"0 0 8px 0"},children:"Use these ADMIN credentials to test the admin panel:"}),t("div",{style:{fontFamily:"monospace",fontSize:"11px",color:"#4B5563",backgroundColor:"white",padding:"8px",borderRadius:"4px",border:"1px solid #D1D5DB"},children:["Email: demo@rider.com",e("br",{}),"Password: admin123"]}),e("button",{type:"button",onClick:u,style:{width:"100%",backgroundColor:"#10B981",color:"white",border:"none",borderRadius:"6px",padding:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px"},children:"Fill Demo Credentials"})]})]})})};function kc(){const i=bo(),[o,r]=l.exports.useState(!1),[n,s]=l.exports.useState(null),[d,p]=l.exports.useState(!0);l.exports.useEffect(()=>{const v=localStorage.getItem("token"),u=localStorage.getItem("user");if(v&&u)try{s(JSON.parse(u)),r(!0)}catch(x){console.error("Error parsing user data:",x),localStorage.removeItem("token"),localStorage.removeItem("user")}p(!1)},[]);const h=(v,u)=>{r(!0),s(u)};return d?e("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#666"},children:"Loading..."}):o?t("div",{className:"layout",children:[t("div",{className:"sidebar",children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #334155"},children:t("div",{children:[e("h2",{style:{fontSize:"48px",fontWeight:"700",color:"white",margin:0,lineHeight:"1"},children:"\u03C0"}),e("p",{style:{fontSize:"12px",color:"#94a3b8",margin:0},children:"Admin Dashboard"})]})}),e("nav",{style:{padding:"20px 0"},children:[{icon:Ad,label:"Dashboard",path:"/dashboard"},{icon:no,label:"Drivers",path:"/dashboard/drivers"},{icon:no,label:"Riders",path:"/dashboard/riders"},{icon:rt,label:"Rides",path:"/dashboard/rides"},{icon:ni,label:"Analytics",path:"/dashboard/analytics"},{icon:Ge,label:"Dispatch",path:"/dashboard/dispatch"},{icon:Ni,label:"Corporations",path:"/dashboard/corporations"},{icon:yt,label:"Corp Applications",path:"/dashboard/corporate-applications"},{icon:fo,label:"Badge Verification",path:"/dashboard/driver-badge-verification"},{icon:Sa,label:"Markets",path:"/dashboard/markets"},{icon:yo,label:"Disputes",path:"/dashboard/disputes"},{icon:Rr,label:"Settings",path:"/dashboard/settings"},{icon:Bo,label:"Payment",path:"/dashboard/payment"},{icon:je,label:"Profile",path:"/dashboard/profile"},{icon:ti,label:"Inbox",path:"/dashboard/inbox"},{icon:Mi,label:"Surge Map",path:"/dashboard/surge-map"},{icon:Rr,label:"Surge Control",path:"/dashboard/surge-control"},{icon:ei,label:"Push Notifications",path:"/dashboard/push-notifications"}].map(v=>{const u=v.icon,x=i.pathname===v.path;return t(Br,{to:v.path,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",color:x?"#3b82f6":"#94a3b8",textDecoration:"none",backgroundColor:x?"rgba(59, 130, 246, 0.1)":"transparent",borderRight:x?"3px solid #3b82f6":"3px solid transparent",fontSize:"14px",fontWeight:x?"600":"500",transition:"all 0.2s ease"},onMouseEnter:z=>{x||(z.currentTarget.style.backgroundColor="rgba(148, 163, 184, 0.1)",z.currentTarget.style.color="#e2e8f0")},onMouseLeave:z=>{x||(z.currentTarget.style.backgroundColor="transparent",z.currentTarget.style.color="#94a3b8")},children:[e(u,{size:18}),v.label]},v.path)})})]}),t("div",{className:"main-content",children:[t("header",{className:"header",children:[e("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:t("div",{children:[e("h1",{style:{fontSize:"20px",fontWeight:"600",color:"#1e293b",margin:0},children:"Welcome back, Admin"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Here's what's happening with your platform today."})]})}),e("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:e("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:"A"})})]}),e("main",{className:"content",children:e(Hl,{})})]}),e("style",{children:`
          .layout {
            display: flex;
            min-height: 100vh;
            background-color: #f8fafc;
          }

          .sidebar {
            width: 280px;
            background-color: #1e293b;
            border-right: 1px solid #334155;
            transition: width 0.3s ease;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 30;
            display: flex;
            flex-direction: column;
          }

          .main-content {
            flex: 1;
            margin-left: 280px;
          }

          .header {
            background-color: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
          }

          .content {
            padding: 32px;
          }

          .mobile-menu-btn {
            display: none;
          }

          @media (max-width: 768px) {
            .sidebar {
              width: 260px;
              transform: translateX(0);
              position: fixed;
              top: 0;
              left: 0;
              z-index: 40;
            }

            .main-content {
              margin-left: 260px;
            }
          }
        `})]}):e(wc,{onLogin:h})}const Ar=({url:i,size:o=200})=>{const[r,n]=l.exports.useState("");l.exports.useEffect(()=>{const d=`https://api.qrserver.com/v1/create-qr-code/?size=${o}x${o}&data=${encodeURIComponent(i)}`;n(d)},[i,o]);const s=()=>{navigator.clipboard.writeText(i),alert("URL copied to clipboard!")};return t("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"2px solid #e2e8f0",maxWidth:"300px",margin:"0 auto"},children:[r&&e("img",{src:r,alt:"QR Code for Rider App",style:{width:`${o}px`,height:`${o}px`,border:"4px solid white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[e("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"8px",textAlign:"center"},children:"Scan to access Rider App:"}),e("p",{style:{fontSize:"14px",fontWeight:"500",color:"#334155",textAlign:"center",wordBreak:"break-all"},children:i}),e("button",{onClick:s,style:{width:"100%",marginTop:"8px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u{1F4CB} Copy URL"})]}),e("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"#dbeafe",borderRadius:"6px",border:"1px solid #93c5fd"},children:e("p",{style:{fontSize:"11px",color:"#1e40af",textAlign:"center",margin:0},children:"\u{1F4A1} Open this URL on mobile for the best experience"})})]})};let st=[{id:"bentonville",name:"Bentonville Metro",city:"Bentonville",state:"Arkansas",country:"USA",center:{lat:36.3729,lng:-94.2088},radius:25,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-01-15",totalDrivers:234,totalRiders:1847,monthlyRides:12450,monthlyRevenue:287650,config:{baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:2.5,airportFee:3.5,cancellationFee:5}},{id:"fayetteville",name:"Fayetteville",city:"Fayetteville",state:"Arkansas",country:"USA",center:{lat:36.0625,lng:-94.1574},radius:20,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-03-20",totalDrivers:156,totalRiders:1203,monthlyRides:8765,monthlyRevenue:198450,config:{baseFare:2.25,perMileFare:1.15,perMinuteFare:.3,maxSurgeMultiplier:2,airportFee:2.5,cancellationFee:4}},{id:"springdale",name:"Springdale",city:"Springdale",state:"Arkansas",country:"USA",center:{lat:36.1867,lng:-94.1288},radius:12,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-05-10",totalDrivers:89,totalRiders:756,monthlyRides:5432,monthlyRevenue:123850,config:{baseFare:2.25,perMileFare:1.15,perMinuteFare:.3,maxSurgeMultiplier:2,airportFee:2.5,cancellationFee:4}},{id:"rogers",name:"Rogers",city:"Rogers",state:"Arkansas",country:"USA",center:{lat:36.332,lng:-94.1185},radius:18,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-06-15",totalDrivers:112,totalRiders:923,monthlyRides:6789,monthlyRevenue:154320,config:{baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:2.5,airportFee:3.5,cancellationFee:5}},{id:"tulsa",name:"Tulsa Metro",city:"Tulsa",state:"Oklahoma",country:"USA",center:{lat:36.1539,lng:-95.9928},radius:25,zoom:12,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-02-01",totalDrivers:45,totalRiders:234,monthlyRides:1250,monthlyRevenue:28450,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"little-rock",name:"Little Rock",city:"Little Rock",state:"Arkansas",country:"USA",center:{lat:34.7465,lng:-92.2896},radius:30,zoom:12,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-08-20",totalDrivers:198,totalRiders:1456,monthlyRides:9876,monthlyRevenue:234560,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"oklahoma-city",name:"Oklahoma City",city:"Oklahoma City",state:"Oklahoma",country:"USA",center:{lat:35.4676,lng:-97.5164},radius:35,zoom:12,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-03-15",totalDrivers:67,totalRiders:389,monthlyRides:2134,monthlyRevenue:48760,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"kansas-city",name:"Kansas City Metro",city:"Kansas City",state:"Missouri",country:"USA",center:{lat:39.0997,lng:-94.5786},radius:40,zoom:11,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-04-01",totalDrivers:78,totalRiders:456,monthlyRides:2567,monthlyRevenue:58930,config:{baseFare:3,perMileFare:1.5,perMinuteFare:.45,maxSurgeMultiplier:3.5,airportFee:4.5,cancellationFee:6}},{id:"dallas",name:"Dallas-Fort Worth Metro",city:"Dallas",state:"Texas",country:"USA",center:{lat:32.7767,lng:-96.797},radius:50,zoom:10,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-05-01",totalDrivers:156,totalRiders:892,monthlyRides:4567,monthlyRevenue:98760,config:{baseFare:3.25,perMileFare:1.65,perMinuteFare:.5,maxSurgeMultiplier:4,airportFee:5,cancellationFee:6.5}},{id:"washington-dc",name:"Metropolitan Washington D.C.",city:"Washington",state:"District of Columbia",country:"USA",center:{lat:38.9072,lng:-77.0369},radius:45,zoom:10,timezone:"America/New_York",currency:"USD",status:"pending",launchedAt:"2024-06-01",totalDrivers:189,totalRiders:1234,monthlyRides:6789,monthlyRevenue:145670,config:{baseFare:3.5,perMileFare:1.85,perMinuteFare:.55,maxSurgeMultiplier:4.5,airportFee:5.5,cancellationFee:7}}];const Ir={getAllMarkets:()=>[...st],getActiveMarkets:()=>st.filter(i=>i.status==="active"),getMarketById:i=>st.find(o=>o.id===i),addMarket:i=>{st.push(i)},updateMarket:(i,o)=>{const r=st.findIndex(n=>n.id===i);return r!==-1?(st[r]={...st[r],...o},!0):!1},deleteMarket:i=>{const o=st.findIndex(r=>r.id===i);return o!==-1?(st.splice(o,1),!0):!1},getMarketStats:()=>({totalMarkets:st.length,activeMarkets:st.filter(i=>i.status==="active").length,pendingMarkets:st.filter(i=>i.status==="pending").length,totalUsers:st.reduce((i,o)=>i+o.totalDrivers+o.totalRiders,0),totalRevenue:st.reduce((i,o)=>i+o.monthlyRevenue,0),totalRides:st.reduce((i,o)=>i+o.monthlyRides,0)})};function Cc({error:i}){return t("div",{style:{padding:"24px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",margin:"16px",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("h3",{style:{color:"#dc2626",marginBottom:"8px"},children:"Google Maps Configuration Error"}),e("p",{style:{color:"#7f1d1d",marginBottom:"16px"},children:i}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"6px",textAlign:"left",fontSize:"14px",lineHeight:"1.5"},children:[e("h4",{style:{marginBottom:"8px",color:"#1f2937"},children:"To fix this issue:"}),t("ol",{style:{margin:0,paddingLeft:"20px"},children:[t("li",{children:["Get a Google Maps API key from ",e("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6"},children:"Google Cloud Console"})]}),e("li",{children:"Enable these APIs: Maps JavaScript API, Places API, Geocoding API"}),e("li",{children:"Add your API key to Replit Secrets as 'GMaps_Key'"}),e("li",{children:"Configure domain restrictions (add your Replit domain)"}),e("li",{children:"Restart your application"})]})]})]})}const Ot=Object.create(null);Ot.open="0";Ot.close="1";Ot.ping="2";Ot.pong="3";Ot.message="4";Ot.upgrade="5";Ot.noop="6";const Sr=Object.create(null);Object.keys(Ot).forEach(i=>{Sr[Ot[i]]=i});const un={type:"error",data:"parser error"},Aa=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ia=typeof ArrayBuffer=="function",Ta=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,In=({type:i,data:o},r,n)=>Aa&&o instanceof Blob?r?n(o):Zn(o,n):Ia&&(o instanceof ArrayBuffer||Ta(o))?r?n(o):Zn(new Blob([o]),n):n(Ot[i]+(o||"")),Zn=(i,o)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];o("b"+(n||""))},r.readAsDataURL(i)};function Qn(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let nn;function zc(i,o){if(Aa&&i.data instanceof Blob)return i.data.arrayBuffer().then(Qn).then(o);if(Ia&&(i.data instanceof ArrayBuffer||Ta(i.data)))return o(Qn(i.data));In(i,!1,r=>{nn||(nn=new TextEncoder),o(nn.encode(r))})}const ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ii=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<ea.length;i++)Ii[ea.charCodeAt(i)]=i;const Rc=i=>{let o=i.length*.75,r=i.length,n,s=0,d,p,h,c;i[i.length-1]==="="&&(o--,i[i.length-2]==="="&&o--);const v=new ArrayBuffer(o),u=new Uint8Array(v);for(n=0;n<r;n+=4)d=Ii[i.charCodeAt(n)],p=Ii[i.charCodeAt(n+1)],h=Ii[i.charCodeAt(n+2)],c=Ii[i.charCodeAt(n+3)],u[s++]=d<<2|p>>4,u[s++]=(p&15)<<4|h>>2,u[s++]=(h&3)<<6|c&63;return v},Fc=typeof ArrayBuffer=="function",Tn=(i,o)=>{if(typeof i!="string")return{type:"message",data:Ea(i,o)};const r=i.charAt(0);return r==="b"?{type:"message",data:Ac(i.substring(1),o)}:Sr[r]?i.length>1?{type:Sr[r],data:i.substring(1)}:{type:Sr[r]}:un},Ac=(i,o)=>{if(Fc){const r=Rc(i);return Ea(r,o)}else return{base64:!0,data:i}},Ea=(i,o)=>{switch(o){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}},Da=String.fromCharCode(30),Ic=(i,o)=>{const r=i.length,n=new Array(r);let s=0;i.forEach((d,p)=>{In(d,!1,h=>{n[p]=h,++s===r&&o(n.join(Da))})})},Tc=(i,o)=>{const r=i.split(Da),n=[];for(let s=0;s<r.length;s++){const d=Tn(r[s],o);if(n.push(d),d.type==="error")break}return n};function Ec(){return new TransformStream({transform(i,o){zc(i,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const d=new DataView(s.buffer);d.setUint8(0,126),d.setUint16(1,n)}else{s=new Uint8Array(9);const d=new DataView(s.buffer);d.setUint8(0,127),d.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(s[0]|=128),o.enqueue(s),o.enqueue(r)})}})}let an;function xr(i){return i.reduce((o,r)=>o+r.length,0)}function mr(i,o){if(i[0].length===o)return i.shift();const r=new Uint8Array(o);let n=0;for(let s=0;s<o;s++)r[s]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),r}function Dc(i,o){an||(an=new TextDecoder);const r=[];let n=0,s=-1,d=!1;return new TransformStream({transform(p,h){for(r.push(p);;){if(n===0){if(xr(r)<1)break;const c=mr(r,1);d=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(xr(r)<2)break;const c=mr(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(xr(r)<8)break;const c=mr(r,8),v=new DataView(c.buffer,c.byteOffset,c.length),u=v.getUint32(0);if(u>Math.pow(2,53-32)-1){h.enqueue(un);break}s=u*Math.pow(2,32)+v.getUint32(4),n=3}else{if(xr(r)<s)break;const c=mr(r,s);h.enqueue(Tn(d?c:an.decode(c),o)),n=0}if(s===0||s>i){h.enqueue(un);break}}}})}const Ba=4;function Oe(i){if(i)return Bc(i)}function Bc(i){for(var o in Oe.prototype)i[o]=Oe.prototype[o];return i}Oe.prototype.on=Oe.prototype.addEventListener=function(i,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(o),this};Oe.prototype.once=function(i,o){function r(){this.off(i,r),o.apply(this,arguments)}return r.fn=o,this.on(i,r),this};Oe.prototype.off=Oe.prototype.removeListener=Oe.prototype.removeAllListeners=Oe.prototype.removeEventListener=function(i,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+i];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===o||n.fn===o){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+i],this};Oe.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),r=this._callbacks["$"+i],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,o)}return this};Oe.prototype.emitReserved=Oe.prototype.emit;Oe.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};Oe.prototype.hasListeners=function(i){return!!this.listeners(i).length};const Pr=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?o=>Promise.resolve().then(o):(o,r)=>r(o,0))(),wt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),Wc="arraybuffer";function Wa(i,...o){return o.reduce((r,n)=>(i.hasOwnProperty(n)&&(r[n]=i[n]),r),{})}const Mc=wt.setTimeout,_c=wt.clearTimeout;function Lr(i,o){o.useNativeTimers?(i.setTimeoutFn=Mc.bind(wt),i.clearTimeoutFn=_c.bind(wt)):(i.setTimeoutFn=wt.setTimeout.bind(wt),i.clearTimeoutFn=wt.clearTimeout.bind(wt))}const Pc=1.33;function Lc(i){return typeof i=="string"?Nc(i):Math.ceil((i.byteLength||i.size)*Pc)}function Nc(i){let o=0,r=0;for(let n=0,s=i.length;n<s;n++)o=i.charCodeAt(n),o<128?r+=1:o<2048?r+=2:o<55296||o>=57344?r+=3:(n++,r+=4);return r}function Ma(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $c(i){let o="";for(let r in i)i.hasOwnProperty(r)&&(o.length&&(o+="&"),o+=encodeURIComponent(r)+"="+encodeURIComponent(i[r]));return o}function Oc(i){let o={},r=i.split("&");for(let n=0,s=r.length;n<s;n++){let d=r[n].split("=");o[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return o}class jc extends Error{constructor(o,r,n){super(o),this.description=r,this.context=n,this.type="TransportError"}}class En extends Oe{constructor(o){super(),this.writable=!1,Lr(this,o),this.opts=o,this.query=o.query,this.socket=o.socket,this.supportsBinary=!o.forceBase64}onError(o,r,n){return super.emitReserved("error",new jc(o,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(o){this.readyState==="open"&&this.write(o)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(o){const r=Tn(o,this.socket.binaryType);this.onPacket(r)}onPacket(o){super.emitReserved("packet",o)}onClose(o){this.readyState="closed",super.emitReserved("close",o)}pause(o){}createUri(o,r={}){return o+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const o=this.opts.hostname;return o.indexOf(":")===-1?o:"["+o+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(o){const r=$c(o);return r.length?"?"+r:""}}class Uc extends En{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(o){this.readyState="pausing";const r=()=>{this.readyState="paused",o()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(o){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Tc(o,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const o=()=>{this.write([{type:"close"}])};this.readyState==="open"?o():this.once("open",o)}write(o){this.writable=!1,Ic(o,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const o=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ma()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(o,r)}}let _a=!1;try{_a=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qc=_a;function Hc(){}class Vc extends Uc{constructor(o){if(super(o),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&o.hostname!==location.hostname||n!==o.port}}doWrite(o,r){const n=this.request({method:"POST",data:o});n.on("success",r),n.on("error",(s,d)=>{this.onError("xhr post error",s,d)})}doPoll(){const o=this.request();o.on("data",this.onData.bind(this)),o.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=o}}class Pt extends Oe{constructor(o,r,n){super(),this.createRequest=o,Lr(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var o;const r=Wa(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(o=this._opts.cookieJar)===null||o===void 0||o.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Pt.requestsCount++,Pt.requests[this._index]=this)}_onError(o){this.emitReserved("error",o,this._xhr),this._cleanup(!0)}_cleanup(o){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Hc,o)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pt.requests[this._index],this._xhr=null}}_onLoad(){const o=this._xhr.responseText;o!==null&&(this.emitReserved("data",o),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pt.requestsCount=0;Pt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ta);else if(typeof addEventListener=="function"){const i="onpagehide"in wt?"pagehide":"unload";addEventListener(i,ta,!1)}}function ta(){for(let i in Pt.requests)Pt.requests.hasOwnProperty(i)&&Pt.requests[i].abort()}const Gc=function(){const i=Pa({xdomain:!1});return i&&i.responseType!==null}();class Yc extends Vc{constructor(o){super(o);const r=o&&o.forceBase64;this.supportsBinary=Gc&&!r}request(o={}){return Object.assign(o,{xd:this.xd},this.opts),new Pt(Pa,this.uri(),o)}}function Pa(i){const o=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!o||qc))return new XMLHttpRequest}catch{}if(!o)try{return new wt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const La=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Jc extends En{get name(){return"websocket"}doOpen(){const o=this.uri(),r=this.opts.protocols,n=La?{}:Wa(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(o,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=o=>this.onClose({description:"websocket connection closed",context:o}),this.ws.onmessage=o=>this.onData(o.data),this.ws.onerror=o=>this.onError("websocket error",o)}write(o){this.writable=!1;for(let r=0;r<o.length;r++){const n=o[r],s=r===o.length-1;In(n,this.supportsBinary,d=>{try{this.doWrite(n,d)}catch{}s&&Pr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const o=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ma()),this.supportsBinary||(r.b64=1),this.createUri(o,r)}}const ln=wt.WebSocket||wt.MozWebSocket;class Kc extends Jc{createSocket(o,r,n){return La?new ln(o,r,n):r?new ln(o,r):new ln(o)}doWrite(o,r){this.ws.send(r)}}class Xc extends En{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(o){return this.emitReserved("error",o)}this._transport.closed.then(()=>{this.onClose()}).catch(o=>{this.onError("webtransport error",o)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(o=>{const r=Dc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=o.readable.pipeThrough(r).getReader(),s=Ec();s.readable.pipeTo(o.writable),this._writer=s.writable.getWriter();const d=()=>{n.read().then(({done:h,value:c})=>{h||(this.onPacket(c),d())}).catch(h=>{})};d();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this._writer.write(p).then(()=>this.onOpen())})})}write(o){this.writable=!1;for(let r=0;r<o.length;r++){const n=o[r],s=r===o.length-1;this._writer.write(n).then(()=>{s&&Pr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var o;(o=this._transport)===null||o===void 0||o.close()}}const Zc={websocket:Kc,webtransport:Xc,polling:Yc},Qc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ep=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hn(i){if(i.length>8e3)throw"URI too long";const o=i,r=i.indexOf("["),n=i.indexOf("]");r!=-1&&n!=-1&&(i=i.substring(0,r)+i.substring(r,n).replace(/:/g,";")+i.substring(n,i.length));let s=Qc.exec(i||""),d={},p=14;for(;p--;)d[ep[p]]=s[p]||"";return r!=-1&&n!=-1&&(d.source=o,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=tp(d,d.path),d.queryKey=op(d,d.query),d}function tp(i,o){const r=/\/{2,9}/g,n=o.replace(r,"/").split("/");return(o.slice(0,1)=="/"||o.length===0)&&n.splice(0,1),o.slice(-1)=="/"&&n.splice(n.length-1,1),n}function op(i,o){const r={};return o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,d){s&&(r[s]=d)}),r}const gn=typeof addEventListener=="function"&&typeof removeEventListener=="function",wr=[];gn&&addEventListener("offline",()=>{wr.forEach(i=>i())},!1);class xo extends Oe{constructor(o,r){if(super(),this.binaryType=Wc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,o&&typeof o=="object"&&(r=o,o=null),o){const n=hn(o);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=hn(r.host).host);Lr(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Oc(this.opts.query)),gn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(o){const r=Object.assign({},this.opts.query);r.EIO=Ba,r.transport=o,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[o]);return new this._transportsByName[o](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const o=this.opts.rememberUpgrade&&xo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(o);r.open(),this.setTransport(r)}setTransport(o){this.transport&&this.transport.removeAllListeners(),this.transport=o,o.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",xo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",o),this.emitReserved("heartbeat"),o.type){case"open":this.onHandshake(JSON.parse(o.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=o.data,this._onError(r);break;case"message":this.emitReserved("data",o.data),this.emitReserved("message",o.data);break}}onHandshake(o){this.emitReserved("handshake",o),this.id=o.sid,this.transport.query.sid=o.sid,this._pingInterval=o.pingInterval,this._pingTimeout=o.pingTimeout,this._maxPayload=o.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const o=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+o,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},o),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const o=this._getWritablePackets();this.transport.send(o),this._prevBufferLen=o.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=Lc(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const o=Date.now()>this._pingTimeoutTime;return o&&(this._pingTimeoutTime=0,Pr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),o}write(o,r,n){return this._sendPacket("message",o,r,n),this}send(o,r,n){return this._sendPacket("message",o,r,n),this}_sendPacket(o,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const d={type:o,data:r,options:n};this.emitReserved("packetCreate",d),this.writeBuffer.push(d),s&&this.once("flush",s),this.flush()}close(){const o=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),o()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():o()}):this.upgrading?n():o()),this}_onError(o){if(xo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",o),this._onClose("transport error",o)}_onClose(o,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=wr.indexOf(this._offlineEventListener);n!==-1&&wr.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",o,r),this.writeBuffer=[],this._prevBufferLen=0}}}xo.protocol=Ba;class ip extends xo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let o=0;o<this._upgrades.length;o++)this._probe(this._upgrades[o])}_probe(o){let r=this.createTransport(o),n=!1;xo.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",x=>{if(!n)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;xo.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const z=new Error("probe error");z.transport=r.name,this.emitReserved("upgradeError",z)}}))};function d(){n||(n=!0,u(),r.close(),r=null)}const p=x=>{const z=new Error("probe error: "+x);z.transport=r.name,d(),this.emitReserved("upgradeError",z)};function h(){p("transport closed")}function c(){p("socket closed")}function v(x){r&&x.name!==r.name&&d()}const u=()=>{r.removeListener("open",s),r.removeListener("error",p),r.removeListener("close",h),this.off("close",c),this.off("upgrading",v)};r.once("open",s),r.once("error",p),r.once("close",h),this.once("close",c),this.once("upgrading",v),this._upgrades.indexOf("webtransport")!==-1&&o!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(o){this._upgrades=this._filterUpgrades(o.upgrades),super.onHandshake(o)}_filterUpgrades(o){const r=[];for(let n=0;n<o.length;n++)~this.transports.indexOf(o[n])&&r.push(o[n]);return r}}class rp extends ip{constructor(o,r={}){const n=typeof o=="object"?o:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Zc[s]).filter(s=>!!s)),super(o,n)}}function np(i,o="",r){let n=i;r=r||typeof location<"u"&&location,i==null&&(i=r.protocol+"//"+r.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=r.protocol+i:i=r.host+i),/^(https?|wss?):\/\//.test(i)||(typeof r<"u"?i=r.protocol+"//"+i:i="https://"+i),n=hn(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const d=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+d+":"+n.port+o,n.href=n.protocol+"://"+d+(r&&r.port===n.port?"":":"+n.port),n}const ap=typeof ArrayBuffer=="function",lp=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Na=Object.prototype.toString,sp=typeof Blob=="function"||typeof Blob<"u"&&Na.call(Blob)==="[object BlobConstructor]",dp=typeof File=="function"||typeof File<"u"&&Na.call(File)==="[object FileConstructor]";function Dn(i){return ap&&(i instanceof ArrayBuffer||lp(i))||sp&&i instanceof Blob||dp&&i instanceof File}function kr(i,o){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let r=0,n=i.length;r<n;r++)if(kr(i[r]))return!0;return!1}if(Dn(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return kr(i.toJSON(),!0);for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&kr(i[r]))return!0;return!1}function cp(i){const o=[],r=i.data,n=i;return n.data=fn(r,o),n.attachments=o.length,{packet:n,buffers:o}}function fn(i,o){if(!i)return i;if(Dn(i)){const r={_placeholder:!0,num:o.length};return o.push(i),r}else if(Array.isArray(i)){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=fn(i[n],o);return r}else if(typeof i=="object"&&!(i instanceof Date)){const r={};for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=fn(i[n],o));return r}return i}function pp(i,o){return i.data=xn(i.data,o),delete i.attachments,i}function xn(i,o){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<o.length)return o[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let r=0;r<i.length;r++)i[r]=xn(i[r],o);else if(typeof i=="object")for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(i[r]=xn(i[r],o));return i}const up=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hp=5;var Se;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(Se||(Se={}));class gp{constructor(o){this.replacer=o}encode(o){return(o.type===Se.EVENT||o.type===Se.ACK)&&kr(o)?this.encodeAsBinary({type:o.type===Se.EVENT?Se.BINARY_EVENT:Se.BINARY_ACK,nsp:o.nsp,data:o.data,id:o.id}):[this.encodeAsString(o)]}encodeAsString(o){let r=""+o.type;return(o.type===Se.BINARY_EVENT||o.type===Se.BINARY_ACK)&&(r+=o.attachments+"-"),o.nsp&&o.nsp!=="/"&&(r+=o.nsp+","),o.id!=null&&(r+=o.id),o.data!=null&&(r+=JSON.stringify(o.data,this.replacer)),r}encodeAsBinary(o){const r=cp(o),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function oa(i){return Object.prototype.toString.call(i)==="[object Object]"}class Bn extends Oe{constructor(o){super(),this.reviver=o}add(o){let r;if(typeof o=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(o);const n=r.type===Se.BINARY_EVENT;n||r.type===Se.BINARY_ACK?(r.type=n?Se.EVENT:Se.ACK,this.reconstructor=new fp(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Dn(o)||o.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(o),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+o)}decodeString(o){let r=0;const n={type:Number(o.charAt(0))};if(Se[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Se.BINARY_EVENT||n.type===Se.BINARY_ACK){const d=r+1;for(;o.charAt(++r)!=="-"&&r!=o.length;);const p=o.substring(d,r);if(p!=Number(p)||o.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(p)}if(o.charAt(r+1)==="/"){const d=r+1;for(;++r&&!(o.charAt(r)===","||r===o.length););n.nsp=o.substring(d,r)}else n.nsp="/";const s=o.charAt(r+1);if(s!==""&&Number(s)==s){const d=r+1;for(;++r;){const p=o.charAt(r);if(p==null||Number(p)!=p){--r;break}if(r===o.length)break}n.id=Number(o.substring(d,r+1))}if(o.charAt(++r)){const d=this.tryParse(o.substr(r));if(Bn.isPayloadValid(n.type,d))n.data=d;else throw new Error("invalid payload")}return n}tryParse(o){try{return JSON.parse(o,this.reviver)}catch{return!1}}static isPayloadValid(o,r){switch(o){case Se.CONNECT:return oa(r);case Se.DISCONNECT:return r===void 0;case Se.CONNECT_ERROR:return typeof r=="string"||oa(r);case Se.EVENT:case Se.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&up.indexOf(r[0])===-1);case Se.ACK:case Se.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fp{constructor(o){this.packet=o,this.buffers=[],this.reconPack=o}takeBinaryData(o){if(this.buffers.push(o),this.buffers.length===this.reconPack.attachments){const r=pp(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const xp=Object.freeze(Object.defineProperty({__proto__:null,protocol:hp,get PacketType(){return Se},Encoder:gp,Decoder:Bn},Symbol.toStringTag,{value:"Module"}));function It(i,o,r){return i.on(o,r),function(){i.off(o,r)}}const mp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $a extends Oe{constructor(o,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=o,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const o=this.io;this.subs=[It(o,"open",this.onopen.bind(this)),It(o,"packet",this.onpacket.bind(this)),It(o,"error",this.onerror.bind(this)),It(o,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...o){return o.unshift("message"),this.emit.apply(this,o),this}emit(o,...r){var n,s,d;if(mp.hasOwnProperty(o))throw new Error('"'+o.toString()+'" is a reserved event name');if(r.unshift(o),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const p={type:Se.EVENT,data:r};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,x=r.pop();this._registerAckCallback(u,x),p.id=u}const h=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((d=this.io.engine)===null||d===void 0)&&d._hasPingExpired());return this.flags.volatile&&!h||(c?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p)),this.flags={},this}_registerAckCallback(o,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[o]=r;return}const d=this.io.setTimeoutFn(()=>{delete this.acks[o];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===o&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},s),p=(...h)=>{this.io.clearTimeoutFn(d),r.apply(this,h)};p.withError=!0,this.acks[o]=p}emitWithAck(o,...r){return new Promise((n,s)=>{const d=(p,h)=>p?s(p):n(h);d.withError=!0,r.push(d),this.emit(o,...r)})}_addToQueue(o){let r;typeof o[o.length-1]=="function"&&(r=o.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:o,flags:Object.assign({fromQueue:!0},this.flags)};o.push((s,...d)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...d)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(o=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!o||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(o){o.nsp=this.nsp,this.io._packet(o)}onopen(){typeof this.auth=="function"?this.auth(o=>{this._sendConnectPacket(o)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(o){this.packet({type:Se.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},o):o})}onerror(o){this.connected||this.emitReserved("connect_error",o)}onclose(o,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",o,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(o=>{if(!this.sendBuffer.some(n=>String(n.id)===o)){const n=this.acks[o];delete this.acks[o],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(o){if(o.nsp===this.nsp)switch(o.type){case Se.CONNECT:o.data&&o.data.sid?this.onconnect(o.data.sid,o.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Se.EVENT:case Se.BINARY_EVENT:this.onevent(o);break;case Se.ACK:case Se.BINARY_ACK:this.onack(o);break;case Se.DISCONNECT:this.ondisconnect();break;case Se.CONNECT_ERROR:this.destroy();const n=new Error(o.data.message);n.data=o.data.data,this.emitReserved("connect_error",n);break}}onevent(o){const r=o.data||[];o.id!=null&&r.push(this.ack(o.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(o){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,o)}super.emit.apply(this,o),this._pid&&o.length&&typeof o[o.length-1]=="string"&&(this._lastOffset=o[o.length-1])}ack(o){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:Se.ACK,id:o,data:s}))}}onack(o){const r=this.acks[o.id];typeof r=="function"&&(delete this.acks[o.id],r.withError&&o.data.unshift(null),r.apply(this,o.data))}onconnect(o,r){this.id=o,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(o=>this.emitEvent(o)),this.receiveBuffer=[],this.sendBuffer.forEach(o=>{this.notifyOutgoingListeners(o),this.packet(o)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(o=>o()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Se.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(o){return this.flags.compress=o,this}get volatile(){return this.flags.volatile=!0,this}timeout(o){return this.flags.timeout=o,this}onAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(o),this}prependAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(o),this}offAny(o){if(!this._anyListeners)return this;if(o){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(o===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(o),this}prependAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(o),this}offAnyOutgoing(o){if(!this._anyOutgoingListeners)return this;if(o){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(o===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(o){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,o.data)}}}function ai(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}ai.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),r=Math.floor(o*this.jitter*i);i=(Math.floor(o*10)&1)==0?i-r:i+r}return Math.min(i,this.max)|0};ai.prototype.reset=function(){this.attempts=0};ai.prototype.setMin=function(i){this.ms=i};ai.prototype.setMax=function(i){this.max=i};ai.prototype.setJitter=function(i){this.jitter=i};class mn extends Oe{constructor(o,r){var n;super(),this.nsps={},this.subs=[],o&&typeof o=="object"&&(r=o,o=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Lr(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ai({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=o;const s=r.parser||xp;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(o){return arguments.length?(this._reconnection=!!o,o||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(o){return o===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=o,this)}reconnectionDelay(o){var r;return o===void 0?this._reconnectionDelay:(this._reconnectionDelay=o,(r=this.backoff)===null||r===void 0||r.setMin(o),this)}randomizationFactor(o){var r;return o===void 0?this._randomizationFactor:(this._randomizationFactor=o,(r=this.backoff)===null||r===void 0||r.setJitter(o),this)}reconnectionDelayMax(o){var r;return o===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=o,(r=this.backoff)===null||r===void 0||r.setMax(o),this)}timeout(o){return arguments.length?(this._timeout=o,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(o){if(~this._readyState.indexOf("open"))return this;this.engine=new rp(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=It(r,"open",function(){n.onopen(),o&&o()}),d=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),o?o(h):this.maybeReconnectOnOpen()},p=It(r,"error",d);if(this._timeout!==!1){const h=this._timeout,c=this.setTimeoutFn(()=>{s(),d(new Error("timeout")),r.close()},h);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(p),this}connect(o){return this.open(o)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const o=this.engine;this.subs.push(It(o,"ping",this.onping.bind(this)),It(o,"data",this.ondata.bind(this)),It(o,"error",this.onerror.bind(this)),It(o,"close",this.onclose.bind(this)),It(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(o){try{this.decoder.add(o)}catch(r){this.onclose("parse error",r)}}ondecoded(o){Pr(()=>{this.emitReserved("packet",o)},this.setTimeoutFn)}onerror(o){this.emitReserved("error",o)}socket(o,r){let n=this.nsps[o];return n?this._autoConnect&&!n.active&&n.connect():(n=new $a(this,o,r),this.nsps[o]=n),n}_destroy(o){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(o){const r=this.encoder.encode(o);for(let n=0;n<r.length;n++)this.engine.write(r[n],o.options)}cleanup(){this.subs.forEach(o=>o()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(o,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",o,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const o=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{o.skipReconnect||(this.emitReserved("reconnect_attempt",o.backoff.attempts),!o.skipReconnect&&o.open(s=>{s?(o._reconnecting=!1,o.reconnect(),this.emitReserved("reconnect_error",s)):o.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const o=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",o)}}const Ai={};function Ei(i,o){typeof i=="object"&&(o=i,i=void 0),o=o||{};const r=np(i,o.path||"/socket.io"),n=r.source,s=r.id,d=r.path,p=Ai[s]&&d in Ai[s].nsps,h=o.forceNew||o["force new connection"]||o.multiplex===!1||p;let c;return h?c=new mn(n,o):(Ai[s]||(Ai[s]=new mn(n,o)),c=Ai[s]),r.query&&!o.query&&(o.query=r.queryKey),c.socket(r.path,o)}Object.assign(Ei,{Manager:mn,Socket:$a,io:Ei,connect:Ei});const yp="/assets/Pi_Car1.0c2ef191.png",Oa=({map:i,gridCells:o,onCellClick:r})=>{const n=l.exports.useRef(null),s=l.exports.useRef([]),d=()=>{n.current&&(n.current.setMap(null),n.current=null),s.current.forEach(p=>p.setMap(null)),s.current=[]};return l.exports.useEffect(()=>{if(!i||!window.google||(d(),!o||o.length===0))return;const p=o.filter(W=>W.zoneType==="airport"),h=o.filter(W=>W.zoneType!=="airport"),c=[],v=[...h].filter(W=>W.multiplier>=1.25).sort((W,Y)=>Y.multiplier-W.multiplier);for(const W of v)c.some(B=>Math.sqrt(Math.pow(B.center.lat-W.center.lat,2)+Math.pow(B.center.lng-W.center.lng,2))<.008)||c.push({center:W.center,surgeAmount:W.surgeAmount,multiplier:W.multiplier});const u=[...new Set(p.map(W=>W.code.split("-")[0]))];for(const W of u){const Y=p.filter(I=>I.code.startsWith(W+"-")&&I.multiplier>=1.25);if(Y.length===0)continue;const B=[...Y].sort((I,ee)=>ee.multiplier-I.multiplier),V=B[0];c.push({center:V.center,surgeAmount:V.surgeAmount,multiplier:V.multiplier});const re=[];for(const I of B){if(re.length>=2)break;const ee=Math.sqrt(Math.pow(I.center.lat-V.center.lat,2)+Math.pow(I.center.lng-V.center.lng,2));ee>=.018&&ee<=.028&&(re.some(ne=>Math.sqrt(Math.pow(ne.center.lat-I.center.lat,2)+Math.pow(ne.center.lng-I.center.lng,2))<.015)||re.push({center:I.center,surgeAmount:I.surgeAmount,multiplier:I.multiplier}))}c.push(...re)}const x=o.filter(W=>W.multiplier>=1.25);if(x.length===0)return;const z=x.map(W=>W.center.lat),E=x.map(W=>W.center.lng),F=.02,b=Math.min(...z)-F,S=Math.max(...z)+F,m=Math.min(...E)-F,y=Math.max(...E)+F,f=document.createElement("canvas"),w=1200,L=1200;f.width=w,f.height=L;const A=f.getContext("2d");if(!A)return;A.clearRect(0,0,w,L);for(const W of x){const Y=(W.center.lng-m)/(y-m)*w,B=(S-W.center.lat)/(S-b)*L,V=Math.min(1,(W.multiplier-1)/1.5),re=80+V*40,I=A.createRadialGradient(Y,B,0,Y,B,re),ee=.18+V*.25;I.addColorStop(0,`rgba(88, 28, 135, ${ee})`),I.addColorStop(.4,`rgba(124, 58, 237, ${ee*.8})`),I.addColorStop(.7,`rgba(139, 92, 246, ${ee*.5})`),I.addColorStop(1,"rgba(167, 139, 250, 0)"),A.fillStyle=I,A.beginPath(),A.arc(Y,B,re,0,Math.PI*2),A.fill()}const H=new google.maps.LatLngBounds(new google.maps.LatLng(b,m),new google.maps.LatLng(S,y));n.current=new google.maps.GroundOverlay(f.toDataURL(),H,{opacity:.75}),n.current.setMap(i);for(const W of c){const Y=(W.multiplier>=2.5||W.multiplier>=2,"9px"),B=new google.maps.Marker({position:W.center,map:i,icon:{path:google.maps.SymbolPath.CIRCLE,scale:0},label:{text:`+$${W.surgeAmount}`,color:"white",fontSize:Y,fontWeight:"bold"},zIndex:Math.floor(W.multiplier*100)});s.current.push(B)}return()=>d()},[i,o]),l.exports.useEffect(()=>()=>d(),[]),null},bp=Oa,vp=()=>{const i=l.exports.useRef(null),[o,r]=l.exports.useState(null),[n,s]=l.exports.useState(!1),[d,p]=l.exports.useState(!1),[h,c]=l.exports.useState(null),[v,u]=l.exports.useState(!0),[x,z]=l.exports.useState(!0),[E,F]=l.exports.useState(!0);l.exports.useState([]);const[b,S]=l.exports.useState([]),[m,y]=l.exports.useState([]),[f,w]=l.exports.useState([]),[L,A]=l.exports.useState(null),[H,W]=l.exports.useState(15),[Y,B]=l.exports.useState(null),[V,re]=l.exports.useState(null),[I,ee]=l.exports.useState(null);l.exports.useState(!0);const[O,ne]=l.exports.useState([]),[X,Ye]=l.exports.useState([]),[J,U]=l.exports.useState(null),[M,K]=l.exports.useState({pendingRequests:0,activeRides:0,onlineDrivers:0,totalRevenue:0,completedRides:0}),[de,he]=l.exports.useState("overview"),[xe,Ue]=l.exports.useState([]),[Ze,Me]=l.exports.useState([]),[ae,ao]=l.exports.useState([]),[Tt,Et]=l.exports.useState([]),[qt,Wo]=l.exports.useState([]),[dt,ye]=l.exports.useState(!1),[nt,ce]=l.exports.useState(null),[Ht,qe]=l.exports.useState(""),[He,Ie]=l.exports.useState({}),[Je,at]=l.exports.useState([]);l.exports.useState({}),l.exports.useEffect(()=>{const R=Ir.getAllMarkets();w(R);const j=R.find(te=>te.name==="Bentonville, AR");j?A(j):R.length>0&&A(R[0])},[]),l.exports.useEffect(()=>{console.log("\u{1F4E1} Dashboard: Connecting to Socket.IO...");const R=Ei(Fa(),{transports:["websocket","polling"]});return U(R),R.on("connect",()=>{console.log("\u2705 Dashboard: Socket.IO connected successfully!"),console.log("\u{1F504} Requesting current driver state after reconnection..."),R.emit("request-current-state")}),R.on("disconnect",()=>{console.log("\u274C Dashboard: Socket.IO disconnected")}),R.on("connect_error",j=>{console.log("\u{1F6AB} Dashboard: Socket.IO connection error:",j)}),R.on("driver-location-update",j=>{console.log("\u{1F4CD} Real-time driver update:",j),ne(te=>{const se=te.findIndex(G=>G.id===j.driverId);if(se>=0){const G=[...te];return G[se]={...G[se],lat:j.location.lat,lng:j.location.lng,heading:j.heading||j.location.heading||G[se].heading||0,last_update:"Live"},console.log("\u{1F4CD} Updated driver location:",j.driverId),G}return console.log("\u26A0\uFE0F Location update for unknown driver:",j.driverId),te})}),R.on("pending-requests-update",j=>{console.log("\u{1F4CB} Pending requests update:",j),K(te=>({...te,pendingRequests:j.pendingRequests||0}))}),R.on("driver-availability-update",j=>{console.log("\u{1F697} Dashboard: Driver availability update received:",j),K(te=>({...te,onlineDrivers:j.totalDrivers||0})),j.driverId?(console.log("\u{1F527} Processing driver update:",j.driverId,"status:",j.status,"location:",j.location),console.log("\u{1F527} Data isAvailable:",j.isAvailable,"status check:",j.status==="online","location check:",!!j.location),ne(te=>{console.log("\u{1F527} Current drivers before update:",te.length,te.map(G=>`${G.name}(${G.user_type})`));const se=te.filter(G=>G.id!==j.driverId);if(console.log("\u{1F527} After removing existing driver:",se.length),j.status==="online"&&j.location&&j.isAvailable){const G={id:j.driverId,name:`Driver ${j.driverId.slice(-4)}`,email:"driver@example.com",user_type:"driver",rating:5,status:"available",lat:j.location.lat,lng:j.location.lng,heading:j.location.heading||0,last_update:"Live"};se.push(G),console.log("\u2705 Added driver to map:",G.name,"at",G.lat,G.lng)}else console.log("\u274C Driver not added - status:",j.status,"hasLocation:",!!j.location,"isAvailable:",j.isAvailable);return console.log("\u{1F4CA} Total entities on map after driver update:",se.length),console.log("\u{1F4CA} Updated drivers list:",se.map(G=>`${G.name}(${G.user_type}) at ${G.lat},${G.lng}`)),se})):console.log("\u274C No driverId in driver update data")}),R.on("rider-availability-update",j=>{if(console.log("\u{1F4E1} Dashboard: Rider availability update received:",j),j.riders){const te=j.riders.map(se=>{var G;return{id:se.riderId,name:se.name||`Rider ${(G=se.riderId)==null?void 0:G.slice(-4)}`,email:"rider@example.com",user_type:"rider",status:se.status||"online",lat:se.lat,lng:se.lng,last_update:"Live"}});Ye(te),console.log(`\u{1F464} Dashboard: ${j.totalRiders} riders online, added to map`)}}),()=>{R.disconnect()}},[]);const vt=async()=>{try{const R=localStorage.getItem("authToken");if(!R)return;const j=await fetch(ie("api/admin/analytics"),{headers:{Authorization:`Bearer ${R}`}}).catch(()=>null);if(j&&j.ok){const te=await j.json().catch(()=>null);if(!te)return;K(se=>({...se,totalRevenue:te.totalRevenue||0,activeRides:te.activeRides||0,completedRides:te.completedRides||0,onlineDrivers:te.onlineDrivers||se.onlineDrivers||0}))}}catch(R){console.log("Unable to fetch analytics:",R)}};l.exports.useEffect(()=>{vt(),Qe(),Dt()},[L]),l.exports.useEffect(()=>{const R=setInterval(Dt,6e4);return()=>clearInterval(R)},[]);const _e=[{title:"Pending Requests",value:M.pendingRequests.toString(),change:"+0.0%",positive:!0,color:"#f59e0b",icon:kt},{title:"Active Rides",value:M.activeRides.toString(),change:"+0.0%",positive:!0,color:"#3b82f6",icon:rt},{title:"Online Drivers",value:M.onlineDrivers.toString(),change:"+0.0%",positive:!0,color:"#10b981",icon:no},{title:"Today Revenue",value:`$${M.totalRevenue.toFixed(2)}`,change:"+0.0%",positive:!0,color:"#ef4444",icon:Nt}],li=[{id:1,user:"Driver John",action:"completed a ride",time:"2 min ago",avatar:"\u{1F697}"},{id:2,user:"Rider Sarah",action:"requested a ride",time:"5 min ago",avatar:"\u{1F464}"},{id:3,user:"Driver Mike",action:"went online",time:"8 min ago",avatar:"\u{1F697}"}],Dt=async()=>{var R;try{const j=localStorage.getItem("authToken");if(!j)return;console.log("\u{1F525} Dashboard: Fetching active surge zones...");const te=await fetch(ie("api/admin/surge/active-zones"),{headers:{Authorization:`Bearer ${j}`}});if(te.ok){const se=await te.json();se.success&&(at(se.zones||[]),console.log(`\u{1F525} Dashboard: ${((R=se.zones)==null?void 0:R.length)||0} active surge zones`))}}catch(j){console.error("\u274C Error fetching grid cells:",j),at([])}},Qe=async()=>{try{const R=localStorage.getItem("authToken");if(!R)return;const j={Authorization:`Bearer ${R}`},[te,se,G,Ae,Ve]=await Promise.all([fetch(ie("api/admin/surge/zones"),{headers:j}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(ie("api/admin/surge/time-rules"),{headers:j}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(ie("api/admin/surge/weather-rules"),{headers:j}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(ie("api/admin/surge/algorithm-config"),{headers:j}).catch(()=>({ok:!1,json:()=>Promise.resolve({})})),fetch(ie("api/admin/surge/current-status"),{headers:j}).catch(()=>({ok:!1,json:()=>Promise.resolve({})}))]);if(te.ok){const $e=await te.json();Ue($e.zones||[])}if(se.ok){const $e=await se.json();Me($e.rules||[])}if(G.ok){const $e=await G.json();ao($e.rules||[])}if(Ae.ok){const $e=await Ae.json();Et($e.config||[])}if(Ve.ok){const $e=await Ve.json();Wo($e.zones||[])}}catch(R){console.error("Error fetching surge data:",R)}},me=async(R,j,te="PUT")=>{try{const se=localStorage.getItem("authToken");if(!se)return;(await fetch(ie(R),{method:te,headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},body:JSON.stringify(j)})).ok&&(await Qe(),ye(!1),Ie({}))}catch(se){console.error("Error updating surge config:",se)}},pt=async(R,j,te,se)=>{await me(`api/admin/surge/override/${R}`,{manualMultiplier:j,overrideReason:te,expiresAt:se},"POST")},Fe=async R=>{try{const j=localStorage.getItem("authToken");if(!j)return;(await fetch(ie(`api/admin/surge/override/${R}`),{method:"DELETE",headers:{Authorization:`Bearer ${j}`}})).ok&&await Qe()}catch(j){console.error("Error removing surge override:",j)}};l.exports.useEffect(()=>(console.log("\u{1F5FA}\uFE0F Dashboard Google Maps initializing (auto-refresh paused)"),Mo(),()=>{I&&I.setMap(null),Y&&Y.setMap(null),b.forEach(R=>R.setMap(null)),m.forEach(R=>R.setMap(null))}),[]),l.exports.useEffect(()=>{(async()=>{try{const j=await fetch(ie("api/config/maps-key")).catch(()=>null);if(!j||!j.ok){console.warn("Maps API key not available, using environment variable"),lt();return}const te=await j.json().catch(()=>null);if(!te){lt();return}if(!te.key){c("Google Maps API key not configured. Please add GMaps_Key to your environment variables.");return}if(window.google)p(!0);else{const se=document.createElement("script");se.src=`https://maps.googleapis.com/maps/api/js?key=${te.key}&libraries=places,geometry`,se.async=!0,se.defer=!0,se.onload=()=>{p(!0)},se.onerror=()=>{console.error("Failed to load Google Maps"),c("Failed to load Google Maps. Please check your API key configuration.")},document.head.appendChild(se)}}catch(j){console.error("Error loading Google Maps config:",j),c("Failed to load Google Maps configuration.")}})()},[]),l.exports.useEffect(()=>{o&&n&&navigator.geolocation.getCurrentPosition(R=>{const j={lat:R.coords.latitude,lng:R.coords.longitude};if(re(j),I&&I.setMap(null),window.google.maps.marker&&window.google.maps.marker.AdvancedMarkerElement)new window.google.maps.marker.AdvancedMarkerElement({position:j,map:o,title:"Your Admin Location"});else{const te=new window.google.maps.Marker({position:j,map:o,title:"Your Admin Location",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                  <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="14" fill="#dc2626" stroke="white" stroke-width="3"/>
                    <text x="16" y="20" text-anchor="middle" fill="white" font-size="12" font-weight="bold">A</text>
                  </svg>
                `),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}}),se=new window.google.maps.InfoWindow({content:`
                <div style="padding: 8px; font-family: Arial, sans-serif;">
                  <div style="font-weight: bold; color: #dc2626;">\u{1F468}\u200D\u{1F4BC} Admin Location</div>
                  <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">Live GPS Position</div>
                  <div style="font-size: 12px; margin: 2px 0;">
                    \u{1F4CD} ${j.lat.toFixed(6)}, ${j.lng.toFixed(6)}
                  </div>
                </div>
              `});te.addListener("click",()=>{se.open(o,te)})}console.log("\u{1F4CD} Admin location added to Dashboard map:",j)},R=>{console.log("\u{1F4CD} Admin location unavailable:",R.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[o,n]),l.exports.useEffect(()=>{o&&n&&Vt()},[v,x,o,n]),l.exports.useEffect(()=>{o&&n&&(console.log("\u{1F504} Dashboard: Updating markers due to realDrivers change, count:",O.length),Vt())},[O,X,o,n]),l.exports.useEffect(()=>{L&&o&&n&&Gt()},[L,o,n]),l.exports.useEffect(()=>{o&&n&&ut()},[H,L,o,n]);const St=(R,j=0,te=32)=>({url:yp,scaledSize:new window.google.maps.Size(te,te*1.35),anchor:new window.google.maps.Point(te/2,te*1.2/2)}),Mo=()=>{if(o||window.google&&window.google.maps&&n){console.log("\u{1F5FA}\uFE0F Dashboard map already initialized - skipping");return}if(window.google&&window.google.maps){lt();return}if(document.querySelectorAll('script[src*="maps.googleapis.com"]').forEach(G=>{const Ae=G;Ae.src&&(Ae.src.includes("%VITE_GMAPS_KEY%")||Ae.src.includes("YOUR_GOOGLE_MAPS_API_KEY"))&&(console.log("\u{1F5FA}\uFE0F Removing broken Google Maps script"),G.remove())}),document.querySelector('script[src*="maps.googleapis.com"][src*="AIza"]')){console.log("\u{1F5FA}\uFE0F Valid Google Maps script already loaded - waiting for initialization"),window.google&&window.google.maps&&lt();return}const te="AIzaSyCYJnVS_4EdeLrxACl4W5eTOCQiwgYTk28";console.log("\u{1F5FA}\uFE0F Loading Google Maps API with key:",te.substring(0,10)+"...");const se=document.createElement("script");se.src=`https://maps.googleapis.com/maps/api/js?key=${te}&libraries=places,geometry,visualization&callback=initDashboardMap&loading=async`,se.async=!0,se.defer=!0,window.initDashboardMap=()=>{console.log("\u2705 Google Maps API loaded successfully for dashboard"),lt()},se.onerror=G=>{console.error("\u274C Failed to load Google Maps API:",G),s(!1)},document.head.appendChild(se)},lt=()=>{if(!i.current||!window.google||!window.google.maps){console.error("Map container or Google Maps API not available");return}try{const R=new window.google.maps.Map(i.current,{center:V||(L?L.center:{lat:36.3729,lng:-94.2088}),zoom:L?L.zoom:4,mapTypeId:"roadmap",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}],disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0,gestureHandling:"cooperative"});r(R),s(!0),console.log("Dashboard map initialized"),Vt(R)}catch(R){console.error("Error initializing dashboard map:",R),s(!1)}},Vt=R=>{const j=R||o;if(!j||!window.google)return;b.forEach(G=>G.setMap(null)),m.forEach(G=>G.setMap(null));const te=[],se=[];console.log("\u{1F527} Dashboard: Creating markers for",O.length,"users. Selected market:",(L==null?void 0:L.name)||"none"),O.forEach(G=>{if(G.user_type==="driver"&&v){const Ae=G.status==="available"?"#10b981":G.status==="busy"?"#f59e0b":"#6b7280",Ve=St(Ae,G.heading||0,24),$e=new window.google.maps.Marker({position:{lat:G.lat,lng:G.lng},map:j,icon:Ve,title:`Driver: ${G.name}`}),Ee=new window.google.maps.InfoWindow({content:`
              <div style="padding: 8px; font-family: Arial, sans-serif;">
                <div style="font-weight: bold; color: #1f2937;">\u{1F697} ${G.name}</div>
                <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">ID: ${G.id}</div>
                <div style="font-size: 12px; margin: 2px 0;">
                  <span style="color: ${Ae}; font-weight: bold;">\u25CF</span> ${G.status.toUpperCase()}
                </div>
                <div style="font-size: 12px; margin: 2px 0;">
                  \u2B50 ${G.rating||5} rating
                </div>
              </div>
            `});$e.addListener("click",()=>{Ee.open(j,$e)}),te.push($e)}}),X.forEach(G=>{var Ae,Ve,$e,Ee;if(G.user_type==="rider"&&x){const Bt=G.status==="waiting"?"#ef4444":G.status==="matched"?"#f59e0b":"#8b5cf6",Yt=((Ae=G.name)==null?void 0:Ae.split(" ")[0])||"Rider",Ct={url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg width="60" height="50" viewBox="0 0 60 50" xmlns="http://www.w3.org/2000/svg">
              <path d="M30 0C23.372 0 18 5.372 18 12c0 12 12 18 12 18s12-6 12-18C42 5.372 36.628 0 30 0z" fill="${Bt}"/>
              <circle cx="30" cy="12" r="6" fill="white"/>
              <text x="30" y="16" text-anchor="middle" fill="${Bt}" font-size="8" font-weight="bold">\u{1F464}</text>
              <rect x="5" y="34" width="50" height="14" rx="3" fill="white" stroke="${Bt}" stroke-width="1"/>
              <text x="30" y="45" text-anchor="middle" fill="#1f2937" font-size="10" font-weight="bold">${Yt}</text>
              </svg>
        `),scaledSize:new window.google.maps.Size(60,50),anchor:new window.google.maps.Point(30,30)},De=new window.google.maps.Marker({position:{lat:G.lat,lng:G.lng},map:j,icon:Ct,title:`Rider: ${((Ve=G.name)==null?void 0:Ve.split(" ")[0])||"Rider"}`,label:{text:(($e=G.name)==null?void 0:$e.split(" ")[0])||"Rider",color:"#1f2937",fontSize:"11px",fontWeight:"bold",className:"rider-marker-label"}});new window.google.maps.InfoWindow({content:`<div style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 11px; font-weight: bold; color: #1f2937; white-space: nowrap;">${Yt}</div>`,disableAutoPan:!0}).open(j,De);const Be=new window.google.maps.InfoWindow({content:`
              <div style="padding: 8px; font-family: Arial, sans-serif;">
                <div style="font-weight: bold; color: #1f2937;">\u{1F464} ${((Ee=G.name)==null?void 0:Ee.split(" ")[0])||"Rider"}</div>
                <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">ID: ${G.id}</div>
                <div style="font-size: 12px; margin: 2px 0;">
                  <span style="color: ${Bt}; font-weight: bold;">\u25CF</span> ${G.status.toUpperCase()}
                </div>
                <div style="font-size: 12px; margin: 2px 0;">
                  \u{1F4CD} Live Location
                </div>
              </div>
            `});De.addListener("click",()=>{Be.open(j,De)}),se.push(De)}}),S(te),y(se)},Gt=()=>{!o||!window.google||!L||(o.setCenter(L.center),o.setZoom(L.zoom),W(L.radius),Vt(),ut())},ut=()=>{if(!o||!window.google||!L)return;Y&&Y.setMap(null);const R=new window.google.maps.Circle({strokeColor:"#3b82f6",strokeOpacity:.6,strokeWeight:2,fillColor:"#3b82f6",fillOpacity:.1,map:o,center:L.center,radius:H*1609.34});B(R)},_o=R=>{W(R),A(j=>j?{...j,radius:R}:null)};return t("div",{children:[e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"20px",alignItems:"end"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Select Market"}),e("select",{value:(L==null?void 0:L.id)||"",onChange:R=>{const j=f.find(te=>te.id===R.target.value);j&&A(j)},style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white",cursor:"pointer",outline:"none"},children:f.map(R=>t("option",{value:R.id,children:[R.city,", ",R.state]},R.id))})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:["Service Radius: ",H," miles"]}),e("input",{type:"range",min:"5",max:"50",step:"1",value:H,onChange:R=>_o(Number(R.target.value)),style:{width:"100%",height:"6px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[e("span",{children:"5 miles"}),e("span",{children:"50 miles"})]})]}),t("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Coverage Area"}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:[(Math.PI*H*H).toFixed(0)," mi\xB2"]}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:(L==null?void 0:L.timezone)||"N/A"})]})]})}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{children:[e("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",margin:"0 0 4px 0"},children:"Live Activity Map"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Real-time overview of riders and drivers in the trade area"})]}),t("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t("button",{onClick:()=>u(!v),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:v?"#10b981":"#f1f5f9",color:v?"white":"#64748b",border:`2px solid ${v?"#10b981":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[v?e($t,{size:14}):e(Wi,{size:14}),"Drivers (",O.filter(R=>R.user_type==="driver"&&R.status!=="offline").length,")"]}),t("button",{onClick:()=>z(!x),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:x?"#3b82f6":"#f1f5f9",color:x?"white":"#64748b",border:`2px solid ${x?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[x?e($t,{size:14}):e(Wi,{size:14}),"Riders (",X.length,")"]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:Je.length>0?"#fef2f2":"#f1f5f9",color:Je.length>0?"#dc2626":"#64748b",border:`2px solid ${Je.length>0?"#fecaca":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[e(Mi,{size:14}),"Surge Zones: ",Je.length]})]})]}),t("div",{style:{height:"400px",position:"relative",backgroundColor:"#f8fafc",borderRadius:"12px",border:"2px solid #e2e8f0",overflow:"hidden"},children:[e("div",{ref:i,style:{width:"100%",height:"100%"}}),E&&o&&e(ve,{children:e(bp,{map:o,gridCells:Je,onZoneClick:R=>{console.log("\u{1F5FA}\uFE0F Surge zone clicked:",R)}})}),!n&&e("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center",padding:"20px"},children:t("div",{children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Loading Live Map..."}),e("div",{style:{fontSize:"14px",opacity:.8},children:"Connecting to Google Maps"})]})}),h&&e(Cc,{error:h}),n&&t("div",{style:{position:"absolute",bottom:"16px",left:"16px",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:"12px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#1e293b"},children:"Map Legend"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"DRIVERS (\u{1F697} Car Icons)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#10b981"}}),e("span",{style:{fontSize:"11px"},children:"Available"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),e("span",{style:{fontSize:"11px"},children:"Busy"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#6b7280"}}),e("span",{style:{fontSize:"11px"},children:"Offline"})]}),e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginTop:"6px",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"RIDERS (\u{1F4CD} Location Pins)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#8b5cf6"}}),e("span",{style:{fontSize:"11px"},children:"Online"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#ef4444"}}),e("span",{style:{fontSize:"11px"},children:"Waiting for Ride"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),e("span",{style:{fontSize:"11px"},children:"Matched"})]}),E&&t(ve,{children:[e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginTop:"6px",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"SURGE ZONES (\u{1F3AF} Color Overlays)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#10b981"}}),e("span",{style:{fontSize:"11px"},children:"Normal (1.0-1.2x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#84cc16"}}),e("span",{style:{fontSize:"11px"},children:"Low Surge (1.2-1.5x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#eab308"}}),e("span",{style:{fontSize:"11px"},children:"Medium Surge (1.5-2.0x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f97316"}}),e("span",{style:{fontSize:"11px"},children:"High Surge (2.0-2.5x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#ef4444"}}),e("span",{style:{fontSize:"11px"},children:"Extreme Surge (2.5x+)"})]})]})]})]}),n&&t("div",{style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:"12px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#1e293b"},children:"Live Stats"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t("div",{children:["\u{1F697} ",O.filter(R=>R.status==="available").length," Available"]}),t("div",{children:["\u{1F7E1} ",O.filter(R=>R.status==="busy").length," Busy"]}),t("div",{children:["\u{1F464} ",X.length," Total Riders"]}),t("div",{children:["\u23F3 ",X.filter(R=>R.status==="waiting"||R.status==="online").length," Waiting"]}),t("div",{children:["\u{1F697} ",X.filter(R=>R.status==="riding").length," Active Rides"]})]})]})]})]}),e("div",{className:"stats-grid",children:_e.map((R,j)=>{const te=R.icon;return t("div",{className:"stat-card",children:[t("div",{className:"stat-header",children:[e("span",{className:"stat-title",children:R.title}),e("div",{className:"stat-icon",style:{backgroundColor:`${R.color}20`,color:R.color},children:e(te,{size:24})})]}),e("div",{className:"stat-value",children:R.value}),t("div",{className:`stat-change ${R.positive?"positive":"negative"}`,children:[e(Mi,{size:12}),R.change]})]},j)})}),t("div",{className:"dashboard-grid",children:[t("div",{className:"chart-card",children:[e("h3",{className:"chart-title",children:"Rides Today"}),e("div",{style:{height:300,display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b"},children:"\u{1F4CA} Chart temporarily disabled for debugging"})]}),t("div",{className:"activity-feed",children:[e("div",{className:"activity-header",children:e("h3",{className:"chart-title",children:"Recent Activity"})}),e("div",{className:"activity-list",children:li.map(R=>t("div",{className:"activity-item",children:[e("div",{className:"activity-avatar",children:R.avatar}),t("div",{className:"activity-content",children:[t("div",{className:"activity-text",children:[e("strong",{children:R.user})," ",R.action]}),e("div",{className:"activity-time",children:R.time})]})]},R.id))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[t("div",{children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"4px"},children:"\u{1F680} Surge Pricing Management"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Configure dynamic pricing zones, rules, and overrides"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:Qe,style:{padding:"8px 16px",backgroundColor:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#475569",cursor:"pointer"},children:"\u{1F504} Refresh"}),e("button",{onClick:()=>{const R=prompt(`\u{1F4CD} Admin GPS not accurate?

Enter your current city and state:
(e.g., "Seattle, WA" or "Dallas, TX")`);if(R&&window.google&&window.google.maps){const j=new window.google.maps.places.PlacesService(o),te={query:R,fields:["geometry","formatted_address"]};j.textSearch(te,(se,G)=>{if(G===window.google.maps.places.PlacesServiceStatus.OK&&se&&se.length>0){const Ae=se[0],Ve={lat:Ae.geometry.location.lat(),lng:Ae.geometry.location.lng()};console.log("\u{1F4CD} Admin location manually calibrated to:",Ve),re(Ve),o&&(o.setCenter(Ve),o.setZoom(13),window.adminMarker&&window.adminMarker.setPosition(Ve)),alert(`\u2705 Admin location updated: ${Ae.formatted_address}`)}else alert("\u274C Could not find that location. Please try again.")})}},style:{padding:"8px 16px",backgroundColor:"#10b981",border:"1px solid #059669",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"white",cursor:"pointer"},title:"Fix Admin GPS Location",children:"\u{1F4CD} Fix GPS"})]})]}),e("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",borderBottom:"2px solid #f1f5f9",paddingBottom:"8px"},children:[{id:"overview",label:"\u{1F4CA} Overview",icon:"\u{1F4CA}"},{id:"zones",label:"\u{1F5FA}\uFE0F Zones",icon:"\u{1F5FA}\uFE0F"},{id:"time-rules",label:"\u23F0 Time Rules",icon:"\u23F0"},{id:"weather",label:"\u{1F326}\uFE0F Weather",icon:"\u{1F326}\uFE0F"},{id:"algorithm",label:"\u2699\uFE0F Algorithm",icon:"\u2699\uFE0F"}].map(R=>e("button",{onClick:()=>he(R.id),style:{padding:"8px 16px",backgroundColor:de===R.id?"#3b82f6":"transparent",color:de===R.id?"white":"#64748b",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:R.label},R.id))}),de==="overview"&&t("div",{children:[t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t("div",{style:{padding:"16px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"1px solid #0ea5e9"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1",marginBottom:"8px"},children:"\u{1F4CD} Active Zones"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#0c4a6e"},children:qt.length})]}),t("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"12px",border:"1px solid #f59e0b"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:"\u{1F525} Manual Overrides"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#78350f"},children:qt.filter(R=>R.has_override).length})]}),t("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"12px",border:"1px solid #10b981"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#047857",marginBottom:"8px"},children:"\u23F0 Time Rules"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#065f46"},children:Ze.filter(R=>R.is_active).length})]})]}),t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F534} Live Surge Status"}),e("div",{style:{maxHeight:"300px",overflowY:"auto"},children:qt.slice(0,10).map(R=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:R.has_override?"#fef2f2":"#f8fafc",borderRadius:"8px",marginBottom:"8px",border:`1px solid ${R.has_override?"#fca5a5":"#e2e8f0"}`},children:[t("div",{children:[t("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:[R.zone_type==="airport"?"\u2708\uFE0F":"\u{1F3D9}\uFE0F"," ",R.zone_name]}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:[R.zone_code," \u2022 ",R.zone_type," \u2022 Tier ",R.tier_level]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:R.has_override?"#dc2626":R.base_multiplier>0?"#f59e0b":"#10b981"},children:R.has_override?`${R.manual_multiplier}x`:`${R.base_multiplier}x`}),R.has_override&&e("button",{onClick:()=>Fe(R.id),style:{padding:"4px 8px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer",marginTop:"4px"},children:"Remove Override"}),!R.has_override&&e("button",{onClick:()=>{ce(R),qe("override"),ye(!0)},style:{padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer",marginTop:"4px"},children:"Set Override"})]})]},R.id))})]})]}),de==="zones"&&t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",margin:0},children:["\u{1F5FA}\uFE0F Surge Zones (",xe.length,")"]}),e("button",{onClick:()=>{qe("new-zone"),ye(!0),Ie({})},style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"+ Add Zone"})]}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.map(R=>t("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 100px 100px 80px",alignItems:"center",padding:"12px",backgroundColor:R.is_active?"#f8fafc":"#fef2f2",borderRadius:"8px",marginBottom:"8px",border:"1px solid #e2e8f0",fontSize:"12px",gap:"12px"},children:[t("div",{children:[t("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:[R.zone_type==="airport"?"\u2708\uFE0F":"\u{1F3D9}\uFE0F"," ",R.zone_name]}),t("div",{style:{color:"#64748b"},children:[R.zone_code," \u2022 ",R.latitude.toFixed(4),", ",R.longitude.toFixed(4)]})]}),t("div",{style:{textAlign:"center",color:"#64748b"},children:["Tier ",R.tier_level]}),t("div",{style:{textAlign:"center",fontWeight:"600",color:"#f59e0b"},children:[R.base_multiplier,"x base"]}),t("div",{style:{textAlign:"center",color:"#64748b"},children:[R.radius,"km radius"]}),e("div",{style:{textAlign:"center"},children:e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:R.is_active?"#10b981":"#ef4444",margin:"0 auto"}})})]},R.id))})]}),de==="time-rules"&&t("div",{children:[t("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:["\u23F0 Time-based Surge Rules (",Ze.length,")"]}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ze.map(R=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:R.is_active?"#f8fafc":"#fef2f2",borderRadius:"8px",marginBottom:"8px",border:"1px solid #e2e8f0"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:R.rule_name}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:[R.start_hour,":00 - ",R.end_hour,":00 \u2022 ",R.rule_type]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"16px",fontWeight:"700",color:R.is_active?"#f59e0b":"#94a3b8"},children:["+",R.surge_multiplier,"x"]}),e("div",{style:{fontSize:"10px",color:R.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:R.is_active?"ACTIVE":"DISABLED"})]})]},R.id))})]}),de==="weather"&&t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:"\u{1F326}\uFE0F Weather-based Surge Rules"}),e("div",{style:{display:"grid",gap:"12px"},children:ae.map(R=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:R.weather_condition==="clear"?"\u2600\uFE0F":R.weather_condition==="rain"?"\u{1F327}\uFE0F":R.weather_condition==="snow"?"\u2744\uFE0F":"\u26C8\uFE0F"}),t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",textTransform:"capitalize"},children:R.weather_condition}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Weather-based surge multiplier"})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"20px",fontWeight:"700",color:R.surge_multiplier>0?"#f59e0b":"#10b981"},children:["+",R.surge_multiplier,"x"]}),e("div",{style:{fontSize:"10px",color:R.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:R.is_active?"ENABLED":"DISABLED"})]})]},R.id))})]}),de==="algorithm"&&t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:"\u2699\uFE0F Algorithm Configuration"}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Tt.map(R=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"12px",border:"1px solid #e2e8f0"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:R.config_key.replace(/_/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:R.config_description})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#3b82f6"},children:R.config_value}),e("div",{style:{fontSize:"10px",color:R.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:R.is_active?"ACTIVE":"DISABLED"})]})]},R.id))})]})]}),dt&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:Ht==="override"&&t(ve,{children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",marginBottom:"16px",color:"#1e293b"},children:"\u{1F525} Set Manual Surge Override"}),t("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"20px"},children:["Zone: ",e("strong",{children:nt==null?void 0:nt.zone_name})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"Surge Multiplier"}),e("input",{type:"number",step:"0.1",min:"1.0",max:"10.0",value:He.manualMultiplier||"1.0",onChange:R=>Ie({...He,manualMultiplier:parseFloat(R.target.value)}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"Reason"}),e("input",{type:"text",value:He.overrideReason||"",onChange:R=>Ie({...He,overrideReason:R.target.value}),placeholder:"e.g., Special event, weather emergency",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e("button",{onClick:()=>ye(!1),style:{padding:"10px 20px",backgroundColor:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:()=>{nt&&He.manualMultiplier&&He.overrideReason&&pt(nt.id,He.manualMultiplier,He.overrideReason)},style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Set Override"})]})]})})}),t("div",{className:"qr-code-card",children:[e("h3",{className:"chart-title",children:"Mobile App QR Codes"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",padding:"10px"},children:[t("div",{style:{textAlign:"center"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F697} Driver App"}),e(Ar,{url:`${window.location.origin}/driver`,size:150})]}),t("div",{style:{textAlign:"center"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F464} Rider App"}),e(Ar,{url:`${window.location.origin}/rider`,size:150})]})]}),e("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #0ea5e9",textAlign:"center"},children:e("p",{style:{fontSize:"12px",color:"#0369a1",margin:0,fontWeight:"500"},children:"\u{1F4F1} Scan these codes with mobile devices to access the apps directly"})})]})]})]})},Sp=({status:i,onClose:o})=>{const[r,n]=l.exports.useState(0),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(!1);if(l.exports.useEffect(()=>{if(i==="searching"){d(!1),h(!1);const v=setInterval(()=>{n(u=>(u+1)%7)},500);return()=>clearInterval(v)}else i==="found"&&(d(!0),h(!0),setTimeout(()=>{h(!1),o==null||o()},2e3))},[i,o]),i==="hidden")return null;const c=i==="searching"?"Finding the best \u03C0 Driver for you...":"We found your Driver";return t("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,background:"#1e293b",borderRadius:"12px",padding:"24px 32px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",minWidth:"320px",textAlign:"center",animation:"fadeIn 0.3s ease-out"},children:[e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginBottom:"16px"},children:Array.from({length:7},(v,u)=>{const x=s||u<=r;return e("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:x?"#10b981":"#ffffff",transition:"background-color 0.3s ease",opacity:x?1:.3,animation:p&&x?"flashGreen 0.3s ease-in-out infinite alternate":"none"}},u)})}),e("div",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:c}),e("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes fadeIn {
            from {
              opacity: 0;
              transform: translate(-50%, -50%) scale(0.9);
            }
            to {
              opacity: 1;
              transform: translate(-50%, -50%) scale(1);
            }
          }
          
          @keyframes flashGreen {
            from {
              background-color: #10b981;
              opacity: 1;
              transform: scale(1);
            }
            to {
              background-color: #22d3ee;
              opacity: 0.7;
              transform: scale(1.2);
            }
          }
        `}})]})},wp="/cars/economy.png",kp="/cars/standard.png",Cp="/cars/xl.png",zp="/cars/premium.png";function Rp(){var yi,Go,or,Yo,Ao,ir,Io,rr,Jo,nr,ar,lr,sr,dr,cr,pr,bi,vi,Rt,Ft,Si,wi,ki,Ci,zi,k,T,P,N,_,Q,oe,Ce,Xe,_t;const i=l.exports.useRef(null),o=l.exports.useRef(null),[r,n]=l.exports.useState(null),[s,d]=l.exports.useState(null),[p,h]=l.exports.useState(null),[c,v]=l.exports.useState(""),[u,x]=l.exports.useState(null),[z,E]=l.exports.useState(""),[F,b]=l.exports.useState("standard"),[S,m]=l.exports.useState(null),[y,f]=l.exports.useState(null),[w,L]=l.exports.useState(!1),[A,H]=l.exports.useState([]),[W,Y]=l.exports.useState(!1),[B,V]=l.exports.useState([]),[re,I]=l.exports.useState(!1),[ee,O]=l.exports.useState(null),[ne,X]=l.exports.useState(null);l.exports.useState({email:"test@rider.com",password:"demo123"});const[Ye,J]=l.exports.useState(null),[U,M]=l.exports.useState([]),[K,de]=l.exports.useState(null);l.exports.useState(!1);const[he,xe]=l.exports.useState(!1),[Ue,Ze]=l.exports.useState(!1),[Me,ae]=l.exports.useState("none"),[ao,Tt]=l.exports.useState(!1),[Et,qt]=l.exports.useState(!1),[Wo,dt]=l.exports.useState([{id:"1",sender:"support",message:"Hi! How can I help you today?",timestamp:new Date().toISOString()}]),[ye,nt]=l.exports.useState(""),[ce,Ht]=l.exports.useState("credit"),[qe,He]=l.exports.useState(!1),[Ie,Je]=l.exports.useState(null),[at,vt]=l.exports.useState(null),[_e,li]=l.exports.useState(null),[Dt,Qe]=l.exports.useState("idle"),[me,pt]=l.exports.useState(null),[Fe,St]=l.exports.useState(!1),[Mo,lt]=l.exports.useState("hidden"),[Vt,Gt]=l.exports.useState(!1);l.exports.useState(!1);const[ut,_o]=l.exports.useState(!1),[R,j]=l.exports.useState(""),[te,se]=l.exports.useState(""),[G,Ae]=l.exports.useState("standard"),[Ve,$e]=l.exports.useState(!1),[Ee,Bt]=l.exports.useState([]),[Yt,Ct]=l.exports.useState(""),[De,Jt]=l.exports.useState(!1),[Be,Po]=l.exports.useState([]);l.exports.useState(null);const[Wt,vo]=l.exports.useState([]),[Nr,Kt]=l.exports.useState(!1),[si,Ui]=l.exports.useState(!1);l.exports.useState(!1),l.exports.useState(""),l.exports.useState([]),l.exports.useState(!1);const[Wn,di]=l.exports.useState(null),[lo,qi]=l.exports.useState(null),[So,Hi]=l.exports.useState(null),[ht,ci]=l.exports.useState(null),[gt,Vi]=l.exports.useState(!1),[$r,Xt]=l.exports.useState(null),[pi,Lo]=l.exports.useState(null),[ft,Zt]=l.exports.useState({cardNumber:"",expiryDate:"",cvv:"",name:"",type:"credit"}),[Qt,zt]=l.exports.useState({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:!1}),[et,wo]=l.exports.useState({name:"",address:"",icon:"\u{1F3E0}"}),[Mn,No]=l.exports.useState([{id:"1",name:"Home",address:"123 Main St, Springfield",icon:"\u{1F3E0}",type:"home"},{id:"2",name:"Work",address:"456 Corporate Blvd, Downtown",icon:"\u{1F3E2}",type:"work"},{id:"3",name:"Gym",address:"789 Fitness Ave, Midtown",icon:"\u{1F3CB}\uFE0F",type:"custom"},{id:"4",name:"Mom's House",address:"321 Family Dr, Suburb",icon:"\u2764\uFE0F",type:"custom"}]),[tt,$o]=l.exports.useState(null),[Pe,Gi]=l.exports.useState({firstName:"Avi",lastName:"Selassie",email:"demo@rider.com",phone:"+1 (555) 123-4567",rating:4.8,totalRides:47,monthlySpending:247,dateOfBirth:"1990-01-15",emergencyContact:"Jane Doe - +1 (555) 987-6543",music:!0,conversation:!1,temperature:"cool",corporateDiscount:null}),[ge,ot]=l.exports.useState({firstName:"Avi",lastName:"Selassie",email:"demo@rider.com",phone:"+1 (555) 123-4567",dateOfBirth:"1990-01-15",emergencyContact:"Jane Doe - +1 (555) 987-6543",music:!0,conversation:!1,temperature:"cool",profilePicture:""}),[ui,Oo]=l.exports.useState([]),eo=async()=>{try{const a=await fetch(ie("api/users/trips?limit=5"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}});if(a.ok){const g=await a.json();Oo(g.trips||[]),console.log("\u2705 Loaded recent trips:",g.trips)}else console.warn("Failed to load recent trips"),Oo([])}catch(a){console.warn("Error loading recent trips:",a),Oo([])}},Yi=a=>{console.log("\u{1F4F1} Book Again clicked for trip:",a.from,"\u2192",a.to),console.log("\u{1F4CD} Trip coordinates:",a.pickupCoords,"\u2192",a.destinationCoords),Je({lat:a.pickupCoords.lat,lng:a.pickupCoords.lng}),v(a.to),x({lat:a.destinationCoords.lat,lng:a.destinationCoords.lng}),vt({lat:a.destinationCoords.lat,lng:a.destinationCoords.lng}),ae("none"),mt(a.to),console.log("\u2705 Book Again form pre-filled successfully")},hi=a=>{if(!a.trim())return;const g={id:Date.now().toString(),sender:"user",message:a.trim(),timestamp:new Date().toISOString()};dt(C=>[...C,g]),nt(""),setTimeout(()=>{const C={id:(Date.now()+1).toString(),sender:"support",message:"Thank you for your message. A support agent will be with you shortly.",timestamp:new Date().toISOString()};dt(D=>[...D,C])},2e3)},Ji=()=>{window.location.href="tel:479-367-1337"},[Le,Ki]=l.exports.useState([{id:"economy",name:"Economy",description:"Compact cars \u2022 Budget-friendly",icon:wp,price:12.5,eta:8,multiplier:1,hasSurge:!1,surgeMultiplier:1},{id:"standard",name:"Standard",description:"Mid-size sedans \u2022 Comfortable",icon:kp,price:14.5,eta:5,multiplier:1.2,hasSurge:!1,surgeMultiplier:1},{id:"xl",name:"XL",description:"SUVs & minivans \u2022 Up to 6 passengers",icon:Cp,price:18.75,eta:10,multiplier:1.5,hasSurge:!1,surgeMultiplier:1},{id:"premium",name:"Premium",description:"Luxury vehicles \u2022 Premium experience",icon:zp,price:22.9,eta:7,multiplier:1.8,hasSurge:!1,surgeMultiplier:1}]);l.exports.useEffect(()=>{const a=localStorage.getItem("userToken"),g=localStorage.getItem("userData");if(a&&g)try{const C=JSON.parse(g);C.id="550e8400-e29b-41d4-a716-446655440002",n(C),console.log("\u2705 Rider user loaded with correct ID:",C)}catch(C){console.error("Error parsing user data:",C),localStorage.removeItem("userToken"),localStorage.removeItem("userData")}else{const C={id:"550e8400-e29b-41d4-a716-446655440002",name:"Avi Selassie",email:"test@rider.com",phone:"+1 (555) 123-4567"};n(C),console.log("\u2705 Default rider user set with correct ID:",C)}},[]),l.exports.useEffect(()=>{console.log("\u{1F5FA}\uFE0F RiderApp Google Maps initializing (auto-refresh paused)"),gi(),Vr(),Hr(),Or(),Xi(),eo()},[]),l.exports.useEffect(()=>{if(typeof window<"u"&&window.io&&r)try{const a=window.io();return o.current=a,console.log("\u{1F4E1} Rider connecting to Socket.IO with user:",r),a.emit("rider-connect",{riderId:r.id,name:`${r.firstName||"Rider"} ${r.lastName||""}`,location:{lat:(Ie==null?void 0:Ie.lat)||36.3729,lng:(Ie==null?void 0:Ie.lng)||-94.2088},status:"online"}),a.on("driver-availability-update",g=>{console.log("\u{1F4E1} Received driver availability update:",g),X(C=>C&&{...C,availableDrivers:g.totalDrivers,timestamp:g.timestamp}),Ie&&at&&xt(Ie,at,F)}),a.on("pending-requests-update",g=>{console.log("\u{1F4CB} Received pending requests update:",g),X(C=>C&&{...C,pendingRequests:g.pendingRequests,timestamp:g.timestamp}),Ie&&at&&xt(Ie,at,F)}),a.on("finding-driver",g=>{try{console.log("\u{1F3AF} Finding driver event received:",g),Qe("searching"),console.log("\u{1F4CD} Cascading driver search started for ride:",g.rideId)}catch(C){console.error("\u274C Error handling finding-driver event:",C)}}),a.on("ride-accepted",g=>{var C,D,$;try{if(console.log("\u2705 Ride accepted by driver:",g),lt("found"),console.log("\u{1F389} FLASHING GREEN LIGHTS: Progressive lights now flashing - driver found!"),pt(g.ride),ci(g.driver),(C=g.driver)!=null&&C.location){qi(g.driver.location),Vi(!0),console.log("\u{1F5FA}\uFE0F Driver tracking initialized:",g.driver.location);const le=((D=g.ride)==null?void 0:D.pickup_location)||Ie;le?(fi(g.driver.location,le),console.log("\u{1F5FA}\uFE0F Showing route from driver to pickup:",g.driver.location,"to",le)):console.log("\u26A0\uFE0F No pickup location available for driver directions")}setTimeout(()=>{Qe("matched"),ae("tracking")},2e3);const q=(($=g.driver)==null?void 0:$.name)||"Your driver";pe(`\u{1F697} ${q} accepted your ride! Heading your way.`,"success"),console.log("\u{1F389} Driver matched successfully via cascading system")}catch(q){console.error("\u274C Error handling ride acceptance:",q)}}),a.on("no-drivers-accepted",g=>{try{console.log("\u274C No drivers accepted ride:",g),Qe("idle"),lt("hidden"),pe("\u{1F614} No drivers available right now. Please try again in a few minutes.","error"),console.log("\u{1F494} Cascading driver search failed after trying all available drivers")}catch(C){console.error("\u274C Error handling no-drivers-accepted event:",C)}}),a.on("driver-location-update",g=>{try{console.log("\u{1F4CD} Driver location update received:",g),gt&&me&&g.driverId===(ht==null?void 0:ht.driverId)&&(qi(g.location),g.eta&&Xt(g.eta),g.distance&&Lo(g.distance),console.log("\u{1F5FA}\uFE0F Driver location updated on map:",g.location))}catch(C){console.error("\u274C Error handling driver location update:",C)}}),console.log("\u{1F517} Rider app connected to WebSocket for driver updates"),()=>{try{a.disconnect()}catch(g){console.error("\u274C Error disconnecting socket:",g)}}}catch(a){console.error("\u274C Error initializing WebSocket:",a)}},[r,Ie,at]),l.exports.useEffect(()=>{var a;if(s&&lo&&gt){So&&So.setMap(null);const g=new window.google.maps.Marker({position:lo,map:s,title:`${(ht==null?void 0:ht.name)||"Your Driver"} - ${((a=ht==null?void 0:ht.vehicle)==null?void 0:a.type)||"Vehicle"}`,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <circle cx="16" cy="16" r="15" fill="#3b82f6" stroke="#ffffff" stroke-width="2"/>
              <text x="16" y="20" text-anchor="middle" fill="white" font-size="16" font-family="Arial">\u{1F697}</text>
            </svg>
          `),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)},animation:window.google.maps.Animation.DROP});if(Hi(g),console.log("\u{1F5FA}\uFE0F Driver marker created at:",lo),p){const C=new window.google.maps.LatLngBounds;C.extend(p),C.extend(lo),s.fitBounds(C,{padding:50})}}return()=>{So&&!gt&&(So.setMap(null),Hi(null))}},[s,lo,gt,ht]);const Xi=async()=>{try{const a=await fetch(ie("api/users/profile"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}}).catch(g=>(console.warn("Profile fetch failed, using defaults:",g),null));if(a&&a.ok){const g=await a.json().catch(C=>(console.warn("Profile JSON parse failed:",C),null));g&&(console.log("\u{1F464} Loaded user profile:",g),console.log("\u{1F4BC} Corporate discount data:",g.corporateDiscount),Gi({firstName:g.firstName||"Avi",lastName:g.lastName||"Selassie",email:g.email||"demo@rider.com",phone:g.phone||"+1 (555) 123-4567",rating:g.rating||4.8,totalRides:g.totalRides||47,monthlySpending:g.monthlySpending||247,dateOfBirth:ge.dateOfBirth,emergencyContact:ge.emergencyContact,music:ge.music,conversation:ge.conversation,temperature:ge.temperature,corporateDiscount:g.corporateDiscount||null}),ot(C=>({...C,firstName:g.firstName||"Avi",lastName:g.lastName||"Selassie",email:g.email||"demo@rider.com",phone:g.phone||"+1 (555) 123-4567",dateOfBirth:g.dateOfBirth||C.dateOfBirth,emergencyContact:g.emergencyContact||C.emergencyContact,music:g.musicPreference!==void 0?g.musicPreference:C.music,conversation:g.conversationPreference!==void 0?g.conversationPreference:C.conversation,temperature:g.temperaturePreference||C.temperature,profilePicture:g.profilePicture||C.profilePicture})))}else console.log("\u{1F464} Using default profile data"),console.log("\u{1F4BC} No corporate discount data found in API response")}catch(a){console.warn("\u274C Failed to load user profile, using defaults:",a)}},Or=async()=>{try{if(!window.Stripe){const a=document.createElement("script");a.src="https://js.stripe.com/v3/",a.async=!0,document.head.appendChild(a),a.onload=()=>{const g="pk_test_51S1f9lHNayezoWpbNnfXsC91OeQIjkLTYo6Ph6t5ALBB1nVTHrwH6qmszjtZxCxX2uPqz7cNv6IoFWpvwUHsDJWJ00fCxrfblx";window.stripe=window.Stripe(g),console.log("\u2705 Stripe initialized successfully")}}}catch(a){console.error("\u274C Failed to initialize Stripe:",a)}};l.exports.useEffect(()=>{if(Le.length>0&&!_e){const a=Le.find(g=>g.id===F);a&&(li(a),console.log("Initial vehicle selected:",a))}},[Le,F,_e]),l.exports.useEffect(()=>{p&&u&&Ee.length>=0&&setTimeout(()=>{console.log("\u{1F504} Stops changed - auto-recalculating route..."),po(p,u),xt(p,u,F)},100)},[Ee,p,u,F]);const gi=()=>{if(window.google&&window.google.maps){console.log("\u{1F5FA}\uFE0F Google Maps API already loaded - reusing existing instance"),jr();return}if(document.querySelectorAll('script[src*="maps.googleapis.com"]').forEach(C=>{const D=C;(D.src.includes("%VITE_GMAPS_KEY%")||D.src.includes("YOUR_GOOGLE_MAPS_API_KEY"))&&(console.log("\u{1F5FA}\uFE0F Removing broken Google Maps script from RiderApp"),C.remove())}),document.querySelector('script[src*="maps.googleapis.com"][src*="AIza"]')){console.log("\u{1F5FA}\uFE0F Valid Google Maps script already exists - waiting for load"),window.google&&window.google.maps&&jr();return}{console.error("\u274C Google Maps API key not found in RiderApp. Please check your Replit Secrets."),L(!1);return}},jr=()=>{if(!i.current||!window.google||!window.google.maps){console.error("Map container or Google Maps API not available");return}try{const a=new window.google.maps.Map(i.current,{center:{lat:36.3729,lng:-94.2088},zoom:13,mapTypeId:"roadmap",disableDefaultUI:!0,zoomControl:!0,gestureHandling:"cooperative"});d(a),L(!0),console.log("Map initialized");const g=new window.google.maps.places.AutocompleteService;O(g),ko(a)}catch(a){console.error("Error initializing map:",a),L(!1)}},ko=a=>{if(navigator.geolocation){console.log("\u{1F4CD} Requesting user location..."),console.log("\u{1F6A8} FORCING FRESH GPS - CLEARING ANY BROWSER CACHE"),typeof navigator.permissions<"u"&&navigator.permissions.query({name:"geolocation"}).then(function(C){console.log("\u{1F511} Geolocation permission:",C.state)});const g={enableHighAccuracy:!0,timeout:2e4,maximumAge:0};navigator.geolocation.getCurrentPosition(C=>{let D={lat:C.coords.latitude,lng:C.coords.longitude};console.log("\u2705 User location obtained:",D),console.log("\u2705 REAL GPS Location obtained:",D),console.log("\u{1F4D0} GPS Accuracy:",C.coords.accuracy,"meters"),console.log("\u{1F30D} Lat/Lng:",`${D.lat}, ${D.lng}`),di(C.coords.accuracy),C.coords.accuracy>1e3&&(console.log("\u26A0\uFE0F Poor GPS accuracy detected - showing calibration option"),Ui(!0)),Math.abs(D.lat-25.5961)<.01&&Math.abs(D.lng- -80.3595)<.01&&(console.log("\u{1F6A8} DETECTED STUCK MIAMI LOCATION - OVERRIDING TO BENTONVILLE"),D={lat:36.368097,lng:-94.254028},console.log("\u2705 LOCATION CORRECTED TO:",`${D.lat}, ${D.lng}`)),h(D),Je(D),a&&(a.setCenter(D),a.setZoom(16),so(a,D));const $=document.createElement("div");$.innerHTML=`
            <div style="
              position: fixed; 
              top: 80px; 
              left: 50%; 
              transform: translateX(-50%); 
              background: #10b981; 
              color: white; 
              padding: 12px 20px; 
              border-radius: 8px; 
              font-size: 14px; 
              font-weight: 600; 
              z-index: 1000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            ">
              \u{1F4CD} LIVE GPS: ${C.coords.accuracy<50?"High precision":C.coords.accuracy<100?"Good accuracy":"Approximate"} (\xB1${Math.round(C.coords.accuracy)}m)
            </div>
          `,document.body.appendChild($),setTimeout(()=>{document.body.contains($)&&document.body.removeChild($)},4e3)},C=>{console.error("\u274C Geolocation error:",C);let D="";switch(C.code){case C.PERMISSION_DENIED:D="GPS access denied. Please enable location services and reload.",console.log("\u{1F6AB} User denied GPS permission");break;case C.POSITION_UNAVAILABLE:D="GPS unavailable. Check device settings and try again.",console.log("\u{1F4E1} GPS/Location services unavailable");break;case C.TIMEOUT:D="GPS timeout. Trying again with network location...",console.log("\u23F0 GPS request timeout - will retry"),setTimeout(()=>{navigator.geolocation.getCurrentPosition(q=>{const le={lat:q.coords.latitude,lng:q.coords.longitude};console.log("\u{1F4CD} Network location fallback:",le),h(le),Je(le),a&&(a.setCenter(le),so(a,le))},()=>{console.log("\u26A0\uFE0F All location attempts failed - using Bentonville, AR");const q={lat:36.3729,lng:-94.2088};h(q),Je(q),a&&(a.setCenter(q),a.setZoom(13),so(a,q)),setTimeout(()=>{alert("\u{1F4CD} Location access denied. Using Bentonville, AR as default location. You can manually set your pickup location.")},500)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},1e3);break;default:D="GPS error. Using approximate location.",console.log("\u2753 Unknown geolocation error");break}const $=document.createElement("div");if($.innerHTML=`
            <div style="
              position: fixed; 
              top: 80px; 
              left: 50%; 
              transform: translateX(-50%); 
              background: #ef4444; 
              color: white; 
              padding: 12px 20px; 
              border-radius: 8px; 
              font-size: 14px; 
              font-weight: 600; 
              z-index: 1000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            ">
              \u26A0\uFE0F ${D}
            </div>
          `,document.body.appendChild($),setTimeout(()=>{document.body.contains($)&&document.body.removeChild($)},5e3),C.code!==C.TIMEOUT){const q={lat:36.3729,lng:-94.2088};console.log("\u{1F4CD} Using fallback location: Bentonville, AR"),h(q),Je(q),a&&(a.setCenter(q),so(a,q))}},g)}else{console.error("\u274C Geolocation not supported by this browser");const g={lat:36.3729,lng:-94.2088};h(g),Je(g),a&&(a.setCenter(g),so(a,g))}},so=(a,g)=>{if(!window.google||!window.google.maps)return;y&&y.setMap(null);const C=new window.google.maps.Marker({position:g,map:a,draggable:!0,title:"Drag to adjust pickup location",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="20" height="24" viewBox="0 0 20 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 0C4.477 0 0 4.477 0 10c0 10 10 14 10 14s10-4 10-14C20 4.477 15.523 0 10 0z" fill="#ef4444"/>
            <circle cx="10" cy="10" r="4" fill="white"/>
            <circle cx="10" cy="10" r="2" fill="#ef4444"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(20,24),anchor:new window.google.maps.Point(10,24)}});C.addListener("dragstart",()=>{console.log("\u{1F4CD} Adjusting pickup location..."),pe("\u{1F4CD} Drag the pin to adjust pickup location","info")}),C.addListener("dragend",D=>{const $={lat:D.latLng.lat(),lng:D.latLng.lng()};console.log("\u{1F4CD} New pickup location:",$),Je($),h($),new window.google.maps.Geocoder().geocode({location:$},(le,ue)=>{if(ue==="OK"&&le[0]){const fe=le[0].formatted_address;console.log("\u{1F4CD} Pickup address updated:",fe),pe(`\u{1F4CD} Pickup set to: ${fe}`,"success")}}),u&&(po($,u),xt($,u,F))}),f(C)},Ur=a=>{if(!ee)return;const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};ee.getPlacePredictions(g,(C,D)=>{if(D===window.google.maps.places.PlacesServiceStatus.OK&&C){const $=C.map(q=>({place_id:q.place_id,description:q.description,main_text:q.structured_formatting.main_text,secondary_text:q.structured_formatting.secondary_text||""}));V($),I(!0)}else V([]),I(!1)})},qr=a=>{if(!ee)return;const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};ee.getPlacePredictions(g,(C,D)=>{if(D===window.google.maps.places.PlacesServiceStatus.OK&&C){const $=C.map(q=>({place_id:q.place_id,description:q.description,main_text:q.structured_formatting.main_text,secondary_text:q.structured_formatting.secondary_text||""}));H($),Y(!0)}else H([]),Y(!1)})},jo=a=>{v(a.description),Y(!1),new window.google.maps.places.PlacesService(s).getDetails({placeId:a.place_id,fields:["geometry","name","formatted_address"]},(C,D)=>{if(D===window.google.maps.places.PlacesServiceStatus.OK&&C.geometry){const $={lat:C.geometry.location.lat(),lng:C.geometry.location.lng()};x($),vt($),s&&p&&(co(s,$,C.name),po(p,$),xt(p,$,F))}})},co=(a,g,C)=>{!window.google||!window.google.maps||new window.google.maps.Marker({position:g,map:a,title:C,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="12" height="12" fill="#1f2937" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(16,16),anchor:new window.google.maps.Point(8,8)}})},po=(a,g)=>{if(!a||!s||!window.google||!window.google.maps)return;const C=new window.google.maps.DirectionsService,D=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#3b82f6",strokeWeight:4,strokeOpacity:.9}});D.setMap(s),Ye&&Ye.setMap(null),J(D),console.log("\u{1F6E3}\uFE0F Processing stops for route:",Ee.map(le=>({address:le.address,confirmed:le.confirmed,hasCoords:!!le.coordinates})));const $=Ee.filter(le=>le.confirmed&&le.coordinates).map(le=>({location:le.coordinates,stopover:!0}));console.log("\u{1F3AF} Valid waypoints for route:",$.length),console.log("\u{1F3AF} WAYPOINT DETAILS:",$);const q={origin:a,destination:g,travelMode:window.google.maps.TravelMode.DRIVING};$.length>0?(q.waypoints=$,q.optimizeWaypoints=!1,console.log("\u2705 ADDING",$.length,"WAYPOINTS TO ROUTE REQUEST")):console.log("\u26A0\uFE0F NO WAYPOINTS - Direct route only"),C.route(q,(le,ue)=>{if(ue==="OK"){D.setDirections(le);const fe=new window.google.maps.LatLngBounds;fe.extend(a),fe.extend(g),$.forEach(Re=>{Re.location&&fe.extend(Re.location)}),s.fitBounds(fe,{padding:80}),console.log(`\u{1F5FA}\uFE0F Route calculated with ${$.length} stops`)}else console.error("Route calculation failed:",ue)})},fi=(a,g)=>{if(!a||!g||!s||!window.google||!window.google.maps){console.log("\u274C Cannot show driver directions - missing required data");return}const C=new window.google.maps.DirectionsService,D=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#22c55e",strokeOpacity:.8,strokeWeight:4}});D.setMap(s);const $={origin:a,destination:g,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!1,avoidHighways:!1,avoidTolls:!1};console.log("\u{1F5FA}\uFE0F Calculating driver route from:",a,"to rider:",g),C.route($,(q,le)=>{var ue,fe;if(le==="OK"){D.setDirections(q);const Re=new window.google.maps.LatLngBounds;Re.extend(a),Re.extend(g),s.fitBounds(Re,{padding:80});const At=q.routes[0].legs[0],be=((ue=At.duration)==null?void 0:ue.text)||"Unknown",ze=((fe=At.distance)==null?void 0:fe.text)||"Unknown";console.log(`\u2705 Driver route calculated: ${ze}, ${be}`),typeof Xt=="function"&&Xt(be),typeof Lo=="function"&&Lo(ze)}else console.error("\u274C Driver route calculation failed:",le)})},xt=async(a,g,C)=>{if(!!a)try{const D=Ee.filter(we=>we.confirmed&&we.coordinates).map(we=>we.coordinates),$=await fetch(ie("api/rides/estimate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pickup:a,destination:g,rideType:C,stops:D})}).catch(we=>(console.warn("Fare estimate fetch failed:",we),null));if($&&$.ok){const we=await $.json().catch(Ri=>(console.warn("Fare estimate JSON parse failed:",Ri),null));if(we&&we.success&&we.fareEstimate){m(we.fareEstimate),we.fareEstimate.surge?X({isActive:we.fareEstimate.surge.isActive,multiplier:we.fareEstimate.surge.multiplier,factors:we.fareEstimate.surge.factors||[],demandLevel:we.fareEstimate.surge.demandLevel,availableDrivers:we.fareEstimate.surge.availableDrivers,pendingRequests:we.fareEstimate.surge.pendingRequests,amount:we.fareEstimate.surge.amount}):X(null),Uo(a,g);return}}console.log(`\u{1F4B0} Using fallback fare calculation with ${Ee.length} stops`);let q=0,le=a;const ue=Ee.filter(we=>we.confirmed&&we.coordinates);console.log(`\u{1F6E3}\uFE0F Calculating fare for ${ue.length} confirmed stops:`,ue.map(we=>we.address));for(const we of ue){const Ri=xi(le.lat,le.lng,we.coordinates.lat,we.coordinates.lng);console.log(`\u{1F4CF} Distance to "${we.address}": ${Ri.toFixed(2)} km`),q+=Ri,le=we.coordinates}const fe=xi(le.lat,le.lng,g.lat,g.lng);console.log(`\u{1F4CF} Final distance to destination: ${fe.toFixed(2)} km`),q+=fe;const Re=q*.621371,it=Math.max(5,Math.round(Re/.5+3)),At=ue.length*2,be=it+At,ze=Le.find(we=>we.id===C),Ne=ze!=null&&ze.multiplier?2.5*ze.multiplier:2.5,uo=ue.length*1;console.log(`\u{1F4B0} FARE BREAKDOWN:
        \u2022 Total Distance: ${q.toFixed(2)} km (${Re.toFixed(2)} miles)
        \u2022 Base Fare: $${Ne.toFixed(2)}
        \u2022 Distance Fare: $${(Re*1.25).toFixed(2)} (${Re.toFixed(2)} miles \xD7 $1.25)
        \u2022 Time Fare: $${(be*.35).toFixed(2)} (${be.toFixed(1)} min \xD7 $0.35)
        \u2022 Stop Wait Fee: $${uo.toFixed(2)} (${ue.length} stops \xD7 2min \xD7 $0.50/min)
        \u2022 Stop Wait Time: +${At.toFixed(0)} minutes`);const ur={baseFare:Ne,distanceFare:Re*1.25,timeFare:be*.35,stopSurcharge:uo,total:Ne+Re*1.25+be*.35+uo,estimatedMinutes:be,distanceMiles:Re,estimatedDistance:Re,estimatedTravelTime:be,stopCount:ue.length};console.log(`\u{1F4B0} Calculated fare: $${ur.total.toFixed(2)} (${ue.length} stops, ${Re.toFixed(1)} miles, ${be.toFixed(0)} min)`),m(ur),Uo(a,g)}catch(D){console.warn("Fare calculation error, using fallback:",D),Uo(a,g)}},Uo=async(a,g)=>{const C=Ee.filter(ze=>ze.confirmed&&ze.coordinates);let D=6,$=15,q=1,le=!1;try{console.log("\u{1F504} Updating ride options with backend distance calculation...");const Ne=await(await fetch(ie("api/rides/estimate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pickup:a,destination:g,rideType:"standard"})})).json();Ne.success&&Ne.fareEstimate&&(D=Ne.fareEstimate.estimatedDistance||6,$=Ne.fareEstimate.estimatedTravelTime||15,Ne.fareEstimate.surge&&(q=Ne.fareEstimate.surge.multiplier||1,le=Ne.fareEstimate.surge.isActive||!1,console.log(`\u{1F3AF} Backend data: ${D.toFixed(2)} miles, ${$} min, ${q.toFixed(1)}x surge`),X({isActive:Ne.fareEstimate.surge.isActive,multiplier:Ne.fareEstimate.surge.multiplier,factors:Ne.fareEstimate.surge.factors||[],demandLevel:Ne.fareEstimate.surge.demandLevel,availableDrivers:Ne.fareEstimate.surge.availableDrivers,pendingRequests:Ne.fareEstimate.surge.pendingRequests,amount:Ne.fareEstimate.surge.amount})))}catch(ze){console.error("Backend ride option pricing error:",ze)}const ue=C.length*2.5,fe=$+ue,Re={economy:2.1,standard:2.5,xl:3.5,premium:4.5},it={economy:1.15,standard:1.25,xl:1.65,premium:1.85},At={economy:.3,standard:.35,xl:.45,premium:.55},be=Le.map(ze=>{var Pn;const Ne=Re[ze.id]||Re.standard,uo=it[ze.id]||it.standard,ur=At[ze.id]||At.standard,we=C.length*1.5,_n=(Ne+D*uo+fe*ur+we)*q,Ua=(Pn=Pe.corporateDiscount)!=null&&Pn.isActive?_n*(parseFloat(Pe.corporateDiscount.discountPercentage)/100):0,qa=_n-Ua;return{...ze,price:Number(qa.toFixed(2)),hasSurge:le,surgeMultiplier:q,eta:Math.max(3,Math.round(fe+Math.random()*2))}});be.sort((ze,Ne)=>{const uo={economy:1,standard:2,xl:3,premium:4};return(uo[ze.id]||5)-(uo[Ne.id]||5)});for(let ze=1;ze<be.length;ze++)be[ze].price<=be[ze-1].price&&(be[ze].price=Number((be[ze-1].price*1.15).toFixed(2)));Ki(be)},xi=(a,g,C,D)=>{const q=Mt(C-a),le=Mt(D-g),ue=Math.sin(q/2)*Math.sin(q/2)+Math.cos(Mt(a))*Math.cos(Mt(C))*Math.sin(le/2)*Math.sin(le/2),fe=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return 6371*fe},Mt=a=>a*(Math.PI/180),mt=a=>{v(a),a.length>2?qr(a):(H([]),Y(!1))},Hr=async()=>{try{const a=await fetch(ie("api/settings/vehicle-types")).catch(g=>(console.warn("Vehicle types fetch failed:",g),null));if(a&&a.ok){const g=await a.json().catch(C=>(console.warn("Vehicle types JSON parse failed:",C),null));if(g&&g.success&&g.vehicleTypes){const C=g.vehicleTypes.map(D=>({id:D.id,name:D.name,description:D.description,icon:D.icon,price:D.baseFare,eta:5+Math.floor(Math.random()*10),multiplier:D.baseFare/2.5,hasSurge:!1,surgeMultiplier:1}));Ki(C),console.log("\u2705 Loaded vehicle types from API");return}}console.log("\u{1F697} Using default vehicle types")}catch(a){console.warn("Error loading vehicle types, using defaults:",a)}},Vr=async()=>{St(!0);try{const a=await fetch(ie("api/users/550e8400-e29b-41d4-a716-446655440000/payment-methods"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}}).catch(C=>(console.warn("Payment methods fetch failed:",C),null));if(a&&a.ok){const C=await a.json().catch(D=>(console.warn("Payment methods JSON parse failed:",D),null));if(C&&C.paymentMethods){const D=C.paymentMethods.map(q=>({id:q.id,name:`${(q.brand||"Card").toUpperCase()} ****${q.last4||"****"}`,details:`Expires ${q.exp_month||"12"}/${q.exp_year||"25"}`,icon:Ke(q.brand),isDefault:q.isDefault||!1,type:q.type||"credit"}));M(D);const $=D.find(q=>q.isDefault);$?de($):D.length>0&&de(D[0]);return}}console.log("\u{1F4B3} Using demo payment methods");const g=[{id:"demo_1",name:"Visa ****1234",details:"Expires 12/25",icon:"\u{1F4B3}",isDefault:!0,type:"credit"},{id:"demo_2",name:"Apple Pay",details:"iPhone 15 Pro",icon:"\u{1F34E}",isDefault:!1,type:"apple_pay"},{id:"demo_3",name:"Google Pay",details:"Gmail Account",icon:"\u{1F535}",isDefault:!1,type:"google_pay"}];M(g),de(g[0])}catch(a){console.warn("Error loading payment methods, using fallback:",a);const g=[{id:"demo_1",name:"Visa ****1234",details:"Expires 12/25",icon:"\u{1F4B3}",isDefault:!0,type:"credit"},{id:"demo_2",name:"Apple Pay",details:"iPhone 15 Pro",icon:"\u{1F34E}",isDefault:!1,type:"apple_pay"}];M(g),de(g[0])}finally{St(!1)}},Ke=a=>{switch(a==null?void 0:a.toLowerCase()){case"visa":return"\u{1F4B3}";case"mastercard":return"\u{1F4B3}";case"amex":return"\u{1F4B3}";case"discover":return"\u{1F4B3}";case"apple_pay":return"\u{1F34E}";case"google_pay":return"\u{1F535}";default:return"\u{1F4B3}"}},Te=a=>{const g=a.replace(/\s+/g,"").replace(/[^0-9]/gi,""),C=g.match(/\d{4,16}/g),D=C&&C[0]||"",$=[];for(let q=0,le=D.length;q<le;q+=4)$.push(D.substring(q,q+4));return $.length?$.join(" "):g},Co=a=>{const g=a.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return g.length>=2?g.substring(0,2)+"/"+g.substring(2,4):g},zo=async a=>{a.preventDefault(),St(!0);try{if(!window.stripe)throw new Error("Stripe not initialized");const g=await fetch(ie("api/users/550e8400-e29b-41d4-a716-446655440000/setup-intent"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({paymentMethodTypes:["card"]})});if(!g.ok)throw new Error("Failed to create setup intent");const{client_secret:C}=await g.json(),{setupIntent:D,error:$}=await window.stripe.confirmCardSetup(C,{payment_method:{card:{number:ft.cardNumber.replace(/\s/g,""),exp_month:parseInt(ft.expiryDate.split("/")[0]),exp_year:parseInt("20"+ft.expiryDate.split("/")[1]),cvc:ft.cvv},billing_details:{name:ft.name}}});if($)throw new Error($.message);const q=await fetch(ie("api/users/550e8400-e29b-41d4-a716-446655440000/payment-methods"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({paymentMethodId:D.payment_method,isDefault:U.length===0})});if(!q.ok)throw new Error("Failed to save payment method");const le=await q.json();M(ue=>[...ue,le.paymentMethod]),Zt({cardNumber:"",expiryDate:"",cvv:"",name:"",type:"credit"}),ae("payments"),pe("\u{1F4B3} Card added successfully!","success")}catch(g){console.error("Error adding card:",g),pe("\u274C Failed to add card: "+g.message,"error")}finally{St(!1)}},mi=async a=>{Ht(a),ae("add-wallet")},qo=async(a,g)=>{St(!0);try{let C,D,$;if(a==="apple_pay"){if(C="Apple Pay",D="\u{1F34E}",$=g.deviceName||"Touch ID / Face ID",!g.appleId||!g.deviceName)throw new Error("Apple ID and device information required");console.log("\u{1F34E} Setting up Apple Pay with:",g)}else if(a==="google_pay"){if(C="Google Pay",D="\u{1F535}",$=g.googleEmail||"Gmail Account",!g.googleEmail)throw new Error("Google account email required");console.log("\u{1F535} Setting up Google Pay with:",g)}if(U.find(ue=>ue.name===C))throw new Error(`${C} is already added`);await new Promise(ue=>setTimeout(ue,2e3));const le={id:`pm_${a}_${Date.now()}`,name:C,details:$,icon:D,isDefault:g.makeDefault||U.length===0,type:a};M(ue=>[...ue,le]),le.isDefault&&(de(le),M(ue=>ue.map(fe=>fe.id===le.id?fe:{...fe,isDefault:!1}))),pe(`${C} added successfully!`,"success"),ae("payments")}catch(C){console.error(`Error adding ${a}:`,C),pe(`Failed to add ${a}: ${C.message}`,"error")}finally{St(!1)}},Gr=async a=>{if(!!confirm("Are you sure you want to delete this payment method?")){St(!0);try{const g=U.find(C=>C.id===a);if(M(C=>C.filter(D=>D.id!==a)),(K==null?void 0:K.id)===a){const C=U.filter(D=>D.id!==a);de(C[0]||null)}pe(`${(g==null?void 0:g.name)||"Payment method"} deleted successfully`,"success")}catch(g){console.error("Error deleting payment method:",g),pe("Failed to delete payment method. Please try again.","error")}finally{St(!1)}}},pe=(a,g="info")=>{const C={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"},D=document.createElement("div");D.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${C[g]};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,D.textContent=a,document.body.appendChild(D),setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},4e3)},Zi=async()=>{var a,g,C,D,$,q,le;Qe("requesting"),lt("searching"),He(!0);try{if(!Ie||!at||!c.trim())throw new Error("Please set both pickup and destination locations");if(!_e)throw new Error("Please select a vehicle type");console.log("\u{1F697} Booking ride with data:",{pickup:Ie,destination:at,rideType:_e.id,paymentMethod:K==null?void 0:K.id});const ue=await fetch(ie("api/rides/request"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({rider_id:(r==null?void 0:r.id)||"550e8400-e29b-41d4-a716-446655440002",pickup:{address:"Current Location",coordinates:Ie},destination:{address:c,coordinates:at},rideType:_e.id,paymentMethodId:K==null?void 0:K.id,scheduledTime:null,riderPreferences:{music:Pe.music,conversation:Pe.conversation,temperature:Pe.temperature}})}).catch(be=>{throw console.error("Fetch error:",be),new Error("Network connection failed")});console.log("\u{1F4E1} Ride request response status:",ue.status);const fe=await ue.text().catch(be=>{throw console.error("Failed to read response text:",be),new Error("Invalid server response")});if(console.log("\u{1F4E1} Raw response:",fe),!ue.ok){let be="Failed to request ride";try{const ze=JSON.parse(fe);be=ze.message||ze.error||be}catch(ze){console.error("Failed to parse error response:",ze),be=`Server error (${ue.status})`}throw new Error(be)}let Re;try{Re=JSON.parse(fe)}catch(be){throw console.error("Failed to parse successful response:",be),new Error("Invalid response from server")}let it=null;try{(K==null?void 0:K.type)==="apple_pay"?it=await Qr(((a=Re.ride)==null?void 0:a.estimatedFare)||((g=Re.ride)==null?void 0:g.estimated_fare)||_e.price):(K==null?void 0:K.type)==="google_pay"?it=await en(((C=Re.ride)==null?void 0:C.estimatedFare)||((D=Re.ride)==null?void 0:D.estimated_fare)||_e.price):(console.log("Processing traditional card payment..."),await new Promise(be=>setTimeout(be,1500)),it={success:!0,paymentId:"pm_"+Date.now()})}catch(be){console.error("Payment processing error:",be),it={success:!1,error:be.message}}if(!it||!it.success)throw new Error("Payment failed: "+((it==null?void 0:it.error)||"Unknown payment error"));const At={id:(($=Re.ride)==null?void 0:$.id)||`ride_${Date.now()}`,pickup:Ie,destination:at,vehicle:_e,fare:((q=Re.ride)==null?void 0:q.estimated_fare)||((le=Re.ride)==null?void 0:le.estimatedFare)||_e.price,paymentMethod:(K==null?void 0:K.type)||ce,paymentId:it.paymentId,status:"requested",requestedAt:new Date,pickupAddress:"Current Location",destinationAddress:c};pt(At),Qe("searching"),ae("none"),Gi(be=>({...be,totalRides:be.totalRides+1})),console.log("\u2705 Ride created:",At.id)}catch(ue){console.error("Booking error:",ue);let fe=ue.message||"Unknown error occurred";fe.includes("Failed to fetch")||fe.includes("Network connection failed")?fe="Cannot connect to server. Please check your connection.":fe.includes("JSON")||fe.includes("Invalid response")?fe="Server communication error. Please try again.":fe.includes("500")&&(fe="Server error. Please try again in a moment."),pe("\u274C Booking failed: "+fe,"error"),Qe("idle")}finally{He(!1)}},Ro=async(a,g,C)=>{if(!K){pe("\u274C Please select a payment method","error");return}He(!0);try{const D=await fetch(`/api/rides/${a}/tip`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({tipAmount:g,tipPercentage:C,paymentMethodId:K.id})});if(!D.ok){const q=await D.json();throw new Error(q.error||"Failed to process tip")}const $=await D.json();return pe(`\u2705 $${g.toFixed(2)} tip sent successfully!`,"success"),me&&me.id===a&&pt(q=>({...q,tip:{amount:g,percentage:C,processed:!0}})),$}catch(D){throw console.error("Tip processing error:",D),pe("\u274C Tip failed: "+D.message,"error"),D}finally{He(!1)}},Qi=async(a,g="Rider cancelled")=>{He(!0);try{const C=await fetch(`/api/rides/${a}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({reason:g,userType:"rider"})});if(!C.ok){const $=await C.json();throw new Error($.error||"Failed to cancel ride")}const D=await C.json();return D.cancellation.refundAmount>0?pe(`\u2705 Ride cancelled. $${D.cancellation.refundAmount} refund processed.`,"success"):pe(`\u26A0\uFE0F Ride cancelled. Cancellation fee: $${D.cancellation.cancellationFee}`,"warning"),pt(null),Qe("idle"),ae("none"),D}catch(C){throw console.error("Cancellation error:",C),pe("\u274C Cancellation failed: "+C.message,"error"),C}finally{He(!1)}},Ho=a=>{E(a),a.trim().length>2?Ur(a.trim()):(V([]),I(!1))},Fo=a=>{E(a.main_text),I(!1),new window.google.maps.Geocoder().geocode({placeId:a.place_id},(C,D)=>{if(D==="OK"&&C[0]){const $={lat:C[0].geometry.location.lat(),lng:C[0].geometry.location.lng()};console.log("\u{1F4CD} New pickup location from address:",$),Je($),h($),s&&(so(s,$),s.setCenter($)),u&&(po($,u),xt($,u,F)),pe(`\u{1F4CD} Pickup set to: ${a.description}`,"success")}})},Vo=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){pe("\u274C Voice recognition not supported in this browser","error");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",g.onstart=()=>{console.log("\u{1F3A4} Pickup voice recognition listening..."),pe("\u{1F3A4} Say your pickup address...","info")},g.onresult=C=>{const D=C.results[0][0].transcript.trim();console.log("\u{1F5E3}\uFE0F Pickup voice input:",D),E(D),Ho(D)},g.onerror=C=>{console.error("Pickup voice recognition error:",C.error),pe("\u274C Voice recognition failed","error")},g.onend=()=>{console.log("\u{1F3A4} Pickup voice recognition ended")},g.start()},er=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice recognition not supported in this browser");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",g.onstart=()=>{console.log("\u{1F3A4} Hey Pi listening...");const C=document.querySelector('[title="Hey Pi - Voice Command"]');C&&(C.style.color="#ef4444",C.style.animation="pulse 1s infinite")},g.onresult=C=>{const D=C.results[0][0].transcript.toLowerCase().trim();console.log("\u{1F5E3}\uFE0F Voice command:",D),D.includes("hey pi")||D.includes("hey pie")?Zr(D):(v(D),mt(D))},g.onerror=C=>{console.error("Voice recognition error:",C.error),tr()},g.onend=()=>{console.log("\u{1F3A4} Voice recognition ended"),tr()},g.start()},Yr=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice recognition not supported in this browser. Please type your address instead.");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",Jt(!0),g.onstart=()=>{console.log("\u{1F3A4} Listening for stop address...")},g.onresult=C=>{const D=C.results[0][0].transcript.trim();console.log("\u{1F5E3}\uFE0F Stop address heard:",D),Ct(D),ee&&D&&ee.getPlacePredictions({input:D,types:["establishment","geocode"],componentRestrictions:{country:"us"},locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0},($,q)=>{if(q===window.google.maps.places.PlacesServiceStatus.OK&&$&&$.length>0){const le=$[0];Ct(le.description),console.log("\u{1F4CD} Voice input matched to:",le.description)}})},g.onerror=C=>{console.error("Voice recognition error:",C.error),Jt(!1),C.error==="no-speech"?alert("No speech detected. Please try again or type your address."):C.error==="not-allowed"&&alert("Microphone access denied. Please enable microphone permissions and try again.")},g.onend=()=>{console.log("\u{1F3A4} Voice recognition ended"),Jt(!1)},g.start()},Jr=a=>{if(console.log("\u{1F50D} fetchStopSuggestions called with:",a),!ee){console.log("\u274C No autocompleteService available");return}const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};console.log("\u{1F50D} Making Google Places request..."),ee.getPlacePredictions(g,(C,D)=>{if(console.log("\u{1F50D} Google Places response:",{status:D,predictions:C==null?void 0:C.length}),D===window.google.maps.places.PlacesServiceStatus.OK&&C){const $=C.map(q=>({place_id:q.place_id,description:q.description,main_text:q.structured_formatting.main_text,secondary_text:q.structured_formatting.secondary_text||""}));console.log("\u2705 Setting stop suggestions:",$.length,"items"),vo($),Kt(!0)}else console.log("\u274C No predictions or error:",D),vo([]),Kt(!1)})},Kr=a=>{console.log("\u{1F50D} Stop input changed:",a),Ct(a),a.length>2?(console.log("\u{1F50D} Fetching stop suggestions for:",a),Jr(a)):(vo([]),Kt(!1))},Xr=a=>{Ct(a.description),Kt(!1)},tr=()=>{const a=document.querySelector('[title="Hey Pi - Voice Command"]');a&&(a.style.color="#3b82f6",a.style.animation="none")},Zr=a=>{if(console.log("\u{1F916} Hey Pi processing:",a),a.includes("take me home"))v("Home"),mt("Home");else if(a.includes("take me to work"))v("Work"),mt("Work");else if(a.includes("airport"))v("Airport"),mt("Airport");else if(a.includes("book a ride"))c.trim()&&p?Zi():alert("Please set a destination first");else if(a.includes("show me nearby"))ko(s);else{const g=a.replace(/hey pi,?\s*/i,"").replace(/take me to\s*/i,"");g&&(v(g),mt(g))}},Qr=async a=>{try{if(!window.ApplePaySession)throw new Error("Apple Pay not available on this device");const g={countryCode:"US",currencyCode:"USD",supportedNetworks:["visa","masterCard","amex"],merchantCapabilities:["supports3DS"],total:{label:"Ride Payment",amount:(a||0).toString()}},C=new window.ApplePaySession(3,g);return new Promise((D,$)=>{const q=setTimeout(()=>{C.abort(),$(new Error("Apple Pay timeout"))},3e4);C.onvalidatemerchant=async le=>{try{const ue=await fetch(ie("api/payments/apple-pay/validate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({validationURL:le.validationURL})}).then(fe=>fe.json()).catch(fe=>(console.warn("Apple Pay validation failed:",fe),{success:!1}));ue.success!==!1?C.completeMerchantValidation(ue):(C.abort(),$(new Error("Merchant validation failed")))}catch(ue){C.abort(),$(ue)}},C.onpaymentauthorized=async le=>{try{const ue=await fetch(ie("api/payments/apple-pay/process"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment:le.payment,amount:a})}).then(fe=>fe.json()).catch(fe=>(console.warn("Apple Pay processing failed:",fe),{success:!1,error:"Processing failed"}));clearTimeout(q),ue.success?(C.completePayment(window.ApplePaySession.STATUS_SUCCESS),D(ue)):(C.completePayment(window.ApplePaySession.STATUS_FAILURE),$(new Error(ue.error||"Payment failed")))}catch(ue){clearTimeout(q),C.completePayment(window.ApplePaySession.STATUS_FAILURE),$(ue)}},C.oncancel=()=>{clearTimeout(q),$(new Error("Payment cancelled by user"))},C.begin()})}catch(g){throw console.error("Apple Pay error:",g),g}},en=async a=>{try{if(!window.google||!window.google.payments)throw new Error("Google Pay not available on this device");const g=new window.google.payments.api.PaymentsClient({environment:"TEST"}),C={apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["VISA","MASTERCARD","AMEX"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe","stripe:version":"2020-08-27","stripe:publishableKey":"pk_test_51S1f9lHNayezoWpbNnfXsC91OeQIjkLTYo6Ph6t5ALBB1nVTHrwH6qmszjtZxCxX2uPqz7cNv6IoFWpvwUHsDJWJ00fCxrfblx"}}}],merchantInfo:{merchantId:"merchant-id",merchantName:"\u03C0 Ride App"},transactionInfo:{totalPriceStatus:"FINAL",totalPrice:(a||0).toString(),currencyCode:"USD"}},D=await g.loadPaymentData(C).catch(q=>{throw console.warn("Google Pay load failed:",q),new Error("Failed to load Google Pay")}),$=await fetch(ie("api/payments/google-pay/process"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentData:D,amount:a})}).then(q=>q.json()).catch(q=>(console.warn("Google Pay processing failed:",q),{success:!1,error:"Processing failed"}));if(!$.success)throw new Error($.error||"Google Pay processing failed");return $}catch(g){throw console.error("Google Pay payment error:",g),g}};return t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',display:"flex",flexDirection:"column"},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:[e("button",{onClick:()=>xe(!he),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>a.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:a=>a.target.style.background="rgba(255,255,255,0.1)",children:e(Bd,{size:20})}),t("div",{style:{textAlign:"center"},children:[e("h1",{style:{fontSize:"48px",fontWeight:"700",margin:0},children:"\u03C0"}),e("p",{style:{fontSize:"16px",opacity:.8,margin:0,color:"#3b82f6"},children:"Your VIP Ride"})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e("button",{onClick:()=>Ze(!Ue),style:{width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>a.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:a=>a.target.style.background="rgba(255,255,255,0.1)",children:e(je,{size:18})})})]}),t("div",{style:{flex:1,padding:"16px",overflow:"auto"},onClick:a=>{a.target===a.currentTarget&&(he&&xe(!1),Ue&&Ze(!1),Me!=="none"&&ae("none"))},children:[t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e("h2",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Where to?"}),t("div",{style:{position:"relative",marginBottom:"12px"},children:[e(Ge,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#ef4444"}}),e("input",{type:"text",value:z,onChange:a=>Ho(a.target.value),placeholder:"Drag the Red Pin or enter pickup address...",style:{width:"100%",padding:"10px 44px 10px 40px",border:"2px solid #e5e7eb",borderRadius:"10px",fontSize:"12px",outline:"none",backgroundColor:"#f9fafb"},onFocus:a=>{a.target.style.borderColor="#ef4444"},onBlur:a=>{a.target.style.borderColor="#e5e7eb",setTimeout(()=>I(!1),200)}}),e(pn,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"#3b82f6",cursor:"pointer"},onClick:()=>Vo()}),re&&B.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #ef4444",borderTop:"none",borderRadius:"0 0 10px 10px",boxShadow:"0 4px 12px rgba(239,68,68,0.15)",zIndex:10,maxHeight:"200px",overflowY:"auto"},children:B.map(a=>t("div",{onClick:()=>Fo(a),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #fef2f2",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#fef2f2",onMouseLeave:g=>g.currentTarget.style.backgroundColor="white",children:[e(Ge,{size:16,color:"#ef4444"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"12px"},children:a.main_text}),a.secondary_text&&e("div",{style:{fontSize:"10px",color:"#6b7280"},children:a.secondary_text})]})]},a.place_id))})]}),t("div",{style:{position:"relative"},children:[e(ji,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:c,onChange:a=>mt(a.target.value),placeholder:"Tell me where you'd like to go...",style:{width:"100%",padding:"10px 80px 10px 40px",border:"2px solid #e5e7eb",borderRadius:"10px",fontSize:"12px",outline:"none"},onFocus:a=>{a.target.style.borderColor="#3b82f6",v(""),x(null),vt(null),m(null),Y(!1)},onBlur:()=>setTimeout(()=>Y(!1),200)}),t("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"10px"},children:[e("div",{style:{color:"#ef4444",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},onClick:()=>{console.log("\u{1F5FA}\uFE0F Manual Google Maps refresh activated"),gi()},children:"\u{1F504}"}),e(pn,{size:16,style:{color:"#3b82f6",cursor:"pointer"},onClick:()=>er()})]}),W&&A.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 12px 12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:10,maxHeight:"200px",overflowY:"auto"},children:A.map(a=>t("div",{onClick:()=>jo(a),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#f8fafc",onMouseLeave:g=>g.currentTarget.style.backgroundColor="white",children:[e(Ge,{size:16,color:"#6b7280"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937"},children:a.main_text}),a.secondary_text&&e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.secondary_text})]})]},a.place_id))})]})]}),t("div",{style:{height:"300px",backgroundColor:"#e5e7eb",borderRadius:"16px",marginBottom:"16px",overflow:"hidden",position:"relative"},children:[e("div",{ref:i,style:{width:"100%",height:"100%"}}),!w&&e("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center"},children:t("div",{children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("div",{children:"Loading Map..."})]})})]}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("button",{onClick:()=>Gt(!Vt),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"transparent",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",padding:"8px 0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F5D3}\uFE0F"}),e("span",{children:"Schedule Your Ride"})]}),e("span",{style:{fontSize:"18px",transform:Vt?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:"\u25BC"})]}),Vt&&t("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Select Date & Time"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e("div",{children:e("input",{type:"date",value:R,onChange:a=>j(a.target.value),min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb"})}),e("div",{children:e("input",{type:"time",value:te,onChange:a=>se(a.target.value),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb"})})]})]}),R&&te&&t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Choose Your Ride"}),e("div",{style:{marginBottom:"16px"},children:Le.map(a=>t("div",{onClick:()=>Ae(a.id),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",border:`2px solid ${G===a.id?"#3b82f6":"#e5e7eb"}`,borderRadius:"8px",marginBottom:"8px",cursor:"pointer",backgroundColor:G===a.id?"#eff6ff":"white",transition:"all 0.2s ease"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("img",{src:a.icon,alt:`${a.name} car`,style:{width:"32px",height:"32px",objectFit:"contain"}}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",color:"#1f2937"},children:a.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.description})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"14px"},children:["$",a.price.toFixed(2)]}),t("div",{style:{fontSize:"11px",color:"#6b7280"},children:[a.eta," min"]})]})]},`scheduled-${a.id}`))}),e("button",{onClick:()=>{var a;_o(!0),alert(`Ride scheduled for ${R} at ${te} with ${(a=Le.find(g=>g.id===G))==null?void 0:a.name}`),Gt(!1)},disabled:!R||!te||!G,style:{width:"100%",padding:"16px",backgroundColor:!R||!te||!G?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:!R||!te||!G?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:"\u{1F4C5} Schedule Ride"})]}),ut&&t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#dcfce7",borderRadius:"8px",border:"1px solid #16a34a"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#16a34a",marginBottom:"4px"},children:"\u2705 Ride Scheduled"}),t("div",{style:{fontSize:"12px",color:"#15803d"},children:[R," at ",te," \u2022 ",(yi=Le.find(a=>a.id===G))==null?void 0:yi.name]}),e("button",{onClick:()=>{_o(!1),j(""),se(""),Ae("standard")},style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"transparent",border:"1px solid #16a34a",borderRadius:"6px",color:"#16a34a",fontSize:"12px",cursor:"pointer"},children:"Cancel Schedule"})]})]})]}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("button",{onClick:()=>$e(!Ve),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"transparent",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",padding:"8px 0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F6E3}\uFE0F"}),e("span",{children:"Add a Stop"})]}),e("span",{style:{fontSize:"18px",transform:Ve?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:"\u25BC"})]}),Ve&&t("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Add Stop Location"}),t("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e("input",{type:"text",value:Yt,onChange:a=>Kr(a.target.value),placeholder:"Enter address or business name...",style:{width:"100%",padding:"12px 50px 12px 12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>{a.target.style.borderColor="#e5e7eb",setTimeout(()=>Kt(!1),200)}}),e("button",{onClick:Yr,style:{position:"absolute",right:"8px",padding:"8px",backgroundColor:De?"#ef4444":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",transition:"background-color 0.2s"},title:De?"Listening...":"Voice input",children:De?"\u{1F534}":"\u{1F3A4}"})]}),Nr&&Wt.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:Wt.map((a,g)=>t("button",{onClick:()=>Xr(a),style:{width:"100%",padding:"12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",borderBottom:g<Wt.length-1?"1px solid #f3f4f6":"none"},onMouseEnter:C=>C.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:C=>C.currentTarget.style.backgroundColor="transparent",children:[e("div",{style:{fontWeight:"600",fontSize:"14px",color:"#374151"},children:a.main_text}),e("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:a.secondary_text})]},a.place_id))})]}),Ee.map((a,g)=>t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{backgroundColor:"#000",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600"},children:g+1}),e("span",{style:{fontSize:"14px",color:"#374151"},children:a.address})]}),e("button",{onClick:()=>{Bt(Ee.filter(D=>D.id!==a.id));const C=Ee.findIndex(D=>D.id===a.id);C!==-1&&Be[C]&&(Be[C].setMap(null),Po(D=>D.filter(($,q)=>q!==C))),console.log(`\u{1F4CD} Removed stop: ${a.address}`),p&&u&&(po(p,u),xt(p,u,F))},style:{padding:"4px",backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"14px"},children:"\u2715"})]},a.id)),t("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[Yt&&e("button",{onClick:()=>{if(Yt.trim()){const a=Yt.trim();Ct(""),window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({address:a},(C,D)=>{if(D==="OK"&&C&&C[0]){const $=C[0].geometry.location,q=Ee.length+1,le={lat:$.lat(),lng:$.lng()},ue={id:Date.now().toString(),address:a,coordinates:le,confirmed:!0};Bt([...Ee,ue]);const fe=new window.google.maps.Marker({position:$,map:s,title:`Stop ${q}: ${a}`,icon:{url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                                    <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                      <circle cx="16" cy="16" r="14" fill="#000000" stroke="#ffffff" stroke-width="2"/>
                                      <text x="16" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">${q}</text>
                                    </svg>
                                  `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}});Po(Re=>[...Re,fe]),console.log(`\u{1F4CD} Added stop ${q} marker:`,a)}})}},style:{padding:"12px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u2713 Confirm Stop"}),Ee.length>0&&Ee.length<3&&e("button",{onClick:()=>{Ct("")},style:{padding:"12px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"+ Add Another Stop"})]}),Ee.length>=3&&e("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#fef3c7",borderRadius:"6px",fontSize:"12px",color:"#92400e",textAlign:"center"},children:"Maximum 3 stops allowed"})]})]}),c&&ne&&t("div",{style:{backgroundColor:ne.isActive?"#fef2f2":"#f0f9ff",border:`2px solid ${ne.isActive?"#fca5a5":"#93c5fd"}`,borderRadius:"16px",padding:"16px",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"20px"},children:ne.isActive?"\u{1F525}":"\u{1F48E}"}),e("h3",{style:{fontSize:"16px",fontWeight:"700",color:ne.isActive?"#dc2626":"#2563eb",margin:0},children:ne.isActive?"Surge Pricing Active":"Standard Pricing"})]}),t("div",{style:{backgroundColor:ne.isActive?"#dc2626":"#10b981",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"14px",fontWeight:"700"},children:[ne.multiplier.toFixed(1),"x"]})]}),t("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"8px"},children:[e("strong",{children:"Demand Level:"})," ",ne.demandLevel," \u2022",e("strong",{children:" Drivers in your Area:"})," ",ne.availableDrivers," \u2022",e("strong",{children:" Pending Requests:"})," ",ne.pendingRequests]}),ne.factors&&ne.factors.length>0&&t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[e("strong",{children:"Surge Factors:"})," ",ne.factors.join(" \u2022 ")]}),ne.amount>0&&t("div",{style:{marginTop:"8px",fontSize:"12px",color:"#dc2626",fontWeight:"600"},children:["+$",ne.amount.toFixed(2)," surge added to base fare"]})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Choose your ride"}),Le.map(a=>{var g;return t("div",{onClick:()=>{b(a.id),li(a),console.log("Vehicle selected:",a),Ie&&u&&xt(Ie,u,a.id)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:`2px solid ${F===a.id?"#3b82f6":"#e5e7eb"}`,borderRadius:"12px",marginBottom:"12px",cursor:"pointer",backgroundColor:F===a.id?"#eff6ff":"white",position:"relative"},children:[a.hasSurge&&t("div",{style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#ef4444",color:"white",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:["\u{1F525} ",(g=a.surgeMultiplier)==null?void 0:g.toFixed(1),"x"]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("img",{src:a.icon,alt:`${a.name} car`,style:{width:"40px",height:"40px",objectFit:"contain"}}),t("div",{children:[t("div",{style:{fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[a.name,a.hasSurge&&e("span",{style:{fontSize:"12px",color:"#ef4444"},children:"\u26A1"})]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.description}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[a.eta," min away"]})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontWeight:"700",color:a.hasSurge?"#ef4444":"#1f2937",fontSize:"16px"},children:["$",a.price.toFixed(2)]}),a.hasSurge&&a.surgeMultiplier&&a.surgeMultiplier>1&&e("div",{style:{fontSize:"10px",color:"#ef4444",fontWeight:"500"},children:"High demand"})]})]},a.id)})]}),F&&t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F525}"})," Surge Pricing Info"]}),e("div",{style:{padding:"4px 8px",backgroundColor:"#eff6ff",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#1d4ed8"},children:"Live"})]}),e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Current Surge Level"}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[(Go=Le.find(a=>a.id===F))==null?void 0:Go.name," vehicle type"]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:(or=Le.find(a=>a.id===F))!=null&&or.hasSurge?"#ef4444":"#10b981"},children:(Yo=Le.find(a=>a.id===F))!=null&&Yo.hasSurge?`${(ir=(Ao=Le.find(a=>a.id===F))==null?void 0:Ao.surgeMultiplier)==null?void 0:ir.toFixed(1)}x`:"1.0x"}),e("div",{style:{fontSize:"12px",color:(Io=Le.find(a=>a.id===F))!=null&&Io.hasSurge?"#ef4444":"#10b981",fontWeight:"600"},children:(rr=Le.find(a=>a.id===F))!=null&&rr.hasSurge?"High Demand":"Normal"})]})]})}),((Jo=Le.find(a=>a.id===F))==null?void 0:Jo.hasSurge)&&t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Surge Factors:"}),t("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F550} Peak Hours"}),e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F327}\uFE0F Weather"}),e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F4CD} High Demand Area"})]})]}),S?t("div",{style:{fontSize:"14px",marginBottom:"8px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Fare Breakdown:"}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Base Rate (",(nr=Le.find(a=>a.id===F))==null?void 0:nr.name,"):"]}),t("span",{children:["$",(ar=S.baseFare)==null?void 0:ar.toFixed(2)]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Distance (",(lr=S.estimatedDistance)==null?void 0:lr.toFixed(1)," mi):"]}),t("span",{children:["$",(sr=S.distanceFare)==null?void 0:sr.toFixed(2)]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Time (",S.estimatedTravelTime," min):"]}),t("span",{children:["$",(dr=S.timeFare)==null?void 0:dr.toFixed(2)]})]}),((cr=S.surge)==null?void 0:cr.isActive)&&t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",color:"#ef4444"},children:[t("span",{children:["Surge Premium (",S.surge.multiplier.toFixed(1),"x):"]}),t("span",{children:["+$",(pr=S.surge.amount)==null?void 0:pr.toFixed(2)]})]}),Pe.corporateDiscount&&Pe.corporateDiscount.isActive&&t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",color:"#10b981"},children:[t("span",{children:["Corporate Discount (",Pe.corporateDiscount.discountPercentage,"%):"]}),t("span",{children:["-$",((S.total||0)*(Pe.corporateDiscount.discountPercentage/100)).toFixed(2)]})]}),t("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"8px",display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700"},children:[e("span",{children:"Total Estimated Fare:"}),t("span",{children:["$",(()=>{var C,D;const a=((C=Le.find($=>$.id===F))==null?void 0:C.price)||S.total||0,g=(D=Pe.corporateDiscount)!=null&&D.isActive?a*(Pe.corporateDiscount.discountPercentage/100):0;return(a-g).toFixed(2)})()]})]})]}):e("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"14px"},children:"Select a destination to see fare estimate"}),((bi=Le.find(a=>a.id===F))==null?void 0:bi.hasSurge)&&t("div",{style:{fontSize:"12px",color:"#ef4444",backgroundColor:"#fef2f2",padding:"12px",borderRadius:"8px",marginTop:"12px",border:"1px solid #fecaca",display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"16px"},children:"\u{1F525}"}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:"High demand in your area!"}),e("div",{style:{fontSize:"11px",opacity:.8},children:"Prices are higher than usual due to increased demand"})]})]})]}),K&&t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},onClick:()=>{ae("payments"),xe(!1),Ze(!1)},children:[e("span",{style:{fontSize:"24px"},children:K.icon}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:K.name}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:K.details})]})]}),he&&t("div",{style:{position:"fixed",top:"70px",left:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"200px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Menu"}),e("button",{onClick:()=>xe(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>{ae("trips"),xe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4F1} Recent Trips"}),e("button",{onClick:()=>{ae("places"),xe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F3E0} Saved Places"}),e("button",{onClick:()=>{ae("payments"),xe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4B3} Payment Methods"}),e(Br,{to:"/rider/badge-upload",style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",textDecoration:"none",color:"inherit"},onClick:()=>xe(!1),children:"\u{1F3E2} Corporate Discount"}),e("button",{onClick:()=>{ae("help"),xe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4DE} Help & Support"}),e("button",{onClick:()=>{ae("settings"),xe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u2699\uFE0F Settings"})]})]}),Ue&&t("div",{style:{position:"fixed",top:"70px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Profile"}),e("button",{onClick:()=>Ze(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:ge.profilePicture?"transparent":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600",overflow:"hidden",backgroundImage:ge.profilePicture?`url(${ge.profilePicture})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:!ge.profilePicture&&`${ge.firstName[0]||Pe.firstName[0]}${ge.lastName[0]||Pe.lastName[0]}`}),t("div",{children:[t("div",{style:{fontWeight:"600",fontSize:"16px"},children:[ge.firstName," ",ge.lastName]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#6b7280"},children:[e(oo,{size:14,fill:"#fbbf24",color:"#fbbf24"}),Pe.rating," Rating"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"20px"},children:[t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:Pe.totalRides}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Total Rides"})]}),t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"8px"},children:[t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#3b82f6"},children:["$",Pe.monthlySpending]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Month"})]}),t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#f59e0b"},children:Pe.totalRides>=50?"Platinum":Pe.totalRides>=25?"Gold":Pe.totalRides>=10?"Silver":"Bronze"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Member"})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("button",{onClick:()=>ae("edit-profile"),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F4DD} Edit Profile"}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F3AF} Trip History"}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F514} Notifications"})]})]}),Me==="trips"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Recent Trips"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),ui.length>0?ui.map(a=>t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:a.date}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:a.fare})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#6b7280"},children:[t("span",{children:["\u{1F4CD} ",a.from]}),e("span",{children:"\u2192"}),t("span",{children:["\u{1F3C1} ",a.to]})]}),e("div",{style:{marginTop:"8px"},children:e("button",{onClick:()=>Yi(a),style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Book Again"})})]},a.id)):t("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F697}"}),e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"8px"},children:"No Recent Trips"}),e("div",{style:{fontSize:"14px"},children:"Your ride history will appear here once you take your first trip."})]})]}),Me==="places"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Saved Places"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),Mn.map(a=>e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e2e8f0",cursor:(tt==null?void 0:tt.id)===a.id?"default":"pointer"},onClick:()=>{(tt==null?void 0:tt.id)!==a.id&&(v(a.address),ae("none"),mt(a.address))},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:a.icon}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:a.name}),(tt==null?void 0:tt.id)===a.id?e("input",{type:"text",value:tt.address,onChange:g=>$o(C=>({...C,address:g.target.value})),style:{width:"100%",padding:"8px",border:"2px solid #3b82f6",borderRadius:"6px",fontSize:"14px",outline:"none"},onClick:g=>g.stopPropagation(),autoFocus:!0}):e("div",{style:{fontSize:"14px",color:"#6b7280"},children:a.address})]}),e("div",{style:{display:"flex",gap:"8px"},children:(tt==null?void 0:tt.id)===a.id?t(ve,{children:[e("button",{onClick:g=>{g.stopPropagation(),No(C=>C.map(D=>D.id===tt.id?{...D,address:tt.address.trim()}:D)),$o(null),pe(`\u2705 ${a.name} address updated!`,"success")},style:{padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Save"}),e("button",{onClick:g=>{g.stopPropagation(),$o(null)},style:{padding:"6px 12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]}):t(ve,{children:[e("button",{onClick:g=>{g.stopPropagation(),v(a.address),ae("none"),mt(a.address)},style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Go Here"}),(a.type==="home"||a.type==="work")&&e("button",{onClick:g=>{g.stopPropagation(),$o({id:a.id,address:a.address})},style:{padding:"6px 8px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u270F\uFE0F"}),a.type==="custom"&&e("button",{onClick:g=>{g.stopPropagation(),confirm(`Delete "${a.name}" from saved places?`)&&No(C=>C.filter(D=>D.id!==a.id))},style:{padding:"6px 8px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u{1F5D1}\uFE0F"})]})})]})},a.id)),e("button",{onClick:()=>ae("add-place"),style:{width:"100%",padding:"16px",backgroundColor:"#e2e8f0",border:"2px dashed #9ca3af",borderRadius:"12px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"+ Add New Place"})]}),Me==="add-place"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Add New Place"}),e("button",{onClick:()=>ae("places"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Place Name"}),e("input",{type:"text",value:et.name,onChange:a=>wo(g=>({...g,name:a.target.value})),placeholder:"e.g., Home, Work, Gym",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Address"}),e("input",{type:"text",value:et.address,onChange:a=>wo(g=>({...g,address:a.target.value})),placeholder:"Enter full address",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Icon"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"8px"},children:["\u{1F3E0}","\u{1F3E2}","\u{1F3EB}","\u{1F3E5}","\u{1F3EA}","\u26FD","\u{1F3CB}\uFE0F","\u{1F355}","\u2615","\u2708\uFE0F","\u{1F3AC}","\u2764\uFE0F"].map(a=>e("button",{style:{padding:"12px",fontSize:"20px",backgroundColor:et.icon===a?"#3b82f6":"#f8fafc",border:`2px solid ${et.icon===a?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",cursor:"pointer",color:et.icon===a?"white":"black"},onMouseEnter:g=>{et.icon!==a&&(g.target.style.borderColor="#3b82f6")},onMouseLeave:g=>{et.icon!==a&&(g.target.style.borderColor="#e2e8f0")},onClick:g=>{g.stopPropagation(),wo(C=>({...C,icon:a}))},children:a},a))})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:a=>{a.stopPropagation(),ae("places")},style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:a=>{if(a.stopPropagation(),et.name.trim()&&et.address.trim()){const g={id:Date.now().toString(),name:et.name.trim(),address:et.address.trim(),icon:et.icon,type:"custom"};No(D=>[...D,g]);const C=document.createElement("div");C.innerHTML=`
                        <div style="
                          position: fixed; 
                          top: 80px; 
                          left: 50%; 
                          transform: translateX(-50%); 
                          background: #10b981; 
                          color: white; 
                          padding: 12px 20px; 
                          border-radius: 8px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          z-index: 10000;
                          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                        ">
                          \u2705 "${et.name}" saved successfully!
                        </div>
                      `,document.body.appendChild(C),setTimeout(()=>{document.body.contains(C)&&document.body.removeChild(C)},3e3),wo({name:"",address:"",icon:"\u{1F3E0}"}),ae("places")}else alert("Please fill in both place name and address")},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"white",cursor:"pointer"},children:"Save Place"})]})]})]}),Me==="payments"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Payment Methods"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),Fe?t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:[e("div",{className:"spinner"})," "]}):U.length===0?e("div",{style:{textAlign:"center",color:"#6b7280",padding:"20px"},children:"No payment methods found."}):U.map(a=>e("div",{style:{padding:"16px",backgroundColor:a.isDefault?"#eff6ff":"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:`2px solid ${a.isDefault?"#3b82f6":"#e2e8f0"}`,cursor:"pointer"},onClick:()=>{de(a),ae("none")},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:a.icon}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:a.name}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:a.details})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.isDefault&&e("div",{style:{padding:"4px 8px",backgroundColor:"#10b981",color:"white",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:"Default"}),e("button",{onClick:g=>{g.stopPropagation(),Gr(a.id)},style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Delete"})]})]})},a.id)),t("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>ae("add-card"),style:{width:"100%",padding:"16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F4B3} Add Credit/Debit Card"}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:()=>{zt({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:U.length===0}),mi("apple_pay")},style:{flex:1,padding:"16px",backgroundColor:"#1d1d1f",color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F34E} Apple Pay"}),e("button",{onClick:()=>{zt({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:U.length===0}),mi("google_pay")},style:{flex:1,padding:"16px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F535} Google Pay"})]})]})]}),Me==="add-wallet"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:ce==="apple_pay"?"\u{1F34E} Set up Apple Pay":"\u{1F535} Set up Google Pay"}),e("button",{onClick:()=>ae("payments"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),ce==="apple_pay"&&t("form",{onSubmit:a=>{a.preventDefault(),qo("apple_pay",Qt)},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F34E}"}),e("h4",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"Apple Pay Setup"}),e("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Enter your Apple ID and device information to set up Apple Pay"})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Apple ID Email"}),e("input",{type:"email",value:Qt.appleId,onChange:a=>zt(g=>({...g,appleId:a.target.value})),placeholder:"your.email@icloud.com",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Device Name"}),t("select",{value:Qt.deviceName,onChange:a=>zt(g=>({...g,deviceName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0,children:[e("option",{value:"",children:"Select your device"}),e("option",{value:"iPhone 15 Pro",children:"iPhone 15 Pro"}),e("option",{value:"iPhone 15",children:"iPhone 15"}),e("option",{value:"iPhone 14 Pro",children:"iPhone 14 Pro"}),e("option",{value:"iPhone 14",children:"iPhone 14"}),e("option",{value:"iPhone 13",children:"iPhone 13"}),e("option",{value:"iPhone 12",children:"iPhone 12"}),e("option",{value:"iPad Pro",children:"iPad Pro"}),e("option",{value:"iPad Air",children:"iPad Air"}),e("option",{value:"MacBook Pro",children:"MacBook Pro"}),e("option",{value:"MacBook Air",children:"MacBook Air"}),e("option",{value:"Apple Watch",children:"Apple Watch"})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[e("input",{type:"checkbox",id:"applePayDefault",checked:Qt.makeDefault,onChange:a=>zt(g=>({...g,makeDefault:a.target.checked})),style:{width:"16px",height:"16px"}}),e("label",{htmlFor:"applePayDefault",style:{fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:"Make this my default payment method"})]}),e("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24"},children:t("p",{style:{fontSize:"12px",color:"#92400e",margin:0},children:[e("strong",{children:"Note:"})," You'll be redirected to authenticate with Touch ID, Face ID, or your device passcode to complete the setup."]})}),e("button",{type:"submit",disabled:Fe,style:{width:"100%",padding:"16px",backgroundColor:Fe?"#9ca3af":"#1d1d1f",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Fe?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Fe?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Setting up Apple Pay..."]}):e(ve,{children:"\u{1F34E} Set up Apple Pay"})})]}),ce==="google_pay"&&t("form",{onSubmit:a=>{a.preventDefault(),qo("google_pay",Qt)},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F535}"}),e("h4",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"Google Pay Setup"}),e("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Enter your Google account information to set up Google Pay"})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Google Account Email"}),e("input",{type:"email",value:Qt.googleEmail,onChange:a=>zt(g=>({...g,googleEmail:a.target.value})),placeholder:"your.email@gmail.com",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Phone Number (for verification)"}),e("input",{type:"tel",value:Qt.phoneNumber,onChange:a=>zt(g=>({...g,phoneNumber:a.target.value})),placeholder:"+1 (555) 123-4567",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"}})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[e("input",{type:"checkbox",id:"googlePayDefault",checked:Qt.makeDefault,onChange:a=>zt(g=>({...g,makeDefault:a.target.checked})),style:{width:"16px",height:"16px"}}),e("label",{htmlFor:"googlePayDefault",style:{fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:"Make this my default payment method"})]}),e("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24"},children:t("p",{style:{fontSize:"12px",color:"#92400e",margin:0},children:[e("strong",{children:"Note:"})," You'll be redirected to Google to authenticate and authorize payments for this app."]})}),e("button",{type:"submit",disabled:Fe,style:{width:"100%",padding:"16px",backgroundColor:Fe?"#9ca3af":"#4285f4",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Fe?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Fe?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Setting up Google Pay..."]}):e(ve,{children:"\u{1F535} Set up Google Pay"})})]})]}),Me==="add-card"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Add Credit/Debit Card"}),e("button",{onClick:()=>ae("payments"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:zo,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Card Number"}),e("input",{type:"text",value:ft.cardNumber,onChange:a=>Zt(g=>({...g,cardNumber:Te(a.target.value)})),placeholder:"1234 5678 9012 3456",maxLength:19,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Expiry Date"}),e("input",{type:"text",value:ft.expiryDate,onChange:a=>Zt(g=>({...g,expiryDate:Co(a.target.value)})),placeholder:"MM/YY",maxLength:5,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"CVV"}),e("input",{type:"text",value:ft.cvv,onChange:a=>Zt(g=>({...g,cvv:a.target.value.replace(/\D/g,"").slice(0,4)})),placeholder:"123",maxLength:4,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Cardholder Name"}),e("input",{type:"text",value:ft.name,onChange:a=>Zt(g=>({...g,name:a.target.value})),placeholder:"John Doe",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Card Type"}),e("div",{style:{display:"flex",gap:"8px"},children:[{type:"credit",icon:"\u{1F4B3}",label:"Credit"},{type:"debit",icon:"\u{1F3E6}",label:"Debit"}].map(a=>t("button",{type:"button",onClick:()=>Zt(g=>({...g,type:a.type})),style:{flex:1,padding:"12px",backgroundColor:ft.type===a.type?"#eff6ff":"#f8fafc",border:`2px solid ${ft.type===a.type?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[a.icon," ",a.label]},a.type))})]}),e("button",{type:"submit",disabled:Fe,style:{width:"100%",padding:"16px",backgroundColor:Fe?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Fe?"not-allowed":"pointer",marginTop:"8px"},children:Fe?"Adding Card...":"Add Card"})]})]}),Me==="help"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Help & Support"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>window.location.href="tel:911",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F6A8} Emergency Support"}),t("button",{onClick:()=>Tt(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4AC} Live Chat"}),e("span",{style:{fontSize:"12px",color:"#0284c7",fontWeight:"600"},children:"Available 24/7"})]}),t("button",{onClick:Ji,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4DE} Call Support"}),e("span",{style:{fontSize:"12px",color:"#15803d",fontWeight:"600"},children:"(479) 367-1337"})]}),t("div",{children:[t("button",{onClick:()=>qt(!Et),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"16px",backgroundColor:"#fef3c7",border:"1px solid #fde68a",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4E7} Report Issue"}),e("span",{style:{fontSize:"12px",color:"#92400e"},children:Et?"\u25B2":"\u25BC"})]}),Et&&e("div",{style:{marginTop:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"12px"},children:e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{type:"Driver Issue",desc:"Driver behavior, route, or professionalism"},{type:"Payment Problem",desc:"Billing, charges, or payment method issues"},{type:"Safety Concern",desc:"Vehicle condition or safety-related incidents"},{type:"App Technical Issue",desc:"App crashes, bugs, or functionality problems"},{type:"Lost Item",desc:"Item left in vehicle or missing belongings"},{type:"Other",desc:"General feedback or other concerns"}].map((a,g)=>t("button",{onClick:()=>{alert(`Thank you for reporting: ${a.type}. We'll contact you within 24 hours.`),qt(!1)},style:{padding:"10px 12px",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",textAlign:"left",fontSize:"13px"},children:[e("div",{style:{fontWeight:"600",color:"#374151"},children:a.type}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:a.desc})]},g))})})]}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u2753 FAQ"})]})]}),ao&&e("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",width:"100%",maxWidth:"400px",height:"80vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[t("div",{children:[e("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600"},children:"\u{1F4AC} Live Support"}),e("p",{style:{margin:0,fontSize:"12px",color:"#6b7280"},children:"Connected \u2022 Response time: ~2 min"})]}),e("button",{onClick:()=>Tt(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280"},children:"\xD7"})]}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:Wo.map(a=>e("div",{style:{display:"flex",justifyContent:a.sender==="user"?"flex-end":"flex-start"},children:e("div",{style:{maxWidth:"80%",padding:"10px 14px",borderRadius:"16px",backgroundColor:a.sender==="user"?"#3b82f6":"#f3f4f6",color:a.sender==="user"?"white":"#374151",fontSize:"14px"},children:a.message})},a.id))}),t("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"8px"},children:[e("input",{type:"text",value:ye,onChange:a=>nt(a.target.value),onKeyPress:a=>a.key==="Enter"&&hi(ye),placeholder:"Type your message...",style:{flex:1,padding:"10px 14px",border:"1px solid #d1d5db",borderRadius:"20px",fontSize:"14px",outline:"none"}}),e("button",{onClick:()=>hi(ye),disabled:!ye.trim(),style:{padding:"10px 16px",backgroundColor:ye.trim()?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"20px",cursor:ye.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600"},children:"Send"})]})]})}),Me==="settings"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Settings"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"\u{1F514} Push Notifications"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Get ride updates and offers"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px",cursor:"pointer"},onClick:a=>{a.preventDefault();const g=a.currentTarget.querySelector("input");g.checked=!g.checked,pe(g.checked?"\u{1F514} Push notifications enabled":"\u{1F515} Push notifications disabled","success")},children:[e("input",{type:"checkbox",defaultChecked:!0,style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#3b82f6",borderRadius:"24px",transition:"0.3s"}})]})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"\u{1F319} Dark Mode"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Switch to dark theme"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px",cursor:"pointer"},onClick:a=>{a.preventDefault();const g=a.currentTarget.querySelector("input");g.checked=!g.checked,pe(g.checked?"\u{1F319} Dark mode enabled":"\u2600\uFE0F Light mode enabled","success")},children:[e("input",{type:"checkbox",style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#9ca3af",borderRadius:"24px",transition:"0.3s"}})]})]})}),e("button",{onClick:()=>{pe("\u{1F510} Privacy settings panel opened","info"),setTimeout(()=>{pe("\u2705 Privacy settings updated successfully","success")},1500)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#eff6ff",a.target.style.borderColor="#3b82f6"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F510} Privacy Settings"}),e("button",{onClick:()=>{if(!navigator.geolocation){pe("\u274C Location services not supported on this device","error");return}pe("\u{1F4CD} Checking location permissions...","info"),navigator.permissions.query({name:"geolocation"}).then(a=>{a.state==="granted"?(pe("\u2705 Location services are enabled","success"),ko(s)):a.state==="prompt"?(pe("\u{1F4F1} Please allow location access when prompted","warning"),ko(s)):pe("\u274C Location services denied. Enable in browser settings.","error")}).catch(()=>{pe("\u{1F4CD} Location services check completed","info"),ko(s)})},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#f0fdf4",a.target.style.borderColor="#10b981"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F4CD} Location Services"}),e("button",{onClick:()=>{pe("\u{1F4F1} App preferences panel opened","info");const a=["Auto-request rides from favorite locations","Show nearby driver count","Enable ride sharing suggestions","Smart destination predictions"];setTimeout(()=>{const g=a[Math.floor(Math.random()*a.length)];pe(`\u2705 ${g} updated`,"success")},1200)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#fef3c7",a.target.style.borderColor="#f59e0b"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F4F1} App Preferences"}),e("button",{onClick:()=>{confirm("Are you sure you want to sign out? You will need to log in again to book rides.")&&(pe("\u{1F6AA} Signing out...","info"),localStorage.removeItem("authToken"),localStorage.removeItem("userProfile"),localStorage.removeItem("savedPaymentMethods"),setTimeout(()=>{pe("\u2705 Successfully signed out","success"),ae("none"),pt(null),Qe("idle"),de(null),M([]),setTimeout(()=>{window.location.href="/rider/auth"},1e3)},1500))},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",color:"#dc2626",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#fee2e2",a.target.style.borderColor="#ef4444",a.target.style.transform="translateY(-1px)"},onMouseLeave:a=>{a.target.style.backgroundColor="#fef2f2",a.target.style.borderColor="#fecaca",a.target.style.transform="translateY(0)"},children:"\u{1F6AA} Sign Out"})]})]}),Me==="edit-profile"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Edit Profile"}),e("button",{onClick:()=>ae("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:ge.profilePicture?"transparent":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"32px",fontWeight:"600",margin:"0 auto 12px auto",position:"relative",overflow:"hidden",backgroundImage:ge.profilePicture?`url(${ge.profilePicture})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:[!ge.profilePicture&&(((vi=ge.firstName)==null?void 0:vi[0])||"U"),e("button",{style:{position:"absolute",bottom:"0",right:"0",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#10b981",border:"2px solid white",color:"white",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:a=>{a.stopPropagation();const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=C=>{const D=C.target.files[0];if(D){const $=new FileReader;$.onload=q=>{ot(le=>({...le,profilePicture:q.target.result}))},$.readAsDataURL(D)}},g.click()},children:"\u{1F4F7}"})]}),e("button",{style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",fontSize:"12px",color:"#6b7280",cursor:"pointer"},onClick:a=>{a.stopPropagation();const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=C=>{const D=C.target.files[0];if(D){const $=new FileReader;$.onload=q=>{ot(le=>({...le,profilePicture:q.target.result}))},$.readAsDataURL(D)}},g.click()},children:ge.profilePicture?"Change Photo":"Upload Photo"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"First Name"}),e("input",{type:"text",value:ge.firstName,onChange:a=>ot(g=>({...g,firstName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Last Name"}),e("input",{type:"text",value:ge.lastName,onChange:a=>ot(g=>({...g,lastName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Email Address"}),e("input",{type:"email",value:ge.email,onChange:a=>ot(g=>({...g,email:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Phone Number"}),e("input",{type:"tel",value:ge.phone,onChange:a=>ot(g=>({...g,phone:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Date of Birth"}),e("input",{type:"date",value:ge.dateOfBirth,onChange:a=>ot(g=>({...g,dateOfBirth:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Emergency Contact"}),e("input",{type:"text",value:ge.emergencyContact,onChange:a=>ot(g=>({...g,emergencyContact:a.target.value})),placeholder:"Name - Phone Number",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},onClick:a=>a.stopPropagation(),children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Ride Preferences"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Music"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow driver to play music"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px"},children:[e("input",{type:"checkbox",checked:ge.music,onChange:a=>{a.stopPropagation(),ot(g=>({...g,music:a.target.checked}))},style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:ge.music?"#3b82f6":"#9ca3af",borderRadius:"24px",transition:"0.3s"}}),e("span",{style:{position:"absolute",content:"",height:"18px",width:"18px",left:ge.music?"23px":"3px",bottom:"3px",backgroundColor:"white",borderRadius:"50%",transition:"0.3s"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Conversation"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Open to chatting during rides"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px"},children:[e("input",{type:"checkbox",checked:ge.conversation,onChange:a=>{a.stopPropagation(),ot(g=>({...g,conversation:a.target.checked}))},style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:ge.conversation?"#3b82f6":"#9ca3af",borderRadius:"24px",transition:"0.3s"}}),e("span",{style:{position:"absolute",content:"",height:"18px",width:"18px",left:ge.conversation?"23px":"3px",bottom:"3px",backgroundColor:"white",borderRadius:"50%",transition:"0.3s"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Cabin Temperature"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Preferred cabin temperature setting"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:a=>{a.stopPropagation(),ot(g=>({...g,temperature:"cool"}))},style:{padding:"6px 12px",backgroundColor:ge.temperature==="cool"?"#3b82f6":"#f3f4f6",color:ge.temperature==="cool"?"white":"#6b7280",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:"\u2744\uFE0F Cool"}),e("button",{onClick:a=>{a.stopPropagation(),ot(g=>({...g,temperature:"warm"}))},style:{padding:"6px 12px",backgroundColor:ge.temperature==="warm"?"#3b82f6":"#f3f4f6",color:ge.temperature==="warm"?"white":"#6b7280",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:"\u{1F525} Warm"})]})]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:a=>{a.stopPropagation(),ae("none")},style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:async a=>{a.stopPropagation();try{const g=await fetch(ie("api/users/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({firstName:ge.firstName,lastName:ge.lastName,email:ge.email,phone:ge.phone,dateOfBirth:ge.dateOfBirth,emergencyContact:ge.emergencyContact,music:ge.music,conversation:ge.conversation,temperature:ge.temperature,profilePicture:ge.profilePicture})});if(g.ok){const C=await g.json();console.log("\u2705 Profile updated:",C),alert(`Profile updated successfully!
Name: ${ge.firstName} ${ge.lastName}
Email: ${ge.email}`),ae("none"),Xi()}else{const C=await g.json();console.error("\u274C Profile update failed:",C),alert("Failed to update profile. Please try again.")}}catch(g){console.error("\u274C Profile update error:",g),alert("Network error. Please check your connection and try again.")}},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"white",cursor:"pointer"},children:"Save Changes"})]})]})]}),Me==="trip-complete"&&me&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F389}"}),e("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Trip Completed!"}),e("p",{style:{fontSize:"16px",color:"#6b7280",margin:"8px 0 0 0"},children:"Thank you for riding with us"})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Trip Summary"}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Distance:"}),t("span",{style:{fontWeight:"600"},children:[((Ft=(Rt=me.fare)==null?void 0:Rt.estimatedDistance)==null?void 0:Ft.toFixed(1))||"5.2"," miles"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Duration:"}),t("span",{style:{fontWeight:"600"},children:[((Si=me.fare)==null?void 0:Si.estimatedTravelTime)||"18"," minutes"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Vehicle:"}),t("span",{style:{fontWeight:"600"},children:[(wi=me.vehicle)==null?void 0:wi.name," ",(ki=me.vehicle)==null?void 0:ki.icon]})]}),t("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"8px",display:"flex",justifyContent:"space-between",fontSize:"18px",fontWeight:"700"},children:[e("span",{children:"Total Fare:"}),t("span",{style:{color:"#10b981"},children:["$",((zi=(Ci=me.fare)==null?void 0:Ci.total)==null?void 0:zi.toFixed(2))||"24.50"]})]})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Rate Your Driver"}),e("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[1,2,3,4,5].map(a=>e(oo,{size:32,fill:"#fbbf24",color:"#fbbf24",style:{cursor:"pointer"},onClick:()=>{console.log(`Rated driver: ${a} stars`),pe("\u2705 Rating submitted!","success")}},a))}),e("textarea",{placeholder:"Leave a comment for your driver (optional)",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",resize:"vertical",minHeight:"60px",boxSizing:"border-box"}})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Add Tip (Optional)"}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"8px",marginBottom:"16px"},children:[{percentage:15,amount:(((k=me.fare)==null?void 0:k.total)||24.5)*.15},{percentage:18,amount:(((T=me.fare)==null?void 0:T.total)||24.5)*.18},{percentage:20,amount:(((P=me.fare)==null?void 0:P.total)||24.5)*.2},{percentage:25,amount:(((N=me.fare)==null?void 0:N.total)||24.5)*.25}].map(a=>t("button",{onClick:()=>Ro(me.id,a.amount,a.percentage),disabled:qe,style:{padding:"12px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:qe?"not-allowed":"pointer",opacity:qe?.6:1,textAlign:"center"},children:[a.percentage,"%",e("br",{}),"$",a.amount.toFixed(2)]},a.percentage))}),t("div",{style:{display:"flex",gap:"8px"},children:[e("input",{type:"number",placeholder:"Custom amount",min:"0",step:"0.50",style:{flex:1,padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},onKeyPress:a=>{var g;if(a.key==="Enter"){const C=parseFloat(a.target.value);if(C>0){const D=Math.round(C/(((g=me.fare)==null?void 0:g.total)||24.5)*100);Ro(me.id,C,D),a.target.value=""}}}}),e("button",{onClick:a=>{var D;const g=a.target.previousElementSibling,C=parseFloat(g.value);if(C>0){const $=Math.round(C/(((D=me.fare)==null?void 0:D.total)||24.5)*100);Ro(me.id,C,$),g.value=""}},disabled:qe,style:{padding:"12px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:qe?"not-allowed":"pointer",opacity:qe?.6:1},children:qe?"Processing...":"Add Tip"})]}),e("button",{onClick:()=>{ae("none"),pt(null),Qe("idle"),pe("\u2705 Thanks for your ride!","success")},style:{width:"100%",padding:"12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginTop:"12px"},children:"No Tip - Finish"})]}),e("button",{onClick:()=>{ae("none"),pt(null),Qe("idle")},style:{width:"100%",padding:"16px",backgroundColor:"#1f2937",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Done"})]}),Me==="tracking"&&me&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Your Ride"}),t("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0 0"},children:[(_=me.vehicle)==null?void 0:_.name," ",(Q=me.vehicle)==null?void 0:Q.icon," \u2022 Ride ID: ",me.id]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px",fontWeight:"600"},children:"DM"}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600"},children:((oe=me==null?void 0:me.driver)==null?void 0:oe.name)||"Driver"}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#6b7280"},children:[e(oo,{size:14,fill:"#fbbf24",color:"#fbbf24"}),((Ce=me==null?void 0:me.driver)==null?void 0:Ce.rating)||"4.8"," \u2022 ",((Xe=me==null?void 0:me.driver)==null?void 0:Xe.vehicle)||"Vehicle"," \u2022 ",((_t=me==null?void 0:me.driver)==null?void 0:_t.license)||"License"]})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{style:{padding:"8px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:e(Oi,{size:16})}),e("button",{style:{padding:"8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:e(Mr,{size:16})})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>Qi(me.id,"Rider cancelled"),disabled:qe,style:{width:"100%",padding:"16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:qe?"not-allowed":"pointer",opacity:qe?.6:1},children:qe?"Cancelling...":"\u274C Cancel Ride"}),e("button",{onClick:()=>ae("none"),style:{width:"100%",padding:"12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Hide Panel"})]})]}),e("button",{onClick:Zi,disabled:Dt==="requesting"||qe||!c.trim()||!p||!_e,style:{width:"100%",background:c.trim()&&p&&_e?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"#d1d5db",color:"white",border:"none",borderRadius:"16px",padding:"18px",fontSize:"18px",fontWeight:"700",cursor:c.trim()&&p&&_e?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"16px"},children:qe?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Processing Payment..."]}):Dt==="requesting"?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Finding Driver..."]}):t(ve,{children:[(K==null?void 0:K.type)==="apple_pay"&&"\u{1F34E}",(K==null?void 0:K.type)==="google_pay"&&"\u{1F7E2}",((K==null?void 0:K.type)==="credit"||(K==null?void 0:K.type)==="debit")&&"\u{1F4B3}"," ","Book ",(_e==null?void 0:_e.name)||"Ride"]})})]}),e(Sp,{status:Mo,onClose:()=>lt("hidden")}),e("style",{children:`
          @keyframes slideIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
          }
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          }
          @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
          }
        `})]})}function Fp(){const[i,o]=l.exports.useState("signin"),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1}),[c,v]=l.exports.useState({}),u=(S,m="info")=>{const y=document.createElement("div");y.textContent=S,y.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      font-size: 14px;
      z-index: 10000;
      min-width: 300px;
      max-width: 500px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      ${m==="success"?"background-color: #10b981;":""}
      ${m==="error"?"background-color: #ef4444;":""}
      ${m==="warning"?"background-color: #f59e0b;":""}
      ${m==="info"?"background-color: #3b82f6;":""}
    `,document.body.appendChild(y),setTimeout(()=>{y.style.transform="translateX(0)"},100),setTimeout(()=>{y.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(y)&&document.body.removeChild(y)},300)},4e3)},x=S=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S),z=S=>S.length>=6,E=S=>/^[\+]?[1-9][\d]{0,15}$/.test(S.replace(/\s+/g,"")),F=async S=>{S.preventDefault(),d(!0),v({});const m={};if(x(p.email)||(m.email="Please enter a valid email address"),p.password||(m.password="Password is required"),Object.keys(m).length>0){v(m),d(!1);return}try{const y=await fetch(ie("api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,password:p.password})}),f=await y.json();y.ok?(u("\u2705 Welcome back! Signed in successfully.","success"),localStorage.setItem("authToken",f.token),localStorage.setItem("token",f.token),localStorage.setItem("userData",JSON.stringify(f.user)),setTimeout(()=>{window.location.href="/rider"},1e3)):v({general:f.error||"Invalid email or password"})}catch(y){console.error("Sign in error:",y),v({general:"Network error. Please try again."})}d(!1)},b=async S=>{S.preventDefault(),d(!0),v({});const m={};if(p.firstName.trim()||(m.firstName="First name is required"),p.lastName.trim()||(m.lastName="Last name is required"),x(p.email)||(m.email="Please enter a valid email address"),z(p.password)||(m.password="Password must be at least 6 characters"),p.password!==p.confirmPassword&&(m.confirmPassword="Passwords do not match"),E(p.phone)||(m.phone="Please enter a valid phone number"),p.agreeToTerms||(m.agreeToTerms="You must agree to the terms and conditions"),Object.keys(m).length>0){v(m),d(!1);return}try{const y=await fetch(ie("api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,password:p.password,firstName:p.firstName,lastName:p.lastName,phone:p.phone,userType:"rider"})}),f=await y.json();y.ok?(u("\u{1F389} Welcome to \u03C0! Account created successfully.","success"),localStorage.setItem("authToken",f.token),localStorage.setItem("token",f.token),localStorage.setItem("userData",JSON.stringify(f.user)),setTimeout(()=>{window.location.href="/rider"},1e3)):v({general:f.error||"Registration failed. Please try again."})}catch(y){console.error("Sign up error:",y),v({general:"Network error. Please try again."})}d(!1)};return t("div",{style:{maxWidth:"450px",margin:"0 auto",minHeight:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"20px",textAlign:"center"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 8px 0"},children:"\u03C0 Rider Authentication"}),e("p",{style:{fontSize:"16px",opacity:.9,margin:0},children:i==="signin"?"Welcome back!":"Join the ride revolution"})]}),t("div",{style:{padding:"32px 24px"},children:[t("div",{style:{display:"flex",backgroundColor:"#e5e7eb",borderRadius:"12px",padding:"4px",marginBottom:"32px"},children:[e("button",{onClick:()=>{o("signin"),v({}),h({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1})},style:{flex:1,padding:"12px",backgroundColor:i==="signin"?"white":"transparent",color:i==="signin"?"#1f2937":"#6b7280",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:i==="signin"?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:"Sign In"}),e("button",{onClick:()=>{o("signup"),v({}),h({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1})},style:{flex:1,padding:"12px",backgroundColor:i==="signup"?"white":"transparent",color:i==="signup"?"#1f2937":"#6b7280",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:i==="signup"?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:"Sign Up"})]}),i==="signin"&&t("form",{onSubmit:F,children:[c.general&&e("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:c.general}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),t("div",{style:{position:"relative"},children:[e(ti,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"email",value:p.email,onChange:S=>h({...p,email:S.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.email?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]}),c.email&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.email})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(Ti,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.password,onChange:S=>h({...p,password:S.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.password?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>n(!r),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9ca3af"},children:r?e(Wi,{size:20}):e($t,{size:20})})]}),c.password&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.password})]}),e("button",{type:"submit",disabled:s,style:{width:"100%",padding:"16px",backgroundColor:s?"#9ca3af":"#1e293b",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:s?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Signing In..."]}):"\u{1F680} Sign In"})]}),i==="signup"&&t("form",{onSubmit:b,children:[c.general&&e("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:c.general}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"First Name"}),t("div",{style:{position:"relative"},children:[e(je,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:p.firstName,onChange:S=>h({...p,firstName:S.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.firstName?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"First name"})]}),c.firstName&&e("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:c.firstName})]}),t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Last Name"}),t("div",{style:{position:"relative"},children:[e(je,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:p.lastName,onChange:S=>h({...p,lastName:S.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.lastName?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Last name"})]}),c.lastName&&e("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:c.lastName})]})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),t("div",{style:{position:"relative"},children:[e(ti,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"email",value:p.email,onChange:S=>h({...p,email:S.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.email?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]}),c.email&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.email})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number"}),t("div",{style:{position:"relative"},children:[e(Oi,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"tel",value:p.phone,onChange:S=>h({...p,phone:S.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.phone?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your phone number"})]}),c.phone&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.phone})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(Ti,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.password,onChange:S=>h({...p,password:S.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.password?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Create a password"}),e("button",{type:"button",onClick:()=>n(!r),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9ca3af"},children:r?e(Wi,{size:20}):e($t,{size:20})})]}),c.password&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.password})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Confirm Password"}),t("div",{style:{position:"relative"},children:[e(Ti,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.confirmPassword,onChange:S=>h({...p,confirmPassword:S.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.confirmPassword?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Confirm your password"})]}),c.confirmPassword&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.confirmPassword})]}),t("div",{style:{marginBottom:"24px"},children:[t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:[e("input",{type:"checkbox",checked:p.agreeToTerms,onChange:S=>h({...p,agreeToTerms:S.target.checked}),style:{marginTop:"2px",accentColor:"#1e293b"}}),t("span",{children:["I agree to the"," ",e("a",{href:"#",style:{color:"#1e293b",textDecoration:"underline"},children:"Terms of Service"})," ","and"," ",e("a",{href:"#",style:{color:"#1e293b",textDecoration:"underline"},children:"Privacy Policy"})]})]}),c.agreeToTerms&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.agreeToTerms})]}),e("div",{style:{marginBottom:"32px"},children:t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:[e("input",{type:"checkbox",checked:p.agreeToMarketing,onChange:S=>h({...p,agreeToMarketing:S.target.checked}),style:{marginTop:"2px",accentColor:"#1e293b"}}),e("span",{children:"I'd like to receive updates about new features and promotions (optional)"})]})}),e("button",{type:"submit",disabled:s,style:{width:"100%",padding:"16px",backgroundColor:s?"#9ca3af":"#1e293b",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:s?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Creating Account..."]}):"\u{1F389} Create Account"})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})}const ct=({color:i="#3b82f6",type:o="sedan",size:r=40,rotation:n=0,showIndicators:s=!1,isDriver:d=!1})=>{const p=()=>{switch(o){case"compact":return{width:r*.8,height:r*1.4};case"suv":return{width:r*1.1,height:r*1.6};case"luxury":return{width:r*.9,height:r*1.8};default:return{width:r,height:r*1.5}}},{width:h,height:c}=p();return t("div",{style:{width:`${h}px`,height:`${c}px`,transform:`rotate(${n}deg)`,position:"relative",display:"inline-block"},children:[t("div",{style:{width:"100%",height:"100%",backgroundColor:i,borderRadius:"15% 15% 15% 15%",position:"relative",border:"2px solid rgba(0,0,0,0.2)",boxShadow:"inset 0 0 10px rgba(0,0,0,0.1)"},children:[e("div",{style:{position:"absolute",top:"20%",left:"15%",width:"70%",height:"25%",backgroundColor:"rgba(135, 206, 235, 0.6)",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.3)"}}),e("div",{style:{position:"absolute",bottom:"20%",left:"15%",width:"70%",height:"20%",backgroundColor:"rgba(135, 206, 235, 0.6)",borderRadius:"6px",border:"1px solid rgba(0,0,0,0.3)"}}),e("div",{style:{position:"absolute",top:"35%",left:"10%",width:"80%",height:"30%",backgroundColor:"rgba(135, 206, 235, 0.4)",borderRadius:"4px"}}),e("div",{style:{position:"absolute",top:"5%",left:"20%",width:"15%",height:"8%",backgroundColor:"#fff",borderRadius:"50%",border:"1px solid #ccc"}}),e("div",{style:{position:"absolute",top:"5%",right:"20%",width:"15%",height:"8%",backgroundColor:"#fff",borderRadius:"50%",border:"1px solid #ccc"}}),e("div",{style:{position:"absolute",bottom:"5%",left:"20%",width:"15%",height:"8%",backgroundColor:"#ff4444",borderRadius:"50%",border:"1px solid #cc0000"}}),e("div",{style:{position:"absolute",bottom:"5%",right:"20%",width:"15%",height:"8%",backgroundColor:"#ff4444",borderRadius:"50%",border:"1px solid #cc0000"}}),e("div",{style:{position:"absolute",top:"25%",left:"0",width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.2)"}}),e("div",{style:{position:"absolute",bottom:"25%",left:"0",width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.2)"}}),s&&t(ve,{children:[e("div",{style:{position:"absolute",top:"12%",left:"8%",width:"8%",height:"6%",backgroundColor:"#ffa500",borderRadius:"50%",animation:"blink 1s infinite"}}),e("div",{style:{position:"absolute",top:"12%",right:"8%",width:"8%",height:"6%",backgroundColor:"#ffa500",borderRadius:"50%",animation:"blink 1s infinite"}})]}),d&&e("div",{style:{position:"absolute",top:"2%",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"12px solid #10b981",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}})]}),e("style",{children:`
          @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
          }
        `})]})},Ap=({isOpen:i,riderInfo:o,onConfirm:r,onCancel:n})=>{const[s,d]=l.exports.useState(!1);if(!i)return null;const p=async()=>{d(!0);try{await r()}finally{d(!1)}};return t("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"30px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",textAlign:"center",animation:"slideIn 0.3s ease-out"},children:[e("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #FEF3C7 0%, #FCD34D 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto",border:"3px solid #F59E0B"},children:e(yo,{size:40,color:"#D97706"})}),e("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",marginBottom:"10px"},children:"Corporate Discount Expired"}),e("p",{style:{color:"#6B7280",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Please verify that the rider still has their work ID badge"}),t("div",{style:{background:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"12px",padding:"20px",marginBottom:"25px",textAlign:"left"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(je,{size:18,color:"#6B7280"}),e("span",{style:{fontWeight:"bold",color:"#374151"},children:o.name})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(Ni,{size:18,color:"#6B7280"}),e("span",{style:{color:"#6B7280"},children:o.companyName})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(kn,{size:18,color:"#EF4444"}),t("span",{style:{color:"#EF4444",fontWeight:"600"},children:["Expired: ",o.expiryDate]})]})]}),t("div",{style:{background:"#EBF8FF",border:"1px solid #BFDBFE",borderRadius:"8px",padding:"16px",marginBottom:"25px",textAlign:"left"},children:[e("p",{style:{margin:0,fontSize:"14px",color:"#1E40AF",fontWeight:"600"},children:"\u{1F4CB} Verification Steps:"}),t("ol",{style:{margin:"8px 0 0 0",paddingLeft:"20px",fontSize:"13px",color:"#3730A3",lineHeight:"1.4"},children:[e("li",{children:"Ask rider to show their work ID badge"}),e("li",{children:"Verify their name and company match"}),e("li",{children:"Confirm badge appears current and valid"})]})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[t("button",{onClick:n,disabled:s,style:{flex:1,padding:"14px 20px",background:"#F3F4F6",color:"#6B7280",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:s?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:s?.5:1},children:[e(oi,{size:18}),"Invalid ID"]}),e("button",{onClick:p,disabled:s,style:{flex:1,padding:"14px 20px",background:s?"#10B981":"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:s?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:s?.8:1},children:s?t(ve,{children:[e("div",{style:{width:"18px",height:"18px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Verifying..."]}):t(ve,{children:[e(go,{size:18}),"Valid ID \u2713"]})})]}),e("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"20px",margin:"20px 0 0 0"},children:"Confirming will extend their discount for another 90 days"})]}),e("style",{children:`
          @keyframes slideIn {
            from {
              opacity: 0;
              transform: translateY(-20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},ja=()=>{const[i,o]=l.exports.useState({insurance:{file:null,preview:null,uploaded:!1},registration:{file:null,preview:null,uploaded:!1}}),[r,n]=l.exports.useState(null),[s,d]=l.exports.useState(!1),p={insurance:l.exports.useRef(null),registration:l.exports.useRef(null)},h=(F,b)=>{const S=b.target.files[0];S&&o(m=>({...m,[F]:{...m[F],file:S,preview:URL.createObjectURL(S)}}))},c=(F,b)=>{b.preventDefault();const S=b.dataTransfer.files[0];S&&S.type.startsWith("image/")&&o(m=>({...m,[F]:{...m[F],file:S,preview:URL.createObjectURL(S)}}))},v=F=>{F.preventDefault()},u=async F=>{const b=i[F];if(!!b.file){n(F);try{const S=new FormData;S.append("document",b.file),S.append("documentType",F);const m=await fetch("/api/driver/upload-document",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:S});if(m.ok)o(w=>({...w,[F]:{...w[F],uploaded:!0}})),i[F==="insurance"?"registration":"insurance"].uploaded&&d(!0);else{const y=await m.json();alert(`Upload failed: ${y.error}`)}}catch(S){console.error("Upload error:",S),alert("Upload failed. Please try again.")}finally{n(null)}}},x=F=>{o(b=>({...b,[F]:{file:null,preview:null,uploaded:!1}})),p[F].current&&(p[F].current.value="")},z=()=>{o({insurance:{file:null,preview:null,uploaded:!1},registration:{file:null,preview:null,uploaded:!1}}),d(!1),Object.values(p).forEach(F=>{F.current&&(F.current.value="")})};if(s)return t("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"40px",background:"linear-gradient(135deg, #D6F5D6 0%, #A8E6A8 100%)",borderRadius:"20px",textAlign:"center",border:"2px solid #68D391"},children:[e("div",{style:{fontSize:"80px",marginBottom:"20px"},children:"\u2705"}),e("h2",{style:{fontSize:"28px",fontWeight:"bold",color:"#22543D",marginBottom:"15px"},children:"Documents Uploaded Successfully!"}),e("p",{style:{fontSize:"16px",color:"#2F855A",marginBottom:"30px",lineHeight:"1.5"},children:"Your insurance and registration documents have been uploaded and are being verified. You'll be notified once the verification is complete."}),e("button",{onClick:z,style:{padding:"12px 24px",background:"#48BB78",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Upload New Documents"})]});const E=({type:F,icon:b,title:S,description:m})=>{const y=i[F],f=r===F;return t("div",{style:{background:y.uploaded?"#F0FFF4":"white",border:y.uploaded?"2px solid #68D391":"2px solid #E2E8F0",borderRadius:"16px",padding:"25px",transition:"all 0.2s"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e("div",{style:{width:"50px",height:"50px",background:y.uploaded?"#48BB78":"#4299E1",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:y.uploaded?e(go,{size:24,color:"white"}):e(b,{size:24,color:"white"})}),t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",margin:0},children:S}),e("p",{style:{fontSize:"14px",color:"#718096",margin:0},children:m})]})]}),y.uploaded?t("div",{style:{textAlign:"center",padding:"20px"},children:[e(go,{size:40,color:"#48BB78",style:{marginBottom:"10px"}}),e("p",{style:{color:"#22543D",fontWeight:"bold",marginBottom:"15px"},children:"Document Uploaded Successfully"}),e("button",{onClick:()=>x(F),style:{padding:"8px 16px",background:"transparent",color:"#4299E1",border:"2px solid #4299E1",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"Upload Different Document"})]}):t(ve,{children:[e("div",{onDrop:w=>c(F,w),onDragOver:v,style:{border:"2px dashed #CBD5E0",borderRadius:"12px",padding:"30px",textAlign:"center",background:y.preview?"#F7FAFC":"#FAFAFA",cursor:"pointer",marginBottom:"20px"},onClick:()=>{var w;return(w=p[F].current)==null?void 0:w.click()},children:y.preview?t("div",{children:[e("img",{src:y.preview,alt:`${S} preview`,style:{maxWidth:"200px",maxHeight:"150px",borderRadius:"8px",marginBottom:"10px",border:"2px solid #E2E8F0"}}),e("p",{style:{color:"#4A5568",fontSize:"14px",margin:0},children:"Click to change document"})]}):t("div",{children:[e(fo,{size:32,color:"#A0AEC0",style:{marginBottom:"12px"}}),t("p",{style:{color:"#4A5568",fontSize:"16px",margin:"0 0 5px 0",fontWeight:"bold"},children:["Upload ",S]}),e("p",{style:{color:"#718096",fontSize:"14px",margin:0},children:"Click or drag and drop"})]})}),e("input",{ref:p[F],type:"file",accept:"image/*",onChange:w=>h(F,w),style:{display:"none"}}),e("button",{onClick:()=>u(F),disabled:!y.file||f,style:{width:"100%",padding:"12px",background:f?"#A0AEC0":y.file?"#4299E1":"#E2E8F0",color:y.file?"white":"#A0AEC0",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:!y.file||f?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:f?t(ve,{children:[e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Uploading..."]}):t(ve,{children:[e(An,{size:16}),"Upload ",S]})})]})]})};return t("div",{style:{maxWidth:"900px",margin:"20px auto",padding:"30px"},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"20px"},children:e(yt,{size:35,color:"white"})}),e("h1",{style:{fontSize:"28px",fontWeight:"bold",color:"#2D3748",marginBottom:"10px"},children:"Upload Driver Documents"}),e("p",{style:{color:"#718096",fontSize:"16px",maxWidth:"500px",margin:"0 auto"},children:"Upload clear photos of your insurance and registration documents to complete your driver verification"})]}),e("div",{style:{background:"#EBF8FF",border:"1px solid #BEE3F8",padding:"20px",borderRadius:"12px",marginBottom:"30px"},children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e(ro,{size:24,color:"#3182CE",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("p",{style:{margin:"0 0 10px 0",fontWeight:"bold",color:"#2B6CB0",fontSize:"16px"},children:"Document Requirements:"}),t("ul",{style:{margin:0,paddingLeft:"20px",color:"#2C5282",fontSize:"14px",lineHeight:"1.5"},children:[e("li",{children:"Documents must be current and valid"}),e("li",{children:"Photos should be clear and all text readable"}),e("li",{children:"Insurance policy must show your name and coverage dates"}),e("li",{children:"Registration must match your vehicle information"}),e("li",{children:"Accepted formats: JPG, PNG (max 10MB each)"})]})]})]})}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",marginBottom:"30px"},children:[e(E,{type:"insurance",icon:mo,title:"Insurance Document",description:"Current auto insurance policy"}),e(E,{type:"registration",icon:rt,title:"Vehicle Registration",description:"Current vehicle registration"})]}),t("div",{style:{background:"white",padding:"20px",borderRadius:"12px",border:"2px solid #E2E8F0",textAlign:"center"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",marginBottom:"15px"},children:"Upload Progress"}),t("div",{style:{display:"flex",justifyContent:"center",gap:"20px",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:i.insurance.uploaded?"#22543D":"#718096"},children:[i.insurance.uploaded?e(go,{size:20}):e(mo,{size:20}),e("span",{children:"Insurance"})]}),e("div",{style:{width:"40px",height:"2px",background:i.insurance.uploaded&&i.registration.uploaded?"#48BB78":"#E2E8F0"}}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:i.registration.uploaded?"#22543D":"#718096"},children:[i.registration.uploaded?e(go,{size:20}):e(rt,{size:20}),e("span",{children:"Registration"})]})]}),e("p",{style:{margin:"15px 0 0 0",fontSize:"14px",color:"#718096"},children:i.insurance.uploaded&&i.registration.uploaded?"All documents uploaded! Verification in progress.":`${Object.values(i).filter(F=>F.uploaded).length}/2 documents uploaded`})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Ip=({userType:i,userId:o,className:r="",isMinimized:n=!1,onToggleMinimize:s,onClose:d})=>{const[p,h]=l.exports.useState([]),[c,v]=l.exports.useState(""),[u,x]=l.exports.useState(!1),[z,E]=l.exports.useState(null),[F,b]=l.exports.useState(!1),[S,m]=l.exports.useState(null),y=l.exports.useRef(null),f=l.exports.useRef(null);l.exports.useEffect(()=>{var B;(B=y.current)==null||B.scrollIntoView({behavior:"smooth"})},[p]),l.exports.useEffect(()=>{!n&&f.current&&f.current.focus()},[n]),l.exports.useEffect(()=>{z||w()},[z]),l.exports.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const B=window.SpeechRecognition||window.webkitSpeechRecognition,V=new B;V.continuous=!1,V.interimResults=!1,V.lang="en-US",V.onstart=()=>{b(!0)},V.onresult=re=>{const I=re.results[0][0].transcript;v(I),b(!1)},V.onerror=()=>{b(!1)},V.onend=()=>{b(!1)},m(V)}},[]),l.exports.useEffect(()=>()=>{S&&F&&S.stop()},[S,F]);const w=async()=>{try{const B=await fetch("/api/chat/start",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({userType:i,userId:o||"anonymous"})});if(B.ok){const V=await B.json();E(V.sessionId);const re={id:Date.now().toString(),content:V.welcomeMessage||L(i),role:"assistant",timestamp:new Date};h([re])}}catch(B){console.error("Failed to initialize chat:",B)}},L=B=>{switch(B){case"rider":return"Hi! I'm your Pi AI assistant. I can help you with ride booking, payment issues, account questions, and more. How can I assist you today?";case"driver":return"Hello! I'm here to help with your driving experience. I can assist with earnings questions, ride issues, vehicle requirements, and platform navigation. What can I help you with?";case"admin":return"Welcome to Pi Admin Support! I can help you with platform operations, driver management, ride analytics, system issues, and administrative tasks. How can I assist you?";default:return"Hello! I'm your Pi AI assistant. How can I help you today?"}},A=async()=>{if(!c.trim()||u||!z)return;const B={id:Date.now().toString(),content:c.trim(),role:"user",timestamp:new Date};h(V=>[...V,B]),v(""),x(!0);try{const V=await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({sessionId:z,message:B.content,userType:i,userId:o||"anonymous"})});if(V.ok){const re=await V.json(),I={id:(Date.now()+1).toString(),content:re.response,role:"assistant",timestamp:new Date};h(ee=>[...ee,I])}else throw new Error("Failed to send message")}catch(V){console.error("Failed to send message:",V);const re={id:(Date.now()+1).toString(),content:"I'm sorry, I'm having trouble responding right now. Please try again in a moment.",role:"assistant",timestamp:new Date};h(I=>[...I,re])}finally{x(!1)}},H=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),A())},W=()=>{if(!S){alert("Speech recognition is not supported in this browser");return}F?S.stop():S.start()},Y=B=>B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n?t("div",{className:`fixed bottom-4 right-4 z-50 ${r}`,children:[e("div",{className:"bg-blue-600 text-white p-3 rounded-full shadow-xl cursor-pointer hover:bg-blue-700 transition-colors",onClick:s,title:"Expand Pi Assistant",children:t("div",{className:"flex items-center space-x-2",children:[e(fr,{size:20}),e("span",{className:"text-sm font-medium",children:"Pi"})]})}),S&&F&&e("div",{className:"absolute bottom-16 right-0 bg-red-600 text-white p-2 rounded-lg shadow-lg",children:t("div",{className:"flex items-center space-x-2",children:[e(Jn,{size:16}),e("span",{className:"text-xs",children:"Listening..."}),e("button",{onClick:W,className:"text-white hover:text-red-200",children:e(oi,{size:14})})]})})]}):t("div",{className:`fixed bottom-4 right-4 w-80 h-96 bg-white rounded-lg shadow-xl border flex flex-col z-50 ${r}`,children:[t("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-2",children:[e(fr,{size:20}),e("span",{className:"font-semibold",children:"Pi AI Assistant"})]}),t("div",{className:"flex items-center space-x-1",children:[s&&e("button",{onClick:s,className:"p-1 hover:bg-blue-700 rounded",children:e(Nd,{size:16})}),d&&e("button",{onClick:d,className:"p-1 hover:bg-blue-700 rounded",children:e(oi,{size:16})})]})]}),t("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[p.map(B=>e("div",{className:`flex ${B.role==="user"?"justify-end":"justify-start"}`,children:e("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${B.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:t("div",{className:"flex items-start space-x-2",children:[B.role==="assistant"&&e(fr,{size:16,className:"mt-1 flex-shrink-0"}),B.role==="user"&&e(je,{size:16,className:"mt-1 flex-shrink-0"}),t("div",{className:"flex-1",children:[e("p",{className:"text-sm",children:B.content}),e("p",{className:`text-xs mt-1 ${B.role==="user"?"text-blue-100":"text-gray-500"}`,children:Y(B.timestamp)})]})]})})},B.id)),u&&e("div",{className:"flex justify-start",children:e("div",{className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-lg",children:t("div",{className:"flex items-center space-x-2",children:[e(fr,{size:16}),t("div",{className:"flex space-x-1",children:[e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e("div",{ref:y})]}),e("div",{className:"p-4 border-t",children:t("div",{className:"flex space-x-3",children:[e("input",{ref:f,type:"text",value:c,onChange:B=>v(B.target.value),onKeyDown:H,placeholder:"Type your message or click mic to speak...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-base focus:outline-none focus:border-blue-500",disabled:u}),S&&e("button",{onClick:W,disabled:u,className:`px-4 py-3 rounded-lg transition-colors ${F?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:F?"Stop listening":"Start voice input",children:F?e(Jn,{size:24}):e(pn,{size:24})}),e("button",{onClick:A,disabled:!c.trim()||u,className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:e(Rn,{size:20})})]})})]})},ho=({checked:i,onChange:o})=>e("button",{onClick:()=>o(!i),style:{width:"60px",height:"32px",borderRadius:"16px",border:"none",backgroundColor:i?"#10b981":"#d1d5db",position:"relative",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0},children:e("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"white",position:"absolute",top:"4px",left:i?"32px":"4px",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})}),Tp=()=>{var Si,wi,ki,Ci,zi;console.log("\u{1F697} DriverApp component is loading..."),console.log("\u{1F504} Driver route matched!");const[i,o]=l.exports.useState(!1),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState(""),[p,h]=l.exports.useState({email:"jahselassiei@gmail.com",password:"myDriver1!"}),[c,v]=l.exports.useState(!1),[u,x]=l.exports.useState(null),[z,E]=l.exports.useState("default"),[F,b]=l.exports.useState([]),[S,m]=l.exports.useState(!1),[y,f]=l.exports.useState(""),[w,L]=l.exports.useState(!0);l.exports.useEffect(()=>{const k=localStorage.getItem("token"),T=localStorage.getItem("user");if(k&&T)try{const P=JSON.parse(T);P.userType==="driver"&&(o(!0),x(P),console.log("\u{1F697} Driver authenticated from localStorage"))}catch(P){console.error("\u274C Error parsing user data:",P),localStorage.removeItem("token"),localStorage.removeItem("user")}},[]),l.exports.useEffect(()=>{"Notification"in window&&i&&(E(Notification.permission),Notification.permission==="default"&&Notification.requestPermission().then(k=>{E(k),k==="granted"&&(console.log("\u{1F514} Push notifications enabled"),H("\u2705 Notifications Enabled","You'll receive ride requests and updates","success"))}).catch(k=>{console.error("\u274C Notification permission error:",k),E("denied")}))},[i]);const A=(k,T,P={})=>{if("Notification"in window&&Notification.permission==="granted"){const N=new Notification(k,{body:T,icon:"/pi-driver-logo.png",badge:"/pi-driver-logo.png",tag:P.tag||"driver-update",requireInteraction:P.requireInteraction||!1,vibrate:P.vibrate||[200,100,200],...P});return N.onclick=()=>{window.focus(),N.close(),P.onClick&&P.onClick()},P.requireInteraction||setTimeout(()=>N.close(),5e3),N}},H=(k,T,P="info")=>{const N={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"},_=document.createElement("div");_.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${N[P]};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      max-width: 300px;
      animation: slideIn 0.3s ease-out;
    `,_.innerHTML=`
      <div style="font-weight: 700; margin-bottom: 4px;">${k}</div>
      <div style="font-size: 12px; opacity: 0.9;">${T}</div>
    `,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&(_.style.animation="slideOut 0.3s ease-out",setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},300))},4e3)},W=async k=>{k.preventDefault(),n(!0),d("");try{const T=await fetch(ie("api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),P=await T.json();if(T.ok){if(P.user.userType!=="driver"){d("This login is for drivers only. Please use correct driver credentials.");return}localStorage.setItem("token",P.token),localStorage.setItem("user",JSON.stringify(P.user)),o(!0),x(P.user),d(""),console.log("\u{1F697} Driver logged in successfully"),H("\u2705 Welcome Driver!",`Hello ${P.user.firstName}`,"success"),Fe&&I&&O==="online"&&(console.log("\u{1F5FA}\uFE0F DriverApp: Post-login heatmap fetch"),setTimeout(()=>Ao(!0),1e3))}else d(P.error||"Login failed")}catch(T){console.error("\u274C Login error:",T),d("Network error. Please try again.")}finally{n(!1)}},Y=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),o(!1),x(null),ne("offline"),console.log("\u{1F697} Driver logged out"),H("\u{1F44B} Logged Out","See you later!","info")},B=(k,T)=>{if(!k.trim())return;const P={id:`msg_${Date.now()}`,rideId:T||(ce==null?void 0:ce.id),senderId:(u==null?void 0:u.id)||"anonymous-driver",senderType:"driver",message:k.trim(),timestamp:new Date().toISOString(),delivered:!1};Ke.current&&Ke.current.emit("send-message",P),b(N=>[...N,{...P,delivered:!0}]),f(""),console.log("\u{1F4AC} Message sent:",P)},V=l.exports.useRef(null),re=l.exports.useRef(null),[I,ee]=l.exports.useState(null),[O,ne]=l.exports.useState("offline"),[X,Ye]=l.exports.useState(null),[J,U]=l.exports.useState(0),[M,K]=l.exports.useState(!1),[de,he]=l.exports.useState(null),[xe,Ue]=l.exports.useState(null),[Ze,Me]=l.exports.useState(!1);l.exports.useEffect(()=>{const k=T=>{T.key==="Escape"&&Ze&&Me(!1)};return Ze&&(document.addEventListener("keydown",k),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",k),document.body.style.overflow="unset"}},[Ze]);const[ae,ao]=l.exports.useState(null),[Tt,Et]=l.exports.useState(0),[qt,Wo]=l.exports.useState(!1),dt=l.exports.useRef(null),[ye,nt]=l.exports.useState(null),[ce,Ht]=l.exports.useState(null),[qe,He]=l.exports.useState(!1),[Ie,Je]=l.exports.useState(!1),[at,vt]=l.exports.useState(0),[_e,li]=l.exports.useState(85),[Dt,Qe]=l.exports.useState(75),[me,pt]=l.exports.useState(!0),[Fe,St]=l.exports.useState(!1),[Mo,lt]=l.exports.useState([]),[Vt,Gt]=l.exports.useState({}),[ut,_o]=l.exports.useState(null),[R,j]=l.exports.useState(null),[te,se]=l.exports.useState(null),[G,Ae]=l.exports.useState(!1),[Ve,$e]=l.exports.useState(""),[Ee,Bt]=l.exports.useState(""),[Yt,Ct]=l.exports.useState(""),[De,Jt]=l.exports.useState(0),[Be,Po]=l.exports.useState([]),[Wt,vo]=l.exports.useState(""),[Nr,Kt]=l.exports.useState(""),[si,Ui]=l.exports.useState(null),[Wn,di]=l.exports.useState(""),[lo,qi]=l.exports.useState(""),[So,Hi]=l.exports.useState(""),[ht,ci]=l.exports.useState(0),[gt,Vi]=l.exports.useState(!0),[$r,Xt]=l.exports.useState(-1),[pi,Lo]=l.exports.useState([]),[ft,Zt]=l.exports.useState(new Set),[Qt,zt]=l.exports.useState(0),[et,wo]=l.exports.useState(!1),[Mn,No]=l.exports.useState(""),[tt,$o]=l.exports.useState(null),[Pe,Gi]=l.exports.useState(null),[ge,ot]=l.exports.useState(null),[ui,Oo]=l.exports.useState(null),[eo,Yi]=l.exports.useState(null),hi=l.exports.useRef(G),Ji=l.exports.useRef(eo),Le=l.exports.useRef(J);l.exports.useEffect(()=>{hi.current=G},[G]),l.exports.useEffect(()=>{Ji.current=eo},[eo]),l.exports.useEffect(()=>{Le.current=J},[J]),l.exports.useEffect(()=>{const k=()=>{const T=document.hidden||document.visibilityState==="hidden";jo(T&&(O==="busy"||G))};return document.addEventListener("visibilitychange",k),window.addEventListener("pageshow",()=>jo(!1)),()=>{document.removeEventListener("visibilitychange",k),window.removeEventListener("pageshow",()=>jo(!1))}},[O,G]),l.exports.useEffect(()=>{if(Be.length>0&&De<Be.length){const k=Be[De+1];if(k&&Wt)if(parseFloat(Wt.replace(/[^\d.]/g,""))<=500){const N=(k.instructions||"").match(/(?:onto|on|toward)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/i);if(N){const _=N[1].trim();xi(_),console.log(`\u{1F6E3}\uFE0F Highlighting turn road: ${_} (${Wt})`)}}else xi(null)}},[Be,De,Wt]),l.exports.useEffect(()=>{const k="wakeLock"in navigator;return Vr(k),console.log(k?"\u{1F4F1} Screen Wake Lock API supported":"\u{1F4F1} Screen Wake Lock API not supported"),()=>{Mt&&Mt.release()}},[]);const Ki=async()=>{var k;if(!(!Hr||Mt))try{const T=await((k=navigator.wakeLock)==null?void 0:k.request("screen"));mt(T),console.log("\u{1F4F1} Screen wake lock activated - screen will not sleep"),T==null||T.addEventListener("release",()=>{console.log("\u{1F4F1} Screen wake lock released"),mt(null)})}catch(T){console.error("\u{1F4F1} Failed to activate wake lock:",T)}},Xi=async()=>{if(Mt)try{await Mt.release(),mt(null),console.log("\u{1F4F1} Screen wake lock manually released")}catch(k){console.error("\u{1F4F1} Failed to release wake lock:",k)}};l.exports.useEffect(()=>{O==="online"||O==="busy"||G?Ki():O==="offline"&&Xi()},[O,G]);const[Or,gi]=l.exports.useState(!1),[jr,ko]=l.exports.useState(1/0),[so,Ur]=l.exports.useState(!1),[qr,jo]=l.exports.useState(!1),[co,po]=l.exports.useState({x:50,y:100}),[fi,xt]=l.exports.useState(!1);l.exports.useState(new Set);const[Uo,xi]=l.exports.useState(null),[Mt,mt]=l.exports.useState(null),[Hr,Vr]=l.exports.useState(!1),Ke=l.exports.useRef(null),[Te,Co]=l.exports.useState({isOnline:!1,acceptPool:!0,voiceGuidance:!0,autoAccept:!1,acceptPets:!1,acceptTeens:!1,minimumFare:5,maxDistance:15,preferredAreas:[],vehicleColor:"#3b82f6",vehicleType:"sedan",acceptCash:!1,acceptLongTrips:!0,acceptPoolRides:!0,notifications:!0}),[zo,mi]=l.exports.useState(null),[qo,Gr]=l.exports.useState(8.5),[pe,Zi]=l.exports.useState({today:0,week:0,month:0,trips:0,hours:0,rating:0,lastRide:0,miles:0}),[Ro,Qi]=l.exports.useState(!0);l.exports.useEffect(()=>{(async()=>{Qi(!0);try{const T=u==null?void 0:u.id;if(!T){console.log("No driver ID available for earnings");return}const P=await fetch(`${window.location.origin}/api/driver/earnings/${T}`,{method:"GET",cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(P.ok){const N=await P.json();Zi(N)}else throw new Error(`HTTP ${P.status}`)}catch(T){console.error("API Error loading earnings:",T)}finally{Qi(!1)}})()},[O]);const Ho={id:"RIDE_123",rider:{name:"Sarah Johnson",rating:4.8,phone:"+1 (555) 123-4567"},pickup:{address:"Downtown Bentonville Square",coordinates:{lat:36.3729,lng:-94.2088}},destination:{address:"Crystal Bridges Museum",coordinates:{lat:36.3818,lng:-94.2087}},fare:12.5,distance:"2.3 miles",duration:"8 minutes",estimatedFare:"$12.50",estimatedTime:"8 min",rideType:"standard"};l.exports.useEffect(()=>{console.log("\u{1F5FA}\uFE0F DriverApp Google Maps initializing immediately (auth-independent)");const k=()=>{if(V.current&&window.google&&window.google.maps&&!I){console.log("\u{1F5FA}\uFE0F Initializing Google Maps in DriverApp...");try{const P=new window.google.maps.Map(V.current,{mapId:"DEMO_MAP_ID",zoom:16,center:{lat:36.3729,lng:-94.2088},tilt:0,heading:0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!0,gestureHandling:"greedy"}),N=new window.google.maps.DirectionsService,_=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#1f2937",strokeWeight:6,strokeOpacity:1,strokeLineJoin:"round",strokeLineCap:"round",zIndex:1e3}});_.setMap(P),re.current=P,ee(P),j(N),se(_),P.addListener("idle",()=>{if(re.current){const Q=hi.current,oe=Ji.current,Ce=Le.current,Xe=Q&&oe!==null?oe:Ce;if(Xe!=null){const _t=(Xe%360+360)%360,a=Q&&oe!==null?"route":"compass";console.log(`\u{1F5FA}\uFE0F Reapplying heading after camera idle: ${_t.toFixed(1)}\xB0 (${a})`),re.current.setHeading(-_t)}}}),console.log("\u2705 Google Maps initialized successfully in DriverApp")}catch(P){console.error("\u274C Error initializing Google Maps in DriverApp:",P)}}else console.log("\u23F3 Waiting for Google Maps API or map reference...",{mapRef:!!V.current,google:!!window.google,maps:!!(window.google&&window.google.maps),existingMap:!!I})},T=()=>{window.google&&window.google.maps?(console.log("\u{1F5FA}\uFE0F Google Maps API detected in DriverApp - initializing..."),setTimeout(k,500)):(console.log("\u23F3 Waiting for Google Maps API to load in DriverApp..."),setTimeout(T,1e3))};T()},[I]),l.exports.useEffect(()=>{if(!!re.current)try{const k=G&&eo!==null?eo:J;if(k==null)return;const T=(k%360+360)%360,P=-T,N=G&&eo!==null?"route":"compass";console.log(`\u{1F5FA}\uFE0F Setting map heading: ${P.toFixed(1)}\xB0 (${N}: ${T.toFixed(1)}\xB0)`),re.current.setHeading(P)}catch(k){console.error("\u274C Error setting map heading:",k),console.warn("\u26A0\uFE0F Vector map rotation not available - using DEMO_MAP_ID. Consider setting up real Map ID in Google Cloud Console.")}},[J,eo,G]),l.exports.useEffect(()=>{!localStorage.getItem("token")||!I||Fe&&O==="online"&&(console.log("\u{1F5FA}\uFE0F DriverApp: Immediate heatmap fetch (driver online + heatmap visible)"),Ao(!0))},[Fe,O,I]),l.exports.useEffect(()=>{if(!Fe||O!=="online")return;console.log("\u{1F5FA}\uFE0F DriverApp: Starting periodic heatmap refresh (90s interval)");const k=setInterval(()=>{console.log("\u{1F5FA}\uFE0F DriverApp: Periodic heatmap refresh triggered"),Ao(!1)},9e4);return()=>{console.log("\u{1F5FA}\uFE0F DriverApp: Stopping periodic heatmap refresh"),clearInterval(k)}},[Fe,O]);const Fo=(k,T)=>{try{if(!R||!te||!X){console.error("Navigation services not ready or location not available");return}console.log("\u{1F9ED} Starting navigation to:",T),Ae(!0);const P={origin:X,destination:k,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};R.route(P,(N,_)=>{try{if(_==="OK"&&N){const Q=N.routes[0],oe=Q.legs[0];$e(oe.distance.text),Bt(oe.duration.text);const Ce=oe.steps;Po(Ce),Jt(0),ci(Ce.length),Jr(Q,I),Kr(Ce),Yr(X,k,I),Xr(Ce),I.fitBounds(N.routes[0].bounds),console.log("\u2705 Enhanced navigation route created with custom polylines")}else console.error("Directions request failed:",_),Ae(!1)}catch(Q){console.error("\u274C Error processing navigation result:",Q),Ae(!1)}})}catch(P){console.error("\u274C Error starting navigation:",P),Ae(!1)}},[Vo,er]=l.exports.useState(null),Yr=(k,T,P)=>{if(new window.google.maps.Marker({position:k,map:P,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="8" fill="#10b981" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(20,20),anchor:new window.google.maps.Point(10,10)},title:"Pickup Location"}),new window.google.maps.Marker({position:T,map:P,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="12" height="12" fill="#1f2937" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(16,16),anchor:new window.google.maps.Point(8,8)},title:"Destination"}),ce&&X){const N=new window.google.maps.Marker({position:X,map:P,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="80" height="40" viewBox="0 0 80 40" xmlns="http://www.w3.org/2000/svg">
              <!-- Background bubble -->
              <rect x="5" y="5" width="70" height="25" rx="12" fill="#3b82f6" stroke="white" stroke-width="2"/>
              
              <!-- Person icon -->
              <circle cx="18" cy="17" r="6" fill="white"/>
              <circle cx="18" cy="15" r="2.5" fill="#3b82f6"/>
              <path d="M 12 22 Q 12 19 15 19 L 21 19 Q 24 19 24 22" fill="#3b82f6"/>
              
              <!-- Rider name text -->
              <text x="30" y="19" fill="white" font-family="Arial, sans-serif" font-size="9" font-weight="600" text-anchor="start">
                ${ce.rider.name.split(" ")[0]}
              </text>
              
              <!-- Pointer -->
              <polygon points="40,30 35,35 45,35" fill="#3b82f6" stroke="white" stroke-width="1"/>
            </svg>
          `),scaledSize:new window.google.maps.Size(80,40),anchor:new window.google.maps.Point(40,35)},title:`Rider: ${ce.rider.name}`,zIndex:2e3});er(N)}},Jr=(k,T)=>{try{pi.forEach(Q=>Q.setMap(null)),Lo([]),Zt(new Set),zt(0),console.log("\u{1F6E3}\uFE0F Creating custom black route polylines...");const P=k.overview_path,N=Math.max(1,Math.floor(P.length/20)),_=[];for(let Q=0;Q<P.length-1;Q+=N){const oe=P.slice(Q,Math.min(Q+N+1,P.length)),Ce=new window.google.maps.Polyline({path:oe,geodesic:!0,strokeColor:"#000000",strokeOpacity:1,strokeWeight:6,zIndex:100});Ce.setMap(T),_.push(Ce)}Lo(_),console.log(`\u2705 Created ${_.length} custom route segments`)}catch(P){console.error("\u274C Error creating custom polylines:",P)}},Kr=k=>{try{console.log("\u{1F5FA}\uFE0F Extracting street names for enhanced turn highlighting..."),k.forEach((T,P)=>{const _=(T.instructions||"").match(/(?:onto|on|toward|turn\s+(?:left|right)\s+onto)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/gi);_&&_.forEach(Q=>{const oe=Q.replace(/(?:onto|on|toward|turn\s+(?:left|right)\s+onto)\s+/gi,"").trim();console.log(`\u{1F6E3}\uFE0F Step ${P}: Street "${oe}" identified`)})})}catch(T){console.error("\u274C Error extracting street names:",T)}},Xr=k=>{try{if(console.log("\u{1F9ED} Starting enhanced route tracking with off-route detection..."),si&&clearInterval(si),Pe&&clearInterval(Pe),ci(k.length),Xt(-1),k.length>0){const N=k[0],_=N.instructions.replace(/<[^>]*>/g,"");di(_),Kt(yi(_)),gt&&setTimeout(()=>{try{Io("Starting enhanced navigation. "+_,N.distance?N.distance.text:""),Xt(0)}catch(Q){console.error("\u274C Error in initial voice announcement:",Q)}},1e3)}const T=setInterval(()=>{try{X&&Be.length>0&&tr()}catch(N){console.error("\u274C Error in enhanced route progress tracking:",N)}},2e3),P=setInterval(()=>{try{X&&Be.length>0&&Qr()}catch(N){console.error("\u274C Error in off-route detection:",N)}},5e3);Ui(T),Gi(P)}catch(T){console.error("\u274C Error starting enhanced route tracking:",T)}},tr=()=>{if(!X||!window.google||Be.length===0)return;let k=De,T=1/0;for(let P=De;P<Math.min(Be.length,De+3);P++){const N=Be[P];if(N.start_location){const _=N.start_location.lat(),Q=N.start_location.lng(),oe=Yo(X.lat,X.lng,_,Q);oe<T&&(T=oe,k=P)}}if(k!==De&&(Zr(k),Jt(k),k<Be.length)){const P=Be[k],N=P.instructions.replace(/<[^>]*>/g,"");di(N),Ct(N);const _=P.distance?P.distance.text:"";vo(_),Kt(yi(N));const Q=N.match(/(?:onto|on|toward)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/i);if(Q){const oe=Q[1].trim();No(oe),console.log(`\u{1F6E3}\uFE0F HIGHLIGHTING STREET: ${oe}`)}else No("");if(k!==$r&&gt)try{Io(N,_),Xt(k)}catch(oe){console.error("\u274C Error in voice announcement:",oe)}if(k===Be.length-1&&$r!==-999)try{Io("Destination ahead",""),Xt(-999)}catch(oe){console.error("\u274C Error announcing destination:",oe)}}if(G&&De<Be.length)try{const P=Be[De];if(P.end_location){const N=P.end_location.lat(),_=P.end_location.lng(),Q=ir(X.lat,X.lng,N,_);Yi(Q),console.log(`\u{1F9ED} Route bearing updated: ${Q.toFixed(1)}\xB0 (step ${De})`)}}catch(P){console.error("\u274C Error calculating route bearing:",P)}$o(X)},Zr=k=>{try{const T=Math.max(1,Math.floor(pi.length/Be.length)),P=k*T,N=new Set(ft);for(let _=0;_<P&&_<pi.length;_++)N.has(_)||(pi[_].setOptions({strokeColor:"#d1d5db",strokeOpacity:.7,strokeWeight:4}),N.add(_),console.log(`\u{1FA76} Segment ${_} marked as completed (turned gray)`));Zt(N),zt(P)}catch(T){console.error("\u274C Error updating route segment colors:",T)}},Qr=()=>{try{if(!X||Be.length===0||De>=Be.length)return;const k=Be[De];if(!k.start_location)return;const T=k.start_location.lat(),P=k.start_location.lng(),N=Yo(X.lat,X.lng,T,P),_=.1;N>_&&!et?(console.log("\u{1F6A8} DRIVER OFF-ROUTE DETECTED! Re-routing..."),wo(!0),en(),gt&&Io("Re-calculating route","")):N<=_&&et&&(console.log("\u2705 Driver back on route"),wo(!1))}catch(k){console.error("\u274C Error in off-route detection:",k)}},en=()=>{try{if(!ce||!X)return;console.log("\u{1F504} Re-routing from current position...");let k;if(ce.status==="pickup"){const T=ce.pickup;if(T.includes(",")){const[P,N]=T.split(",").map(_=>parseFloat(_.trim()));k={lat:P,lng:N}}}else{const T=ce.destination;if(T.includes(",")){const[P,N]=T.split(",").map(_=>parseFloat(_.trim()));k={lat:P,lng:N}}}k?(Fo(k,ce.status==="pickup"?"Pickup Location":"Destination"),console.log("\u2705 Re-routing initiated successfully")):console.log("\u274C Could not parse destination coordinates for re-routing")}catch(k){console.error("\u274C Error triggering re-routing:",k)}},yi=k=>{const T=k.toLowerCase();return T.includes("turn left")?"\u21B0":T.includes("turn right")?"\u21B1":T.includes("slight left")?"\u2196":T.includes("slight right")?"\u2197":T.includes("sharp left")?"\u293A":T.includes("sharp right")?"\u293B":T.includes("straight")||T.includes("continue")?"\u2191":T.includes("u-turn")?"\u21BA":T.includes("merge")?"\u2934":T.includes("exit")||T.includes("ramp")?"\u2197":T.includes("keep left")?"\u2196":T.includes("keep right")?"\u2197":"\u2192"},Go=()=>{te&&te.setDirections({routes:[]}),si&&(clearInterval(si),Ui(null)),window.speechSynthesis&&window.speechSynthesis.cancel(),Ae(!1),$e(""),Bt(""),Ct(""),Jt(0),Po([]),vo(""),Kt(""),Yi(null),di(""),qi(""),Hi(""),ci(0),Xt(-1),X&&I&&(I.setCenter(X),I.setZoom(16))},or=k=>{if(ut){const T=ut.getIcon();if(T&&typeof T=="object"){const P={...T,url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
              <g transform="rotate(0 30 30)">
                <!-- Car Body (ALWAYS pointing UP) -->
                <rect x="20" y="10" width="20" height="40" fill="${Te.vehicleColor}" rx="8" stroke="white" stroke-width="2"/>

                <!-- Windshield -->
                <rect x="23" y="15" width="14" height="12" fill="rgba(135, 206, 235, 0.8)" rx="3" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                <!-- Rear Window -->
                <rect x="23" y="33" width="14" height="10" fill="rgba(135, 206, 235, 0.8)" rx="2" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                <!-- Side Windows -->
                <rect x="22" y="20" width="16" height="20" fill="rgba(135, 206, 235, 0.6)" rx="2"/>

                <!-- Headlights -->
                <circle cx="25" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>
                <circle cx="35" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>

                <!-- Taillights -->
                <circle cx="25" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>
                <circle cx="35" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>

                <!-- Direction Indicator (GREEN arrow pointing UP) -->
                <polygon points="30,8 35,15 25,15" fill="#10b981" stroke="white" stroke-width="1"/>
              </g>
            </svg>
          `)};ut.setIcon(P)}}if(k!=null){const T=(k%360+360)%360;U(T),console.log(`\u{1F5FA}\uFE0F Driver heading updated: ${T.toFixed(1)}\xB0`)}},Yo=(k,T,P,N)=>{const Q=(P-k)*Math.PI/180,oe=(N-T)*Math.PI/180,Ce=Math.sin(Q/2)*Math.sin(Q/2)+Math.cos(k*Math.PI/180)*Math.cos(P*Math.PI/180)*Math.sin(oe/2)*Math.sin(oe/2),Xe=2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce));return 6371*Xe},Ao=async(k=!1)=>{var T;try{const P=localStorage.getItem("token");if(!P){console.warn("\u{1F5FA}\uFE0F DriverApp: No auth token found, heatmap unavailable"),Fe&&H("\u26A0\uFE0F Authentication Required","Please sign in to view demand zones","warning");return}console.log("\u{1F5FA}\uFE0F DriverApp: Fetching surge heatmap data...");const N=await fetch("/api/driver/surge/heatmap",{headers:{Authorization:`Bearer ${P}`}});if(N.ok){const _=await N.json();if(_.success){const Q=((T=_.surgeZones)==null?void 0:T.length)||0,oe=Mo.length;lt(_.surgeZones||[]),Gt(_.marketStats||{}),console.log(`\u{1F5FA}\uFE0F DriverApp: Loaded ${Q} surge zones for driver heatmap`),k&&Q>0&&(oe===0||Math.abs(Q-oe)>2)&&H("\u{1F3AF} Demand Zones Updated",`Found ${Q} high-demand areas`,"success")}else k&&H("\u26A0\uFE0F No Surge Data","No demand zones currently available","info")}else N.status===401||N.status===403?(console.warn("\u{1F5FA}\uFE0F DriverApp: Access denied to heatmap data"),k&&H("\u{1F512} Access Restricted","Heatmap unavailable for your account","warning"),lt([]),Gt({})):(console.error("\u{1F5FA}\uFE0F DriverApp: Heatmap fetch failed:",N.status),k&&H("\u274C Data Loading Failed","Unable to load demand zones. Try again later.","error"),lt([]),Gt({}))}catch(P){console.error("\u274C DriverApp: Error fetching heatmap data:",P),k&&H("\u274C Connection Error","Check your internet connection and try again","error"),lt([]),Gt({})}},ir=(k,T,P,N)=>{const _=(N-T)*Math.PI/180,Q=k*Math.PI/180,oe=P*Math.PI/180,Ce=Math.sin(_)*Math.cos(oe),Xe=Math.cos(Q)*Math.sin(oe)-Math.sin(Q)*Math.cos(oe)*Math.cos(_);return(Math.atan2(Ce,Xe)*180/Math.PI+360)%360},Io=(k,T)=>{if(!gt||!window.speechSynthesis)return;window.speechSynthesis.cancel();let P="";T&&T!==""?P=`In ${T}, ${k}`:P=k,P=P.replace(/<[^>]*>/g,"").replace(/\b(US|I-|Route|SR|Highway|Hwy)\s*/gi,"").replace(/\s+/g," ").trim();const N=new SpeechSynthesisUtterance(P);N.rate=.9,N.pitch=1,N.volume=.8;const Q=window.speechSynthesis.getVoices().find(oe=>oe.lang.startsWith("en")&&(oe.name.includes("Google")||oe.name.includes("Microsoft")));Q&&(N.voice=Q),console.log("\u{1F50A} Voice announcement:",P),window.speechSynthesis.speak(N)},rr=()=>{dt.current||(dt.current=new Audio,dt.current.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAcBkLT3u/LeCsFJnjI8N2QQAoUXrTp66hVFAlGn+DyvmEcBz+a2/LDcyUGLIHO8tiJOQcZZ7zs6J1NEQxQp+PwtmQcBjiO2PLNeSsFJHbH8N2QQAoUXrTp66hVFApGn+DyvmAcBkLT3u/LeSsFJnjI8N2QQAoUXrTp66hVFAlGn+DyvmEcBz+a2/LDcyUGLIHO8tiJOQcZZ7zs6J1NEQ==",dt.current.loop=!0,dt.current.volume=.8);try{Wo(!0),dt.current.play(),console.log("\u{1F514} Cascading ride request audio chime started")}catch(k){console.error("\u274C Error starting cascading audio:",k)}},Jo=()=>{if(dt.current&&qt)try{dt.current.pause(),dt.current.currentTime=0,Wo(!1),console.log("\u{1F507} Cascading ride request audio chime stopped")}catch(k){console.error("\u274C Error stopping cascading audio:",k)}};l.exports.useEffect(()=>{let k;return O==="online"&&zo&&(k=setInterval(()=>{try{const T=(new Date().getTime()-zo.getTime())/36e5,P=qo+T;console.log("\u23F1\uFE0F Online hours calculated:",parseFloat(P.toFixed(2)),"(not overriding API data)")}catch(T){console.error("\u274C Error updating online hours:",T)}},3e4)),()=>{if(k)try{clearInterval(k)}catch(T){console.error("\u274C Error clearing interval:",T)}}},[O,zo,qo]),l.exports.useEffect(()=>{const k=P=>{try{if(P.webkitCompassHeading!==void 0){const N=P.webkitCompassHeading;Oo(N),ot(N),console.log(`\u{1F9ED} iOS Compass heading: ${N.toFixed(1)}\xB0 (gyroscope)`)}else if(P.alpha!==null){const N=P.alpha;Oo(N),ot(N),console.log(`\u{1F9ED} Android heading: ${N.toFixed(1)}\xB0 (gyroscope)`)}}catch(N){console.error("\u274C Error processing device orientation:",N)}};return(O==="online"||G)&&(async()=>{try{typeof(DeviceOrientationEvent==null?void 0:DeviceOrientationEvent.requestPermission)=="function"?await DeviceOrientationEvent.requestPermission()==="granted"?(window.addEventListener("deviceorientation",k),console.log("\u2728 Device orientation permission granted - gyroscope active")):console.log("\u26A0\uFE0F Device orientation permission denied"):(window.addEventListener("deviceorientation",k),console.log("\u2728 Device orientation listener added - gyroscope active"))}catch(P){console.error("\u274C Error requesting device orientation permission:",P)}})(),()=>{window.removeEventListener("deviceorientation",k)}},[O,G]),l.exports.useEffect(()=>{if(navigator.geolocation){const k={enableHighAccuracy:!0,timeout:2e4,maximumAge:0,enableCompass:!0},T=N=>{try{const _={lat:N.coords.latitude,lng:N.coords.longitude};console.log("\u{1F4CD} Driver GPS location:",`${_.lat.toFixed(6)}, ${_.lng.toFixed(6)}`);let Q=J;if(ui!==null)Q=ui,U(Q);else if(N.coords.heading!==null&&N.coords.heading!==void 0)Q=N.coords.heading,U(Q);else if(X){const oe=_.lat-X.lat,Ce=_.lng-X.lng;if(Math.abs(oe)>1e-4||Math.abs(Ce)>1e-4){const Xe=_.lat*Math.PI/180,a=(Math.atan2(Ce*Math.cos(Xe),oe)*(180/Math.PI)+360)%360;U(a),Q=a,console.log(`\u{1F9ED} Movement heading: ${a.toFixed(1)}\xB0 (calculated from travel)`)}}if(ce&&ye){const oe=typeof ye.pickup=="object"?ye.pickup.coordinates.lat:0,Ce=typeof ye.pickup=="object"?ye.pickup.coordinates.lng:0;if(oe&&Ce){const Xe=Yo(_.lat,_.lng,oe,Ce);ko(Xe*5280),Xe*5280<=20&&Or&&!so&&gi(!1)}}if(Ye(_),I){if(ut)try{ut.setPosition(_),or(Q),Vo&&ce&&Vo.setPosition(_)}catch(oe){console.error("\u274C Error updating driver marker:",oe)}else try{const oe=new window.google.maps.Marker({position:_,map:I,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                      <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                        <g transform="rotate(0 30 30)">
                          <!-- Car Body (ALWAYS pointing UP) -->
                          <rect x="20" y="10" width="20" height="40" fill="${Te.vehicleColor}" rx="8" stroke="white" stroke-width="2"/>

                          <!-- Windshield -->
                          <rect x="23" y="15" width="14" height="12" fill="rgba(135, 206, 235, 0.8)" rx="3" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                          <!-- Rear Window -->
                          <rect x="23" y="33" width="14" height="10" fill="rgba(135, 206, 235, 0.8)" rx="2" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                          <!-- Side Windows -->
                          <rect x="22" y="20" width="16" height="20" fill="rgba(135, 206, 235, 0.6)" rx="2"/>

                          <!-- Headlights -->
                          <circle cx="25" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>
                          <circle cx="35" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>

                          <!-- Taillights -->
                          <circle cx="25" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>
                          <circle cx="35" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>

                          <!-- Direction Indicator (GREEN arrow pointing UP) -->
                          <polygon points="30,8 35,15 25,15" fill="#10b981" stroke="white" stroke-width="1"/>
                        </g>
                      </svg>
                    `),scaledSize:new window.google.maps.Size(60,60),anchor:new window.google.maps.Point(30,30)},title:"Your Location"});_o(oe)}catch(oe){console.error("\u274C Error creating driver marker:",oe)}try{G?ce&&(I.setCenter(_),I.setZoom(18)):(I.setCenter(_),I.setZoom(16))}catch(oe){console.error("\u274C Error updating map center/zoom:",oe)}}}catch(_){console.error("\u274C Error in updateLocation:",_)}};navigator.geolocation.getCurrentPosition(T,N=>{console.error("\u274C Error getting driver location:",N),console.log("\u{1F504} Using Bentonville, AR as driver location fallback");const _={lat:36.3729,lng:-94.2088};if(Ye(_),I&&ut)try{ut.setPosition(_),I.setCenter(_),console.log("\u2705 Driver marker set to Bentonville fallback")}catch(Q){console.error("\u274C Error setting fallback location on map:",Q)}},k);let P;return(O==="online"||O==="busy")&&(P=navigator.geolocation.watchPosition(T,N=>{console.error("\u274C Error watching driver location:",N),X||(console.log("\u{1F504} Setting initial fallback to Bentonville, AR"),Ye({lat:36.3729,lng:-94.2088}))},k)),()=>{P&&navigator.geolocation.clearWatch(P)}}},[I,ut,O,G]),l.exports.useEffect(()=>{if(typeof window<"u"&&window.io&&!Ke.current)try{console.log("\u{1F517} Creating SINGLE stable socket connection...");const k=window.location.protocol==="https:"?"https:":"http:",T=window.location.host,P=`${k}//${T}`;console.log("\u{1F310} Connecting to Socket.IO server at:",P);const N=window.io(P,{transports:["websocket","polling"],timeout:2e4,forceNew:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,maxReconnectionAttempts:5});return Ke.current=N,N.on("connect",()=>{console.log("\u{1F7E2} Socket connected successfully")}),N.on("disconnect",()=>{console.log("\u{1F534} Socket disconnected")}),N.on("connect_error",_=>{console.error("\u274C Socket connection error:",_),console.log("\u{1F504} Will retry connection automatically...")}),N.on("reconnect",_=>{console.log(`\u{1F7E2} Socket reconnected after ${_} attempts`)}),N.on("reconnect_error",_=>{console.error("\u274C Socket reconnection error:",_)}),N.on("reconnect_failed",()=>{console.error("\u274C Socket failed to reconnect after all attempts")}),N.on("new-ride-request",_=>{var Q;try{console.log("\u{1F697} New ride request received:",_),nt({id:_.id,rider:_.rider||{name:"Demo Rider",rating:4.8,phone:"+1234567890"},pickup:_.pickup||Ho.pickup,destination:_.destination||Ho.destination,fare:_.estimatedFare||12.5,distance:_.distance||"2.3 miles",duration:_.duration||"8 minutes",estimatedFare:((Q=_.estimatedFare)==null?void 0:Q.toString())||"$12.50",estimatedTime:"8 min",rideType:_.rideType||"standard",riderPreferences:_.riderPreferences||{music:!1,conversation:!1,temperature:"no-preference"}}),vt(30)}catch(oe){console.error("\u274C Error processing ride request:",oe)}}),N.on("cascading-ride-request",_=>{var Q,oe;try{console.log("\u{1F3AF} Cascading ride request received:",_),ao({id:_.rideId,rider:{name:"Rider",rating:4.8,phone:"+1234567890"},pickup:{address:_.pickupAddress,coordinates:_.pickup},destination:{address:_.destinationAddress,coordinates:_.destination},fare:_.estimatedFare||12.5,distance:(Q=_.driverInfo)!=null&&Q.distance?`${_.driverInfo.distance} mi`:"2.3 miles",duration:_.estimatedArrival?`${_.estimatedArrival} min`:"8 minutes",estimatedFare:((oe=_.estimatedFare)==null?void 0:oe.toString())||"$12.50",estimatedTime:_.estimatedArrival?`${_.estimatedArrival} min`:"8 min",rideType:_.rideType||"standard",riderPreferences:_.riderPreferences||{music:!1,conversation:!1,temperature:"no-preference"},cascadeInfo:_.cascadeInfo||{attempt:1,totalDrivers:1,timeRemaining:7}}),Et(7),rr(),console.log("\u{1F514} Cascading request set up with 7-second countdown and audio")}catch(Ce){console.error("\u274C Error handling cascading ride request:",Ce)}}),N.on("ride-assignment-confirmed",_=>{try{console.log("\u2705 Ride assignment confirmed:",_)}catch(Q){console.error("\u274C Error processing ride confirmation:",Q)}}),N.on("ride-cancelled",_=>{try{console.log("\u{1F4E1} CANCELLATION DEBUG: DriverApp received ride-cancelled event"),console.log("\u{1F4E1} CANCELLATION DEBUG: Event data:",_),console.log("\u{1F4E1} CANCELLATION DEBUG: Current trip:",ce),console.log("\u{1F4E1} CANCELLATION DEBUG: RideId match check:",_.rideId,"===",ce==null?void 0:ce.id,"?",_.rideId===(ce==null?void 0:ce.id));const Q=g=>{const C=(g!=null?g:"").toString().trim();return/^[a-f0-9]{8}-?[a-f0-9]{4}-?[a-f0-9]{4}-?[a-f0-9]{4}-?[a-f0-9]{12}$/i.test(C.replace(/-/g,""))?C.toLowerCase().replace(/-/g,""):C},oe=Q(_.rideId),Ce=Q((ce==null?void 0:ce.id)||"");console.log("\u{1F504} CANCELLATION DEBUG: ID comparison - raw cancelRideId:",_.rideId,"raw currentTripId:",ce==null?void 0:ce.id),console.log("\u{1F504} CANCELLATION DEBUG: Normalized - cancelRideId:",oe,"currentTripId:",Ce);const Xe=ce&&oe===Ce,_t=!!ce;let a=!1;if(Xe)console.log("\u2705 CANCELLATION DEBUG: Exact ID match - proceeding with normal cleanup");else{console.log("\u{1F504} CANCELLATION DEBUG: ID mismatch detected"),console.log("\u{1F504} CANCELLATION DEBUG: hasCurrentTrip?",_t,"cancelRideId:",oe,"currentTripId:",Ce);const g=_.driverId&&(u==null?void 0:u.id)&&String(_.driverId)===String(u.id);if(console.log("\u{1F504} CANCELLATION DEBUG: Driver verification - data.driverId:",_.driverId,"user.id:",u==null?void 0:u.id,"match:",g),_t)if(g)if(oe.length>0)console.log("\u{1F527} CANCELLATION RECOVERY: Driver-verified cleanup despite ID mismatch - likely formatting issue"),a=!0;else{console.warn("\u26A0\uFE0F CANCELLATION DEBUG: Invalid cancellation data but for this driver - showing notification only"),H("Ride Cancelled","A ride was cancelled","warning");return}else{console.log("\u{1F504} CANCELLATION DEBUG: Cancellation not for this driver - ignoring");return}else{console.log("\u{1F504} CANCELLATION DEBUG: No current trip - ignoring unrelated cancellation");return}}if(a)H("Ride Cancelled","Ride cancelled (recovered from sync issue)","warning");else{const g=_.driverCompensation>0?`Ride Cancelled - You received $${_.driverCompensation} compensation`:_.message;H("Ride Cancelled",g,"warning")}try{I&&window.directionsRenderer&&window.directionsRenderer.setMap(null),Ht(null),Po([]),Jt(0),vo(null),Ae(!1),ne("online"),console.log("\u{1F504} Complete route cleanup completed after cancellation"),Ke.current&&Ke.current.emit("ride-cancelled-ack",{rideId:_.rideId,driverId:u==null?void 0:u.id,timestamp:new Date().toISOString()})}catch(g){console.error("\u274C Error during route cleanup:",g)}}catch(Q){console.error("\u274C Error handling ride cancellation:",Q)}}),N.on("error",_=>{console.error("\u274C WebSocket error:",_)}),N.on("connect_error",_=>{console.error("\u274C WebSocket connection error:",_)}),()=>{try{N.disconnect()}catch(_){console.error("\u274C Error disconnecting socket:",_)}}}catch(k){console.error("\u274C Error initializing WebSocket:",k)}else{let k;return O==="online"&&!ye&&!ce&&(k=setInterval(()=>{try{Math.random()>.8&&(nt(Ho),vt(30))}catch(T){console.error("\u274C Error in ride simulation:",T)}},15e3)),()=>{try{clearInterval(k)}catch(T){console.error("\u274C Error clearing simulation interval:",T)}}}},[]),l.exports.useEffect(()=>{Ke.current&&O==="online"&&i&&u&&(console.log("\u{1F504} Driver status changed to online - updating socket connection..."),Ke.current.emit("join-room",{userId:u.id,userType:"driver"}),Ke.current.emit("driver-connect",{driverId:u.id,status:"online",location:{lat:(X==null?void 0:X.lat)||36.3729,lng:(X==null?void 0:X.lng)||-94.2088,heading:0,speed:0},vehicle:{type:Te.vehicleType||"sedan",license:"ABC-123",color:Te.vehicleColor||"#3b82f6"},preferences:Te,isAvailable:!0}),console.log("\u2705 Driver status updated via existing socket connection"))},[O,i,u,X,Te]),l.exports.useEffect(()=>{let k;return ce&&u&&i&&(console.log("\u{1F50D} CANCELLATION POLLING: Starting trip status polling for trip",ce.id),k=setInterval(async()=>{try{const T=await fetch(`/api/driver/trip-status?tripId=${ce.id}&driverId=${u.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(T.ok){const P=await T.json();P.status==="cancelled"&&(console.log("\u{1F6A8} CANCELLATION DETECTED: Trip was cancelled - clearing driver state"),H("Trip Cancelled",P.driverCompensation>0?`Trip cancelled - You received $${P.driverCompensation} compensation`:"Trip was cancelled by rider","warning"),Ht(null),ne("online"),Go(),console.log("\u2705 CANCELLATION RECOVERY: Driver state cleared successfully"))}}catch(T){console.warn("\u26A0\uFE0F CANCELLATION POLLING: Error checking trip status:",T)}},3e3)),()=>{k&&(clearInterval(k),console.log("\u{1F6D1} CANCELLATION POLLING: Stopped trip status polling"))}},[ce==null?void 0:ce.id,u==null?void 0:u.id,i]),l.exports.useEffect(()=>{let k;return at>0&&(k=setInterval(()=>{try{vt(T=>T<=1?(nt(null),0):T-1)}catch(T){console.error("\u274C Error updating request timeout:",T)}},1e3)),()=>{try{clearInterval(k)}catch(T){console.error("\u274C Error clearing timeout interval:",T)}}},[at]),l.exports.useEffect(()=>{let k;return Tt>0&&(k=setInterval(()=>{try{Et(T=>T<=1?(Jo(),ao(null),console.log("\u23F0 Cascading timeout reached - moving to next driver"),0):T-1)}catch(T){console.error("\u274C Error updating cascading timeout:",T)}},1e3)),()=>{try{clearInterval(k)}catch(T){console.error("\u274C Error clearing cascading timeout interval:",T)}}},[Tt]);const nr=()=>{const k=O==="offline"?"online":"offline";if(ne(k),k==="online")mi(new Date),Co(T=>({...T,isOnline:!0})),H("\u{1F697} Driver Online","You are now available for ride requests!","success"),A("\u{1F697} Driver Status: Online","You are now available for ride requests. Pi VIP drivers earn more!",{tag:"driver-status",requireInteraction:!1});else if(k==="offline"){if(zo){const T=(new Date().getTime()-zo.getTime())/36e5,P=qo+T;Gr(P),console.log("\u{1F4F4} Offline hours calculated:",parseFloat(P.toFixed(2)),"(not overriding API data)"),mi(null)}nt(null),Ht(null),vt(0),Go(),Co(T=>({...T,isOnline:!1})),Vo&&(Vo.setMap(null),er(null))}},ar=()=>{ye&&(Ke.current?(Ke.current.emit("accept-ride",{rideId:ye.id}),console.log("\u2705 Ride acceptance sent via existing socket:",ye.id)):console.log("\u26A0\uFE0F No socket connection available for ride acceptance"),Ht({id:ye.id,rider:ye.rider,pickup:ye.pickup.address,destination:ye.destination.address,fare:ye.fare,duration:ye.duration,status:"accepted",startTime:new Date().toISOString()}),nt(null),vt(0),ne("busy"),pt(!1),gi(!0),Ur(!1),console.log("\u{1F4E6} Passenger info collapsed after trip acceptance"),setTimeout(()=>{ye&&Fo(ye.pickup.coordinates,ye.pickup.address)},1e3))},lr=async()=>{try{const k=localStorage.getItem("token");if(!k)return console.log("\u274C No authentication token - cannot verify discount"),!1;(await fetch(ie("api/driver/confirm-discount-verification"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({riderId:ye==null?void 0:ye.rider.id,applicationId:de==null?void 0:de.applicationId,rideId:xe})})).ok&&(console.log("\u2705 Corporate discount extended successfully"),H("\u2705 Discount Extended","Corporate discount extended for 90 days","success"))}catch(k){console.error("Error confirming verification:",k)}K(!1),he(null),Ue(null),ar()},sr=()=>{K(!1),he(null),Ue(null),dr()},dr=()=>{nt(null),vt(0)},cr=()=>{var k;if(ae&&Ke.current)try{Jo(),Ke.current.emit("accept-cascading-ride",{rideId:ae.id,driverId:u==null?void 0:u.id}),ao(null),Et(0),console.log("\u2705 Cascading ride accepted, notifying server"),H("\u{1F389} Ride accepted! Starting navigation to pickup...","success");try{(k=ae.pickup)!=null&&k.coordinates?(Go(),setTimeout(()=>{Fo(ae.pickup.coordinates,ae.pickup.address||"Pickup Location"),console.log("\u{1F9ED} Navigation started to pickup:",ae.pickup.address)},1e3),Ht({id:ae.id,pickup:ae.pickup,destination:ae.destination,fare:ae.fare,status:"accepted",rider:ae.rider,startTime:new Date().toISOString()})):console.warn("\u26A0\uFE0F No pickup coordinates available for navigation")}catch(T){console.error("\u274C Error starting navigation:",T),H("\u26A0\uFE0F Navigation unavailable, proceed manually to pickup","warning")}}catch(T){console.error("\u274C Error accepting cascading ride:",T)}},pr=()=>{if(ae&&Ke.current)try{Jo(),Ke.current.emit("reject-cascading-ride",{rideId:ae.id,driverId:u==null?void 0:u.id}),ao(null),Et(0),console.log("\u274C Cascading ride rejected, notifying server")}catch(k){console.error("\u274C Error rejecting cascading ride:",k)}},bi=()=>{switch(O){case"online":return"#10b981";case"busy":return"#f59e0b";case"offline":return"#6b7280";default:return"#6b7280"}},vi=()=>{switch(O){case"online":return"Online";case"busy":return"Busy";case"offline":return"Offline";default:return"Offline"}},Rt=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),Ft=(k,T)=>{Co(P=>({...P,[k]:T})),k==="voiceGuidance"&&Vi(T),console.log(`\u2699\uFE0F Setting updated: ${k} = ${T}`)};return i?t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},children:[qr&&e("div",{style:{position:"fixed",left:`${co.x}px`,top:`${co.y}px`,width:"60px",height:"60px",backgroundColor:"#1f2937",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",cursor:fi?"grabbing":"grab",zIndex:9999,border:"3px solid #3b82f6",color:"white",fontSize:"20px",fontWeight:"bold",fontFamily:"serif",userSelect:"none",transition:fi?"none":"all 0.3s ease"},onMouseDown:k=>{xt(!0);const T=k.clientX-co.x,P=k.clientY-co.y,N=Q=>{po({x:Math.max(0,Math.min(window.innerWidth-60,Q.clientX-T)),y:Math.max(0,Math.min(window.innerHeight-60,Q.clientY-P))})},_=()=>{xt(!1),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",_)},onTouchStart:k=>{xt(!0);const T=k.touches[0],P=T.clientX-co.x,N=T.clientY-co.y,_=oe=>{const Ce=oe.touches[0];po({x:Math.max(0,Math.min(window.innerWidth-60,Ce.clientX-P)),y:Math.max(0,Math.min(window.innerHeight-60,Ce.clientY-N))})},Q=()=>{xt(!1),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",Q)};document.addEventListener("touchmove",_),document.addEventListener("touchend",Q)},onClick:()=>{fi||(jo(!1),window.focus(),console.log("\u{1F4F1} Pi overlay clicked - returning to navigation"))},children:"\u03C0"}),t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"56px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:bi()}}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("div",{style:{fontSize:"18px",fontWeight:"800",color:"white",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"48px"},children:"\u03C0"}),e("span",{style:{color:"#60a5fa"},children:"Driver"})]}),e("div",{style:{fontSize:"11px",opacity:.8},children:vi()})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e("button",{onClick:()=>Me(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",textDecoration:"none"},children:e(yt,{size:18})}),e("button",{onClick:()=>He(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer"},children:e(ni,{size:18})}),e("button",{onClick:()=>Je(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer"},children:e(Rr,{size:18})}),e("button",{onClick:Y,style:{background:"rgba(220, 38, 38, 0.2)",border:"none",borderRadius:"6px",padding:"6px",color:"#fca5a5",cursor:"pointer"},title:"Logout",children:e(Kn,{size:18})})]})]}),ce&&G&&t("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%)",color:"white",padding:"18px 16px",zIndex:1e3,boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",borderBottom:"3px solid #1d4ed8"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[e("div",{style:{fontSize:"32px",width:"50px",height:"50px",background:"rgba(255, 255, 255, 0.25)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid rgba(255, 255, 255, 0.3)"},children:Nr}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"13px",opacity:.9,marginBottom:"4px",fontWeight:"500"},children:Wt?`In ${Wt}`:"Now"}),e("div",{style:{fontSize:"18px",fontWeight:"700",lineHeight:"1.3",marginBottom:"2px"},children:Wn||Yt||"Continue straight"}),Uo&&t("div",{style:{display:"inline-block",backgroundColor:"#000000",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",marginTop:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:["\u{1F4CD} Turn onto ",Uo]}),lo&&So&&t("div",{style:{fontSize:"12px",opacity:.8,fontStyle:"italic"},children:["Then in ",So,": ",lo.substring(0,40),"..."]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"22px",fontWeight:"800",marginBottom:"2px"},children:Ee}),e("div",{style:{fontSize:"12px",opacity:.9},children:Ve})]})]}),e("div",{style:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"3px",overflow:"hidden",marginBottom:"10px"},children:e("div",{style:{width:`${Math.min(100,(De+1)/Math.max(1,ht)*100)}%`,height:"100%",backgroundColor:"#10b981",borderRadius:"3px",transition:"width 0.5s ease",boxShadow:"0 0 8px rgba(16, 185, 129, 0.5)"}})}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{padding:"4px 8px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:ce.status==="accepted"?"\u{1F4CD} TO PICKUP":ce.status==="pickup"?"\u{1F697} PICKUP RIDER":"\u{1F3AF} TO DESTINATION"}),t("div",{style:{opacity:.9},children:["Step ",De+1," of ",ht]}),e("button",{onClick:()=>Vi(!gt),style:{background:gt?"rgba(16, 185, 129, 0.3)":"rgba(255, 255, 255, 0.2)",border:gt?"1px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",padding:"4px 6px",color:"white",cursor:"pointer",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"2px"},children:gt?"\u{1F50A}":"\u{1F507}"})]}),e("div",{style:{fontWeight:"700",fontSize:"16px",color:"#fbbf24"},children:Rt(ce.fare)})]})]}),t("div",{style:{flex:1,position:"relative",minHeight:0},children:[e("div",{ref:V,style:{width:"100%",height:"100%",minHeight:"400px",backgroundColor:"#f3f4f6"}}),Fe&&I&&e(Oa,{map:I,surgeZones:Mo,showLabels:!0,onZoneClick:k=>{console.log("\u{1F5FA}\uFE0F Driver clicked surge zone:",k),H(`\u{1F3AF} High-Demand Zone: ${k.surgeMultiplier}x surge pricing`,"Drive to this area for more ride requests!","info")}}),me&&!ce&&t("div",{style:{position:"absolute",top:"16px",left:"16px",right:"16px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #e5e7eb"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Today's Performance"}),e("button",{onClick:()=>pt(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e(id,{size:16,color:"#6b7280"})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:"8px",padding:"12px 16px",textAlign:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#10b981"},"data-testid":"today-earnings",children:Ro?"Loading...":Rt(pe.today||0)}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Today"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#3b82f6"},children:pe.trips}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Trips"})]}),t("div",{children:[t("div",{style:{fontSize:"14px",fontWeight:"700",color:"#f59e0b"},children:[pe.hours,"h"]}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Online"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#ef4444"},children:pe.miles}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Miles"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#8b5cf6"},children:Rt(pe.lastRide)}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Last Ride"})]})]})]}),!me&&!ce&&e("div",{style:{position:"absolute",top:"16px",left:"16px",right:"16px",zIndex:1e3},children:t("button",{onClick:()=>pt(!0),style:{width:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"none",borderRadius:"8px",padding:"10px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:Ro?"Loading...":`${Rt(pe.today||0)} \u2022 ${pe.trips||0} trips \u2022 ${pe.miles||0} mi`}),e(td,{size:16,color:"#6b7280"})]})}),t("div",{style:{position:"absolute",bottom:"20px",right:"20px",display:"flex",flexDirection:"column",gap:"8px",zIndex:1e3},children:[e("button",{onClick:()=>{St(!Fe),Fe||Ao()},style:{width:"44px",height:"44px",borderRadius:"50%",background:Fe?"#ef4444":"white",border:`2px solid ${Fe?"#ef4444":"#e5e7eb"}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},title:Fe?"Hide Surge Zones":"Show High-Demand Zones",children:Fe?"\u{1F3AF}":"\u{1F4CA}"}),e("button",{onClick:()=>{X&&I&&(I.setCenter(X),I.setZoom(ce?18:16))},style:{width:"44px",height:"44px",borderRadius:"50%",background:"white",border:"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:e(zr,{size:18,color:"#3b82f6"})}),e("button",{onClick:()=>{const k=prompt(`\u{1F697} GPS not accurate for driving?

Enter your current city and state:
(e.g., "Seattle, WA" or "Dallas, TX")`);if(k){const T=new window.google.maps.places.PlacesService(I),P={query:k,fields:["geometry","formatted_address"]};T.textSearch(P,(N,_)=>{if(_===window.google.maps.places.PlacesServiceStatus.OK&&N&&N.length>0){const Q=N[0],oe={lat:Q.geometry.location.lat(),lng:Q.geometry.location.lng()};console.log("\u{1F697} Driver location manually calibrated to:",oe),Ye(oe),I&&(I.setCenter(oe),I.setZoom(13)),H(`\u2705 Driver location updated: ${Q.formatted_address}`,"success")}else H("\u274C Could not find that location. Please try again.","error")})}},style:{width:"44px",height:"44px",borderRadius:"50%",background:"#10b981",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",color:"white"},title:"Fix GPS Location",children:"\u{1F4CD}"}),ce&&e("button",{onClick:()=>{ce.status==="accepted"&&ye?Fo(ye.pickup.coordinates,ye.pickup.address):ce.status==="pickup"&&ye&&Fo(ye.destination.coordinates,ye.destination.address)},style:{width:"44px",height:"44px",borderRadius:"50%",background:"#3b82f6",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",color:"white"},children:e(ec,{size:18})})]})]}),t("div",{style:{background:"white",padding:"16px",borderTop:"1px solid #e5e7eb",boxShadow:"0 -4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[t("button",{onClick:nr,disabled:O==="busy",style:{width:"100%",height:"60px",borderRadius:"12px",border:"none",background:O==="offline"?"linear-gradient(135deg, #10b981 0%, #059669 100%)":O==="online"?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",fontSize:"18px",fontWeight:"700",cursor:O==="busy"?"not-allowed":"pointer",opacity:O==="busy"?.7:1,transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[e(Kn,{size:24}),e("span",{children:O==="offline"?"\u{1F7E2} GO ONLINE":O==="online"?"\u{1F534} GO OFFLINE":"\u{1F7E1} ON TRIP"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:bi()}}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:vi()}),O==="online"&&e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"\u2022 Ready for rides"}),O==="busy"&&e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"\u2022 In progress"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:_e>20?"#f0fdf4":"#fef2f2",borderRadius:"6px"},children:[e(Os,{size:16,color:_e>20?"#10b981":"#ef4444"}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:_e>20?"#10b981":"#ef4444"},children:[_e,"%"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:Dt>25?"#f0fdf4":"#fefbf2",borderRadius:"6px"},children:[e(wd,{size:16,color:Dt>25?"#10b981":"#f59e0b"}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:Dt>25?"#10b981":"#f59e0b"},children:[Dt,"%"]})]})]})]})]}),!1,ae&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(139, 69, 19, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1100},children:t("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"28px",width:"100%",maxWidth:"420px",border:"3px solid #f59e0b",boxShadow:"0 25px 50px rgba(0,0,0,0.3)"},children:[e("div",{style:{width:"100%",height:"6px",backgroundColor:"#fef3c7",borderRadius:"3px",marginBottom:"24px",overflow:"hidden",border:"1px solid #f59e0b"},children:e("div",{style:{width:`${Tt/7*100}%`,height:"100%",backgroundColor:Tt<=3?"#ef4444":"#f59e0b",transition:"width 1s linear, background-color 0.3s ease",boxShadow:"0 0 8px rgba(245, 158, 11, 0.6)"}})}),t("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e("div",{style:{fontSize:"26px",fontWeight:"800",color:"#92400e",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F3AF} Priority Ride Request"}),t("div",{style:{fontSize:"15px",color:"#f59e0b",fontWeight:"600",marginTop:"4px"},children:[Tt," seconds to respond \u2022 ",qt?"\u{1F514} Chiming":"\u{1F507}"]}),t("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px",fontStyle:"italic"},children:["Attempt #",((Si=ae.cascadeInfo)==null?void 0:Si.attempt)||1," of ",((wi=ae.cascadeInfo)==null?void 0:wi.totalDrivers)||1]})]}),t("div",{style:{padding:"20px",backgroundColor:"#fffbeb",borderRadius:"16px",marginBottom:"20px",border:"2px solid #fbbf24"},children:[t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"700",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u{1F4CD} Pickup"}),e("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600",lineHeight:"1.4"},children:((ki=ae.pickup)==null?void 0:ki.address)||"Pickup location"})]}),t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"700",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u{1F3AF} Destination"}),e("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600",lineHeight:"1.4"},children:((Ci=ae.destination)==null?void 0:Ci.address)||"Destination"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #f59e0b"},children:[t("div",{style:{textAlign:"center"},children:[t("div",{style:{fontSize:"20px",fontWeight:"800",color:"#059669"},children:["$",typeof ae.fare=="number"?ae.fare.toFixed(2):ae.fare||"12.50"]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Fare"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"800",color:"#3b82f6"},children:ae.distance||"2.3 mi"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Distance"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"800",color:"#f59e0b"},children:ae.duration||"8 min"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Duration"})]})]})]}),t("div",{style:{display:"flex",gap:"16px"},children:[e("button",{onClick:pr,style:{flex:1,background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",color:"#374151",border:"2px solid #d1d5db",borderRadius:"16px",padding:"18px",fontSize:"17px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease"},children:"\u274C Reject"}),e("button",{onClick:cr,style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"2px solid #f59e0b",borderRadius:"16px",padding:"18px",fontSize:"17px",fontWeight:"700",cursor:"pointer",boxShadow:"0 8px 20px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},children:"\u2705 Accept"})]})]})}),S&&ce&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",zIndex:2e3},children:t("div",{style:{backgroundColor:"white",flex:1,margin:"20px",borderRadius:"16px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600"},children:ce.rider.name.charAt(0)}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"16px"},children:ce.rider.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"\u{1F4AC} Live Chat"})]})]}),e("button",{onClick:()=>m(!1),style:{background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"16px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:F.length===0?e("div",{style:{textAlign:"center",color:"#6b7280",padding:"20px",fontStyle:"italic"},children:"\u{1F4AC} Start a conversation with your rider"}):F.map(k=>t("div",{style:{alignSelf:k.senderType==="driver"?"flex-end":"flex-start",maxWidth:"80%"},children:[e("div",{style:{padding:"12px 16px",borderRadius:"18px",backgroundColor:k.senderType==="driver"?"#3b82f6":"#f3f4f6",color:k.senderType==="driver"?"white":"#1f2937",fontSize:"14px",lineHeight:"1.4"},children:k.message}),t("div",{style:{fontSize:"11px",color:"#9ca3af",margin:"4px 8px",textAlign:k.senderType==="driver"?"right":"left"},children:[new Date(k.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k.senderType==="driver"&&e("span",{style:{marginLeft:"4px"},children:k.delivered?"\u2713":"\u23F0"})]})]},k.id))}),t("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"12px",alignItems:"center"},children:[e("input",{type:"text",value:y,onChange:k=>f(k.target.value),placeholder:"Type a message...",style:{flex:1,padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"24px",fontSize:"14px",outline:"none"},onKeyPress:k=>{k.key==="Enter"&&B(y)},onFocus:k=>k.target.style.borderColor="#3b82f6",onBlur:k=>k.target.style.borderColor="#e5e7eb"}),e("button",{onClick:()=>B(y),disabled:!y.trim(),style:{width:"44px",height:"44px",borderRadius:"50%",border:"none",backgroundColor:y.trim()?"#3b82f6":"#e5e7eb",color:"white",cursor:y.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"\u27A4"})]}),e("div",{style:{padding:"12px 16px",borderTop:"1px solid #f3f4f6",display:"flex",gap:"8px",flexWrap:"wrap"},children:["I'm on my way!","I'll be there in 5 minutes","I'm here","Running a bit late","Safe travels!"].map(k=>e("button",{onClick:()=>B(k),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"16px",fontSize:"12px",cursor:"pointer",color:"#374151"},children:k},k))})]})}),!1,qe&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"20px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Earnings Summary"}),e("button",{onClick:()=>He(!1),style:{background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#0284c7"},"data-testid":"stats-overlay-today",children:Ro?"Loading...":Rt(pe.today||0)}),e("div",{style:{color:"#6b7280"},children:"Today's Earnings"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#16a34a"},children:Rt(pe.week)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Week"})]}),t("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#d97706"},children:Rt(pe.month)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Month"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:pe.trips}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Trips"})]}),t("div",{style:{textAlign:"center"},children:[t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:[pe.hours,"h"]}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Online"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:pe.rating}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Rating"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:Rt(pe.lastRide)}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Last Ride"})]})]})]})]})}),Ie&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"20px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"85vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Settings"}),e("button",{onClick:()=>Je(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"2px solid #e0f2fe"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:"\u{1F50A} Voice Guidance"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Turn-by-turn navigation announcements"})]}),e(ho,{checked:Te.voiceGuidance,onChange:k=>Ft("voiceGuidance",k)})]}),e("div",{style:{fontSize:"14px",color:Te.voiceGuidance?"#059669":"#6b7280",fontWeight:"600"},children:Te.voiceGuidance?"\u2705 Voice guidance is ON":"\u274C Voice guidance is OFF"})]}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F4B5} Accept Cash"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept cash payments from riders"})]}),e(ho,{checked:Te.acceptCash,onChange:k=>Ft("acceptCash",k)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F6E3}\uFE0F Long Trips"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept rides over 45 minutes"})]}),e(ho,{checked:Te.acceptLongTrips,onChange:k=>Ft("acceptLongTrips",k)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F465} Pool Rides"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept shared rides with multiple passengers"})]}),e(ho,{checked:Te.acceptPoolRides,onChange:k=>Ft("acceptPoolRides",k)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u26A1 Auto Accept"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Automatically accept ride requests"})]}),e(ho,{checked:Te.autoAccept,onChange:k=>Ft("autoAccept",k)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F415} Accept Pets"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow riders to bring pets on rides"})]}),e(ho,{checked:Te.acceptPets,onChange:k=>Ft("acceptPets",k)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F466} Accept Teens"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow unaccompanied minors (13-17) to book rides"})]}),e(ho,{checked:Te.acceptTeens,onChange:k=>Ft("acceptTeens",k)})]})}),t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"2px solid #e0f2fe"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"\u{1F697} Vehicle Appearance"}),t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"Vehicle Color"}),e("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{color:"#3b82f6",name:"Blue"},{color:"#ef4444",name:"Red"},{color:"#10b981",name:"Green"},{color:"#f59e0b",name:"Yellow"},{color:"#6b7280",name:"Gray"},{color:"#8b5cf6",name:"Purple"},{color:"#000000",name:"Black"},{color:"#ffffff",name:"White"}].map(k=>e("button",{onClick:()=>Co(T=>({...T,vehicleColor:k.color})),style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:k.color,border:Te.vehicleColor===k.color?"3px solid #1d4ed8":k.color==="#ffffff"?"2px solid #e5e7eb":"2px solid transparent",cursor:"pointer",position:"relative",transition:"all 0.2s"},title:k.name,children:Te.vehicleColor===k.color&&e("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:k.color==="#ffffff"||k.color==="#f59e0b"?"#000":"#fff",fontSize:"16px",fontWeight:"bold"},children:"\u2713"})},k.color))})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"Vehicle Type"}),e("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{type:"compact",name:"Compact"},{type:"sedan",name:"Sedan"},{type:"suv",name:"SUV"},{type:"luxury",name:"Luxury"}].map(k=>e("button",{onClick:()=>Co(T=>({...T,vehicleType:k.type})),style:{padding:"8px 16px",borderRadius:"20px",border:"2px solid",borderColor:Te.vehicleType===k.type?"#1d4ed8":"#e5e7eb",backgroundColor:Te.vehicleType===k.type?"#dbeafe":"white",color:Te.vehicleType===k.type?"#1d4ed8":"#6b7280",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:k.name},k.type))})]}),t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"white",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Map Preview"}),e(ct,{color:Te.vehicleColor,type:Te.vehicleType,size:50,isDriver:!0})]})]}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F514} Notifications"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Push notifications and alerts"})]}),e(ho,{checked:Te.notifications,onChange:k=>Ft("notifications",k)})]})}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e("span",{style:{fontWeight:"600",color:"#1f2937"},children:"\u{1F697} Vehicle Info"}),e(Ys,{size:20,color:"#6b7280"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e("span",{style:{fontWeight:"600",color:"#1f2937"},children:"\u{1F6E1}\uFE0F Insurance"}),e(mo,{size:20,color:"#6b7280"})]})]})]})}),e(Ap,{isOpen:M,riderInfo:de,onConfirm:lr,onCancel:sr}),Ze&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1200,overflow:"hidden"},onClick:k=>{k.target===k.currentTarget&&Me(!1)},children:t("div",{style:{position:"relative",backgroundColor:"white",borderRadius:"16px",width:"90vw",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",transform:"scale(1)",transition:"transform 0.2s ease"},children:[e("button",{onClick:()=>Me(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.1)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"#666",zIndex:1,transition:"background 0.2s ease"},onMouseEnter:k=>{k.target.style.background="rgba(0,0,0,0.2)"},onMouseLeave:k=>{k.target.style.background="rgba(0,0,0,0.1)"},children:"\xD7"}),e("div",{style:{padding:"10px"},children:e(ja,{})})]})}),e(Ip,{userType:"driver",userId:(zi=u==null?void 0:u.id)==null?void 0:zi.toString(),className:"driver-chatbot",isMinimized:w,onToggleMinimize:()=>L(!w)})]}):e("div",{style:{minHeight:"100vh",backgroundColor:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"100%",maxWidth:"400px"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"800",color:"#1e293b",marginBottom:"8px"},children:"\u{1F697} Driver Login"}),e("p",{style:{color:"#64748b",fontSize:"16px"},children:"Sign in to your driver account"})]}),t("form",{onSubmit:W,children:[s&&e("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #FECACA",color:"#DC2626",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"20px"},children:s}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),e("input",{type:"email",value:p.email,onChange:k=>h(T=>({...T,email:k.target.value})),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},placeholder:"driver@example.com"})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e("input",{type:c?"text":"password",value:p.password,onChange:k=>h(T=>({...T,password:k.target.value})),required:!0,style:{width:"100%",padding:"12px",paddingRight:"40px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>v(!c),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer"},children:"\u{1F441}\uFE0F"})]})]}),e("button",{type:"submit",disabled:r,style:{width:"100%",backgroundColor:r?"#9CA3AF":"#4F46E5",color:"white",padding:"12px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"600",cursor:r?"not-allowed":"pointer",transition:"background-color 0.2s"},children:r?"\u{1F504} Signing in...":"\u{1F697} Sign in as Driver"})]})]})})},Ep=({isOpen:i,onClose:o,onSubmit:r})=>{const[n,s]=l.exports.useState(1),[d,p]=l.exports.useState({firstName:"",lastName:"",dateOfBirth:"",ssn:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",licenseNumber:"",licenseState:"",licenseValidUntil:"",licenseImage:null,vehicleMake:"",vehicleModel:"",vehicleYear:"",licensePlate:"",vehicleColor:"",vehicleVin:"",insuranceCompany:"",policyNumber:"",insuranceExpiryDate:"",insuranceImage:null,registrationExpiryDate:"",registrationImage:null,bankName:"",routingNumber:"",accountNumber:"",accountHolderName:"",backgroundCheckConsent:!1,profilePhoto:null,emergencyContactName:"",emergencyContactPhone:"",termsAccepted:!1,dataProcessingConsent:!1}),[h,c]=l.exports.useState({}),[v,u]=l.exports.useState(!1),x=[{number:1,title:"Personal Info",icon:je},{number:2,title:"License & Vehicle",icon:rt},{number:3,title:"Insurance & Registration",icon:mo},{number:4,title:"Banking",icon:Bo},{number:5,title:"Documents & Review",icon:yt}],z=(f,w)=>{p(L=>({...L,[f]:w})),h[f]&&c(L=>({...L,[f]:""}))},E=(f,w)=>{p(L=>({...L,[f]:w}))},F=f=>{const w={};switch(f){case 1:d.firstName||(w.firstName="First name is required"),d.lastName||(w.lastName="Last name is required"),d.dateOfBirth||(w.dateOfBirth="Date of birth is required"),d.ssn||(w.ssn="SSN is required"),d.email||(w.email="Email is required"),d.phone||(w.phone="Phone number is required"),d.address||(w.address="Address is required");break;case 2:d.licenseNumber||(w.licenseNumber="License number is required"),d.licenseValidUntil||(w.licenseValidUntil="License expiry date is required"),d.vehicleMake||(w.vehicleMake="Vehicle make is required"),d.vehicleModel||(w.vehicleModel="Vehicle model is required"),d.vehicleYear||(w.vehicleYear="Vehicle year is required"),d.licensePlate||(w.licensePlate="License plate is required");break;case 3:d.insuranceCompany||(w.insuranceCompany="Insurance company is required"),d.policyNumber||(w.policyNumber="Policy number is required"),d.insuranceExpiryDate||(w.insuranceExpiryDate="Insurance expiry date is required"),d.registrationExpiryDate||(w.registrationExpiryDate="Registration expiry date is required");break;case 4:d.bankName||(w.bankName="Bank name is required"),d.routingNumber||(w.routingNumber="Routing number is required"),d.accountNumber||(w.accountNumber="Account number is required"),d.accountHolderName||(w.accountHolderName="Account holder name is required");break;case 5:d.backgroundCheckConsent||(w.backgroundCheckConsent="Background check consent is required"),d.termsAccepted||(w.termsAccepted="Terms and conditions must be accepted"),d.dataProcessingConsent||(w.dataProcessingConsent="Data processing consent is required");break}return c(w),Object.keys(w).length===0},b=()=>{F(n)&&s(f=>Math.min(f+1,5))},S=()=>{s(f=>Math.max(f-1,1))},m=async()=>{if(F(5)){u(!0);try{const f=JSON.parse(localStorage.getItem("rideflow_auth")||"{}");if(!f.token)throw new Error("Authentication required");const w=await fetch("/api/drivers/apply",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.token}`},body:JSON.stringify(d)}),L=await w.json();if(w.ok){if(d.licenseImage||d.insuranceImage||d.registrationImage||d.profilePhoto){const H=new FormData;d.licenseImage&&H.append("licenseImage",d.licenseImage),d.insuranceImage&&H.append("insuranceImage",d.insuranceImage),d.registrationImage&&H.append("registrationImage",d.registrationImage),d.profilePhoto&&H.append("profilePhoto",d.profilePhoto),(await fetch("/api/drivers/documents",{method:"POST",headers:{Authorization:`Bearer ${f.token}`},body:H})).ok||console.warn("Document upload failed, but application was submitted")}r({...d,applicationId:L.applicationId,status:L.status,backgroundCheckId:L.backgroundCheckId}),o();const A=document.createElement("div");A.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            max-width: 300px;
          `,A.innerHTML=`
            <div style="margin-bottom: 8px;">\u{1F389} Driver Application Submitted!</div>
            <div style="font-size: 12px; opacity: 0.9;">Background check initiated. You'll receive updates via email.</div>
          `,document.body.appendChild(A),setTimeout(()=>document.body.removeChild(A),5e3)}else throw new Error(L.error||"Application submission failed")}catch(f){console.error("Application submission error:",f),c({general:f.message})}finally{u(!1)}}},y=f=>{const w=f.replace(/\D/g,""),L=w.match(/^(\d{0,3})(\d{0,2})(\d{0,4})$/);return L?[L[1],L[2],L[3]].filter(Boolean).join("-"):w};return i?e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",margin:0},children:"New Driver Enrollment"}),t("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0 0"},children:["Step ",n," of 5"]})]}),e("button",{onClick:o,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:e(oi,{size:24})})]}),e("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"center"},children:e("div",{style:{display:"flex",gap:"24px",alignItems:"center"},children:x.map((f,w)=>{const L=f.icon,A=f.number===n,H=f.number<n;return t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:H?"#10b981":A?"#3b82f6":"#e2e8f0",color:H||A?"white":"#64748b"},children:H?e(go,{size:20}):e(L,{size:20})}),e("span",{style:{fontSize:"12px",fontWeight:A?"600":"400",color:A?"#3b82f6":"#64748b"},children:f.title}),w<x.length-1&&e("div",{style:{width:"24px",height:"2px",backgroundColor:f.number<n?"#10b981":"#e2e8f0",margin:"0 8px"}})]},f.number)})})}),t("div",{style:{padding:"24px",overflow:"auto",flex:1},children:[t("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e("h1",{style:{fontSize:"64px",fontWeight:"800",color:"#1e293b",margin:"0 0 8px 0"},children:"\u03C0 Driver"}),e("p",{style:{color:"#64748b",fontSize:"16px",margin:0},children:"Complete your driver application"})]}),n===1&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"First Name *"}),e("input",{type:"text",value:d.firstName,onChange:f=>z("firstName",f.target.value),style:{width:"100%",padding:"12px",border:h.firstName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.firstName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.firstName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Last Name *"}),e("input",{type:"text",value:d.lastName,onChange:f=>z("lastName",f.target.value),style:{width:"100%",padding:"12px",border:h.lastName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.lastName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.lastName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Date of Birth *"}),e("input",{type:"date",value:d.dateOfBirth,onChange:f=>z("dateOfBirth",f.target.value),style:{width:"100%",padding:"12px",border:h.dateOfBirth?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.dateOfBirth&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.dateOfBirth})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Social Security Number *"}),e("input",{type:"text",value:d.ssn,onChange:f=>z("ssn",y(f.target.value)),placeholder:"XXX-XX-XXXX",maxLength:11,style:{width:"100%",padding:"12px",border:h.ssn?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.ssn&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.ssn})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address *"}),e("input",{type:"email",value:d.email,onChange:f=>z("email",f.target.value),style:{width:"100%",padding:"12px",border:h.email?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.email&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.email})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number *"}),e("input",{type:"tel",value:d.phone,onChange:f=>z("phone",f.target.value),placeholder:"(555) 123-4567",style:{width:"100%",padding:"12px",border:h.phone?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.phone&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.phone})]}),t("div",{style:{gridColumn:"1 / -1"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Address *"}),e("input",{type:"text",value:d.address,onChange:f=>z("address",f.target.value),style:{width:"100%",padding:"12px",border:h.address?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.address&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.address})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"City"}),e("input",{type:"text",value:d.city,onChange:f=>z("city",f.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"State"}),e("input",{type:"text",value:d.state,onChange:f=>z("state",f.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===2&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Driver's License Information"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"License Number *"}),e("input",{type:"text",value:d.licenseNumber,onChange:f=>z("licenseNumber",f.target.value),style:{width:"100%",padding:"12px",border:h.licenseNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licenseNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licenseNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Valid Until *"}),e("input",{type:"date",value:d.licenseValidUntil,onChange:f=>z("licenseValidUntil",f.target.value),style:{width:"100%",padding:"12px",border:h.licenseValidUntil?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licenseValidUntil&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licenseValidUntil})]}),e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"24px 0 16px 0"},children:"Vehicle Information"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Make *"}),e("input",{type:"text",value:d.vehicleMake,onChange:f=>z("vehicleMake",f.target.value),placeholder:"e.g., Toyota, Honda, Ford",style:{width:"100%",padding:"12px",border:h.vehicleMake?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleMake&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleMake})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Model *"}),e("input",{type:"text",value:d.vehicleModel,onChange:f=>z("vehicleModel",f.target.value),placeholder:"e.g., Camry, Accord, Focus",style:{width:"100%",padding:"12px",border:h.vehicleModel?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleModel&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleModel})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Year *"}),e("input",{type:"number",value:d.vehicleYear,onChange:f=>z("vehicleYear",f.target.value),min:"2010",max:new Date().getFullYear(),style:{width:"100%",padding:"12px",border:h.vehicleYear?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleYear&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleYear})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"License Plate *"}),e("input",{type:"text",value:d.licensePlate,onChange:f=>z("licensePlate",f.target.value.toUpperCase()),style:{width:"100%",padding:"12px",border:h.licensePlate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licensePlate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licensePlate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Color"}),e("input",{type:"text",value:d.vehicleColor,onChange:f=>z("vehicleColor",f.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"VIN Number"}),e("input",{type:"text",value:d.vehicleVin,onChange:f=>z("vehicleVin",f.target.value.toUpperCase()),maxLength:17,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===3&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Proof of Insurance"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Company *"}),e("input",{type:"text",value:d.insuranceCompany,onChange:f=>z("insuranceCompany",f.target.value),placeholder:"e.g., Geico, State Farm, Allstate",style:{width:"100%",padding:"12px",border:h.insuranceCompany?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.insuranceCompany&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.insuranceCompany})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Policy Number *"}),e("input",{type:"text",value:d.policyNumber,onChange:f=>z("policyNumber",f.target.value),style:{width:"100%",padding:"12px",border:h.policyNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.policyNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.policyNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Expiry Date *"}),e("input",{type:"date",value:d.insuranceExpiryDate,onChange:f=>z("insuranceExpiryDate",f.target.value),style:{width:"100%",padding:"12px",border:h.insuranceExpiryDate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.insuranceExpiryDate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.insuranceExpiryDate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Document"}),e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:f=>{var w;return E("insuranceImage",((w=f.target.files)==null?void 0:w[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"24px 0 16px 0"},children:"Vehicle Registration"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Registration Expiry Date *"}),e("input",{type:"date",value:d.registrationExpiryDate,onChange:f=>z("registrationExpiryDate",f.target.value),style:{width:"100%",padding:"12px",border:h.registrationExpiryDate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.registrationExpiryDate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.registrationExpiryDate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Registration Document"}),e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:f=>{var w;return E("registrationImage",((w=f.target.files)==null?void 0:w[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===4&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:t("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"16px",display:"flex",gap:"12px",alignItems:"flex-start",marginBottom:"24px"},children:[e(yo,{size:20,color:"#f59e0b"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#92400e"},children:"Secure Banking Information"}),e("div",{style:{fontSize:"14px",color:"#92400e",marginTop:"4px"},children:"Your banking details are encrypted and secure. This information is only used for driver payouts."})]})]})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Bank Name *"}),e("input",{type:"text",value:d.bankName,onChange:f=>z("bankName",f.target.value),placeholder:"e.g., Wells Fargo, Chase, Bank of America",style:{width:"100%",padding:"12px",border:h.bankName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.bankName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.bankName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Account Holder Name *"}),e("input",{type:"text",value:d.accountHolderName,onChange:f=>z("accountHolderName",f.target.value),placeholder:"Full name as shown on bank account",style:{width:"100%",padding:"12px",border:h.accountHolderName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.accountHolderName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.accountHolderName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Routing Number *"}),e("input",{type:"text",value:d.routingNumber,onChange:f=>z("routingNumber",f.target.value.replace(/\D/g,"")),placeholder:"9-digit routing number",maxLength:9,style:{width:"100%",padding:"12px",border:h.routingNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.routingNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.routingNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Account Number *"}),e("input",{type:"text",value:d.accountNumber,onChange:f=>z("accountNumber",f.target.value),style:{width:"100%",padding:"12px",border:h.accountNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.accountNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.accountNumber})]}),e("div",{style:{gridColumn:"1 / -1",marginTop:"16px"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Emergency Contact"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Emergency Contact Name"}),e("input",{type:"text",value:d.emergencyContactName,onChange:f=>z("emergencyContactName",f.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Emergency Contact Phone"}),e("input",{type:"tel",value:d.emergencyContactPhone,onChange:f=>z("emergencyContactPhone",f.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===5&&t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Additional Documents"}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Profile Photo"}),e("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:f=>{var w;return E("profilePhoto",((w=f.target.files)==null?void 0:w[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Required Consents"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.backgroundCheckConsent,onChange:f=>z("backgroundCheckConsent",f.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Background Check Consent *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I authorize the company to conduct a background check, including criminal history and driving record verification."})]})]}),h.backgroundCheckConsent&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.backgroundCheckConsent}),t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.dataProcessingConsent,onChange:f=>z("dataProcessingConsent",f.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Data Processing Consent *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I consent to the processing of my personal data for driver verification and platform operations."})]})]}),h.dataProcessingConsent&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.dataProcessingConsent}),t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.termsAccepted,onChange:f=>z("termsAccepted",f.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Terms and Conditions *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I have read and agree to the Terms and Conditions, Privacy Policy, and Driver Agreement."})]})]}),h.termsAccepted&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.termsAccepted})]})]}),t("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",margin:"0 0 12px 0"},children:"Next Steps"}),t("ul",{style:{fontSize:"14px",color:"#64748b",margin:0,paddingLeft:"20px"},children:[e("li",{children:"Your application will be reviewed within 2-3 business days"}),e("li",{children:"Background check will be initiated upon application submission"}),e("li",{children:"Vehicle inspection will be scheduled once documents are approved"}),e("li",{children:"You'll receive email updates throughout the process"}),e("li",{children:"Driver onboarding will begin upon successful completion"})]})]})]})]}),t("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("button",{onClick:S,disabled:n===1,style:{padding:"12px 24px",backgroundColor:n===1?"#f1f5f9":"#f8fafc",color:n===1?"#94a3b8":"#64748b",border:"1px solid #e2e8f0",borderRadius:"8px",cursor:n===1?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:"Previous"}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[n<5&&e("button",{onClick:b,style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Next Step"}),n===5&&e("button",{onClick:m,disabled:v,style:{padding:"12px 24px",backgroundColor:v?"#a7f3d0":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:v?"Submitting...":"Submit Application"})]})]})]})}):null},Dp=()=>{const[i,o]=l.exports.useState(""),[r,n]=l.exports.useState("all"),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(null),[c,v]=l.exports.useState(null),[u,x]=l.exports.useState(!1),[z,E]=l.exports.useState(!1),[F,b]=l.exports.useState(!1),[S,m]=l.exports.useState(!1),[y,f]=l.exports.useState(!1),[w,L]=l.exports.useState(!1),[A,H]=l.exports.useState(null),[W,Y]=l.exports.useState([]),[B,V]=l.exports.useState(!0),re=async()=>{try{console.log("\u{1F697} Fetching drivers from API...");const J=localStorage.getItem("authToken"),U=await fetch(ie("api/admin/drivers"),{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}});if(console.log("\u{1F697} Response status:",U.status,U.statusText),U.ok){const M=await U.json();console.log("\u{1F697} API response data:",M);const K=Array.isArray(M)?M:M.drivers||[];if(console.log("\u{1F697} Drivers list extracted:",K),K.length>0){const de=K.map(he=>({id:he.id,name:he.name,email:he.email,phone:he.phone||"N/A",status:he.status||"offline",rating:parseFloat(he.rating)||5,totalRides:he.total_rides||0,earnings:he.total_earnings?`$${parseFloat(he.total_earnings).toFixed(2)}`:"$0.00",vehicleModel:he.vehicle_make&&he.vehicle_model?`${he.vehicle_year||""} ${he.vehicle_make} ${he.vehicle_model}`.trim():"Vehicle Pending",location:"City Area",joinDate:he.created_at?new Date(he.created_at).toLocaleDateString():"Unknown"}));console.log("\u{1F697} Transformed drivers:",de),Y(de)}else console.log("\u{1F697} No drivers found in response")}else console.error("\u{1F697} API error:",U.status,await U.text())}catch(J){console.error("\u{1F697} Failed to fetch drivers:",J)}finally{V(!1)}};Qo.useEffect(()=>{re();const J=Ei(Fa(),{transports:["websocket","polling"]});return J.on("driver-availability-update",()=>{console.log("\u{1F504} Driver status changed, refreshing..."),re()}),()=>{J.disconnect()}},[]);const I=J=>{switch(J){case"online":return"#10b981";case"offline":return"#6b7280";case"busy":return"#f59e0b";default:return"#6b7280"}},ee=J=>{switch(J){case"online":return e(bt,{size:16});case"offline":return e(Bi,{size:16});case"busy":return e(kt,{size:16});default:return e(Bi,{size:16})}},O=W.filter(J=>{const U=J.name.toLowerCase().includes(i.toLowerCase())||J.id.toLowerCase().includes(i.toLowerCase()),M=r==="all"||J.status===r;return U&&M}),ne=J=>{console.log("\u{1F697} New Driver Application Submitted:",J),alert(`Driver application submitted successfully!

Name: ${J.firstName} ${J.lastName}
Email: ${J.email}
Vehicle: ${J.vehicleYear} ${J.vehicleMake} ${J.vehicleModel}

Application will be reviewed within 2-3 business days.`),d(!1)},X=(J,U)=>{switch(v(U),h(null),J){case"view":x(!0);break;case"edit":E(!0);break;case"suspend":H({type:"suspend",driver:U});break;case"activate":H({type:"activate",driver:U});break;case"trips":b(!0);break;case"earnings":m(!0);break;case"message":f(!0);break;case"analytics":L(!0);break;case"deactivate":H({type:"deactivate",driver:U});break;case"reset-password":H({type:"reset-password",driver:U});break}},Ye=async(J,U)=>{try{switch(J){case"suspend":console.log(`Suspending driver ${U.name}`),alert(`Driver ${U.name} has been suspended.`);break;case"activate":console.log(`Activating driver ${U.name}`),alert(`Driver ${U.name} has been activated.`);break;case"deactivate":console.log(`Deactivating driver ${U.name}`),alert(`Driver ${U.name} has been permanently deactivated.`);break;case"reset-password":console.log(`Resetting password for driver ${U.name}`),alert(`Password reset email sent to ${U.email}`);break;default:break}H(null)}catch(M){console.error("Action failed:",M),alert("Action failed. Please try again.")}};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Driver Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage your driver fleet and monitor performance"})]}),e("button",{onClick:()=>d(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Add New Driver"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e(ji,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search drivers...",value:i,onChange:J=>o(J.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:J=>n(J.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"120px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"online",children:"Online"}),e("option",{value:"offline",children:"Offline"}),e("option",{value:"busy",children:"Busy"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:B?"...":W.filter(J=>J.status==="online").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Online Drivers"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:B?"...":W.length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Drivers"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:B?"...":W.length>0?(W.reduce((J,U)=>J+U.rating,0)/W.length).toFixed(1):"0.0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Rating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:B?"...":W.length>0?`$${(W.reduce((J,U)=>J+parseFloat(U.earnings.replace("$","")),0)/W.length).toFixed(0)}`:"$0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Earnings"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Driver"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rating"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Earnings"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Vehicle"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:O.map(J=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"40px",height:"40px",backgroundColor:"#e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#64748b"},children:J.name.split(" ").map(U=>U[0]).join("")}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:J.name}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:J.id})]})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${I(J.status)}20`,color:I(J.status)},children:[ee(J.status),J.status.charAt(0).toUpperCase()+J.status.slice(1)]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(oo,{size:14,fill:"#f59e0b",color:"#f59e0b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:J.rating})]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:J.totalRides.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:J.earnings}),e("td",{style:{padding:"16px"},children:e("div",{style:{fontSize:"14px",color:"#64748b"},children:J.vehicleModel})}),t("td",{style:{padding:"16px",position:"relative"},children:[e("button",{onClick:()=>h(p===J.id?null:J.id),style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})}),p===J.id&&e("div",{style:{position:"absolute",top:"100%",right:"16px",backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"200px"},children:t("div",{style:{padding:"8px 0"},children:[t("button",{onClick:()=>X("view",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e($t,{size:16,color:"#6b7280"}),"View Profile"]}),t("button",{onClick:()=>X("edit",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Fn,{size:16,color:"#6b7280"}),"Edit Information"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),J.status==="online"?t("button",{onClick:()=>X("suspend",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#f59e0b"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(mc,{size:16}),"Suspend Driver"]}):t("button",{onClick:()=>X("activate",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#10b981"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(fc,{size:16}),"Activate Driver"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>X("trips",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(rt,{size:16,color:"#6b7280"}),"View Trip History"]}),t("button",{onClick:()=>X("earnings",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Nt,{size:16,color:"#6b7280"}),"Earnings Report"]}),t("button",{onClick:()=>X("analytics",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(ni,{size:16,color:"#6b7280"}),"Performance Analytics"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>X("message",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Cn,{size:16,color:"#6b7280"}),"Send Message"]}),t("button",{onClick:()=>X("reset-password",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(wa,{size:16,color:"#6b7280"}),"Reset Password"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>X("deactivate",J),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#ef4444"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(yo,{size:16}),"Deactivate Driver"]})]})})]})]},J.id))})]})})}),e(Ep,{isOpen:s,onClose:()=>d(!1),onSubmit:ne}),u&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Driver Profile"}),e("button",{onClick:()=>x(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Personal Information"}),t("p",{children:[e("strong",{children:"Name:"})," ",c.name]}),t("p",{children:[e("strong",{children:"Email:"})," ",c.email]}),t("p",{children:[e("strong",{children:"Phone:"})," ",c.phone]}),t("p",{children:[e("strong",{children:"Status:"}),e("span",{style:{color:I(c.status),fontWeight:"600",marginLeft:"8px"},children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})]}),t("p",{children:[e("strong",{children:"Member Since:"})," ",new Date(c.joinDate).toLocaleDateString()]})]}),t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Performance Metrics"}),t("p",{children:[e("strong",{children:"Rating:"})," \u2B50 ",c.rating]}),t("p",{children:[e("strong",{children:"Total Rides:"})," ",c.totalRides.toLocaleString()]}),t("p",{children:[e("strong",{children:"Total Earnings:"})," ",c.earnings]}),t("p",{children:[e("strong",{children:"Vehicle:"})," ",c.vehicleModel]}),t("p",{children:[e("strong",{children:"Current Location:"})," ",c.location]})]})]})]})}),z&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Edit Driver Information"}),e("button",{onClick:()=>E(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Full Name"}),e("input",{type:"text",defaultValue:c.name,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Email"}),e("input",{type:"email",defaultValue:c.email,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Phone"}),e("input",{type:"tel",defaultValue:c.phone,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Vehicle Model"}),e("input",{type:"text",defaultValue:c.vehicleModel,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:()=>{alert("Driver information updated successfully!"),E(!1)},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Save Changes"}),e("button",{onClick:()=>E(!1),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})}),F&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Trip History - ",c.name]}),e("button",{onClick:()=>b(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",overflow:"hidden"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{style:{backgroundColor:"#f8fafc"},children:t("tr",{children:[e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Date"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Route"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Fare"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Rating"})]})}),e("tbody",{children:[{date:"2024-01-15",from:"Downtown",to:"Airport",fare:"$45.50",rating:5},{date:"2024-01-15",from:"Mall",to:"Hospital",fare:"$28.75",rating:4},{date:"2024-01-14",from:"Hotel",to:"Conference Center",fare:"$18.25",rating:5},{date:"2024-01-14",from:"Airport",to:"Downtown",fare:"$52.00",rating:5},{date:"2024-01-13",from:"University",to:"Shopping Center",fare:"$22.50",rating:4}].map((J,U)=>t("tr",{style:{borderTop:U>0?"1px solid #f1f5f9":"none"},children:[e("td",{style:{padding:"12px",fontSize:"14px"},children:J.date}),t("td",{style:{padding:"12px",fontSize:"14px"},children:[J.from," \u2192 ",J.to]}),e("td",{style:{padding:"12px",fontSize:"14px",fontWeight:"600",color:"#10b981"},children:J.fare}),e("td",{style:{padding:"12px",fontSize:"14px"},children:"\u2B50".repeat(J.rating)})]},U))})]})})]})}),y&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Send Message to ",c.name]}),e("button",{onClick:()=>f(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Subject"}),e("input",{type:"text",placeholder:"Message subject",style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Message"}),e("textarea",{placeholder:"Type your message here...",rows:6,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px",resize:"vertical"}})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:()=>{alert("Message sent successfully!"),f(!1)},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Send Message"}),e("button",{onClick:()=>f(!1),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})}),A&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%"},children:[t("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e(yo,{size:48,color:"#f59e0b",style:{marginBottom:"16px"}}),t("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 8px 0"},children:["Confirm ",A.type.charAt(0).toUpperCase()+A.type.slice(1)]}),t("p",{style:{color:"#64748b",margin:0},children:["Are you sure you want to ",A.type," ",A.driver.name,"?",A.type==="deactivate"&&" This action cannot be undone."]})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{onClick:()=>Ye(A.type,A.driver),style:{flex:1,padding:"12px",backgroundColor:A.type==="deactivate"?"#ef4444":"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:A.type==="reset-password"?"Send Reset Email":A.type.charAt(0).toUpperCase()+A.type.slice(1)}),e("button",{onClick:()=>H(null),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})}),p&&e("div",{onClick:()=>h(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Bp=()=>{const[i,o]=l.exports.useState(""),[r,n]=l.exports.useState("all"),[s,d]=l.exports.useState([]),[p,h]=l.exports.useState(!0);Qo.useEffect(()=>{(async()=>{try{console.log("\u{1F6B6} Fetching riders from API...");const x=localStorage.getItem("authToken"),z=await fetch(ie("api/admin/riders"),{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(console.log("\u{1F6B6} Response status:",z.status,z.statusText),z.ok){const E=await z.json();console.log("\u{1F6B6} API response data:",E);const F=Array.isArray(E)?E:E.riders||[];if(console.log("\u{1F6B6} Riders list extracted:",F),F.length>0){const b=F.map(S=>({id:S.id,name:S.name,email:S.email,phone:S.phone||"N/A",status:S.status||"inactive",rating:parseFloat(S.rating)||5,totalRides:S.total_rides||0,totalSpent:S.total_spent?`$${parseFloat(S.total_spent).toFixed(2)}`:"$0.00",joinDate:S.created_at?new Date(S.created_at).toLocaleDateString():"Unknown",lastRide:S.last_ride?new Date(S.last_ride).toLocaleDateString():"Never",favoriteLocation:"Various Locations"}));console.log("\u{1F6B6} Transformed riders:",b),d(b)}else console.log("\u{1F6B6} No riders found in response")}else console.error("\u{1F6B6} API error:",z.status,await z.text())}catch(x){console.error("\u{1F6B6} Failed to fetch riders:",x)}finally{h(!1)}})()},[]);const c=u=>{switch(u){case"active":return"#10b981";case"inactive":return"#6b7280";default:return"#6b7280"}},v=s.filter(u=>{const x=u.name.toLowerCase().includes(i.toLowerCase())||u.id.toLowerCase().includes(i.toLowerCase()),z=r==="all"||u.status===r;return x&&z});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Rider Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor rider activity and engagement"})]}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Send Promotion"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e(ji,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search riders...",value:i,onChange:u=>o(u.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:u=>n(u.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"120px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:p?"...":s.length.toLocaleString()}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Riders"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:p?"...":s.filter(u=>u.status==="active").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Active This Week"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:p?"...":s.length>0?(s.reduce((u,x)=>u+x.rating,0)/s.length).toFixed(1):"0.0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Rating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:p?"...":s.length>0?`$${(s.reduce((u,x)=>u+parseFloat(x.totalSpent.replace("$","")),0)/s.length).toFixed(0)}`:"$0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Spend"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rider"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rating"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Spent"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Last Ride"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:v.map(u=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"40px",height:"40px",backgroundColor:"#e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#64748b"},children:u.name.split(" ").map(x=>x[0]).join("")}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:u.name}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:u.email})]})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${c(u.status)}20`,color:c(u.status)},children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(oo,{size:14,fill:"#f59e0b",color:"#f59e0b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:u.rating})]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:u.totalRides}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:u.totalSpent}),e("td",{style:{padding:"16px",fontSize:"14px",color:"#64748b"},children:u.lastRide}),e("td",{style:{padding:"16px"},children:e("button",{style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})})})]},u.id))})]})})})]})},Wp=()=>{const[i,o]=l.exports.useState(""),[r,n]=l.exports.useState("all"),[s,d]=l.exports.useState([]),[p,h]=l.exports.useState(!0);Qo.useEffect(()=>{(async()=>{try{const x=localStorage.getItem("authToken"),z=await fetch(ie("api/admin/rides"),{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(z.ok){const E=await z.json();if(E.success){const F=E.rides.map(b=>{var S;return{id:b.id,riderId:b.rider_id,riderName:b.rider_name,driverId:b.driver_id,driverName:b.driver_name||"Finding driver...",status:b.status,pickupLocation:b.pickup_address,dropoffLocation:b.destination_address,requestTime:b.requested_at?new Date(b.requested_at).toLocaleString():"Unknown",startTime:b.started_at?new Date(b.started_at).toLocaleString():null,endTime:b.completed_at?new Date(b.completed_at).toLocaleString():null,duration:b.completed_at&&b.started_at?Math.round((new Date(b.completed_at).getTime()-new Date(b.started_at).getTime())/6e4)+" min":b.status==="requested"?"Pending":"In Progress",distance:"Calculating...",fare:b.final_fare?`$${b.final_fare}`:(S=b.estimated_fare)!=null&&S.total?`~$${b.estimated_fare.total}`:"Calculating...",paymentMethod:"Card"}});d(F)}}}catch(x){console.error("Failed to fetch rides:",x)}finally{h(!1)}})()},[]);const c=u=>{switch(u){case"completed":return"#10b981";case"in_progress":return"#3b82f6";case"pending":return"#f59e0b";case"cancelled":return"#ef4444";default:return"#6b7280"}},v=s.filter(u=>{var E;const x=u.id.toLowerCase().includes(i.toLowerCase())||u.riderName.toLowerCase().includes(i.toLowerCase())||((E=u.driverName)==null?void 0:E.toLowerCase().includes(i.toLowerCase())),z=r==="all"||u.status===r;return x&&z});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Ride Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Track and manage all ride requests and trips"})]}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Export Data"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e(ji,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search rides...",value:i,onChange:u=>o(u.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:u=>n(u.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"140px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"in_progress",children:"In Progress"}),e("option",{value:"completed",children:"Completed"}),e("option",{value:"cancelled",children:"Cancelled"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:p?"...":s.filter(u=>u.status==="requested"||u.status==="pending").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Pending Rides"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:p?"...":s.filter(u=>u.status==="in_progress"||u.status==="accepted").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"In Progress"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:p?"...":s.filter(u=>u.status==="completed").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Completed Today"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:p?"...":s.length>0?"5.2":"0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Wait (min)"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Ride ID"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rider"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Driver"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Route"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Fare"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:v.map(u=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px",fontWeight:"600",color:"#3b82f6"},children:u.id}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(je,{size:16,color:"#64748b"}),e("span",{style:{fontWeight:"500",color:"#1e293b"},children:u.riderName})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(rt,{size:16,color:"#64748b"}),e("span",{style:{fontWeight:"500",color:"#1e293b"},children:u.driverName})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${c(u.status)}20`,color:c(u.status)},children:u.status.replace("_"," ").charAt(0).toUpperCase()+u.status.replace("_"," ").slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{fontSize:"12px",color:"#64748b",maxWidth:"200px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e(Ge,{size:12,color:"#10b981"}),e("span",{style:{fontSize:"11px",fontWeight:"500"},children:"From:"})]}),e("div",{style:{marginBottom:"4px",fontSize:"11px"},children:u.pickupLocation}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e(zr,{size:12,color:"#ef4444"}),e("span",{style:{fontSize:"11px",fontWeight:"500"},children:"To:"})]}),e("div",{style:{fontSize:"11px"},children:u.dropoffLocation})]})}),t("td",{style:{padding:"16px"},children:[e("div",{style:{fontWeight:"600",color:"#10b981",fontSize:"16px"},children:u.fare}),e("div",{style:{fontSize:"11px",color:"#64748b"},children:u.distance})]}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{style:{padding:"6px",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Oi,{size:12,color:"white"})}),e("button",{style:{padding:"6px",backgroundColor:"#10b981",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Mr,{size:12,color:"white"})}),e("button",{style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:12,color:"#64748b"})})]})})]},u.id))})]})})})]})},Mp=()=>{const[i,o]=l.exports.useState("7d"),[r,n]=l.exports.useState("overview"),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(!0),[c,v]=l.exports.useState({totalRevenue:0,activeRides:0,onlineDrivers:0,totalRiders:0}),[u,x]=l.exports.useState(null),[z,E]=l.exports.useState(!1);Qo.useEffect(()=>{(async()=>{var Y,B,V,re;try{console.log("\u{1F4CA} ANALYTICS: Fetching real data...");const I=localStorage.getItem("authToken"),[ee,O,ne]=await Promise.all([fetch(ie("api/admin/rides"),{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}}),fetch(ie("api/admin/drivers"),{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}}),fetch(ie("api/admin/riders"),{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}})]);if(ee.ok&&O.ok&&ne.ok){const[X,Ye,J]=await Promise.all([ee.json(),O.json(),ne.json()]),M=(((Y=X.rides)==null?void 0:Y.filter(xe=>xe.status==="completed"))||[]).reduce((xe,Ue)=>xe+(parseFloat(Ue.final_fare)||0),0),K=((B=X.rides)==null?void 0:B.filter(xe=>["requested","accepted","started","in_progress"].includes(xe.status)).length)||0,de=((V=Ye.drivers)==null?void 0:V.filter(xe=>xe.status==="online").length)||0,he=((re=J.riders)==null?void 0:re.length)||0;console.log("\u{1F4CA} ANALYTICS: Real totals calculated:"),console.log("- Total Revenue: $"+M.toFixed(2)),console.log("- Active Rides:",K),console.log("- Online Drivers:",de),console.log("- Total Riders:",he),v({totalRevenue:M,activeRides:K,onlineDrivers:de,totalRiders:he})}}catch(I){console.error("\u{1F4CA} ANALYTICS: Failed to fetch data:",I)}finally{h(!1)}})()},[]);const F=async()=>{try{E(!0),console.log("\u{1F916} ML ANALYTICS: Fetching ML data...");const W=localStorage.getItem("authToken"),Y=await fetch(ie("api/admin/ml-analytics"),{headers:{Authorization:`Bearer ${W}`,"Content-Type":"application/json"}});if(Y.ok){const B=await Y.json();console.log("\u2705 ML ANALYTICS: Data received:",B),x(B)}else console.error("\u274C ML ANALYTICS: Failed to fetch data")}catch(W){console.error("\u274C ML ANALYTICS: Error:",W)}finally{E(!1)}};Qo.useEffect(()=>{r==="ml-analytics"&&!u&&F()},[r,u]);const b=[{title:"Total Revenue",value:p?"Loading...":`$${c.totalRevenue.toFixed(2)}`,change:"+0.0%",changePercent:0,trend:"stable",icon:Nt,color:"#10b981"},{title:"Active Rides",value:p?"Loading...":c.activeRides.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:rt,color:"#3b82f6"},{title:"Online Drivers",value:p?"Loading...":c.onlineDrivers.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:no,color:"#f59e0b"},{title:"Total Riders",value:p?"Loading...":c.totalRiders.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:oo,color:"#8b5cf6"},{title:"Completion Rate",value:p?"Loading...":"100%",change:"+0.0%",changePercent:0,trend:"stable",icon:Xn,color:"#06b6d4"},{title:"Avg Response Time",value:p?"Loading...":"< 1 min",change:"+0.0 min",changePercent:0,trend:"stable",icon:kt,color:"#ef4444"}],S=[{date:"2025-09-05",revenue:p?0:c.totalRevenue,rides:p?0:5,drivers:p?0:3,avgFare:p?0:c.totalRevenue/4}],m=[{metric:"Revenue Growth",current:0,previous:0,target:15,unit:"%"},{metric:"Driver Utilization",current:p?0:c.onlineDrivers/3*100,previous:0,target:80,unit:"%"},{metric:"Customer Satisfaction",current:4.7,previous:4.7,target:4.9,unit:"/5"},{metric:"Ride Completion",current:100,previous:100,target:98,unit:"%"},{metric:"Market Share",current:.1,previous:0,target:25,unit:"%"},{metric:"Driver Retention",current:100,previous:100,target:90,unit:"%"}],y=[{hour:"06:00",predicted:0,confidence:60,zone:"Downtown"},{hour:"07:00",predicted:1,confidence:65,zone:"Downtown"},{hour:"08:00",predicted:2,confidence:70,zone:"Downtown"},{hour:"09:00",predicted:1,confidence:65,zone:"Downtown"},{hour:"10:00",predicted:1,confidence:60,zone:"Downtown"},{hour:"11:00",predicted:0,confidence:55,zone:"Downtown"},{hour:"12:00",predicted:2,confidence:70,zone:"Downtown"}],f=[{name:"Standard",value:3,color:"#3b82f6"},{name:"Economy",value:1,color:"#10b981"},{name:"XL",value:1,color:"#8b5cf6"},{name:"Airport",value:1,color:"#f59e0b"}],w=async()=>{var W,Y,B,V;d(!0),h(!0);try{console.log("\u{1F504} ANALYTICS: Manual refresh triggered...");const[re,I,ee]=await Promise.all([fetch("/api/admin/rides",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}}),fetch("/api/admin/drivers",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}}),fetch("/api/admin/riders",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}})]);if(re.ok&&I.ok&&ee.ok){const[O,ne,X]=await Promise.all([re.json(),I.json(),ee.json()]),J=(((W=O.rides)==null?void 0:W.filter(de=>de.status==="completed"))||[]).reduce((de,he)=>de+(parseFloat(he.final_fare)||0),0),U=((Y=O.rides)==null?void 0:Y.filter(de=>["requested","accepted","started","in_progress"].includes(de.status)).length)||0,M=((B=ne.drivers)==null?void 0:B.filter(de=>de.status==="online").length)||0,K=((V=X.riders)==null?void 0:V.length)||0;console.log("\u{1F504} ANALYTICS: Refresh complete - updated totals:",{totalRevenue:J.toFixed(2),activeRides:U,onlineDrivers:M,totalRiders:K}),v({totalRevenue:J,activeRides:U,onlineDrivers:M,totalRiders:K})}}catch(re){console.error("\u{1F504} ANALYTICS: Refresh failed:",re)}finally{h(!1),d(!1)}},L=()=>{const W={period:i,timestamp:new Date().toISOString(),metrics:{totalRevenue:c.totalRevenue,activeRides:c.activeRides,onlineDrivers:c.onlineDrivers,totalRiders:c.totalRiders},performanceMetrics:m,revenueData:S},Y=JSON.stringify(W,null,2),B=new Blob([Y],{type:"application/json"}),V=URL.createObjectURL(B),re=document.createElement("a");re.href=V,re.download=`analytics-${i}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(V),console.log("\u{1F4CA} ANALYTICS: Data exported successfully")},A=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(W),H=(W,Y)=>{const B=W/Y*100;return B>=95?"#10b981":B>=80?"#f59e0b":"#ef4444"};return t("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Business Intelligence Dashboard"}),e("p",{style:{color:"#64748b",margin:0},children:"Real-time analytics, performance metrics, and predictive insights"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("select",{value:i,onChange:W=>o(W.target.value),style:{padding:"8px 12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white"},children:[e("option",{value:"24h",children:"Last 24 Hours"}),e("option",{value:"7d",children:"Last 7 Days"}),e("option",{value:"30d",children:"Last 30 Days"}),e("option",{value:"90d",children:"Last 90 Days"})]}),t("button",{onClick:w,disabled:s,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:s?"not-allowed":"pointer",opacity:s?.7:1},children:[e(Zo,{size:14,style:{animation:s?"spin 1s linear infinite":"none"}}),"Refresh"]}),t("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[e($i,{size:14}),"Export"]})]})]}),e("div",{style:{display:"flex",background:"white",borderRadius:"12px",padding:"4px",marginBottom:"24px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{key:"overview",label:"Overview",icon:ni},{key:"revenue",label:"Revenue",icon:Nt},{key:"operations",label:"Operations",icon:Bs},{key:"predictions",label:"Predictions",icon:Fr},{key:"ml-analytics",label:"ML Analytics",icon:$t}].map(W=>t("button",{onClick:()=>n(W.key),style:{flex:1,background:r===W.key?"#3b82f6":"transparent",color:r===W.key?"white":"#6b7280",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(W.icon,{size:16}),W.label]},W.key))}),r==="overview"&&t(ve,{children:[e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"32px"},children:b.map((W,Y)=>{const B=W.icon;return e("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"8px",fontWeight:"500"},children:W.title}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1f2937",marginBottom:"8px"},children:W.value}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",fontWeight:"600",color:W.trend==="up"?"#10b981":W.trend==="down"?"#ef4444":"#6b7280"},children:[W.trend==="up"?e(Ns,{size:14}):W.trend==="down"?e(_s,{size:14}):null,W.change]})]}),e("div",{style:{width:"56px",height:"56px",background:`${W.color}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:e(B,{size:24,color:W.color})})]})},Y)})}),t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"24px",marginBottom:"32px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Revenue Trend"}),e(To,{width:"100%",height:300,children:t(Ln,{data:S,children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"date",stroke:"#6b7280",fontSize:12}),e(Eo,{stroke:"#6b7280",fontSize:12}),e(Do,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(Nn,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:3,fill:"url(#colorRevenue)"}),e("defs",{children:t("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})})]})})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Ride Distribution"}),e(To,{width:"100%",height:300,children:t(Va,{children:[e(Ga,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:f.map((W,Y)=>e(Ya,{fill:W.color},`cell-${Y}`))}),e(Do,{}),e($n,{})]})})]})]})]}),r==="revenue"&&t(ve,{children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginBottom:"32px"},children:[t("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Total Revenue"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:p?"Loading...":A(c.totalRevenue)}),e("div",{style:{fontSize:"12px",opacity:.8},children:"+12.5% vs last period"})]}),t("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Average Fare"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:A(38.42)}),e("div",{style:{fontSize:"12px",opacity:.8},children:"+2.1% vs last period"})]}),t("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Commission Rate"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:"25%"}),e("div",{style:{fontSize:"12px",opacity:.8},children:"Standard rate"})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Revenue vs Rides Correlation"}),e(To,{width:"100%",height:400,children:t(tn,{data:S,children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"date",stroke:"#6b7280",fontSize:12}),e(Eo,{yAxisId:"left",stroke:"#6b7280",fontSize:12}),e(Eo,{yAxisId:"right",orientation:"right",stroke:"#6b7280",fontSize:12}),e(Do,{}),e($n,{}),e(hr,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:3,name:"Revenue ($)"}),e(hr,{yAxisId:"right",type:"monotone",dataKey:"rides",stroke:"#3b82f6",strokeWidth:3,name:"Rides Count"})]})})]})]}),r==="operations"&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Performance Metrics"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:m.map((W,Y)=>t("div",{style:{padding:"20px",border:"2px solid #e5e7eb",borderRadius:"12px",background:"#f9fafb"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:W.metric}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:H(W.current,W.target)},children:[W.current,W.unit]})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:e("div",{style:{width:`${Math.min(W.current/W.target*100,100)}%`,height:"100%",background:H(W.current,W.target),borderRadius:"4px",transition:"width 0.3s ease"}})}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280"},children:[t("span",{children:["Previous: ",W.previous,W.unit]}),t("span",{children:["Target: ",W.target,W.unit]})]})]},Y))})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Driver Utilization"}),e(To,{width:"100%",height:250,children:t(Ja,{data:[{hour:"6AM",utilization:45},{hour:"9AM",utilization:78},{hour:"12PM",utilization:85},{hour:"3PM",utilization:72},{hour:"6PM",utilization:92},{hour:"9PM",utilization:68}],children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Eo,{stroke:"#6b7280",fontSize:12}),e(Do,{}),e(Ka,{dataKey:"utilization",fill:"#3b82f6",radius:[4,4,0,0]})]})})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Completion Rates by Hour"}),e(To,{width:"100%",height:250,children:t(tn,{data:[{hour:"6AM",rate:94},{hour:"9AM",rate:96},{hour:"12PM",rate:98},{hour:"3PM",rate:97},{hour:"6PM",rate:95},{hour:"9PM",rate:96}],children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Eo,{stroke:"#6b7280",fontSize:12,domain:[90,100]}),e(Do,{}),e(hr,{type:"monotone",dataKey:"rate",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:4}})]})})]})]})]}),r==="predictions"&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:"ML-Based Demand Predictions"}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f0f9ff",padding:"8px 12px",borderRadius:"8px",border:"1px solid #0ea5e9"},children:[e(Fr,{size:16,color:"#0369a1"}),e("span",{style:{fontSize:"12px",color:"#0369a1",fontWeight:"600"},children:"AI-Powered Insights"})]})]}),e(To,{width:"100%",height:300,children:t(Ln,{data:y,children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Eo,{stroke:"#6b7280",fontSize:12}),e(Do,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(Nn,{type:"monotone",dataKey:"predicted",stroke:"#8b5cf6",strokeWidth:3,fill:"url(#colorPrediction)"}),e("defs",{children:t("linearGradient",{id:"colorPrediction",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})})]})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Prediction Confidence"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:y.slice(0,4).map((W,Y)=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:W.hour}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[W.predicted," predicted rides"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"60px",height:"6px",background:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:e("div",{style:{width:`${W.confidence}%`,height:"100%",background:W.confidence>=90?"#10b981":W.confidence>=80?"#f59e0b":"#ef4444",borderRadius:"3px"}})}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:W.confidence>=90?"#10b981":W.confidence>=80?"#f59e0b":"#ef4444"},children:[W.confidence,"%"]})]})]},Y))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"AI Recommendations"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"8px",borderLeft:"4px solid #10b981"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Mi,{size:16,color:"#10b981"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#065f46"},children:"High Demand Alert"})]}),e("p",{style:{fontSize:"12px",color:"#047857",margin:0},children:"Downtown area will see 35% higher demand at 8AM. Consider incentivizing drivers."})]}),t("div",{style:{padding:"16px",background:"#fef3c7",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(yo,{size:16,color:"#d97706"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#92400e"},children:"Driver Shortage"})]}),e("p",{style:{fontSize:"12px",color:"#b45309",margin:0},children:"Predicted 15% driver shortage during lunch hours. Deploy surge pricing."})]}),t("div",{style:{padding:"16px",background:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #3b82f6"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Xn,{size:16,color:"#1d4ed8"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1e40af"},children:"Optimization"})]}),e("p",{style:{fontSize:"12px",color:"#1e40af",margin:0},children:"Reallocate 12 drivers to airport zone for 22% efficiency gain."})]})]})]})]})]}),r==="ml-analytics"&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:"Machine Learning System Health"}),t("button",{onClick:F,disabled:z,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"500",cursor:z?"not-allowed":"pointer",opacity:z?.7:1},children:[e(Zo,{size:12,style:{animation:z?"spin 1s linear infinite":"none"}}),"Refresh ML Data"]})]}),z?e("div",{style:{textAlign:"center",padding:"20px"},children:"Loading ML analytics..."}):u?e(ve,{children:t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t("div",{style:{background:u.system_health.status==="healthy"?"#f0f9ff":"#fef2f2",border:`1px solid ${u.system_health.status==="healthy"?"#0ea5e9":"#ef4444"}`,borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"System Status"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:u.system_health.status==="healthy"?"#0369a1":"#dc2626",textTransform:"capitalize"},children:u.system_health.status})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Active Models"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:u.system_health.active_models})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Average Accuracy"}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:[(u.system_health.average_accuracy*100).toFixed(1),"%"]})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Total Predictions"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:u.system_health.total_predictions})]})]})}):e("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:'Click "Refresh ML Data" to load ML analytics'})]}),u&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"ML Model Performance"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:u.model_performance.map((W,Y)=>t("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"20px",background:"#f9fafb"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",margin:0},children:W.name}),e("span",{style:{background:W.status==="healthy"?"#dcfce7":"#fef2f2",color:W.status==="healthy"?"#166534":"#dc2626",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:W.status})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Accuracy:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[(W.accuracy*100).toFixed(1),"%"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Confidence:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[(W.confidence*100).toFixed(1),"%"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Predictions:"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:W.predictions})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Response Time:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[W.response_time,"ms"]})]})]})]},Y))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Automated ML Insights"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.insights.map((W,Y)=>t("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e("div",{style:{width:"6px",height:"6px",background:"#3b82f6",borderRadius:"50%",marginTop:"8px",flexShrink:0}}),e("span",{style:{fontSize:"14px",color:"#374151",lineHeight:"1.5"},children:W})]},Y))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"ML Performance Trends"}),e(To,{width:"100%",height:300,children:t(tn,{data:u.performance_trends.accuracy_trend,children:[e(Ko,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xo,{dataKey:"time",stroke:"#6b7280",fontSize:12}),e(Eo,{stroke:"#6b7280",fontSize:12}),e(Do,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(hr,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]})]})]}),e("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},_p=()=>{const[i,o]=l.exports.useState(null),[r,n]=l.exports.useState([]),[s,d]=l.exports.useState(!0);Qo.useEffect(()=>{(async()=>{try{console.log("\u{1F697} DISPATCH: Starting to fetch rides...");const v=localStorage.getItem("authToken"),u=await fetch(ie("api/admin/rides"),{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json",Accept:"application/json"}});if(console.log("\u{1F697} DISPATCH: Response status:",u.status),!u.ok){const z=await u.text();console.error("\u{1F697} DISPATCH: API error:",u.status,z),n([]);return}const x=await u.json();if(console.log("\u{1F697} DISPATCH: Raw API data:",x),x.success&&x.rides){const z=x.rides.map((E,F)=>({id:E.id,riderId:E.rider_id,riderName:E.rider_name,driverId:E.driver_id,driverName:E.driver_name==="Unassigned"?null:E.driver_name,status:E.status==="requested"?"pending":E.status==="accepted"?"pickup":E.status==="started"?"in_progress":E.status,pickup:E.pickup_address,dropoff:E.destination_address,estimatedTime:E.status==="requested"?"Finding driver...":"12 min",fare:E.final_fare?`$${parseFloat(E.final_fare).toFixed(2)}`:E.estimated_fare?`~$${parseFloat(E.estimated_fare).toFixed(2)}`:"Calculating...",distance:"4.2 miles"}));console.log("\u{1F697} DISPATCH: Transformed rides:",z),console.log("\u{1F697} DISPATCH: Rider names:",z.map(E=>E.riderName)),n(z)}else console.error("\u{1F697} DISPATCH: Invalid data structure:",x),n([])}catch(v){console.error("\u{1F697} DISPATCH: Network error:",v),n([])}finally{d(!1)}})()},[]);const p=c=>{switch(c){case"pending":return"#f59e0b";case"pickup":return"#3b82f6";case"in_progress":return"#10b981";default:return"#6b7280"}},h=c=>{switch(c){case"pending":return e(kt,{size:16});case"pickup":return e(rt,{size:16});case"in_progress":return e(ka,{size:16});default:return e(ro,{size:16})}};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Live Dispatch Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor and manage active rides in real-time"})]}),e("div",{style:{display:"flex",gap:"12px"},children:t("button",{style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(bt,{size:16}),"Auto-Dispatch: ON"]})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:s?"...":r.filter(c=>c.status==="pending").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Pending Requests"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:s?"...":r.filter(c=>c.status==="pickup").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"En Route to Pickup"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:s?"...":r.filter(c=>c.status==="in_progress").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Active Rides"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:s?"...":"3"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Available Drivers"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b",margin:0},children:"Active Rides"})}),t("div",{style:{maxHeight:"600px",overflowY:"auto"},children:[s&&e("div",{style:{padding:"40px",textAlign:"center",color:"#64748b"},children:"Loading real rides..."}),!s&&r.length===0&&e("div",{style:{padding:"40px",textAlign:"center",color:"#64748b"},children:"No active rides at the moment"}),r.map(c=>t("div",{onClick:()=>o(c.id),style:{padding:"20px",borderBottom:"1px solid #f1f5f9",cursor:"pointer",backgroundColor:i===c.id?"#eff6ff":"white",transition:"all 0.2s ease"},onMouseEnter:v=>{i!==c.id&&(v.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:v=>{i!==c.id&&(v.currentTarget.style.backgroundColor="white")},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{fontWeight:"700",color:"#3b82f6"},children:["#",c.id.toString().padStart(4,"0")]}),t("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",backgroundColor:`${p(c.status)}20`,color:p(c.status)},children:[h(c.status),c.status.replace("_"," ").charAt(0).toUpperCase()+c.status.replace("_"," ").slice(1)]})]}),e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981"},children:c.fare})]}),t("div",{style:{marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e(je,{size:14,color:"#64748b"}),e("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:c.riderName})]}),c.driverName&&t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(rt,{size:14,color:"#64748b"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:c.driverName})]})]}),t("div",{style:{fontSize:"12px",color:"#64748b",lineHeight:"1.4"},children:[t("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px",marginBottom:"4px"},children:[e(Ge,{size:12,color:"#10b981",style:{marginTop:"2px",flexShrink:0}}),e("span",{children:c.pickup})]}),t("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px"},children:[e(zr,{size:12,color:"#ef4444",style:{marginTop:"2px",flexShrink:0}}),e("span",{children:c.dropoff})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(kt,{size:12,color:"#64748b"}),e("span",{style:{fontSize:"12px",color:"#64748b"},children:c.estimatedTime})]}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:c.distance})]})]},c.id))]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0"},children:i?t("div",{children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b",margin:0},children:["Ride Details #",i.toString().padStart(4,"0")]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{style:{padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e(Oi,{size:12}),"Call"]}),t("button",{style:{padding:"8px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e(Mr,{size:12}),"Message"]})]})]})}),e("div",{style:{padding:"20px"},children:(()=>{const c=r.find(v=>v.id===i);return c?e("div",{children:t("div",{style:{marginBottom:"24px"},children:[t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",backgroundColor:`${p(c.status)}20`,color:p(c.status),marginBottom:"16px"},children:[h(c.status),c.status.replace("_"," ").charAt(0).toUpperCase()+c.status.replace("_"," ").slice(1)]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[t("div",{children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"4px"},children:"RIDER"}),e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:c.riderName}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:["ID: ",c.riderId]})]}),t("div",{children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"4px"},children:"DRIVER"}),e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:c.driverName||"Searching..."}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:c.driverId?`ID: ${c.driverId}`:"No driver assigned"})]})]}),t("div",{style:{marginBottom:"20px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"8px"},children:"ROUTE"}),t("div",{style:{marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"8px"},children:[e(Ge,{size:16,color:"#10b981",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b",marginBottom:"2px"},children:"Pickup Location"}),e("div",{style:{fontSize:"13px",color:"#64748b"},children:c.pickup})]})]}),t("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e(zr,{size:16,color:"#ef4444",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b",marginBottom:"2px"},children:"Dropoff Location"}),e("div",{style:{fontSize:"13px",color:"#64748b"},children:c.dropoff})]})]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",paddingTop:"16px",borderTop:"1px solid #f1f5f9"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:c.fare}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Fare"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#3b82f6"},children:c.distance}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Distance"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#f59e0b"},children:c.estimatedTime}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"ETA"})]})]})]})}):null})()})]}):t("div",{style:{padding:"60px 20px",textAlign:"center",color:"#64748b"},children:[e(rt,{size:48,color:"#e2e8f0",style:{marginBottom:"16px"}}),e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"4px"},children:"Select a ride to view details"}),e("div",{style:{fontSize:"14px"},children:"Click on any active ride to see detailed information"})]})})]})]})},Pp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState("all");l.exports.useEffect(()=>{s()},[]);const s=()=>{const x=JSON.parse(localStorage.getItem("ride_history")||"[]").map(z=>({...z,bookedAt:new Date(z.bookedAt),completedAt:new Date(z.completedAt)}));o(x)},d=i.filter(u=>{const x=new Date,z=u.completedAt;switch(r){case"this-week":const E=new Date(x.getTime()-6048e5);return z>=E;case"this-month":const F=new Date(x.getTime()-30*24*60*60*1e3);return z>=F;default:return!0}}),p=d.reduce((u,x)=>u+x.finalFare,0),h=d.length,c=u=>{alert(`Receipt for ride ${u.id} would be downloaded`)},v=(u,x)=>{const z=i.map(E=>E.id===u?{...E,rating:x}:E);o(z),localStorage.setItem("ride_history",JSON.stringify(z))};return t("div",{style:{maxWidth:"800px",margin:"0 auto",background:"#f8fafc",minHeight:"100vh"},children:[t("div",{style:{background:"white",padding:"20px",borderBottom:"1px solid #e2e8f0"},children:[e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",marginBottom:"16px"},children:"Ride History"}),t("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[t("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"12px",flex:1,textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#3b82f6"},children:h}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:"Total Rides"})]}),t("div",{style:{background:"#f0fdf4",padding:"16px",borderRadius:"12px",flex:1,textAlign:"center"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:["$",p.toFixed(2)]}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:"Total Spent"})]})]}),e("div",{style:{display:"flex",gap:"8px"},children:[{key:"all",label:"All Time"},{key:"this-week",label:"This Week"},{key:"this-month",label:"This Month"}].map(({key:u,label:x})=>e("button",{onClick:()=>n(u),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:r===u?"#3b82f6":"#f1f5f9",color:r===u?"white":"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:x},u))})]}),e("div",{style:{padding:"20px"},children:d.length===0?t("div",{style:{background:"white",borderRadius:"12px",padding:"40px",textAlign:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e(rt,{size:48,color:"#d1d5db",style:{margin:"0 auto 16px"}}),e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"No rides found"}),e("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Your completed rides will appear here"})]}):e("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:d.map(u=>t("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{children:[t("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:["$",u.finalFare.toFixed(2)]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[u.completedAt.toLocaleDateString()," at ",u.completedAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),t("button",{onClick:()=>c(u),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[e($i,{size:16}),"Receipt"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600"},children:u.driver.name[0]}),t("div",{style:{flex:1},children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:u.driver.name}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[u.driver.vehicle.color," ",u.driver.vehicle.model]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(oo,{size:16,color:"#f59e0b",fill:"#f59e0b"}),e("span",{style:{fontSize:"14px",fontWeight:"500"},children:u.driver.rating})]})]}),t("div",{style:{marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e(Ge,{size:14,color:"#10b981"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:"From:"}),e("span",{style:{fontSize:"14px"},children:u.pickup.address})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(Ge,{size:14,color:"#ef4444"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:"To:"}),e("span",{style:{fontSize:"14px"},children:u.destination.address})]})]}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"20px"},children:u.paymentMethod.icon}),t("span",{style:{fontSize:"14px",color:"#64748b"},children:["Paid with ",u.paymentMethod.name]})]}),!u.rating&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#64748b"},children:"Rate:"}),[1,2,3,4,5].map(x=>e("button",{onClick:()=>v(u.id,x),style:{background:"none",border:"none",cursor:"pointer",padding:"2px"},children:e(oo,{size:16,color:"#d1d5db"})},x))]}),u.rating&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#64748b"},children:"Your rating:"}),e("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(x=>e(oo,{size:14,color:"#f59e0b",fill:x<=u.rating?"#f59e0b":"none"},x))})]})]})]},u.id))})})]})},Lp=()=>{const[i,o]=l.exports.useState(!1),[r,n]=l.exports.useState(""),[s,d]=l.exports.useState({siteName:"Pi VIP Rideshare",siteDescription:"Premium Ride-Sharing Platform",defaultTimezone:"America/Chicago",currency:"USD",language:"en",distanceUnit:"miles",maintenanceMode:!1,debugMode:!1}),[p,h]=l.exports.useState({baseFare:2.5,perMileRate:1.85,perMinuteRate:.35,bookingFee:1.5,cancellationFee:3,maxRideRadius:25,allowScheduledRides:!0,acceptPets:!1,acceptTeens:!1,surgeMultiplierMax:3,driverCommission:75}),[c,v]=l.exports.useState([]),[u,x]=l.exports.useState(""),[z,E]=l.exports.useState({emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,riderNotifications:!0,driverNotifications:!0,adminAlerts:!0,systemMaintenanceAlerts:!0,paymentFailureAlerts:!0}),[F,b]=l.exports.useState({requireTwoFactor:!1,sessionTimeout:60,maxLoginAttempts:5,passwordMinLength:8,requirePasswordComplexity:!0,allowRememberMe:!0,apiRateLimit:100,enableAuditLogging:!0}),[S,m]=l.exports.useState({defaultMapType:"roadmap",enableTraffic:!0,enableTransit:!0,defaultZoom:13,enableGeolocation:!0,mapProvider:"google",updateInterval:5e3,showDriverLocations:!0});l.exports.useEffect(()=>{(async()=>{try{const ee=localStorage.getItem("authToken"),O=await fetch(ie("api/admin/settings"),{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});if(O.ok){const ne=await O.json();console.log("\u2699\uFE0F Settings loaded:",ne),ne.settings&&(ne.settings.general&&d(ne.settings.general),ne.settings.ride&&h(ne.settings.ride),ne.settings.notifications&&E(ne.settings.notifications),ne.settings.security&&b(ne.settings.security),ne.settings.map&&m(ne.settings.map))}}catch(ee){console.error("Failed to load settings:",ee)}})(),y()},[]);const y=async()=>{var I,ee;try{const O=localStorage.getItem("authToken"),ne=await fetch(ie("api/admin/market-pricing"),{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(ne.ok){const X=await ne.json();console.log("\u{1F4CD} Markets loaded for pricing:",(I=X.markets)==null?void 0:I.length),v(X.markets||[]),((ee=X.markets)==null?void 0:ee.length)>0&&(x(X.markets[0].id),f(X.markets[0].id))}}catch(O){console.error("Failed to load markets:",O)}},f=async I=>{try{const ee=localStorage.getItem("authToken"),O=await fetch(ie(`api/admin/market-pricing/${I}`),{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});if(O.ok){const ne=await O.json();console.log("\u{1F4B0} Market pricing loaded:",ne.market);const X=ne.market;h({baseFare:parseFloat(X.base_fare_economy)||2.5,perMileRate:parseFloat(X.per_mile_fare)||1.85,perMinuteRate:parseFloat(X.per_minute_fare)||.35,bookingFee:parseFloat(X.booking_fee)||1.5,cancellationFee:3,maxRideRadius:25,allowScheduledRides:!0,acceptPets:!1,acceptTeens:!1,surgeMultiplierMax:parseFloat(X.max_surge_multiplier)||3,driverCommission:parseInt(X.driver_commission_percent)||75})}}catch(ee){console.error("Failed to load market pricing:",ee)}},w=(I,ee)=>{d(O=>({...O,[I]:ee}))},L=(I,ee)=>{h(O=>({...O,[I]:ee}))},A=(I,ee)=>{E(O=>({...O,[I]:ee}))},H=(I,ee)=>{b(O=>({...O,[I]:ee}))},W=(I,ee)=>{m(O=>({...O,[I]:ee}))},Y=async()=>{o(!0);try{const I=localStorage.getItem("authToken"),ee=[{key:"general",value:s},{key:"ride",value:p},{key:"notifications",value:z},{key:"security",value:F},{key:"map",value:S}];u&&await fetch(ie(`api/admin/market-pricing/${u}`),{method:"PUT",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({base_fare_economy:p.baseFare,per_mile_fare:p.perMileRate,per_minute_fare:p.perMinuteRate,booking_fee:p.bookingFee,driver_commission_percent:p.driverCommission,max_surge_multiplier:p.surgeMultiplierMax})});for(const ne of ee)await fetch(ie(`api/admin/settings/${ne.key}`),{method:"PUT",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({value:ne.value})});const O=new Date().toLocaleString();n(O),V("\u2705 All settings saved successfully!","success")}catch(I){console.error("Failed to save settings:",I),V("\u274C Failed to save settings","error")}finally{o(!1)}},B=()=>{confirm("Are you sure you want to reset all settings to default values? This action cannot be undone.")&&(d({siteName:"Pi VIP Rideshare",siteDescription:"Premium Ride-Sharing Platform",defaultTimezone:"America/Chicago",currency:"USD",language:"en",distanceUnit:"miles",maintenanceMode:!1,debugMode:!1}),h({baseFare:2.5,perMileRate:1.85,perMinuteRate:.35,bookingFee:1.5,cancellationFee:3,maxRideRadius:25,allowScheduledRides:!0,acceptPets:!1,acceptTeens:!1,surgeMultiplierMax:3,driverCommission:75}),V("\u{1F504} Settings reset to defaults","info"))},V=(I,ee)=>{const O=document.createElement("div");O.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${ee==="success"?"#10b981":ee==="error"?"#ef4444":ee==="warning"?"#f59e0b":"#3b82f6"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,O.textContent=I,document.body.appendChild(O);const ne=document.createElement("style");ne.textContent=`
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
      }
    `,document.head.appendChild(ne),setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O),document.head.contains(ne)&&document.head.removeChild(ne)},4e3)},re=({checked:I,onChange:ee})=>e("div",{onClick:()=>ee(!I),style:{width:"44px",height:"24px",backgroundColor:I?"#10b981":"#d1d5db",borderRadius:"12px",position:"relative",cursor:"pointer",transition:"all 0.2s ease"},children:e("div",{style:{width:"20px",height:"20px",backgroundColor:"white",borderRadius:"50%",position:"absolute",top:"2px",left:I?"22px":"2px",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"System Settings"}),t("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:["Configure platform settings and preferences",r&&t("span",{style:{marginLeft:"16px",fontSize:"14px",color:"#10b981"},children:["Last saved: ",r]})]})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("button",{onClick:B,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#6b7280",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(Zo,{size:16}),"Reset to Defaults"]}),t("button",{onClick:Y,disabled:i,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:i?"not-allowed":"pointer",opacity:i?.7:1},children:[i?e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}):e(zn,{size:16}),i?"Saving...":"Save All Settings"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Rr,{size:20,color:"#3b82f6"}),"General Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Distance Unit"}),t("select",{value:s.distanceUnit,onChange:I=>w("distanceUnit",I.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"miles",children:"Miles"}),e("option",{value:"km",children:"Kilometers"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Site Description"}),e("textarea",{value:s.siteDescription,onChange:I=>w("siteDescription",I.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Default Timezone"}),t("select",{value:s.defaultTimezone,onChange:I=>w("defaultTimezone",I.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e("option",{value:"America/Denver",children:"Mountain Time"}),e("option",{value:"America/Chicago",children:"Central Time"}),e("option",{value:"America/New_York",children:"Eastern Time"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Currency"}),t("select",{value:s.currency,onChange:I=>w("currency",I.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"USD",children:"USD ($)"}),e("option",{value:"EUR",children:"EUR (\u20AC)"}),e("option",{value:"GBP",children:"GBP (\xA3)"}),e("option",{value:"CAD",children:"CAD ($)"})]})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Maintenance Mode"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Disable public access to the platform"})]}),e(re,{checked:s.maintenanceMode,onChange:I=>w("maintenanceMode",I)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Debug Mode"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Enable detailed logging and error reporting"})]}),e(re,{checked:s.debugMode,onChange:I=>w("debugMode",I)})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(rt,{size:20,color:"#3b82f6"}),"Ride Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:p.baseFare,onChange:I=>L("baseFare",parseFloat(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Select Market"}),e("select",{value:u,onChange:I=>{x(I.target.value),f(I.target.value)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:c.map(I=>t("option",{value:I.id,children:[I.market_name," (",I.city,", ",I.state,")"]},I.id))})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Per Mile Rate ($)"}),e("input",{type:"number",step:"0.05",value:p.perMileRate,onChange:I=>L("perMileRate",parseFloat(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Per Minute Rate ($)"}),e("input",{type:"number",step:"0.05",value:p.perMinuteRate,onChange:I=>L("perMinuteRate",parseFloat(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Driver Commission (%)"}),e("input",{type:"number",min:"50",max:"95",value:p.driverCommission,onChange:I=>L("driverCommission",parseInt(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Accept Pets"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Allow riders to bring pets on rides"})]}),e(re,{checked:p.acceptPets,onChange:I=>L("acceptPets",I)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Accept Teens"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Allow unaccompanied minors (13-17) to book rides"})]}),e(re,{checked:p.acceptTeens,onChange:I=>L("acceptTeens",I)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Allow Scheduled Rides"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Enable advance booking of rides"})]}),e(re,{checked:p.allowScheduledRides,onChange:I=>L("allowScheduledRides",I)})]})]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(ei,{size:20,color:"#3b82f6"}),"Notification Settings"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(z).map(([I,ee])=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",textTransform:"capitalize"},children:I.replace(/([A-Z])/g," $1").trim()}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:I.includes("Admin")?"Administrative notifications":I.includes("System")?"System maintenance alerts":I.includes("Payment")?"Payment failure notifications":"General platform notifications"})]}),e(re,{checked:ee,onChange:O=>A(I,O)})]},I))})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(mo,{size:20,color:"#3b82f6"}),"Security Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Session Timeout (minutes)"}),e("input",{type:"number",min:"15",max:"480",value:F.sessionTimeout,onChange:I=>H("sessionTimeout",parseInt(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Max Login Attempts"}),e("input",{type:"number",min:"3",max:"10",value:F.maxLoginAttempts,onChange:I=>H("maxLoginAttempts",parseInt(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Require Two-Factor Authentication"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Force all users to enable 2FA"})]}),e(re,{checked:F.requireTwoFactor,onChange:I=>H("requireTwoFactor",I)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Enable Audit Logging"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Log all administrative actions"})]}),e(re,{checked:F.enableAuditLogging,onChange:I=>H("enableAuditLogging",I)})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ge,{size:20,color:"#3b82f6"}),"Map Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Default Map Type"}),t("select",{value:S.defaultMapType,onChange:I=>W("defaultMapType",I.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"roadmap",children:"Roadmap"}),e("option",{value:"satellite",children:"Satellite"}),e("option",{value:"hybrid",children:"Hybrid"}),e("option",{value:"terrain",children:"Terrain"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Update Interval (ms)"}),e("input",{type:"number",min:"1000",max:"30000",step:"1000",value:S.updateInterval,onChange:I=>W("updateInterval",parseInt(I.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Enable Traffic Layer"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Show real-time traffic information"})]}),e(re,{checked:S.enableTraffic,onChange:I=>W("enableTraffic",I)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Show Driver Locations"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Display live driver positions on map"})]}),e(re,{checked:S.showDriverLocations,onChange:I=>W("showDriverLocations",I)})]})]})]})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Np=()=>{l.exports.useState("today");const[i,o]=l.exports.useState(null),[r,n]=l.exports.useState(!1),s=async p=>{n(!0);try{const c=await(await fetch(ie("api/payments/test/simulate-payment"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rideId:"test_ride_123",amount:25.5,paymentMethodId:"pm_test_visa_4242",scenario:p})})).json();o(c)}catch(h){console.error("Payment test failed:",h),o({error:"Test failed"})}finally{n(!1)}};return t("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b"},children:"Payment Management"}),e("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Manage payment methods, view transaction history, and handle billing"}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px"},children:"Payment Dashboard"}),e("p",{style:{color:"#64748b"},children:"Payment management features will be implemented here."}),e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",marginTop:"32px"},children:"Payment Testing Interface"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[t("button",{onClick:()=>s("successful_payment"),disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#4CAF50",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Zo,{className:"animate-spin mr-2"}):e(bt,{className:"mr-2"}),"Run Successful Payment Test"]}),t("button",{onClick:()=>s("failed_payment"),disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#f44336",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Zo,{className:"animate-spin mr-2"}):e(ro,{className:"mr-2"}),"Run Failed Payment Test"]}),t("button",{onClick:async()=>{n(!0);try{const h=await(await fetch(ie("api/payments/test/validate-flow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rideId:"test_ride_123",paymentMethodId:"pm_test_visa_4242"})})).json();o(h)}catch(p){console.error("Payment validation failed:",p),o({error:"Validation failed"})}finally{n(!1)}},disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#ff9800",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Zo,{className:"animate-spin mr-2"}):e(Fr,{className:"mr-2"}),"Validate Payment Flow"]})]}),i&&t("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#f0f4f8",borderRadius:"8px"},children:[e("h4",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"12px"},children:"Test Results:"}),i.error?t("div",{style:{color:"#f44336",display:"flex",alignItems:"center"},children:[e(ro,{className:"mr-2"}),t("span",{children:["Error: ",i.error]})]}):e("pre",{style:{color:"#1e293b",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(i,null,2)})]})]})]})},$p=()=>{const[i,o]=l.exports.useState(!1),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState({email:!0,sms:!1,push:!0,marketing:!1}),[p,h]=l.exports.useState(!0),[c,v]=l.exports.useState({name:"Administrator",email:"admin@rideflow.com",phone:"+1 (555) 123-4567",role:"System Administrator",joinDate:"January 15, 2023",location:"San Francisco, CA",timezone:"Pacific Time (PT)",lastLogin:new Date().toLocaleString(),department:"Operations",emergencyContact:{name:"Jane Smith",phone:"+1 (555) 987-6543",relationship:"Supervisor"},permissions:{userManagement:!0,rideManagement:!0,analytics:!0,payments:!0,settings:!0}});l.exports.useEffect(()=>{(async()=>{try{const L=localStorage.getItem("authToken"),A=await fetch(ie("api/users/profile"),{headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"}});if(A.ok){const H=await A.json();console.log("\u{1F464} Profile loaded:",H);const W=H.user||H;v(Y=>({...Y,name:`${W.first_name||""} ${W.last_name||""}`.trim()||"Administrator",email:W.email||Y.email,phone:W.phone||Y.phone,role:W.user_type==="admin"?"System Administrator":W.user_type,joinDate:W.created_at?new Date(W.created_at).toLocaleDateString():Y.joinDate,lastLogin:new Date().toLocaleString()}))}}catch(L){console.error("Failed to load profile:",L)}})();const f=localStorage.getItem("admin_notifications"),w=localStorage.getItem("admin_2fa");f&&d(JSON.parse(f)),w&&h(JSON.parse(w))},[]);const u=(y,f)=>{v(w=>({...w,[y]:f}))},x=(y,f)=>{v(w=>({...w,emergencyContact:{...w.emergencyContact,[y]:f}}))},z=(y,f)=>{d(w=>({...w,[y]:f}))},E=async()=>{n(!0),await new Promise(y=>setTimeout(y,1e3)),localStorage.setItem("admin_profile",JSON.stringify(c)),localStorage.setItem("admin_notifications",JSON.stringify(s)),localStorage.setItem("admin_2fa",JSON.stringify(p)),o(!1),n(!1),b("\u2705 Profile updated successfully!","success")},F=async()=>{n(!0),await new Promise(f=>setTimeout(f,1500)),h(!p),localStorage.setItem("admin_2fa",JSON.stringify(!p)),n(!1),b(p?"\u{1F513} Two-factor authentication disabled":"\u{1F512} Two-factor authentication enabled","info")},b=(y,f)=>{const w=document.createElement("div");w.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${f==="success"?"#10b981":f==="error"?"#ef4444":f==="warning"?"#f59e0b":"#3b82f6"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,w.textContent=y,document.body.appendChild(w);const L=document.createElement("style");L.textContent=`
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
      }
    `,document.head.appendChild(L),setTimeout(()=>{document.body.contains(w)&&document.body.removeChild(w),document.head.contains(L)&&document.head.removeChild(L)},4e3)},S=()=>{b("\u{1F504} Password reset email sent to your account!","info")};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Profile Settings"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage your account information and system preferences"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("button",{onClick:()=>{const y={profile:c,notifications:s,twoFactorEnabled:p,exportDate:new Date().toISOString()},f=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),w=URL.createObjectURL(f),L=document.createElement("a");L.href=w,L.download="admin-profile-export.json",document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(w),b("\u{1F4C4} Profile data exported successfully!","success")},style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#6b7280",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(cd,{size:16}),"Export Data"]}),t("button",{onClick:()=>i?E():o(!0),disabled:r,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:i?"#10b981":"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:r?"not-allowed":"pointer",opacity:r?.7:1},children:[r?e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}):i?e(zn,{size:16}):e(Fn,{size:16}),r?"Saving...":i?"Save Changes":"Edit Profile"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"32px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px",textAlign:"center",height:"fit-content"},children:[t("div",{style:{position:"relative",display:"inline-block",marginBottom:"24px"},children:[e("div",{style:{width:"120px",height:"120px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"700",color:"white",margin:"0 auto"},children:c.name.split(" ").map(y=>y[0]).join("")}),e("button",{onClick:()=>b("\u{1F4F8} Photo upload feature coming soon!","info"),style:{position:"absolute",bottom:"8px",right:"8px",width:"32px",height:"32px",backgroundColor:"white",border:"2px solid #e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e(fo,{size:14,color:"#64748b"})})]}),e("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",marginBottom:"8px"},children:c.name}),e("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"4px"},children:c.role}),t("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"24px"},children:["Member since ",c.joinDate]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"20px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[e(mo,{size:16,color:"#10b981"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981"},children:"Account Verified"})]}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["Last login: ",c.lastLogin]})]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t("button",{onClick:S,style:{width:"100%",padding:"12px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e(wa,{size:16}),"Reset Password"]})})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Personal Information"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(je,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Full Name"]}),i?e("input",{type:"text",value:c.name,onChange:y=>u("name",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.name})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(ti,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Email Address"]}),i?e("input",{type:"email",value:c.email,onChange:y=>u("email",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.email})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(Oi,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Phone Number"]}),i?e("input",{type:"tel",value:c.phone,onChange:y=>u("phone",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.phone})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(Ge,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Location"]}),i?e("input",{type:"text",value:c.location,onChange:y=>u("location",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.location})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Department"}),i?t("select",{value:c.department,onChange:y=>u("department",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Operations",children:"Operations"}),e("option",{value:"Engineering",children:"Engineering"}),e("option",{value:"Customer Support",children:"Customer Support"}),e("option",{value:"Finance",children:"Finance"}),e("option",{value:"Marketing",children:"Marketing"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.department})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Timezone"}),i?t("select",{value:c.timezone,onChange:y=>u("timezone",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Pacific Time (PT)",children:"Pacific Time (PT)"}),e("option",{value:"Mountain Time (MT)",children:"Mountain Time (MT)"}),e("option",{value:"Central Time (CT)",children:"Central Time (CT)"}),e("option",{value:"Eastern Time (ET)",children:"Eastern Time (ET)"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.timezone})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Emergency Contact"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Contact Name"}),i?e("input",{type:"text",value:c.emergencyContact.name,onChange:y=>x("name",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.name})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number"}),i?e("input",{type:"tel",value:c.emergencyContact.phone,onChange:y=>x("phone",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.phone})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Relationship"}),i?t("select",{value:c.emergencyContact.relationship,onChange:y=>x("relationship",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Supervisor",children:"Supervisor"}),e("option",{value:"Manager",children:"Manager"}),e("option",{value:"HR Contact",children:"HR Contact"}),e("option",{value:"Family",children:"Family"}),e("option",{value:"Friend",children:"Friend"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.relationship})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Security & Notifications"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:p?"#f0fdf4":"#fef3c7",borderRadius:"12px",border:`2px solid ${p?"#bbf7d0":"#fde68a"}`},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(mo,{size:20,color:p?"#10b981":"#f59e0b"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Two-Factor Authentication"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:p?"Your account is protected":"Add an extra layer of security"})]})]}),e("button",{onClick:F,disabled:r,style:{padding:"6px 12px",backgroundColor:p?"#10b981":"#f59e0b",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:r?"not-allowed":"pointer",opacity:r?.7:1},children:p?"Enabled":"Enable"})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(ei,{size:20,color:"#64748b"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Notification Preferences"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Choose how you want to be notified"})]})]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:Object.entries(s).map(([y,f])=>t("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:f,onChange:w=>z(y,w.target.checked),style:{accentColor:"#3b82f6"}}),e("span",{style:{fontSize:"14px",color:"#374151",textTransform:"capitalize"},children:y==="sms"?"SMS":y})]},y))})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"System Permissions"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:Object.entries(c.permissions).map(([y,f])=>t("div",{style:{padding:"12px",backgroundColor:f?"#f0fdf4":"#fef2f2",borderRadius:"8px",border:`2px solid ${f?"#bbf7d0":"#fecaca"}`,textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:f?"#10b981":"#ef4444",marginBottom:"4px",textTransform:"capitalize"},children:y.replace(/([A-Z])/g," $1").trim()}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:f?"\u2713 Granted":"\u2717 Denied"})]},y))})]})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Op=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(!0);l.exports.useEffect(()=>{s()},[]);const s=async()=>{var b;try{n(!0);const S=localStorage.getItem("authToken"),m=await fetch(ie("api/admin/inbox"),{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}});if(m.ok){const y=await m.json();console.log("\u{1F4EC} Inbox loaded:",(b=y.notifications)==null?void 0:b.length);const f=(y.notifications||[]).map(w=>({id:w.id,type:w.type||"notification",title:w.title,content:w.message,timestamp:new Date(w.created_at),read:w.is_read,priority:"medium",metadata:w.data||{}}));o(f)}}catch(S){console.error("Failed to load inbox:",S)}finally{n(!1)}},[d,p]=l.exports.useState("all"),h=b=>{switch(b){case"message":return e(Mr,{size:20,color:"#3b82f6"});case"notification":return e(ei,{size:20,color:"#10b981"});case"alert":return e(ro,{size:20,color:"#f59e0b"});case"receipt":return e(Nt,{size:20,color:"#8b5cf6"});case"promotion":return e(bt,{size:20,color:"#ef4444"});default:return e(ei,{size:20,color:"#6b7280"})}},c=b=>{switch(b){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},v=b=>{const m=new Date().getTime()-b.getTime(),y=Math.floor(m/(1e3*60)),f=Math.floor(m/(1e3*60*60)),w=Math.floor(m/(1e3*60*60*24));return y<60?`${y}m ago`:f<24?`${f}h ago`:`${w}d ago`},u=i.filter(b=>{switch(d){case"unread":return!b.read;case"messages":return b.type==="message";case"receipts":return b.type==="receipt";default:return!0}}),x=i.filter(b=>!b.read).length,z=async b=>{try{const S=localStorage.getItem("authToken");await fetch(ie(`api/admin/inbox/${b}/read`),{method:"PUT",headers:{Authorization:`Bearer ${S}`}}),o(m=>m.map(y=>y.id===b?{...y,read:!0}:y))}catch(S){console.error("Mark read error:",S)}},E=b=>{o(S=>S.filter(m=>m.id!==b))};return t("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"20px",background:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{children:[e("h2",{style:{margin:0,fontSize:"24px",fontWeight:600,color:"#1e293b"},children:"Inbox"}),t("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:[x," unread messages"]})]}),e("button",{onClick:()=>{o(b=>b.map(S=>({...S,read:!0})))},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Mark All Read"})]}),e("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",padding:"0 4px"},children:[{key:"all",label:"All"},{key:"unread",label:`Unread (${x})`},{key:"messages",label:"Messages"},{key:"receipts",label:"Receipts"}].map(({key:b,label:S})=>e("button",{onClick:()=>p(b),style:{background:d===b?"#3b82f6":"white",color:d===b?"white":"#64748b",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s ease"},children:S},b))}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.length===0?t("div",{style:{background:"white",borderRadius:"12px",padding:"60px 20px",textAlign:"center",color:"#64748b"},children:[e(Cn,{size:48,style:{margin:"0 auto 16px",opacity:.3}}),e("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"No messages"}),e("div",{style:{fontSize:"14px"},children:"Your inbox is empty"})]}):u.map(b=>{var S,m;return e("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:`1px solid ${b.read?"#e2e8f0":"#3b82f6"}`,borderLeft:`4px solid ${c(b.priority)}`,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>!b.read&&z(b.id),children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[e("div",{style:{marginTop:"2px"},children:h(b.type)}),t("div",{style:{flex:1},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e("h3",{style:{margin:0,fontSize:"16px",fontWeight:b.read?500:600,color:"#1e293b"},children:b.title}),!b.read&&e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}})]}),e("p",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#64748b",lineHeight:"1.4"},children:b.content}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#9ca3af"},children:[e(kt,{size:12}),v(b.timestamp)]}),((S=b.metadata)==null?void 0:S.location)&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#9ca3af"},children:[e(Ge,{size:12}),b.metadata.location]}),((m=b.metadata)==null?void 0:m.amount)&&t("div",{style:{background:"#10b981",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500},children:["$",b.metadata.amount]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("button",{onClick:y=>{y.stopPropagation(),b.read,z(b.id)},style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"4px"},title:b.read?"Mark as unread":"Mark as read",children:e(ti,{size:16,color:"#64748b"})}),e("button",{onClick:y=>{y.stopPropagation(),E(b.id)},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"4px"},title:"Delete",children:e(_r,{size:16})})]})]})},b.id)})})]})},jp=()=>{const[i,o]=l.exports.useState("week");l.exports.useState(!1),l.exports.useState(!1);const[r,n]=l.exports.useState("overview"),s={today:{period:"Today",totalEarnings:0,rideFare:210,tips:32.5,bonuses:15,fees:-10,netEarnings:237.5,rides:23,hours:8.5,avgPerRide:10.76,avgPerHour:29.12},week:{period:"This Week",totalEarnings:1580.25,rideFare:1320,tips:180.25,bonuses:145,fees:-65,netEarnings:1515.25,rides:156,hours:42.5,avgPerRide:10.13,avgPerHour:37.18},month:{period:"This Month",totalEarnings:6420.8,rideFare:5250,tips:720.8,bonuses:580,fees:-130,netEarnings:6290.8,rides:645,hours:168,avgPerRide:9.95,avgPerHour:38.24},year:{period:"This Year",totalEarnings:48650,rideFare:39800,tips:5240,bonuses:4250,fees:-640,netEarnings:48010,rides:4890,hours:1250,avgPerRide:9.95,avgPerHour:38.92}},d=[{id:"bank1",type:"bank",name:"Chase Bank",details:"****4567",isDefault:!0,isVerified:!0,addedDate:"2023-01-15"},{id:"debit1",type:"debit",name:"GoBank Debit",details:"****8901",isDefault:!1,isVerified:!0,addedDate:"2023-03-20"}],p=[{id:"P001",amount:1515.25,method:"Chase Bank ****4567",status:"completed",date:"2024-01-08",fees:0,reference:"TXN-7891234567"},{id:"P002",amount:1280.5,method:"Chase Bank ****4567",status:"completed",date:"2024-01-01",fees:0,reference:"TXN-7891234566"},{id:"P003",amount:850.75,method:"GoBank Debit ****8901",status:"pending",date:"2024-01-07",fees:.5,reference:"TXN-7891234565"}],h=s[i],c=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),v=x=>{switch(x){case"completed":return"#10b981";case"pending":return"#f59e0b";case"failed":return"#ef4444";default:return"#6b7280"}},u=x=>{switch(x){case"bank":return e(Bo,{size:20});case"debit":return e(Bo,{size:20});case"paypal":return e(fd,{size:20});default:return e(Bo,{size:20})}};return t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',overflow:"auto"},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"16px",position:"sticky",top:0,zIndex:100},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(Nt,{size:24}),e("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Driver Earnings"})]}),e("div",{style:{display:"flex",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px"},children:[{key:"overview",label:"Overview",icon:ni},{key:"detailed",label:"Details",icon:Zs},{key:"payouts",label:"Payouts",icon:Bo},{key:"tax",label:"Tax",icon:yt}].map(x=>t("button",{onClick:()=>n(x.key),style:{flex:1,background:r===x.key?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",padding:"8px 4px",color:"white",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",transition:"all 0.2s ease"},children:[e(x.icon,{size:14}),x.label]},x.key))})]}),t("div",{style:{padding:"16px"},children:[r==="overview"&&t(ve,{children:[e("div",{style:{display:"flex",background:"white",borderRadius:"12px",padding:"4px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{key:"today",label:"Today"},{key:"week",label:"Week"},{key:"month",label:"Month"},{key:"year",label:"Year"}].map(x=>e("button",{onClick:()=>o(x.key),style:{flex:1,background:i===x.key?"#3b82f6":"transparent",color:i===x.key?"white":"#6b7280",border:"none",borderRadius:"8px",padding:"10px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:x.label},x.key))}),t("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"16px",padding:"24px",color:"white",marginBottom:"20px",textAlign:"center"},children:[t("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:[h.period," Net Earnings"]}),e("div",{style:{fontSize:"36px",fontWeight:"700",marginBottom:"8px"},children:c(h.netEarnings)}),t("div",{style:{display:"flex",justifyContent:"center",gap:"20px",fontSize:"12px"},children:[t("div",{children:[e("div",{style:{fontWeight:"600"},children:h.rides}),e("div",{style:{opacity:.8},children:"Rides"})]}),t("div",{children:[t("div",{style:{fontWeight:"600"},children:[h.hours,"h"]}),e("div",{style:{opacity:.8},children:"Online"})]}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:c(h.avgPerHour)}),e("div",{style:{opacity:.8},children:"Per Hour"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Earnings Breakdown"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Ride Fare"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.rideFare)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Tips"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.tips)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f59e0b"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Bonuses"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.bonuses)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Platform Fees"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#ef4444"},children:c(h.fees)})]}),e("div",{style:{height:"1px",background:"#e5e7eb",margin:"8px 0"}}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("span",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937"},children:"Net Earnings"}),e("span",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:c(h.netEarnings)})]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},children:[t("button",{onClick:()=>n("payouts"),style:{background:"white",border:"2px solid #e5e7eb",borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(Bo,{size:20,color:"#3b82f6"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Instant Payout"})]}),t("button",{onClick:()=>n("tax"),style:{background:"white",border:"2px solid #e5e7eb",borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(yt,{size:20,color:"#f59e0b"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Tax Documents"})]})]})]}),r==="detailed"&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Performance Metrics"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#3b82f6"},children:c(h.avgPerRide)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg per Ride"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#10b981"},children:c(h.avgPerHour)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg per Hour"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Commission Structure"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Platform Fee"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Standard commission"})]}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#ef4444"},children:"25%"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f0f9ff",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"You Keep"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Your earnings"})]}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:"75%"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Weekly Goals"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Rides Goal"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"156/200"})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:e("div",{style:{width:"78%",height:"100%",background:"linear-gradient(90deg, #3b82f6, #1d4ed8)",borderRadius:"4px"}})})]}),t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Earnings Goal"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[c(h.netEarnings),"/",c(2e3)]})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:e("div",{style:{width:"76%",height:"100%",background:"linear-gradient(90deg, #10b981, #059669)",borderRadius:"4px"}})})]})]})]})]}),r==="payouts"&&t(ve,{children:[t("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"16px",padding:"20px",color:"white",marginBottom:"20px",textAlign:"center"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Available for Payout"}),e("div",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"12px"},children:c(h.netEarnings)}),e("button",{style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"10px 20px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Request Instant Payout"})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",margin:0},children:"Payout Methods"}),e("button",{style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Add Method"})]}),d.map(x=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",border:"2px solid",borderColor:x.isDefault?"#3b82f6":"#e5e7eb",borderRadius:"8px",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{color:"#6b7280"},children:u(x.type)}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:x.name}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[x.details," ",x.isDefault&&"\u2022 Default"]})]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:x.isVerified?e(bt,{size:16,color:"#10b981"}):e(ro,{size:16,color:"#f59e0b"})})]},x.id))]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Payout History"}),p.map(x=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid #e5e7eb"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(x.amount)}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[x.method," \u2022 ",x.date]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e("div",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:x.status==="completed"?"#f0fdf4":x.status==="pending"?"#fefce8":"#fef2f2",color:v(x.status)},children:x.status})})]},x.id))]})]}),r==="tax"&&t(ve,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"2024 Tax Summary"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{style:{padding:"16px",background:"#f0f9ff",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1d4ed8"},children:c(48010)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Total Earnings"})]}),t("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#059669"},children:c(8640)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Estimated Tax"})]})]}),t("div",{style:{background:"#fef3c7",borderRadius:"8px",padding:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(zd,{size:16,color:"#d97706"}),e("div",{style:{fontSize:"12px",color:"#92400e"},children:"Tax estimates are based on 18% effective rate. Consult a tax professional for accurate calculations."})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Tax Documents"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(yt,{size:20,color:"#3b82f6"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"2024 1099-NEC"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Available January 31, 2025"})]})]}),e("button",{style:{background:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"not-allowed"},children:"Pending"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(yt,{size:20,color:"#10b981"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"2023 1099-NEC"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Tax year 2023 summary"})]})]}),t("button",{style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e($i,{size:12}),"Download"]})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Tax Tips for Drivers"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #3b82f6"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Track Your Mileage"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Business mileage is tax deductible at $0.655 per mile for 2023."})]}),t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #10b981"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Vehicle Expenses"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Gas, maintenance, insurance, and car payments may be deductible."})]}),t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Quarterly Payments"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Consider making quarterly estimated tax payments to avoid penalties."})]})]})]})]})]})]})},Up=()=>{const[i,o]=l.exports.useState("LAX"),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState(0),p=[{id:"LAX",name:"Los Angeles International",code:"LAX",queueLength:47,avgWaitTime:"23 min",surgeMultiplier:1.8},{id:"JFK",name:"John F. Kennedy International",code:"JFK",queueLength:32,avgWaitTime:"18 min",surgeMultiplier:1.6},{id:"ORD",name:"O'Hare International",code:"ORD",queueLength:28,avgWaitTime:"15 min",surgeMultiplier:1.5},{id:"ATL",name:"Hartsfield-Jackson Atlanta International",code:"ATL",queueLength:41,avgWaitTime:"20 min",surgeMultiplier:1.4},{id:"DFW",name:"Dallas/Fort Worth International",code:"DFW",queueLength:35,avgWaitTime:"16 min",surgeMultiplier:1.3},{id:"SFO",name:"San Francisco International",code:"SFO",queueLength:39,avgWaitTime:"21 min",surgeMultiplier:1.7},{id:"SEA",name:"Seattle-Tacoma International",code:"SEA",queueLength:26,avgWaitTime:"14 min",surgeMultiplier:1.4},{id:"MIA",name:"Miami International",code:"MIA",queueLength:19,avgWaitTime:"12 min",surgeMultiplier:1.5},{id:"XNA",name:"Northwest Arkansas Regional",code:"XNA",queueLength:8,avgWaitTime:"8 min",surgeMultiplier:1.1}],h=[{id:"1",name:"Michael R.",vehicleType:"Tesla Model 3",queuePosition:1,waitTime:"2 min",earnings:847.5},{id:"2",name:"Sarah L.",vehicleType:"Toyota Camry",queuePosition:2,waitTime:"8 min",earnings:692.3},{id:"3",name:"David K.",vehicleType:"Honda Accord",queuePosition:3,waitTime:"15 min",earnings:523.8},{id:"4",name:"Jennifer M.",vehicleType:"Nissan Altima",queuePosition:4,waitTime:"22 min",earnings:765.9}],c=p.find(x=>x.id===i),v=()=>{n(!0),d(c.queueLength+1)},u=()=>{n(!1),d(0)};return t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(vr,{size:24,color:"#3b82f6"}),e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Airport Queue System"})]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:p.map(x=>t("button",{onClick:()=>o(x.id),style:{padding:"16px",border:i===x.id?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"12px",background:i===x.id?"#eff6ff":"white",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[e("div",{style:{fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:x.code}),e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:x.name}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("span",{style:{fontSize:"14px",color:"#059669"},children:[x.surgeMultiplier,"x surge"]}),t("span",{style:{fontSize:"12px",color:"#6b7280"},children:[x.queueLength," drivers"]})]})]},x.id))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h2",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:[c.name," (",c.code,")"]}),e("div",{style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"\u{1F4CD} PICKUP ZONES MAPPED"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"20px"},children:[t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(no,{size:24,color:"#3b82f6",style:{margin:"0 auto 8px"}}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:c.queueLength}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Drivers in Queue"})]}),t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(kt,{size:24,color:"#f59e0b",style:{margin:"0 auto 8px"}}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:c.avgWaitTime}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg Wait Time"})]}),t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(Nt,{size:24,color:"#10b981",style:{margin:"0 auto 8px"}}),t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:[c.surgeMultiplier,"x"]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Surge Multiplier"})]})]}),t("div",{style:{background:"#f0f9ff",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"2px solid #0ea5e9"},children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#0c4a6e",marginBottom:"8px"},children:"\u{1F4CD} Designated Pickup Zones"}),t("div",{style:{fontSize:"12px",color:"#0369a1",lineHeight:"1.4"},children:[c.code==="XNA"&&"Main Terminal Rideshare Zone \u2022 Ground Transportation Area",c.code==="LAX"&&"LAX-it Rideshare Hub \u2022 Terminal 1, 4, 7 Pickup Areas",c.code==="JFK"&&"Terminal 1, 4, 5, 7, 8 Rideshare Zones",c.code==="ORD"&&"Terminal 1, 2, 3, 5 Rideshare Zones",c.code==="ATL"&&"Terminal North/South Rideshare \u2022 Ground Transportation Center",!["XNA","LAX","JFK","ORD","ATL"].includes(c.code)&&"Multiple terminal pickup zones available"]})]}),r?t("div",{style:{padding:"20px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",borderRadius:"12px",color:"white",textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",marginBottom:"8px"},children:"You're in the queue!"}),t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:["#",s]}),t("div",{style:{marginBottom:"16px",opacity:.9},children:["Estimated wait: ",Math.ceil(s*5)," minutes"]}),e("button",{onClick:u,style:{padding:"12px 24px",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",cursor:"pointer"},children:"Leave Queue"})]}):e("button",{onClick:v,style:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s"},children:"\u{1F6EC} Join Airport Queue"})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"Current Queue - Next 4 Drivers"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:h.map(x=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:x.queuePosition===1?"#ecfdf5":"#f9fafb",border:x.queuePosition===1?"2px solid #10b981":"1px solid #e5e7eb",borderRadius:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"32px",height:"32px",background:x.queuePosition===1?"#10b981":"#6b7280",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"700"},children:x.queuePosition}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937"},children:x.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:x.vehicleType})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"14px",fontWeight:"600",color:"#059669"},children:["$",x.earnings.toFixed(2)]}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Wait: ",x.waitTime]})]})]},x.id))})]})]})},qp=()=>{const[i,o]=l.exports.useState("lax"),[r,n]=l.exports.useState(30),[s,d]=l.exports.useState(!0),[p,h]=l.exports.useState(!1),[c,v]=l.exports.useState([]),[u,x]=l.exports.useState(!0),[z,E]=l.exports.useState({name:"",code:"",lat:"",lng:"",radius:"2.5"}),F=[{id:"atl",name:"Hartsfield-Jackson Atlanta International",code:"ATL",coordinates:{lat:33.6407,lng:-84.4277},radius:4.2,surgeMultiplier:1.6,queueLength:52,avgWaitTime:"22 min",demandLevel:"extreme"},{id:"lax",name:"Los Angeles International Airport",code:"LAX",coordinates:{lat:33.9425,lng:-118.4081},radius:3.8,surgeMultiplier:1.8,queueLength:47,avgWaitTime:"23 min",demandLevel:"extreme"},{id:"ord",name:"O'Hare International Airport",code:"ORD",coordinates:{lat:41.9742,lng:-87.9073},radius:4.5,surgeMultiplier:1.7,queueLength:45,avgWaitTime:"21 min",demandLevel:"extreme"},{id:"dfw",name:"Dallas/Fort Worth International",code:"DFW",coordinates:{lat:32.8998,lng:-97.0403},radius:5,surgeMultiplier:1.5,queueLength:38,avgWaitTime:"19 min",demandLevel:"high"},{id:"den",name:"Denver International Airport",code:"DEN",coordinates:{lat:39.8561,lng:-104.6737},radius:4.8,surgeMultiplier:1.4,queueLength:34,avgWaitTime:"17 min",demandLevel:"high"},{id:"jfk",name:"John F. Kennedy International Airport",code:"JFK",coordinates:{lat:40.6413,lng:-73.7781},radius:3.5,surgeMultiplier:1.9,queueLength:43,avgWaitTime:"24 min",demandLevel:"extreme"},{id:"sfo",name:"San Francisco International",code:"SFO",coordinates:{lat:37.6213,lng:-122.379},radius:3.2,surgeMultiplier:1.8,queueLength:41,avgWaitTime:"22 min",demandLevel:"extreme"},{id:"lga",name:"LaGuardia Airport",code:"LGA",coordinates:{lat:40.7769,lng:-73.874},radius:2.5,surgeMultiplier:1.7,queueLength:29,avgWaitTime:"16 min",demandLevel:"high"},{id:"ewr",name:"Newark Liberty International",code:"EWR",coordinates:{lat:40.6895,lng:-74.1745},radius:2.8,surgeMultiplier:1.6,queueLength:31,avgWaitTime:"17 min",demandLevel:"high"},{id:"sea",name:"Seattle-Tacoma International",code:"SEA",coordinates:{lat:47.4502,lng:-122.3088},radius:3.4,surgeMultiplier:1.5,queueLength:28,avgWaitTime:"15 min",demandLevel:"high"},{id:"mia",name:"Miami International Airport",code:"MIA",coordinates:{lat:25.7959,lng:-80.287},radius:3,surgeMultiplier:1.6,queueLength:26,avgWaitTime:"14 min",demandLevel:"high"},{id:"phx",name:"Phoenix Sky Harbor International",code:"PHX",coordinates:{lat:33.4342,lng:-112.008},radius:3.2,surgeMultiplier:1.3,queueLength:22,avgWaitTime:"12 min",demandLevel:"medium"},{id:"iah",name:"George Bush Intercontinental Houston",code:"IAH",coordinates:{lat:29.9844,lng:-95.3414},radius:3.5,surgeMultiplier:1.4,queueLength:25,avgWaitTime:"13 min",demandLevel:"high"},{id:"bos",name:"Boston Logan International",code:"BOS",coordinates:{lat:42.3656,lng:-71.0096},radius:2.9,surgeMultiplier:1.5,queueLength:24,avgWaitTime:"13 min",demandLevel:"high"},{id:"msp",name:"Minneapolis-St. Paul International",code:"MSP",coordinates:{lat:44.8848,lng:-93.2223},radius:3.1,surgeMultiplier:1.2,queueLength:19,avgWaitTime:"11 min",demandLevel:"medium"},{id:"dtw",name:"Detroit Metropolitan Wayne County",code:"DTW",coordinates:{lat:42.2124,lng:-83.3534},radius:3,surgeMultiplier:1.2,queueLength:17,avgWaitTime:"10 min",demandLevel:"medium"},{id:"phl",name:"Philadelphia International",code:"PHL",coordinates:{lat:39.8719,lng:-75.2411},radius:2.7,surgeMultiplier:1.3,queueLength:21,avgWaitTime:"12 min",demandLevel:"medium"},{id:"mcl",name:"Orlando International",code:"MCO",coordinates:{lat:28.4312,lng:-81.3081},radius:2.8,surgeMultiplier:1.4,queueLength:23,avgWaitTime:"13 min",demandLevel:"high"},{id:"slc",name:"Salt Lake City International",code:"SLC",coordinates:{lat:40.7884,lng:-111.9776},radius:2.5,surgeMultiplier:1.1,queueLength:14,avgWaitTime:"9 min",demandLevel:"medium"},{id:"fll",name:"Fort Lauderdale-Hollywood International",code:"FLL",coordinates:{lat:26.0742,lng:-80.1506},radius:2.3,surgeMultiplier:1.3,queueLength:18,avgWaitTime:"11 min",demandLevel:"medium"},{id:"dca",name:"Ronald Reagan Washington National",code:"DCA",coordinates:{lat:38.8512,lng:-77.0402},radius:2.1,surgeMultiplier:1.5,queueLength:26,avgWaitTime:"14 min",demandLevel:"high"},{id:"iad",name:"Washington Dulles International",code:"IAD",coordinates:{lat:38.9531,lng:-77.4565},radius:3.2,surgeMultiplier:1.4,queueLength:22,avgWaitTime:"12 min",demandLevel:"medium"},{id:"mdw",name:"Chicago Midway International",code:"MDW",coordinates:{lat:41.7868,lng:-87.7522},radius:2.2,surgeMultiplier:1.3,queueLength:16,avgWaitTime:"10 min",demandLevel:"medium"},{id:"san",name:"San Diego International",code:"SAN",coordinates:{lat:32.7336,lng:-117.1897},radius:2.4,surgeMultiplier:1.3,queueLength:20,avgWaitTime:"11 min",demandLevel:"medium"},{id:"tpa",name:"Tampa International",code:"TPA",coordinates:{lat:27.9755,lng:-82.5332},radius:2.6,surgeMultiplier:1.2,queueLength:15,avgWaitTime:"9 min",demandLevel:"medium"},{id:"pdx",name:"Portland International",code:"PDX",coordinates:{lat:45.5898,lng:-122.5951},radius:2.3,surgeMultiplier:1.2,queueLength:13,avgWaitTime:"8 min",demandLevel:"medium"},{id:"aus",name:"Austin-Bergstrom International",code:"AUS",coordinates:{lat:30.1975,lng:-97.6664},radius:2.5,surgeMultiplier:1.3,queueLength:18,avgWaitTime:"11 min",demandLevel:"medium"},{id:"msy",name:"Louis Armstrong New Orleans International",code:"MSY",coordinates:{lat:29.9934,lng:-90.258},radius:2.2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"stl",name:"St. Louis Lambert International",code:"STL",coordinates:{lat:38.7487,lng:-90.37},radius:2.4,surgeMultiplier:1.1,queueLength:11,avgWaitTime:"7 min",demandLevel:"low"},{id:"bwi",name:"Baltimore/Washington International Thurgood Marshall",code:"BWI",coordinates:{lat:39.1754,lng:-76.6683},radius:2.5,surgeMultiplier:1.3,queueLength:19,avgWaitTime:"11 min",demandLevel:"medium"},{id:"oak",name:"Oakland International",code:"OAK",coordinates:{lat:37.7214,lng:-122.2208},radius:2.1,surgeMultiplier:1.4,queueLength:16,avgWaitTime:"10 min",demandLevel:"medium"},{id:"sjc",name:"San Jose Mineta International",code:"SJC",coordinates:{lat:37.3639,lng:-121.9289},radius:2,surgeMultiplier:1.3,queueLength:14,avgWaitTime:"9 min",demandLevel:"medium"},{id:"cvg",name:"Cincinnati/Northern Kentucky International",code:"CVG",coordinates:{lat:39.0488,lng:-84.6678},radius:2.3,surgeMultiplier:1.1,queueLength:10,avgWaitTime:"7 min",demandLevel:"low"},{id:"ind",name:"Indianapolis International",code:"IND",coordinates:{lat:39.7173,lng:-86.2944},radius:2.2,surgeMultiplier:1.1,queueLength:9,avgWaitTime:"6 min",demandLevel:"low"},{id:"cmh",name:"John Glenn Columbus International",code:"CMH",coordinates:{lat:39.998,lng:-82.8919},radius:2.1,surgeMultiplier:1.1,queueLength:8,avgWaitTime:"6 min",demandLevel:"low"},{id:"ric",name:"Richmond International",code:"RIC",coordinates:{lat:37.5052,lng:-77.3197},radius:1.8,surgeMultiplier:1,queueLength:6,avgWaitTime:"5 min",demandLevel:"low"},{id:"rdu",name:"Raleigh-Durham International",code:"RDU",coordinates:{lat:35.8776,lng:-78.7875},radius:2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"clt",name:"Charlotte Douglas International",code:"CLT",coordinates:{lat:35.214,lng:-80.9431},radius:2.4,surgeMultiplier:1.3,queueLength:17,avgWaitTime:"10 min",demandLevel:"medium"},{id:"mke",name:"Milwaukee Mitchell International",code:"MKE",coordinates:{lat:42.9472,lng:-87.8966},radius:1.9,surgeMultiplier:1,queueLength:7,avgWaitTime:"5 min",demandLevel:"low"},{id:"buf",name:"Buffalo Niagara International",code:"BUF",coordinates:{lat:42.9405,lng:-78.7322},radius:1.8,surgeMultiplier:1,queueLength:5,avgWaitTime:"4 min",demandLevel:"low"},{id:"rno",name:"Reno-Tahoe International",code:"RNO",coordinates:{lat:39.4991,lng:-119.7681},radius:1.7,surgeMultiplier:1,queueLength:4,avgWaitTime:"4 min",demandLevel:"low"},{id:"xna",name:"Northwest Arkansas Regional",code:"XNA",coordinates:{lat:36.2818,lng:-94.3068},radius:2.2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"lit",name:"Bill and Hillary Clinton National/Adams Field",code:"LIT",coordinates:{lat:34.7293,lng:-92.2241},radius:2,surgeMultiplier:1.1,queueLength:8,avgWaitTime:"6 min",demandLevel:"low"},{id:"abq",name:"Albuquerque International Sunport",code:"ABQ",coordinates:{lat:35.0402,lng:-106.6091},radius:1.9,surgeMultiplier:1,queueLength:6,avgWaitTime:"5 min",demandLevel:"low"},{id:"tul",name:"Tulsa International",code:"TUL",coordinates:{lat:36.1984,lng:-95.8881},radius:1.8,surgeMultiplier:1,queueLength:5,avgWaitTime:"4 min",demandLevel:"low"},{id:"okc",name:"Will Rogers World",code:"OKC",coordinates:{lat:35.3931,lng:-97.6007},radius:1.9,surgeMultiplier:1.1,queueLength:7,avgWaitTime:"5 min",demandLevel:"low"},{id:"mci",name:"Kansas City International",code:"MCI",coordinates:{lat:39.2976,lng:-94.7139},radius:2.1,surgeMultiplier:1.1,queueLength:9,avgWaitTime:"6 min",demandLevel:"low"}],b=[{id:"hollywood",name:"Hollywood & Highland",coordinates:{lat:34.1022,lng:-118.339},surgeMultiplier:1.4,demandLevel:"high",estimatedRides:23,avgFare:18.75},{id:"downtown_la",name:"Downtown LA",coordinates:{lat:34.0522,lng:-118.2437},surgeMultiplier:1.2,demandLevel:"medium",estimatedRides:31,avgFare:22.3},{id:"bentonville_square",name:"Bentonville Town Square",coordinates:{lat:36.3729,lng:-94.2088},surgeMultiplier:1.2,demandLevel:"medium",estimatedRides:67,avgFare:28.5},{id:"south_beach",name:"South Beach Miami",coordinates:{lat:25.7907,lng:-80.13},surgeMultiplier:1.6,demandLevel:"high",estimatedRides:42,avgFare:24.8}],S=A=>{switch(A){case"extreme":return"#dc2626";case"high":return"#ea580c";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},m=A=>A>=1.5?"\u{1F525}":A>=1.3?"\u26A1":A>=1.1?"\u{1F4C8}":"\u2705",y={baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:3},f=(A,H=25)=>{const B=y.baseFare+5*y.perMileFare+15*y.perMinuteFare;return`+$${((A-1)*B).toFixed(0)}`};l.exports.useEffect(()=>{w();const A=setInterval(w,r*1e3);return()=>clearInterval(A)},[r]);const w=async()=>{var A;try{const H=localStorage.getItem("authToken"),W=await fetch(ie("api/admin/surge/zones"),{headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}});if(W.ok){const Y=await W.json();console.log("\u{1F5FA}\uFE0F Surge zones loaded:",(A=Y.zones)==null?void 0:A.length);const B=(Y.zones||[]).map(V=>{var re;return{id:((re=V.zone_code)==null?void 0:re.toLowerCase())||V.id,name:V.zone_name,code:V.zone_code,coordinates:{lat:parseFloat(V.latitude),lng:parseFloat(V.longitude)},radius:V.radius/1e3,surgeMultiplier:parseFloat(V.base_multiplier),queueLength:0,avgWaitTime:"N/A",demandLevel:V.base_multiplier>=1.5?"high":V.base_multiplier>=1.2?"medium":"low",isAirport:V.zone_type==="airport",zoneType:V.zone_type}});v(B)}}catch(H){console.error("Failed to load surge zones:",H)}finally{x(!1)}},L=()=>{if(z.name&&z.code&&z.lat&&z.lng){const A={id:z.code.toLowerCase(),name:z.name,code:z.code.toUpperCase(),coordinates:{lat:parseFloat(z.lat),lng:parseFloat(z.lng)},radius:parseFloat(z.radius),surgeMultiplier:1,queueLength:0,avgWaitTime:"0 min",demandLevel:"low"};F.push(A),h(!1),E({name:"",code:"",lat:"",lng:"",radius:"2.5"}),console.log(`\u2705 Added new airport: ${z.code}`)}};return t("div",{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(Mi,{size:24,color:"#dc2626"}),e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Live Surge & Airport Heatmap"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s&&e("button",{onClick:()=>h(!0),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"#10b981",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"+ Add Airport"}),e("div",{style:{width:"8px",height:"8px",background:"#10b981",borderRadius:"50%",animation:"pulse 2s infinite"}}),t("span",{style:{fontSize:"12px",color:"#6b7280"},children:["Updates every ",r,"s"]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[t("button",{onClick:()=>d(!0),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:s?"#3b82f6":"#f3f4f6",color:s?"white":"#6b7280",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e(vr,{size:16}),"Airport Zones"]}),t("button",{onClick:()=>d(!1),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:s?"#f3f4f6":"#3b82f6",color:s?"#6b7280":"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e(Ge,{size:16}),"City Zones"]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"Surge Level:"}),e("div",{style:{display:"flex",gap:"8px"},children:[{level:"low",color:"#10b981",label:"1.0-1.2x"},{level:"medium",color:"#f59e0b",label:"1.2-1.4x"},{level:"high",color:"#ea580c",label:"1.4-1.7x"},{level:"extreme",color:"#dc2626",label:"1.7x+"}].map(A=>t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("div",{style:{width:"12px",height:"12px",background:A.color,borderRadius:"2px"}}),e("span",{style:{fontSize:"10px",color:"#6b7280"},children:A.label})]},A.level))})]})})]}),p&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",width:"400px",maxWidth:"90vw"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"20px",color:"#1f2937"},children:"Add New Airport"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Airport Name"}),e("input",{type:"text",value:z.name,onChange:A=>E({...z,name:A.target.value}),placeholder:"e.g., Memphis International Airport",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Airport Code"}),e("input",{type:"text",value:z.code,onChange:A=>E({...z,code:A.target.value}),placeholder:"e.g., MEM",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",textTransform:"uppercase"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Latitude"}),e("input",{type:"number",step:"0.0001",value:z.lat,onChange:A=>E({...z,lat:A.target.value}),placeholder:"35.0428",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Longitude"}),e("input",{type:"number",step:"0.0001",value:z.lng,onChange:A=>E({...z,lng:A.target.value}),placeholder:"-89.9767",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Geofence Radius (km)"}),e("input",{type:"number",step:"0.1",value:z.radius,onChange:A=>E({...z,radius:A.target.value}),placeholder:"2.5",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[e("button",{onClick:()=>h(!1),style:{flex:1,padding:"12px",background:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:L,style:{flex:1,padding:"12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Add Airport"})]})]})}),s&&e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px",marginBottom:"20px"},children:F.map(A=>t("div",{onClick:()=>o(A.id),style:{background:i===A.id?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"white",color:i===A.id?"white":"#1f2937",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:i===A.id?"0 8px 30px rgba(59, 130, 246, 0.3)":"0 4px 20px rgba(0,0,0,0.1)",transform:i===A.id?"translateY(-4px)":"none"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(vr,{size:20}),t("div",{children:[e("div",{style:{fontWeight:"700",fontSize:"16px"},children:A.code}),e("div",{style:{fontSize:"12px",opacity:.8},children:A.name})]})]}),e("div",{style:{fontSize:"20px"},children:m(A.surgeMultiplier)})]}),t("div",{style:{background:i===A.id?"rgba(255,255,255,0.1)":"#f8fafc",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"12px",opacity:.8,marginBottom:"4px"},children:"GEOFENCE RADIUS"}),t("div",{style:{fontSize:"16px",fontWeight:"700"},children:[A.radius," km"]})]}),t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"4px",color:i===A.id?"white":S(A.demandLevel)},children:[A.surgeMultiplier,"x"]}),t("div",{style:{fontSize:"12px",opacity:.8},children:[f(A.surgeMultiplier)," premium"]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center",padding:"12px",background:i===A.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(no,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:A.queueLength}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Queue Length"})]}),t("div",{style:{textAlign:"center",padding:"12px",background:i===A.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(kt,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:A.avgWaitTime}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Avg Wait"})]})]}),t("div",{style:{marginTop:"12px",padding:"8px 12px",background:i===A.id?"rgba(255,255,255,0.1)":S(A.demandLevel),color:(i===A.id,"white"),borderRadius:"8px",textAlign:"center",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:[A.demandLevel," Demand Zone"]})]},A.id))}),!s&&e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"20px"},children:b.map(A=>t("div",{onClick:()=>o(A.id),style:{background:i===A.id?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"white",color:i===A.id?"white":"#1f2937",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:i===A.id?"0 8px 30px rgba(59, 130, 246, 0.3)":"0 4px 20px rgba(0,0,0,0.1)",transform:i===A.id?"translateY(-4px)":"none"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(Ge,{size:20}),e("span",{style:{fontWeight:"600",fontSize:"14px"},children:A.name})]}),e("div",{style:{fontSize:"20px"},children:m(A.surgeMultiplier)})]}),t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"4px",color:i===A.id?"white":S(A.demandLevel)},children:[A.surgeMultiplier,"x"]}),e("div",{style:{fontSize:"12px",opacity:.8},children:"Surge Multiplier"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center",padding:"12px",background:i===A.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(no,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:A.estimatedRides}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Est. Rides"})]}),t("div",{style:{textAlign:"center",padding:"12px",background:i===A.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(Nt,{size:16,style:{margin:"0 auto 4px",display:"block"}}),t("div",{style:{fontSize:"16px",fontWeight:"700"},children:["$",A.avgFare.toFixed(2)]}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Avg Fare"})]})]}),t("div",{style:{marginTop:"12px",padding:"8px 12px",background:i===A.id?"rgba(255,255,255,0.1)":S(A.demandLevel),color:(i===A.id,"white"),borderRadius:"8px",textAlign:"center",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:[A.demandLevel," Demand"]})]},A.id))}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"Live Activity Feed"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[{time:"1 min ago",message:"LAX surge increased to 1.8x (+$13 premium)",type:"surge",airport:!0},{time:"3 min ago",message:"JFK airport queue: 32 drivers waiting",type:"queue",airport:!0},{time:"5 min ago",message:"SFO geofence activated - high demand detected",type:"geofence",airport:!0},{time:"8 min ago",message:"ORD surge decreased to 1.5x",type:"surge",airport:!0},{time:"12 min ago",message:"Times Square demand spike - 1.9x surge",type:"demand",airport:!1},{time:"15 min ago",message:"DEN airport: 24 drivers in queue",type:"queue",airport:!0},{time:"18 min ago",message:"ATL geofence breach - driver entering zone",type:"geofence",airport:!0}].map((A,H)=>t("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",borderLeft:`4px solid ${A.type==="surge"?"#dc2626":A.type==="queue"?"#3b82f6":A.type==="geofence"?"#8b5cf6":A.type==="demand"?"#f59e0b":"#10b981"}`},children:[e("div",{style:{marginRight:"12px"},children:A.airport?e(vr,{size:16,color:"#6b7280"}):e(Ge,{size:16,color:"#6b7280"})}),e(kt,{size:14,color:"#6b7280",style:{marginRight:"8px"}}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"14px",color:"#1f2937"},children:A.message}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:A.time})]}),A.type==="geofence"&&e("div",{style:{background:"#8b5cf6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600"},children:"GEOFENCE"})]},H))})]})]})},Hp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState([]),[s,d]=l.exports.useState(!0),[p,h]=l.exports.useState("all"),[c,v]=l.exports.useState(3),[u,x]=l.exports.useState(!0),[z,E]=l.exports.useState(!0),[F,b]=l.exports.useState(new Set),[S,m]=l.exports.useState(!1),[y,f]=l.exports.useState(null),[w,L]=l.exports.useState("miles"),[A,H]=l.exports.useState(null),[W,Y]=l.exports.useState(!1);l.exports.useEffect(()=>{B(),V(),re()},[]);const B=()=>{const M=Ir.getAllMarkets();o(M)},V=async()=>{try{const M=localStorage.getItem("authToken"),K=await fetch(ie("api/admin/surge/zones"),{headers:{Authorization:`Bearer ${M}`}});if(K.ok){const he=(await K.json()).zones.map(xe=>{var Ue;return{id:xe.id,name:xe.zone_name,zoneType:xe.zone_type,marketId:((Ue=xe.zone_code)==null?void 0:Ue.toLowerCase())||"unknown",coordinates:{lat:parseFloat(xe.latitude),lng:parseFloat(xe.longitude)},radius:parseFloat(xe.radius),surgeMultiplier:parseFloat(xe.base_multiplier)+1,isManualOverride:!1,demandLevel:xe.zone_type==="airport"?"high":"medium",activeDrivers:xe.active_drivers||0,waitingRiders:xe.waiting_riders||0,lastUpdated:new Date,isAirport:xe.zone_type==="airport",airportCode:xe.zone_code,queueLength:xe.queue_length||0,avgWaitTime:xe.avg_wait_time||"0 min"}});n(he),console.log(`\u{1F4CA} Loaded ${he.length} real surge zones from database`)}else console.error("Failed to load surge zones"),n([])}catch(M){console.error("Error loading surge zones:",M),n([])}},re=async()=>{try{const M=localStorage.getItem("authToken"),K=await fetch(ie("api/admin/surge/overrides"),{headers:{Authorization:`Bearer ${M}`}});if(K.ok){const he=(await K.json()).overrides;n(xe=>xe.map(Ue=>{const Ze=he.find(Me=>Me.zone_code===Ue.id||Me.zone_name===Ue.name);return Ze?{...Ue,surgeMultiplier:parseFloat(Ze.manual_multiplier)+1,isManualOverride:!0}:Ue})),console.log(`\u{1F4CA} Loaded ${he.length} existing manual overrides`)}else console.warn("Failed to load existing overrides, continuing without them")}catch(M){console.warn("Error loading existing overrides:",M)}},I=async()=>{try{m(!0);const M=r.filter(he=>he.isManualOverride||F.has(he.id)).map(he=>({zoneId:he.id,surgeMultiplier:he.surgeMultiplier-1,isManualOverride:he.isManualOverride,overrideReason:"Admin panel manual adjustment"}));console.log(`\u{1F4BE} Saving ${M.length} zone overrides:`,M);const K=localStorage.getItem("authToken"),de=await fetch(ie("api/admin/surge/bulk-save"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify({overrides:M})});if(de.ok){const he=await de.json();console.log(`\u{1F4BE} ${he.message}`),b(new Set),f(new Date)}else throw new Error("Failed to save changes")}catch(M){console.error("Error saving changes:",M),alert("Failed to save changes. Please try again.")}finally{m(!1)}},ee=async(M,K)=>{try{n(de=>de.map(he=>he.id===M?{...he,surgeMultiplier:K,isManualOverride:!0,lastUpdated:new Date}:he)),b(de=>new Set([...de,M])),console.log(`\u26A1 Surge updated locally for zone ${M}: ${K}x (unsaved)`)}catch(de){console.error("Error updating surge:",de)}},O=async M=>{try{n(K=>K.map(de=>de.id===M?{...de,isManualOverride:!1,lastUpdated:new Date}:de)),b(K=>new Set([...K,M])),console.log(`\u{1F504} Surge reset to automatic locally for zone ${M} (unsaved)`)}catch(K){console.error("Error resetting surge:",K)}},ne=async()=>{try{const M=!s;d(M);const K=localStorage.getItem("authToken");(await fetch(ie("api/admin/surge/global-toggle"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({enabled:M})})).ok&&console.log(`\u2705 Global surge ${M?"enabled":"disabled"}`)}catch(M){console.error("Error toggling global surge:",M)}},X=async M=>{try{v(M);const K=localStorage.getItem("authToken");(await fetch(ie("api/admin/surge/max-multiplier"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo-rider-token"},body:JSON.stringify({maxMultiplier:M})})).ok&&console.log(`\u2705 Max surge multiplier updated to ${M}x`)}catch(K){console.error("Error updating max surge:",K)}},Ye=M=>{switch(M){case"extreme":return"#dc2626";case"high":return"#ea580c";case"medium":return"#d97706";case"low":return"#16a34a";default:return"#6b7280"}},J=M=>M>=2.5?"#dc2626":M>=2?"#ea580c":M>=1.5?"#d97706":"#16a34a",U=p==="all"?r.filter(M=>z||!M.isAirport):r.filter(M=>M.marketId===p&&(z||!M.isAirport));return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Surge Control Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor and control surge pricing across all markets"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("button",{onClick:()=>x(!u),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:u?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[u?e(ka,{size:16}):e(jd,{size:16}),"Auto Refresh"]}),t("button",{onClick:ne,style:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 24px",backgroundColor:s?"#dc2626":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(Fr,{size:16}),s?"Disable":"Enable"," Global Surge"]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#1e293b"},children:"Global Surge Settings"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:"24px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Market Filter"}),t("select",{value:p,onChange:M=>h(M.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white"},children:[e("option",{value:"all",children:"All Markets"}),i.map(M=>t("option",{value:M.id,children:[M.city,", ",M.state]},M.id))]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Zone Types"}),e("div",{style:{display:"flex",gap:"8px",alignItems:"center",height:"44px"},children:t("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:z,onChange:M=>E(M.target.checked),style:{width:"16px",height:"16px"}}),"Show Airports"]})})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:["Maximum Surge Multiplier: ",c,"x"]}),e("input",{type:"range",min:"1.0",max:"5.0",step:"0.1",value:c,onChange:M=>X(Number(M.target.value)),style:{width:"100%",height:"6px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[e("span",{children:"1.0x"}),e("span",{children:"5.0x"})]})]}),t("div",{style:{backgroundColor:s?"#dcfce7":"#fef2f2",padding:"16px",borderRadius:"12px",border:`2px solid ${s?"#16a34a":"#dc2626"}`,textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:s?"#15803d":"#dc2626",marginBottom:"4px"},children:"Global Surge Status"}),e("div",{style:{fontSize:"20px",fontWeight:"700",color:s?"#15803d":"#dc2626"},children:s?"ACTIVE":"DISABLED"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:I,disabled:F.size===0||S,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 16px",backgroundColor:F.size>0?"#059669":"#9ca3af",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:F.size>0&&!S?"pointer":"not-allowed",opacity:S?.7:1},children:S?t(ve,{children:[e("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Saving..."]}):t(ve,{children:[e(zn,{size:16}),"Save Changes"]})}),F.size>0&&t("div",{style:{fontSize:"12px",color:"#dc2626",textAlign:"center",fontWeight:"600"},children:[F.size," unsaved change",F.size!==1?"s":""]}),y&&t("div",{style:{fontSize:"12px",color:"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e(bt,{size:12}),"Saved ",y.toLocaleTimeString()]})]})]})]}),e("div",{style:{display:"grid",gap:"16px"},children:U.map(M=>{var K;return e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 150px 150px",gap:"24px",alignItems:"center"},children:[t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:M.isAirport?`${M.airportCode} - ${M.name}`:M.name}),e("button",{onClick:()=>{H(M),Y(!0)},style:{padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"11px",cursor:"pointer"},children:"Edit"}),M.isManualOverride&&e("span",{style:{padding:"4px 8px",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:"MANUAL"}),M.isAirport&&e("span",{style:{padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1d4ed8",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:"AIRPORT"}),F.has(M.id)&&e("span",{style:{padding:"4px 8px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"\u25CF UNSAVED"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#6b7280"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(Ge,{size:14}),M.isAirport?`${w==="miles"?(M.radius/1609).toFixed(1):(M.radius/1e3).toFixed(1)}${w==="miles"?"mi":"km"} radius`:(K=i.find(de=>de.id===M.marketId))==null?void 0:K.city]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(kt,{size:14}),"Updated ",M.lastUpdated.toLocaleTimeString()]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u{1F697} ",M.isAirport?M.queueLength:M.activeDrivers," ",M.isAirport?"in queue":"drivers"]}),M.isAirport&&M.avgWaitTime&&t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u23F1\uFE0F ",M.avgWaitTime," avg wait"]}),!M.isAirport&&t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u{1F464} ",M.waitingRiders," waiting"]}),t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:`${Ye(M.demandLevel)}20`,color:Ye(M.demandLevel),borderRadius:"6px",fontWeight:"600"},children:[M.demandLevel.toUpperCase()," DEMAND"]})]})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"Current Surge"}),t("div",{style:{fontSize:"36px",fontWeight:"700",color:J(M.surgeMultiplier),marginBottom:"4px"},children:[M.surgeMultiplier.toFixed(1),"x"]}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:["+$",((M.surgeMultiplier-1)*15).toFixed(0)," avg"]})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"Manual Override"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("input",{type:"range",min:"1.0",max:c,step:"0.1",value:M.surgeMultiplier,onChange:de=>ee(M.id,Number(de.target.value)),style:{width:"100%",height:"4px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#6b7280"},children:[e("span",{children:"1.0x"}),t("span",{children:[c,"x"]})]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t("button",{onClick:()=>O(M.id),disabled:!M.isManualOverride,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",backgroundColor:M.isManualOverride?"#10b981":"#f1f5f9",color:M.isManualOverride?"white":"#9ca3af",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:M.isManualOverride?"pointer":"not-allowed"},children:[e(Zd,{size:12}),"Auto"]}),t("div",{style:{display:"flex",gap:"4px"},children:[e("button",{onClick:()=>ee(M.id,Math.min(c,M.surgeMultiplier+.5)),style:{flex:1,padding:"6px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"+0.5x"}),e("button",{onClick:()=>ee(M.id,Math.max(1,M.surgeMultiplier-.5)),style:{flex:1,padding:"6px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"-0.5x"})]})]})]})},M.id)})}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginTop:"24px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#1e293b"},children:"Surge Summary"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:U.filter(M=>M.isManualOverride).length}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Manual Overrides"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:U.filter(M=>M.surgeMultiplier>1.5).length}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"High Surge Zones"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:[(U.reduce((M,K)=>M+K.surgeMultiplier,0)/U.length).toFixed(1),"x"]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Average Surge"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:["$",((U.reduce((M,K)=>M+K.surgeMultiplier,0)/U.length-1)*15*100).toFixed(0)]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Est. Extra Revenue/Day"})]})]})]}),W&&A&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",width:"500px",maxHeight:"80vh",overflow:"auto"},children:[t("h3",{style:{margin:"0 0 20px 0"},children:["Edit Zone: ",A.name]}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600"},children:"Zone Name"}),e("input",{type:"text",value:A.name,onChange:M=>H({...A,name:M.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600"},children:"Latitude"}),e("input",{type:"number",step:"0.0001",value:A.coordinates.lat,onChange:M=>H({...A,coordinates:{...A.coordinates,lat:parseFloat(M.target.value)}}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600"},children:"Longitude"}),e("input",{type:"number",step:"0.0001",value:A.coordinates.lng,onChange:M=>H({...A,coordinates:{...A.coordinates,lng:parseFloat(M.target.value)}}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]})]}),t("div",{children:[t("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600"},children:["Radius (",w==="miles"?"miles":"km",")"]}),e("input",{type:"number",step:"0.1",value:w==="miles"?(A.radius/1609).toFixed(2):(A.radius/1e3).toFixed(2),onChange:M=>{const K=parseFloat(M.target.value),de=w==="miles"?K*1609:K*1e3;H({...A,radius:de})},style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontWeight:"600"},children:"Zone Type"}),t("select",{value:A.zoneType||"city_center",onChange:M=>H({...A,zoneType:M.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"airport",children:"Airport"}),e("option",{value:"city_center",children:"City Center"}),e("option",{value:"business",children:"Business District"}),e("option",{value:"entertainment",children:"Entertainment"})]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end"},children:[e("button",{onClick:()=>Y(!1),style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:async()=>{try{const M=localStorage.getItem("authToken");(await fetch(ie(`api/admin/surge/zones/${A.id}`),{method:"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({zoneName:A.name,zoneType:A.zoneType,zoneCode:A.airportCode,latitude:A.coordinates.lat,longitude:A.coordinates.lng,radius:A.radius,baseMultiplier:A.surgeMultiplier-1,tierLevel:1,isActive:!0})})).ok?(Y(!1),V(),alert("Zone updated successfully!")):alert("Failed to update zone")}catch(M){console.error("Update zone error:",M),alert("Error updating zone")}},style:{padding:"10px 20px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Save Changes"})]})]})})]})},Vp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(null),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(!1),[c,v]=l.exports.useState(!1),[u,x]=l.exports.useState(!0);l.exports.useEffect(()=>{z()},[]);const z=async()=>{var y;try{x(!0);const f=localStorage.getItem("authToken"),w=await fetch(ie("api/admin/markets"),{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(w.ok){const L=await w.json();console.log("\u{1F4CD} Markets loaded:",((y=L.markets)==null?void 0:y.length)||0);const A=(L.markets||[]).map(H=>({id:H.id,name:H.market_name,city:H.city,state:H.state,country:H.country,center:{lat:parseFloat(H.center_lat),lng:parseFloat(H.center_lng)},radius:H.radius_miles,zoom:H.default_zoom||11,timezone:H.timezone,currency:H.currency,status:H.status,launchedAt:H.launched_at,totalDrivers:0,totalRiders:0,monthlyRides:0,monthlyRevenue:0,config:{}}));o(A)}}catch(f){console.error("Failed to load markets:",f)}finally{x(!1)}},E=y=>{switch(y){case"active":return"#10b981";case"pending":return"#f59e0b";case"inactive":return"#ef4444";default:return"#6b7280"}},F=y=>{switch(y){case"active":return e(bt,{size:16});case"pending":return e(kt,{size:16});case"inactive":return e(ro,{size:16});default:return e(ro,{size:16})}},b=y=>{const f={id:y.city.toLowerCase().replace(/\s+/g,""),name:y.name,city:y.city,state:y.state,country:y.country,center:{lat:parseFloat(y.lat),lng:parseFloat(y.lng)},radius:parseInt(y.radius),zoom:13,timezone:y.timezone,currency:y.currency,status:"pending",launchedAt:new Date().toISOString().split("T")[0],totalDrivers:0,totalRiders:0,monthlyRides:0,monthlyRevenue:0,config:{baseFare:parseFloat(y.baseFare),perMileFare:parseFloat(y.perMileFare),perMinuteFare:parseFloat(y.perMinuteFare),maxSurgeMultiplier:parseFloat(y.maxSurgeMultiplier),airportFee:parseFloat(y.airportFee),cancellationFee:parseFloat(y.cancellationFee)}};Ir.addMarket(f),z(),d(!1),alert(`Market "${f.name}" added successfully!`)},S=y=>{!r||(Ir.updateMarket(r.id,y),z(),h(!1),n(null),alert("Market updated successfully!"))},m=async(y,f)=>{if(confirm(`Are you sure you want to delete ${f}?`))try{const w=localStorage.getItem("authToken");(await fetch(ie(`api/admin/markets/${y}`),{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).ok&&(z(),alert("Market deleted successfully!"))}catch(w){console.error("Delete market error:",w)}};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Market Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage markets across multiple cities and regions"})]}),t("button",{onClick:()=>d(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ca,{size:16}),"Add New Market"]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(Sa,{size:24,color:"#3b82f6"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Total Markets"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:i.length}),t("div",{style:{fontSize:"14px",color:"#6b7280"},children:[i.filter(y=>y.status==="active").length," active"]})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(no,{size:24,color:"#10b981"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Total Users"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:i.reduce((y,f)=>y+f.totalDrivers+f.totalRiders,0).toLocaleString()}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Across all markets"})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(rt,{size:24,color:"#f59e0b"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Monthly Rides"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:i.reduce((y,f)=>y+f.monthlyRides,0).toLocaleString()}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"This month"})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(Nt,{size:24,color:"#8b5cf6"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Monthly Revenue"})]}),t("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:["$",i.reduce((y,f)=>y+f.monthlyRevenue,0).toLocaleString()]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"This month"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Market"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Drivers"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Riders"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Monthly Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Revenue"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Actions"})]})}),e("tbody",{children:i.map(y=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:y.name}),t("div",{style:{fontSize:"12px",color:"#64748b",display:"flex",alignItems:"center",gap:"4px"},children:[e(Ge,{size:12}),y.city,", ",y.state]})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${E(y.status)}20`,color:E(y.status)},children:[F(y.status),y.status.charAt(0).toUpperCase()+y.status.slice(1)]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:y.totalDrivers.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:y.totalRiders.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:y.monthlyRides.toLocaleString()}),t("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:["$",y.monthlyRevenue.toLocaleString()]}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:()=>{n(y),v(!0)},style:{padding:"6px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer"},title:"View Details",children:e($t,{size:14,color:"#374151"})}),e("button",{onClick:()=>{n(y),h(!0)},style:{padding:"6px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer"},title:"Edit Market",children:e(qd,{size:14,color:"#374151"})}),e("button",{onClick:()=>m(y.id,y.name),style:{padding:"6px",backgroundColor:"#fef2f2",border:"none",borderRadius:"6px",cursor:"pointer"},title:"Delete Market",children:e(_r,{size:14,color:"#ef4444"})})]})})]},y.id))})]})})}),s&&e(Gp,{onClose:()=>d(!1),onSubmit:b}),p&&r&&e(Yp,{market:r,onClose:()=>{h(!1),n(null)},onSubmit:S}),c&&r&&e(Jp,{market:r,onClose:()=>{v(!1),n(null)}})]})},Gp=({onClose:i,onSubmit:o})=>{const[r,n]=l.exports.useState({name:"",city:"",state:"",country:"USA",lat:"",lng:"",radius:"25",timezone:"America/Chicago",currency:"USD",baseFare:"2.50",perMileFare:"1.25",perMinuteFare:"0.35",maxSurgeMultiplier:"2.5",airportFee:"3.50",cancellationFee:"5.00"});return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Add New Market"}),e("button",{onClick:i,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:d=>{d.preventDefault(),o(r)},style:{display:"grid",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Name"}),e("input",{type:"text",value:r.name,onChange:d=>n({...r,name:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"City"}),e("input",{type:"text",value:r.city,onChange:d=>n({...r,city:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"State/Province"}),e("input",{type:"text",value:r.state,onChange:d=>n({...r,state:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Country"}),t("select",{value:r.country,onChange:d=>n({...r,country:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"USA",children:"United States"}),e("option",{value:"CAN",children:"Canada"}),e("option",{value:"MEX",children:"Mexico"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Service Radius (km)"}),e("input",{type:"number",value:r.radius,onChange:d=>n({...r,radius:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"5",max:"100",required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Latitude"}),e("input",{type:"number",step:"any",value:r.lat,onChange:d=>n({...r,lat:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Longitude"}),e("input",{type:"number",step:"any",value:r.lng,onChange:d=>n({...r,lng:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Timezone"}),t("select",{value:r.timezone,onChange:d=>n({...r,timezone:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"America/Chicago",children:"Central Time"}),e("option",{value:"America/New_York",children:"Eastern Time"}),e("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e("option",{value:"America/Denver",children:"Mountain Time"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Currency"}),t("select",{value:r.currency,onChange:d=>n({...r,currency:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"USD",children:"USD ($)"}),e("option",{value:"CAD",children:"CAD ($)"}),e("option",{value:"EUR",children:"EUR (\u20AC)"})]})]})]}),e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:"16px 0 8px 0"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:r.baseFare,onChange:d=>n({...r,baseFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Mile ($)"}),e("input",{type:"number",step:"0.05",value:r.perMileFare,onChange:d=>n({...r,perMileFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Minute ($)"}),e("input",{type:"number",step:"0.05",value:r.perMinuteFare,onChange:d=>n({...r,perMinuteFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Max Surge Multiplier"}),e("input",{type:"number",step:"0.1",value:r.maxSurgeMultiplier,onChange:d=>n({...r,maxSurgeMultiplier:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"1.0",max:"5.0",required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Airport Fee ($)"}),e("input",{type:"number",step:"0.50",value:r.airportFee,onChange:d=>n({...r,airportFee:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Cancellation Fee ($)"}),e("input",{type:"number",step:"0.50",value:r.cancellationFee,onChange:d=>n({...r,cancellationFee:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{type:"submit",style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Create Market"}),e("button",{type:"button",onClick:i,style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})})},Yp=({market:i,onClose:o,onSubmit:r})=>{const[n,s]=l.exports.useState({name:i.name,city:i.city,state:i.state,country:i.country,lat:i.center.lat.toString(),lng:i.center.lng.toString(),radius:i.radius.toString(),timezone:i.timezone,currency:i.currency,status:i.status,baseFare:i.config.baseFare.toString(),perMileFare:i.config.perMileFare.toString(),perMinuteFare:i.config.perMinuteFare.toString(),maxSurgeMultiplier:i.config.maxSurgeMultiplier.toString(),airportFee:i.config.airportFee.toString(),cancellationFee:i.config.cancellationFee.toString()}),d=p=>{p.preventDefault();const h={...n,center:{lat:parseFloat(n.lat),lng:parseFloat(n.lng)},radius:parseInt(n.radius),config:{baseFare:parseFloat(n.baseFare),perMileFare:parseFloat(n.perMileFare),perMinuteFare:parseFloat(n.perMinuteFare),maxSurgeMultiplier:parseFloat(n.maxSurgeMultiplier),airportFee:parseFloat(n.airportFee),cancellationFee:parseFloat(n.cancellationFee)}};r(h)};return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Edit Market: ",i.name]}),e("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:d,style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Status"}),t("select",{value:n.status,onChange:p=>s({...n,status:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"active",children:"Active"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"inactive",children:"Inactive"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Name"}),e("input",{type:"text",value:n.name,onChange:p=>s({...n,name:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Service Radius (km)"}),e("input",{type:"number",value:n.radius,onChange:p=>s({...n,radius:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"5",max:"100",required:!0})]})]}),e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:"16px 0 8px 0"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:n.baseFare,onChange:p=>s({...n,baseFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Mile ($)"}),e("input",{type:"number",step:"0.05",value:n.perMileFare,onChange:p=>s({...n,perMileFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Minute ($)"}),e("input",{type:"number",step:"0.05",value:n.perMinuteFare,onChange:p=>s({...n,perMinuteFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{type:"submit",style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Update Market"}),e("button",{type:"button",onClick:o,style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})})},Jp=({market:i,onClose:o})=>{function r(n){throw new Error("Function not implemented.")}return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"700px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Market Details: ",i.name]}),e("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Market Information"}),t("p",{children:[e("strong",{children:"Location:"})," ",i.city,", ",i.state,", ",i.country]}),t("p",{children:[e("strong",{children:"Service Radius:"})," ",i.radius," km"]}),t("p",{children:[e("strong",{children:"Timezone:"})," ",i.timezone]}),t("p",{children:[e("strong",{children:"Currency:"})," ",i.currency]}),t("p",{children:[e("strong",{children:"Launched:"})," ",new Date(i.launchedAt).toLocaleDateString()]}),t("p",{children:[e("strong",{children:"Status:"}),e("span",{style:{color:r(i.status||"pending"),fontWeight:"600",marginLeft:"8px"},children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]})]}),t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Performance Metrics"}),t("p",{children:[e("strong",{children:"Total Drivers:"})," ",i.totalDrivers.toLocaleString()]}),t("p",{children:[e("strong",{children:"Total Riders:"})," ",i.totalRiders.toLocaleString()]}),t("p",{children:[e("strong",{children:"Monthly Rides:"})," ",i.monthlyRides.toLocaleString()]}),t("p",{children:[e("strong",{children:"Monthly Revenue:"})," $",i.monthlyRevenue.toLocaleString()]}),t("p",{children:[e("strong",{children:"Avg Revenue per Ride:"})," $",(i.monthlyRevenue/i.monthlyRides).toFixed(2)]})]})]}),t("div",{style:{marginTop:"20px"},children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:[t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Base Fare"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",i.config.baseFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Per Mile"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",i.config.perMileFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Per Minute"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",i.config.perMinuteFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Max Surge"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:[i.config.maxSurgeMultiplier,"x"]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Airport Fee"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",i.config.airportFee]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Cancellation Fee"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",i.config.cancellationFee]})]})]})]})]})})},Kp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(null),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(""),[c,v]=l.exports.useState("all"),[u,x]=l.exports.useState("all"),[z,E]=l.exports.useState("all"),[F,b]=l.exports.useState(null),[S,m]=l.exports.useState(!0);l.exports.useEffect(()=>{y()},[]);const y=async()=>{var B;try{m(!0);const V=localStorage.getItem("authToken"),re=await fetch(ie("api/admin/disputes"),{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});if(re.ok){const I=await re.json();console.log("\u2696\uFE0F Disputes loaded:",(B=I.disputes)==null?void 0:B.length);const ee=(I.disputes||[]).map(O=>({id:O.id,caseNumber:O.case_number,type:O.type,status:O.status,priority:O.priority,rideId:O.ride_id||"",riderId:O.rider_id||"",riderName:O.rider_name||"Unknown Rider",driverId:O.driver_id||"",driverName:O.driver_name||"Unknown Driver",reportedBy:O.reported_by,reportedAt:O.reported_at,resolvedAt:O.resolved_at,assignedTo:O.assigned_to,subject:O.subject,description:O.description,requestedRefund:O.requested_refund?parseFloat(O.requested_refund):void 0,actualRefund:O.actual_refund?parseFloat(O.actual_refund):void 0,evidence:[],messages:[],resolution:O.resolution,resolutionType:O.resolution_type}));o(ee)}}catch(V){console.error("Failed to load disputes:",V)}finally{m(!1)}},f=B=>({fare_dispute:"#f59e0b",driver_behavior:"#ef4444",rider_behavior:"#f59e0b",vehicle_issue:"#8b5cf6",route_dispute:"#06b6d4",cancellation_dispute:"#6b7280",safety_incident:"#dc2626",lost_item:"#10b981"})[B]||"#6b7280",w=B=>({open:"#f59e0b",investigating:"#3b82f6",pending_rider:"#8b5cf6",pending_driver:"#06b6d4",resolved:"#10b981",closed:"#6b7280"})[B]||"#6b7280",L=B=>({low:"#10b981",medium:"#f59e0b",high:"#ef4444",urgent:"#dc2626"})[B]||"#6b7280",A=B=>B.split("_").map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" "),H=i.filter(B=>{const V=B.caseNumber.toLowerCase().includes(p.toLowerCase())||B.riderName.toLowerCase().includes(p.toLowerCase())||B.driverName.toLowerCase().includes(p.toLowerCase())||B.subject.toLowerCase().includes(p.toLowerCase()),re=c==="all"||B.status===c,I=u==="all"||B.type===u,ee=z==="all"||B.priority===z;return V&&re&&I&&ee}),W=(B,V)=>{switch(n(V),b(null),B){case"view":d(!0);break}},Y={total:i.length,open:i.filter(B=>B.status==="open").length,investigating:i.filter(B=>B.status==="investigating").length,resolved:i.filter(B=>B.status==="resolved").length,avgResolutionTime:"2.3 days"};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Dispute Resolution Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage and resolve rider and driver disputes"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Export Report"}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Bulk Actions"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:Y.total}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Disputes"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:Y.open}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Open Cases"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:Y.investigating}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Investigating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:Y.resolved}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Resolved"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#6b7280",fontSize:"24px",fontWeight:"700"},children:Y.avgResolutionTime}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Resolution"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",gap:"16px",alignItems:"end"},children:[t("div",{style:{position:"relative"},children:[e(ji,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search by case number, names, or subject...",value:p,onChange:B=>h(B.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:c,onChange:B=>v(B.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"open",children:"Open"}),e("option",{value:"investigating",children:"Investigating"}),e("option",{value:"pending_rider",children:"Pending Rider"}),e("option",{value:"pending_driver",children:"Pending Driver"}),e("option",{value:"resolved",children:"Resolved"}),e("option",{value:"closed",children:"Closed"})]}),t("select",{value:u,onChange:B=>x(B.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Types"}),e("option",{value:"fare_dispute",children:"Fare Dispute"}),e("option",{value:"driver_behavior",children:"Driver Behavior"}),e("option",{value:"rider_behavior",children:"Rider Behavior"}),e("option",{value:"vehicle_issue",children:"Vehicle Issue"}),e("option",{value:"route_dispute",children:"Route Dispute"}),e("option",{value:"cancellation_dispute",children:"Cancellation"}),e("option",{value:"safety_incident",children:"Safety Incident"}),e("option",{value:"lost_item",children:"Lost Item"})]}),t("select",{value:z,onChange:B=>E(B.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Priority"}),e("option",{value:"urgent",children:"Urgent"}),e("option",{value:"high",children:"High"}),e("option",{value:"medium",children:"Medium"}),e("option",{value:"low",children:"Low"})]})]})}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Case Details"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Type"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Priority"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Parties"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Reported"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Actions"})]})}),e("tbody",{children:H.map(B=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:B.caseNumber}),e("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"2px"},children:B.subject}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["Ride: ",B.rideId]})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${f(B.type)}20`,color:f(B.type)},children:A(B.type)})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${L(B.priority)}20`,color:L(B.priority)},children:B.priority.charAt(0).toUpperCase()+B.priority.slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${w(B.status)}20`,color:w(B.status)},children:[B.status==="open"&&e(yo,{size:12}),B.status==="investigating"&&e(kt,{size:12}),B.status==="resolved"&&e(bt,{size:12}),B.status==="closed"&&e(Bi,{size:12}),B.status.replace("_"," ").split(" ").map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" ")]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{fontSize:"14px"},children:[t("div",{style:{marginBottom:"4px"},children:[e("span",{style:{color:"#64748b"},children:"Rider:"})," ",B.riderName]}),t("div",{children:[e("span",{style:{color:"#64748b"},children:"Driver:"})," ",B.driverName]})]})}),t("td",{style:{padding:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#64748b"},children:new Date(B.reportedAt).toLocaleDateString()}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["by ",B.reportedBy]})]}),t("td",{style:{padding:"16px",position:"relative"},children:[e("button",{onClick:()=>b(F===B.id?null:B.id),style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})}),F===B.id&&t("div",{style:{position:"absolute",top:"100%",right:"16px",backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"160px"},children:[t("button",{onClick:()=>W("view",B),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},children:[e($t,{size:16,color:"#6b7280"}),"View Details"]}),t("button",{onClick:()=>W("assign",B),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},children:[e(je,{size:16,color:"#6b7280"}),"Assign Agent"]}),t("button",{onClick:()=>W("resolve",B),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#10b981"},children:[e(bt,{size:16}),"Mark Resolved"]})]})]})]},B.id))})]})})}),s&&r&&e(Xp,{dispute:r,onClose:()=>{d(!1),n(null)},onUpdate:B=>{o(i.map(V=>V.id===B.id?B:V))}}),F&&e("div",{onClick:()=>b(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Xp=({dispute:i,onClose:o,onUpdate:r})=>{const[n,s]=l.exports.useState(""),[d,p]=l.exports.useState("details"),[h,c]=l.exports.useState(""),[v,u]=l.exports.useState(""),[x,z]=l.exports.useState(""),E=()=>{if(!n.trim())return;const b={id:`MSG_${Date.now()}`,senderId:"admin_current",senderName:"Support Agent",senderType:"admin",message:n,sentAt:new Date().toISOString(),isInternal:!1},S={...i,messages:[...i.messages,b]};r(S),s(""),alert("Message sent successfully!")},F=()=>{if(!h||!x){alert("Please fill in all resolution fields");return}const b={...i,status:"resolved",resolvedAt:new Date().toISOString(),resolution:x,resolutionType:h,actualRefund:h==="refund"?parseFloat(v)||0:void 0};r(b),alert("Dispute resolved successfully!")};return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"0",maxWidth:"900px",width:"90%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"24px 24px 0 24px",borderBottom:"1px solid #e2e8f0"},children:[t("div",{children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Case ",i.caseNumber]}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0 0"},children:i.subject})]}),e("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{display:"flex",borderBottom:"1px solid #e2e8f0",padding:"0 24px"},children:[{id:"details",label:"Details",icon:e(yt,{size:16})},{id:"messages",label:"Messages",icon:e(Cn,{size:16})},{id:"evidence",label:"Evidence",icon:e(fo,{size:16})},{id:"resolution",label:"Resolution",icon:e(bt,{size:16})}].map(b=>t("button",{onClick:()=>p(b.id),style:{padding:"12px 16px",border:"none",backgroundColor:"transparent",borderBottom:d===b.id?"2px solid #3b82f6":"2px solid transparent",color:d===b.id?"#3b82f6":"#64748b",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600"},children:[b.icon,b.label]},b.id))}),t("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[d==="details"&&t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Case Information"}),t("div",{style:{display:"grid",gap:"12px"},children:[t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Type: "}),e("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:`${i.type==="safety_incident"?"#dc2626":"#f59e0b"}20`,color:i.type==="safety_incident"?"#dc2626":"#f59e0b"},children:i.type.split("_").map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" ")})]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Priority: "}),e("span",{style:{color:i.priority==="urgent"?"#dc2626":"#f59e0b"},children:i.priority.charAt(0).toUpperCase()+i.priority.slice(1)})]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Reported by: "}),i.reportedBy]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Date: "}),new Date(i.reportedAt).toLocaleString()]}),i.requestedRefund&&t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Requested refund: "}),t("span",{style:{color:"#10b981"},children:["$",i.requestedRefund]})]})]}),e("h4",{style:{margin:"24px 0 16px 0",color:"#374151"},children:"Description"}),e("p",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",margin:0,lineHeight:"1.5"},children:i.description})]}),t("div",{children:[e("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Party Information"}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(je,{size:16,color:"#3b82f6"}),e("span",{style:{fontWeight:"600"},children:"Rider"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[e("div",{children:i.riderName}),t("div",{children:["ID: ",i.riderId]})]})]}),t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(rt,{size:16,color:"#10b981"}),e("span",{style:{fontWeight:"600"},children:"Driver"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[e("div",{children:i.driverName}),t("div",{children:["ID: ",i.driverId]})]})]}),t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(kn,{size:16,color:"#f59e0b"}),e("span",{style:{fontWeight:"600"},children:"Ride Details"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[t("div",{children:["ID: ",i.rideId]}),t("div",{children:["Date: ",new Date(i.reportedAt).toLocaleDateString()]})]})]})]})]})]}),d==="messages"&&t("div",{children:[e("div",{style:{marginBottom:"24px",maxHeight:"400px",overflow:"auto"},children:i.messages.length===0?e("div",{style:{textAlign:"center",color:"#64748b",padding:"40px"},children:"No messages yet. Send the first message to start the conversation."}):i.messages.map(b=>t("div",{style:{marginBottom:"16px",padding:"16px",borderRadius:"8px",backgroundColor:b.senderType==="admin"?"#eff6ff":"#f8fafc",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontWeight:"600",color:"#1e293b"},children:b.senderName}),e("span",{style:{fontSize:"12px",padding:"2px 6px",borderRadius:"4px",backgroundColor:b.senderType==="admin"?"#3b82f620":"#64748b20",color:b.senderType==="admin"?"#3b82f6":"#64748b"},children:b.senderType})]}),e("span",{style:{fontSize:"12px",color:"#64748b"},children:new Date(b.sentAt).toLocaleString()})]}),e("p",{style:{margin:0,lineHeight:"1.5"},children:b.message})]},b.id))}),e("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"16px"},children:t("div",{style:{display:"flex",gap:"12px"},children:[e("textarea",{value:n,onChange:b=>s(b.target.value),placeholder:"Type your message...",rows:3,style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",resize:"vertical"}}),t("button",{onClick:E,disabled:!n.trim(),style:{padding:"12px 16px",backgroundColor:n.trim()?"#3b82f6":"#e2e8f0",color:n.trim()?"white":"#64748b",border:"none",borderRadius:"8px",cursor:n.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"},children:[e(Rn,{size:16}),"Send"]})]})})]}),d==="evidence"&&t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h4",{style:{margin:0},children:"Evidence Files"}),t("button",{style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(An,{size:16}),"Upload Evidence"]})]}),i.evidence.length===0?t("div",{style:{textAlign:"center",color:"#64748b",padding:"40px",border:"2px dashed #e2e8f0",borderRadius:"8px"},children:[e(fo,{size:48,color:"#e2e8f0",style:{marginBottom:"16px"}}),e("div",{children:"No evidence files uploaded yet."})]}):e("div",{style:{display:"grid",gap:"16px"},children:i.evidence.map(b=>t("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#f8fafc"},children:[t("div",{style:{width:"48px",height:"48px",backgroundColor:"#3b82f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:[b.type==="photo"&&e(fo,{size:20,color:"white"}),b.type==="screenshot"&&e(yt,{size:20,color:"white"}),b.type==="document"&&e(yt,{size:20,color:"white"}),b.type==="audio"&&e(yt,{size:20,color:"white"})]}),t("div",{style:{flex:1},children:[e("div",{style:{fontWeight:"600",marginBottom:"4px"},children:b.filename}),t("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"2px"},children:["Uploaded by ",b.uploadedBy," on ",new Date(b.uploadedAt).toLocaleDateString()]}),b.description&&e("div",{style:{fontSize:"14px",color:"#64748b"},children:b.description})]}),e("button",{style:{padding:"8px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:"View"})]},b.id))})]}),d==="resolution"&&e("div",{children:i.status==="resolved"?t("div",{style:{padding:"20px",backgroundColor:"#ecfdf5",border:"1px solid #10b981",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(bt,{size:20,color:"#10b981"}),e("span",{style:{fontWeight:"600",color:"#10b981"},children:"Case Resolved"})]}),t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Resolution Type:"})," ",i.resolutionType]}),i.actualRefund&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Refund Amount:"})," $",i.actualRefund]}),t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Resolved on:"})," ",i.resolvedAt?new Date(i.resolvedAt).toLocaleString():"N/A"]}),t("div",{children:[e("strong",{children:"Resolution Notes:"}),e("p",{style:{marginTop:"8px",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e2e8f0"},children:i.resolution})]})]}):t("div",{children:[e("h4",{style:{margin:"0 0 16px 0"},children:"Resolve Dispute"}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Resolution Type"}),t("select",{value:h,onChange:b=>c(b.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[e("option",{value:"",children:"Select resolution type"}),e("option",{value:"refund",children:"Issue Refund"}),e("option",{value:"credit",children:"Provide Credit"}),e("option",{value:"warning",children:"Issue Warning"}),e("option",{value:"suspension",children:"Account Suspension"}),e("option",{value:"no_action",children:"No Action Required"})]})]}),h==="refund"&&t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Refund Amount ($)"}),e("input",{type:"number",step:"0.01",value:v,onChange:b=>u(b.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Resolution Notes"}),e("textarea",{value:x,onChange:b=>z(b.target.value),placeholder:"Explain the resolution and any actions taken...",rows:4,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",resize:"vertical"}})]}),e("button",{onClick:F,disabled:!h||!x,style:{padding:"12px 24px",backgroundColor:h&&x?"#10b981":"#e2e8f0",color:h&&x?"white":"#64748b",border:"none",borderRadius:"8px",fontWeight:"600",cursor:h&&x?"pointer":"not-allowed"},children:"Resolve Dispute"})]})]})})]})]})})},Zp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(!0),[s,d]=l.exports.useState(!1),[p,h]=l.exports.useState(null),[c,v]=l.exports.useState({company_name:"",company_email:"",contact_person:"",contact_phone:"",discount_type:"percentage",discount_value:0,valid_days:["monday","tuesday","wednesday","thursday","friday"],start_date:"",end_date:"",is_active:!0,max_discount_amount:0,min_ride_amount:0});l.exports.useEffect(()=>{u()},[]);const u=async()=>{try{const m=await fetch(ie("api/admin/corporations"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(m.ok){const y=await m.json();o(y.corporations)}else console.error("Failed to fetch corporations")}catch(m){console.error("Error fetching corporations:",m)}finally{n(!1)}},x=async m=>{m.preventDefault();try{const y=ie(p?`api/admin/corporations/${p.id}`:"api/admin/corporations"),w=await fetch(y,{method:p?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(c)});if(w.ok)await u(),F(),d(!1),h(null);else{const L=await w.json();alert(L.error||"Failed to save corporation")}}catch(y){console.error("Error saving corporation:",y),alert("Error saving corporation")}},z=m=>{h(m),v({company_name:m.company_name,company_email:m.company_email||"",contact_person:m.contact_person||"",contact_phone:m.contact_phone||"",discount_type:m.discount_type,discount_value:m.discount_value,valid_days:Array.isArray(m.valid_days)?m.valid_days:JSON.parse(m.valid_days),start_date:m.start_date,end_date:m.end_date||"",is_active:m.is_active,max_discount_amount:m.max_discount_amount||0,min_ride_amount:m.min_ride_amount||0}),d(!0)},E=async m=>{if(!!confirm("Are you sure you want to delete this corporation? This will affect all associated applications."))try{(await fetch(`/api/admin/corporations/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?await u():alert("Failed to delete corporation")}catch(y){console.error("Error deleting corporation:",y),alert("Error deleting corporation")}},F=()=>{v({company_name:"",company_email:"",contact_person:"",contact_phone:"",discount_type:"percentage",discount_value:0,valid_days:["monday","tuesday","wednesday","thursday","friday"],start_date:"",end_date:"",is_active:!0,max_discount_amount:0,min_ride_amount:0})},b=m=>{v(y=>({...y,valid_days:y.valid_days.includes(m)?y.valid_days.filter(f=>f!==m):[...y.valid_days,m]}))},S=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading corporations..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(Ni,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Management"})]}),t("button",{onClick:()=>{F(),h(null),d(!0)},style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(Ca,{size:16}),"Add Corporation"]})]}),s&&t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600"},children:p?"Edit Corporation":"Add New Corporation"}),t("form",{onSubmit:x,children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Company Name *"}),e("input",{type:"text",value:c.company_name,onChange:m=>v(y=>({...y,company_name:m.target.value})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Company Email"}),e("input",{type:"email",value:c.company_email,onChange:m=>v(y=>({...y,company_email:m.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Contact Person"}),e("input",{type:"text",value:c.contact_person,onChange:m=>v(y=>({...y,contact_person:m.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Contact Phone"}),e("input",{type:"tel",value:c.contact_phone,onChange:m=>v(y=>({...y,contact_phone:m.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Discount Type *"}),t("select",{value:c.discount_type,onChange:m=>v(y=>({...y,discount_type:m.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:[e("option",{value:"percentage",children:"Percentage"}),e("option",{value:"fixed_amount",children:"Fixed Amount"})]})]}),t("div",{children:[t("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:["Discount Value * ",c.discount_type==="percentage"?"(%)":"($)"]}),e("input",{type:"number",step:"0.01",value:c.discount_value,onChange:m=>v(y=>({...y,discount_value:parseFloat(m.target.value)||0})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Max Discount ($)"}),e("input",{type:"number",step:"0.01",value:c.max_discount_amount,onChange:m=>v(y=>({...y,max_discount_amount:parseFloat(m.target.value)||0})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Valid Days *"}),e("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:S.map(m=>t("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:c.valid_days.includes(m),onChange:()=>b(m),style:{margin:0}}),e("span",{style:{fontSize:"14px",textTransform:"capitalize"},children:m})]},m))})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Start Date *"}),e("input",{type:"date",value:c.start_date,onChange:m=>v(y=>({...y,start_date:m.target.value})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"End Date"}),e("input",{type:"date",value:c.end_date,onChange:m=>v(y=>({...y,end_date:m.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[e("input",{type:"checkbox",checked:c.is_active,onChange:m=>v(y=>({...y,is_active:m.target.checked})),style:{margin:0}}),e("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Active"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{type:"submit",style:{backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:p?"Update Corporation":"Create Corporation"}),e("button",{type:"button",onClick:()=>{d(!1),h(null),F()},style:{backgroundColor:"#6B7280",color:"white",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]}),t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 120px",gap:"16px",padding:"16px 20px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",fontSize:"12px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:[e("div",{children:"Company"}),e("div",{children:"Discount"}),e("div",{children:"Applications"}),e("div",{children:"Usage"}),e("div",{children:"Status"}),e("div",{children:"Date Range"}),e("div",{children:"Actions"})]}),i.length===0?e("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280",fontSize:"16px"},children:"No corporations configured. Add your first corporate discount program."}):i.map(m=>t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 120px",gap:"16px",padding:"16px 20px",borderBottom:"1px solid #F3F4F6",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:m.company_name}),t("div",{style:{fontSize:"12px",color:"#6B7280"},children:[m.contact_person&&`${m.contact_person} \u2022 `,m.company_email]})]}),t("div",{style:{fontSize:"14px"},children:[m.discount_type==="percentage"?`${m.discount_value}%`:`$${m.discount_value}`,m.max_discount_amount&&m.discount_type==="percentage"&&t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["Max: $",m.max_discount_amount]})]}),t("div",{style:{fontSize:"14px"},children:[t("div",{children:[m.approved_applications,"/",m.total_applications]}),e("div",{style:{fontSize:"11px",color:"#6B7280"},children:"approved"})]}),t("div",{style:{fontSize:"14px"},children:[t("div",{children:[m.total_usage," rides"]}),t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["$",m.total_savings.toFixed(2)," saved"]})]}),e("div",{children:e("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:m.is_active?"#D1FAE5":"#FEE2E2",color:m.is_active?"#047857":"#DC2626"},children:m.is_active?"Active":"Inactive"})}),t("div",{style:{fontSize:"12px",color:"#6B7280"},children:[e("div",{children:new Date(m.start_date).toLocaleDateString()}),m.end_date&&t("div",{children:["to ",new Date(m.end_date).toLocaleDateString()]})]}),t("div",{style:{display:"flex",gap:"4px"},children:[e("button",{onClick:()=>z(m),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#F3F4F6",cursor:"pointer",color:"#6B7280"},title:"Edit",children:e(Fn,{size:14})}),e("button",{onClick:()=>E(m.id),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#FEE2E2",cursor:"pointer",color:"#DC2626"},title:"Delete",children:e(_r,{size:14})})]})]},m.id))]})]})},Qp=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(!0),[s,d]=l.exports.useState(null),[p,h]=l.exports.useState({status:"",review_notes:"",rejection_reason:""}),[c,v]=l.exports.useState("all");l.exports.useEffect(()=>{u()},[]);const u=async()=>{try{const b=await fetch(ie("api/admin/corporate-applications"),{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(b.ok){const S=await b.json();o(S.applications)}else console.error("Failed to fetch applications")}catch(b){console.error("Error fetching applications:",b)}finally{n(!1)}},x=async b=>{if(!p.status){alert("Please select approve or reject");return}if(p.status==="rejected"&&!p.rejection_reason.trim()){alert("Please provide a rejection reason");return}try{const S=await fetch(ie("api/admin/corporate-applications/"+b+"/review"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(p)});if(S.ok)await u(),d(null),h({status:"",review_notes:"",rejection_reason:""});else{const m=await S.json();alert(m.error||"Failed to review application")}}catch(S){console.error("Error reviewing application:",S),alert("Error reviewing application")}},z=b=>{d(b),h({status:"",review_notes:"",rejection_reason:""})},E=i.filter(b=>c==="all"||b.status===c),F=b=>{switch(b){case"approved":return{bg:"#D1FAE5",text:"#047857"};case"rejected":return{bg:"#FEE2E2",text:"#DC2626"};default:return{bg:"#FEF3C7",text:"#D97706"}}};return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading applications..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(yt,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Applications"})]}),e("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:t("select",{value:c,onChange:b=>v(b.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"approved",children:"Approved"}),e("option",{value:"rejected",children:"Rejected"})]})})]}),t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr 1fr 1fr 1fr 100px",gap:"16px",padding:"16px 20px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",fontSize:"12px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:[e("div",{children:"Employee"}),e("div",{children:"Company"}),e("div",{children:"Submitted"}),e("div",{children:"Status"}),e("div",{children:"Discount"}),e("div",{children:"Actions"})]}),E.length===0?e("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280",fontSize:"16px"},children:c==="all"?"No corporate discount applications submitted yet.":`No ${c} applications found.`}):E.map(b=>{const S=F(b.status);return t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr 1fr 1fr 1fr 100px",gap:"16px",padding:"16px 20px",borderBottom:"1px solid #F3F4F6",alignItems:"center"},children:[t("div",{children:[t("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:[b.first_name," ",b.last_name]}),e("div",{style:{fontSize:"12px",color:"#6B7280"},children:b.work_email}),b.employee_id&&t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["ID: ",b.employee_id]})]}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:b.company_name}),b.department&&e("div",{style:{fontSize:"12px",color:"#6B7280"},children:b.department})]}),e("div",{style:{fontSize:"12px",color:"#6B7280"},children:new Date(b.created_at).toLocaleDateString()}),e("div",{children:e("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:S.bg,color:S.text,textTransform:"capitalize"},children:b.status})}),e("div",{style:{fontSize:"14px",fontWeight:"600"},children:b.discount_type==="percentage"?`${b.discount_value}%`:`$${b.discount_value}`}),e("div",{children:t("button",{onClick:()=>z(b),style:{padding:"6px 12px",border:"none",borderRadius:"6px",backgroundColor:"#4F46E5",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},title:"Review Application",children:[e($t,{size:12}),"Review"]})})]},b.id)})]}),s&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Application"}),e("button",{onClick:()=>d(null),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#F3F4F6",cursor:"pointer",color:"#6B7280"},children:e(oi,{size:16})})]}),t("div",{style:{marginBottom:"24px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(je,{size:16}),"Employee Information"]}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("strong",{children:"Name:"})," ",s.first_name," ",s.last_name]}),t("div",{children:[e("strong",{children:"Personal Email:"})," ",s.rider_email]}),t("div",{children:[e("strong",{children:"Work Email:"})," ",s.work_email]}),s.employee_id&&t("div",{children:[e("strong",{children:"Employee ID:"})," ",s.employee_id]}),s.department&&t("div",{style:{gridColumn:"1 / -1"},children:[e("strong",{children:"Department:"})," ",s.department]})]})}),t("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ni,{size:16}),"Company & Discount Information"]}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("strong",{children:"Company:"})," ",s.company_name]}),t("div",{children:[e("strong",{children:"Discount:"})," ",s.discount_type==="percentage"?`${s.discount_value}%`:`$${s.discount_value}`]}),t("div",{style:{gridColumn:"1 / -1"},children:[e("strong",{children:"Submitted:"})," ",new Date(s.created_at).toLocaleString()]})]})}),e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Work ID Verification"}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:s.work_id_image_url?t("div",{children:[e("p",{style:{marginBottom:"8px",color:"#6B7280"},children:"Work ID Image uploaded. Click to view:"}),e("a",{href:s.work_id_image_url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"8px 16px",backgroundColor:"#4F46E5",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},children:"View Work ID Image"})]}):e("p",{style:{color:"#6B7280"},children:"No work ID image uploaded"})}),s.status!=="pending"&&t("div",{children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Review Information"}),t("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Status:"}),e("span",{style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:F(s.status).bg,color:F(s.status).text,textTransform:"capitalize"},children:s.status})]}),s.reviewed_at&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Reviewed:"})," ",new Date(s.reviewed_at).toLocaleString()]}),s.review_notes&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Review Notes:"})," ",s.review_notes]}),s.rejection_reason&&t("div",{children:[e("strong",{children:"Rejection Reason:"})," ",s.rejection_reason]})]})]})]}),s.status==="pending"&&t("div",{children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Review Application"}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Decision *"}),t("div",{style:{display:"flex",gap:"12px"},children:[t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"decision",value:"approved",checked:p.status==="approved",onChange:b=>h(S=>({...S,status:b.target.value}))}),t("span",{style:{fontSize:"14px",color:"#047857",fontWeight:"600"},children:[e(go,{size:16,style:{display:"inline",marginRight:"4px"}}),"Approve"]})]}),t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"decision",value:"rejected",checked:p.status==="rejected",onChange:b=>h(S=>({...S,status:b.target.value}))}),t("span",{style:{fontSize:"14px",color:"#DC2626",fontWeight:"600"},children:[e(oi,{size:16,style:{display:"inline",marginRight:"4px"}}),"Reject"]})]})]})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Review Notes"}),e("textarea",{value:p.review_notes,onChange:b=>h(S=>({...S,review_notes:b.target.value})),placeholder:"Optional notes about this decision...",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),p.status==="rejected"&&t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Rejection Reason *"}),e("textarea",{value:p.rejection_reason,onChange:b=>h(S=>({...S,rejection_reason:b.target.value})),placeholder:"Please explain why this application is being rejected...",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e("button",{onClick:()=>d(null),style:{padding:"10px 16px",border:"1px solid #D1D5DB",borderRadius:"6px",backgroundColor:"white",color:"#6B7280",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),e("button",{onClick:()=>x(s.id),style:{padding:"10px 16px",border:"none",borderRadius:"6px",backgroundColor:p.status==="approved"?"#047857":"#DC2626",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:p.status==="approved"?"Approve Application":"Reject Application"})]})]})]})})]})},eu=()=>{const i=Er(),[o,r]=l.exports.useState(null),[n,s]=l.exports.useState("idle"),[d,p]=l.exports.useState(""),[h,c]=l.exports.useState(""),[v,u]=l.exports.useState(!1),[x,z]=l.exports.useState(null),E=async()=>{if(!!h.trim()){u(!0);try{const S=await fetch(ie("api/driver/rider-corporate-info/"+encodeURIComponent(h.trim())),{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}});if(S.ok){const m=await S.json();m.results?m.results.length===1?r(m.results[0]):r({multiple:!0,results:m.results}):r(m)}else alert("No corporate discount found for this rider"),r(null)}catch(S){console.error("Error looking up rider:",S),alert("Error looking up rider information")}finally{u(!1)}}},F=async S=>{if(!!o){s("verifying");try{const m=await fetch(ie("api/driver/verify-badge"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({riderId:o.rider_id,corporateApplicationId:o.id,verificationStatus:S,notes:d})});if(m.ok){const y=await m.json();z(y),s(S)}else s("failed"),alert("Failed to verify badge")}catch(m){console.error("Verification error:",m),s("failed")}}},b=()=>{r(null),s("idle"),p(""),c(""),z(null)};return t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px"},children:[t("button",{onClick:()=>i("/driver"),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"8px 16px",borderRadius:"12px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:S=>{S.target.style.background="white",S.target.style.transform="translateY(-1px)"},onMouseOut:S=>{S.target.style.background="rgba(255, 255, 255, 0.9)",S.target.style.transform="translateY(0)"},children:[e(cn,{size:20}),"Back to Driver App"]}),e("div",{style:{height:"24px",width:"1px",background:"rgba(255, 255, 255, 0.3)"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Badge Verification"})]}),t("div",{style:{maxWidth:"800px",margin:"20px auto",background:"white",borderRadius:"20px",padding:"30px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"20px"},children:e(fo,{size:40,color:"white"})}),e("h1",{style:{fontSize:"28px",fontWeight:"bold",color:"#2D3748",marginBottom:"10px"},children:"Badge Verification"}),e("p",{style:{color:"#718096",fontSize:"16px"},children:"Verify employee work badge to extend corporate discount eligibility"})]}),n==="idle"&&t("div",{children:[t("div",{style:{background:"#F7FAFC",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(je,{size:20}),"Step 1: Look Up Rider"]}),t("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e("input",{type:"text",placeholder:"Enter Rider ID or email",value:h,onChange:S=>c(S.target.value),style:{flex:1,padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}}),e("button",{onClick:E,disabled:v,style:{padding:"12px 24px",background:"#4299E1",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",opacity:v?.6:1},children:v?"Looking up...":"Lookup"})]})]}),e("div",{style:{background:"#EDF2F7",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"2px dashed #CBD5E0"},children:t("p",{style:{margin:0,fontSize:"14px",color:"#4A5568"},children:[e("strong",{children:"Demo:"}),' Use rider ID "550e8400-e29b-41d4-a716-446655440002" to test the verification workflow']})}),o&&t("div",{children:[t("div",{style:{background:"#F0FFF4",border:"2px solid #68D391",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#22543D",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(Ni,{size:20}),"Corporate Information Found"]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[t("div",{children:[e("strong",{children:"Company:"}),e("br",{}),o.company_name]}),t("div",{children:[e("strong",{children:"Employee Email:"}),e("br",{}),o.work_email]}),t("div",{children:[e("strong",{children:"Department:"}),e("br",{}),o.department||"Not specified"]}),t("div",{children:[e("strong",{children:"Current Expiry:"}),e("br",{}),e("span",{style:{color:new Date(o.discount_end_date)>new Date?"#22543D":"#C53030",fontWeight:"bold"},children:new Date(o.discount_end_date).toLocaleDateString()})]}),t("div",{children:[e("strong",{children:"Discount:"}),e("br",{}),o.discount_percentage?`${o.discount_percentage}% off`:`$${o.discount_fixed_amount} off`]})]}),o.work_id_image_url&&t("div",{style:{marginTop:"20px"},children:[e("strong",{children:"Registered Work Badge:"}),e("br",{}),e("img",{src:`/${o.work_id_image_url}`,alt:"Work Badge",style:{maxWidth:"200px",maxHeight:"200px",border:"2px solid #E2E8F0",borderRadius:"8px",marginTop:"10px"}})]})]}),t("div",{style:{background:"#FFFAF0",border:"2px solid #F6AD55",padding:"20px",borderRadius:"12px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#C05621",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(yo,{size:20}),"Step 2: Verify Physical Badge"]}),e("p",{style:{color:"#744210",marginBottom:"15px",lineHeight:"1.5"},children:"Ask the passenger to show their physical work badge. Compare it with the registered image above. Check that the name, company, and photo match."}),t("div",{style:{marginBottom:"15px"},children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"5px",color:"#744210"},children:"Verification Notes (optional):"}),e("textarea",{value:d,onChange:S=>p(S.target.value),placeholder:"Add any notes about the verification...",style:{width:"100%",padding:"10px",border:"2px solid #E2E8F0",borderRadius:"8px",resize:"vertical",minHeight:"80px"}})]}),t("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[t("button",{onClick:()=>F("verified"),style:{padding:"15px 30px",background:"#48BB78",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[e(bt,{size:20}),"Badge Verified"]}),t("button",{onClick:()=>F("failed"),style:{padding:"15px 30px",background:"#F56565",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[e(Bi,{size:20}),"Badge Invalid"]})]})]})]})]}),n==="verifying"&&t("div",{style:{textAlign:"center",padding:"40px"},children:[e("div",{style:{width:"60px",height:"60px",border:"4px solid #E2E8F0",borderTop:"4px solid #4299E1",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e("h3",{style:{fontSize:"20px",color:"#2D3748",marginBottom:"10px"},children:"Processing Verification..."}),e("p",{style:{color:"#718096"},children:"Recording badge verification and updating expiry date"})]}),(n==="verified"||n==="failed")&&x&&t("div",{children:[t("div",{style:{background:n==="verified"?"#F0FFF4":"#FED7D7",border:`2px solid ${n==="verified"?"#68D391":"#FC8181"}`,padding:"30px",borderRadius:"12px",textAlign:"center",marginBottom:"20px"},children:[e("div",{style:{fontSize:"60px",marginBottom:"20px"},children:n==="verified"?"\u2705":"\u274C"}),e("h3",{style:{fontSize:"24px",fontWeight:"bold",color:n==="verified"?"#22543D":"#C53030",marginBottom:"15px"},children:n==="verified"?"Badge Verified Successfully!":"Badge Verification Failed"}),n==="verified"&&t("div",{style:{background:"white",padding:"20px",borderRadius:"8px",marginTop:"20px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"10px"},children:[e(kn,{size:20,color:"#22543D"}),e("strong",{children:"Discount Extended"})]}),t("p",{style:{margin:0,color:"#4A5568"},children:["New expiry date: ",e("strong",{children:new Date(x.newExpiryDate).toLocaleDateString()}),e("br",{}),"Extended by: ",t("strong",{children:[x.verification.days_extended," days"]})]})]})]}),e("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:e("button",{onClick:b,style:{padding:"12px 24px",background:"#4299E1",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Verify Another Badge"})})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},tu=()=>{const i=Er(),[o,r]=l.exports.useState(null),[n,s]=l.exports.useState(null),[d,p]=l.exports.useState(!1),[h,c]=l.exports.useState(!1),[v,u]=l.exports.useState([]),[x,z]=l.exports.useState({corporationId:"",workEmail:"",employeeId:"",department:""}),E=l.exports.useRef(null);l.exports.useEffect(()=>{F()},[]);const F=async()=>{try{const f=await fetch("/api/corporations/available",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||"demo-rider-token"}`}});if(f.ok){const w=await f.json();u(w.corporations||[])}}catch(f){console.error("Error fetching corporations:",f)}},b=f=>{const w=f.target.files[0];if(w){r(w);const L=new FileReader;L.onload=A=>{s(A.target.result)},L.readAsDataURL(w)}},S=f=>{f.preventDefault();const w=f.dataTransfer.files[0];if(w&&w.type.startsWith("image/")){r(w);const L=new FileReader;L.onload=A=>{s(A.target.result)},L.readAsDataURL(w)}},m=f=>{f.preventDefault()},y=async f=>{if(f.preventDefault(),!o||!x.corporationId||!x.workEmail){alert("Please fill in all required fields and select a work badge photo");return}p(!0);try{const w=new FormData;w.append("workBadge",o),w.append("corporationId",x.corporationId),w.append("workEmail",x.workEmail),w.append("employeeId",x.employeeId),w.append("department",x.department);const L=await fetch("/api/corporate/upload-badge",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||"demo-rider-token"}`},body:w});if(L.ok)c(!0),r(null),s(null),z({corporationId:"",workEmail:"",employeeId:"",department:""}),E.current&&(E.current.value="");else{const A=await L.json();alert(`Upload failed: ${A.error}`)}}catch(w){console.error("Upload error:",w),alert("Upload failed. Please try again.")}finally{p(!1)}};return h?t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)"},children:[t("div",{style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t("button",{onClick:()=>i("/rider"),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:f=>f.target.style.background="#f7fafc",onMouseOut:f=>f.target.style.background="none",children:[e(cn,{size:20}),"Back to Rider App"]}),e("div",{style:{height:"24px",width:"1px",background:"#e2e8f0"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Application Submitted"})]}),t("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"40px",background:"linear-gradient(135deg, #D6F5D6 0%, #A8E6A8 100%)",borderRadius:"20px",textAlign:"center",border:"2px solid #68D391"},children:[e("div",{style:{fontSize:"80px",marginBottom:"20px"},children:"\u2705"}),e("h2",{style:{fontSize:"28px",fontWeight:"bold",color:"#22543D",marginBottom:"15px"},children:"Work Badge Uploaded Successfully!"}),e("p",{style:{fontSize:"16px",color:"#2F855A",marginBottom:"30px",lineHeight:"1.5"},children:"Your corporate discount application has been submitted for review. An admin will verify your work badge and approve your application within 24-48 hours."}),e("button",{onClick:()=>c(!1),style:{padding:"12px 24px",background:"#48BB78",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Upload Another Badge"})]})]}):t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)"},children:[t("div",{style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t("button",{onClick:()=>i("/rider"),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:f=>f.target.style.background="#f7fafc",onMouseOut:f=>f.target.style.background="none",children:[e(cn,{size:20}),"Back to Rider App"]}),e("div",{style:{height:"24px",width:"1px",background:"#e2e8f0"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Corporate Discount Application"})]}),t("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"30px",background:"white",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"60px",height:"60px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"15px"},children:e(bd,{size:30,color:"white"})}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#2D3748",marginBottom:"8px"},children:"Apply for Corporate Discount"}),e("p",{style:{color:"#718096",fontSize:"14px"},children:"Upload your work badge to get approved for corporate discounts"})]}),t("form",{onSubmit:y,children:[t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Select Your Company *"}),t("select",{value:x.corporationId,onChange:f=>z({...x,corporationId:f.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px",background:"white"},children:[e("option",{value:"",children:"Choose your company..."}),v.map(f=>t("option",{value:f.id,children:[f.company_name," - ",f.discount_type==="percentage"?`${f.discount_value}% off`:`$${f.discount_value} off`]},f.id))]})]}),t("div",{style:{marginBottom:"20px"},children:[t("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:[e(ti,{size:16,style:{display:"inline",marginRight:"5px"}}),"Work Email Address * (for Verification purposes only)"]}),e("input",{type:"email",value:x.workEmail,onChange:f=>z({...x,workEmail:f.target.value}),placeholder:"your.name@company.com",required:!0,style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Employee ID (Optional)"}),e("input",{type:"text",value:x.employeeId,onChange:f=>z({...x,employeeId:f.target.value}),placeholder:"e.g., EMP001",style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Department"}),t("select",{value:x.department,onChange:f=>z({...x,department:f.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px",background:"white"},children:[e("option",{value:"",children:"Select Department..."}),e("option",{value:"Accounting & Finance",children:"Accounting & Finance"}),e("option",{value:"Administration",children:"Administration"}),e("option",{value:"Business Development",children:"Business Development"}),e("option",{value:"Customer Service",children:"Customer Service"}),e("option",{value:"Data Science & Analytics",children:"Data Science & Analytics"}),e("option",{value:"Engineering",children:"Engineering"}),e("option",{value:"Executive",children:"Executive"}),e("option",{value:"Facilities & Operations",children:"Facilities & Operations"}),e("option",{value:"Human Resources",children:"Human Resources"}),e("option",{value:"Information Technology",children:"Information Technology"}),e("option",{value:"Legal",children:"Legal"}),e("option",{value:"Marketing",children:"Marketing"}),e("option",{value:"Product Management",children:"Product Management"}),e("option",{value:"Purchasing & Procurement",children:"Purchasing & Procurement"}),e("option",{value:"Quality Assurance",children:"Quality Assurance"}),e("option",{value:"Research & Development",children:"Research & Development"}),e("option",{value:"Sales",children:"Sales"}),e("option",{value:"Security",children:"Security"}),e("option",{value:"Supply Chain & Logistics",children:"Supply Chain & Logistics"}),e("option",{value:"Training & Development",children:"Training & Development"}),e("option",{value:"Other",children:"Other"})]})]})]}),t("div",{style:{marginBottom:"30px"},children:[t("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:[e(fo,{size:16,style:{display:"inline",marginRight:"5px"}}),"Upload Work Badge Photo *"]}),e("div",{onDrop:S,onDragOver:m,style:{border:"2px dashed #CBD5E0",borderRadius:"12px",padding:"40px",textAlign:"center",background:n?"#F7FAFC":"#FAFAFA",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{var f;return(f=E.current)==null?void 0:f.click()},children:n?t("div",{children:[e("img",{src:n,alt:"Work badge preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",marginBottom:"15px",border:"2px solid #E2E8F0"}}),e("p",{style:{color:"#4A5568",fontSize:"14px",margin:0},children:"Click to change photo"})]}):t("div",{children:[e(An,{size:40,color:"#A0AEC0",style:{marginBottom:"15px"}}),e("p",{style:{color:"#4A5568",fontSize:"16px",margin:"0 0 8px 0",fontWeight:"bold"},children:"Click to upload or drag and drop"}),e("p",{style:{color:"#718096",fontSize:"14px",margin:0},children:"PNG, JPG up to 10MB"})]})}),e("input",{ref:E,type:"file",accept:"image/*",onChange:b,style:{display:"none"}})]}),e("div",{style:{background:"#EBF8FF",border:"1px solid #BEE3F8",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[e(ro,{size:20,color:"#3182CE",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("p",{style:{margin:"0 0 8px 0",fontWeight:"bold",color:"#2B6CB0",fontSize:"14px"},children:"Important Requirements:"}),t("ul",{style:{margin:0,paddingLeft:"20px",color:"#2C5282",fontSize:"13px",lineHeight:"1.4"},children:[e("li",{children:"Photo must clearly show your name and company"}),e("li",{children:"Badge must be current and valid"}),e("li",{children:"Use your official work email address"}),e("li",{children:"Admin review takes 24-48 hours"})]})]})]})}),e("button",{type:"submit",disabled:d||!o||!x.corporationId||!x.workEmail,style:{width:"100%",padding:"15px",background:d?"#A0AEC0":"#4299E1",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:d?t(ve,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Submitting Application..."]}):t(ve,{children:[e(go,{size:20}),"Enroll in Corporate Discount Program"]})})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},ou=()=>t("div",{style:{padding:"20px",backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e("h1",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"20px",color:"#1e293b"},children:"Top-Down Car Designs"}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Vehicle Types"}),t("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"center"},children:[t("div",{style:{textAlign:"center"},children:[e(ct,{type:"compact",color:"#3b82f6",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Compact"})]}),t("div",{style:{textAlign:"center"},children:[e(ct,{type:"sedan",color:"#10b981",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Sedan"})]}),t("div",{style:{textAlign:"center"},children:[e(ct,{type:"suv",color:"#f59e0b",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"SUV"})]}),t("div",{style:{textAlign:"center"},children:[e(ct,{type:"luxury",color:"#000000",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Luxury"})]})]})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Color Variations"}),e("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:["#3b82f6","#ef4444","#10b981","#f59e0b","#6b7280","#8b5cf6","#000000","#ffffff"].map((o,r)=>e(ct,{color:o,size:35},r))})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Directional Orientations"}),e("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"center"},children:[0,45,90,135,180,225,270,315].map(o=>t("div",{style:{textAlign:"center"},children:[e(ct,{rotation:o,color:"#6366f1",size:35}),t("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:[o,"\xB0"]})]},o))})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"With Turn Signals"}),t("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[e(ct,{color:"#ef4444",size:50,showIndicators:!0}),e(ct,{color:"#10b981",size:50,rotation:90,showIndicators:!0})]})]}),t("div",{children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Size Variations"}),t("div",{style:{display:"flex",gap:"20px",alignItems:"end"},children:[e(ct,{color:"#8b5cf6",size:20}),e(ct,{color:"#8b5cf6",size:30}),e(ct,{color:"#8b5cf6",size:40}),e(ct,{color:"#8b5cf6",size:50}),e(ct,{color:"#8b5cf6",size:60})]})]})]}),iu=()=>{const i=Er();return e("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"40px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",textAlign:"center"},children:[t("div",{style:{marginBottom:"30px"},children:[e("h1",{style:{fontSize:"64px",fontWeight:"700",color:"#4F46E5",margin:0,lineHeight:"1"},children:"\u03C0"}),e("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1e293b",margin:"10px 0 5px 0"},children:"Pi VIP Rideshare"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Choose your app to get started"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("button",{onClick:()=>i("/rider"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#2563eb",o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#3b82f6",o.currentTarget.style.transform="translateY(0)"},children:[e(je,{size:24}),e("span",{children:"Book a Ride"})]}),t("button",{onClick:()=>i("/driver"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#059669",o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#10b981",o.currentTarget.style.transform="translateY(0)"},children:[e(rt,{size:24}),e("span",{children:"Start Driving"})]}),t("button",{onClick:()=>i("/dashboard"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#7c3aed",o.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#8b5cf6",o.currentTarget.style.transform="translateY(0)"},children:[e(ni,{size:24}),e("span",{children:"Admin Dashboard"})]})]}),e("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:t("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e(Ge,{size:16}),"Premium rideshare platform"]})})]})})},ru=()=>{const[i,o]=l.exports.useState(null),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState(!1);return l.exports.useEffect(()=>{const c=/iPad|iPhone|iPod/.test(navigator.userAgent);d(c);const v=u=>{u.preventDefault(),o(u),n(!0)};return window.addEventListener("beforeinstallprompt",v),()=>{window.removeEventListener("beforeinstallprompt",v)}},[]),t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{fontSize:"64px",marginBottom:"10px"},children:"\u03C0"}),e("h1",{style:{color:"white",fontSize:"48px",margin:"0",fontWeight:"700"},children:"Pi VIP Rider"}),e("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"18px",margin:"10px 0"},children:"Premium Rideshare Experience"})]}),e("div",{style:{width:"300px",height:"600px",background:"white",borderRadius:"30px",padding:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",marginBottom:"40px",position:"relative",overflow:"hidden"},children:t("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"\u{1F697}"}),e("h3",{style:{color:"#1e293b",fontSize:"24px",marginBottom:"10px"},children:"Book Your Ride"}),e("p",{style:{color:"#64748b",fontSize:"16px",lineHeight:"1.5",padding:"0 20px"},children:"Premium vehicles, professional drivers, real-time tracking, and seamless payments"}),e("div",{style:{background:"#3b82f6",color:"white",padding:"12px 24px",borderRadius:"25px",marginTop:"20px",fontSize:"16px",fontWeight:"600"},children:"Get Started"})]})}),t("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[e("h2",{style:{color:"#1e293b",fontSize:"24px",textAlign:"center",marginBottom:"20px",fontWeight:"600"},children:"Install Pi VIP Rider App"}),r&&t("button",{onClick:async()=>{if(i){i.prompt();const{outcome:c}=await i.userChoice;c==="accepted"&&(o(null),n(!1))}},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",marginBottom:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e($i,{size:24}),"Install App Now"]}),s&&t("div",{style:{background:"#f1f5f9",borderRadius:"15px",padding:"20px",marginBottom:"15px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e(va,{size:20,color:"#1e293b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:"iOS Installation:"})]}),t("ol",{style:{color:"#64748b",margin:0,paddingLeft:"20px"},children:[t("li",{children:["Tap the Share button ",e("span",{style:{fontSize:"18px"},children:"\u2B06\uFE0F"})]}),e("li",{children:'Select "Add to Home Screen"'}),e("li",{children:'Tap "Add" to install'})]})]}),t("button",{onClick:()=>{window.location.href="/rider"},style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#2563eb",onMouseLeave:c=>c.currentTarget.style.background="#3b82f6",children:[e(za,{size:24}),"Open Rider App"]}),t("div",{style:{marginTop:"25px"},children:[e("h3",{style:{color:"#1e293b",fontSize:"18px",marginBottom:"15px"},children:"Features:"}),e("div",{style:{display:"grid",gap:"10px"},children:["\u{1F697} Book rides instantly","\u{1F4CD} Real-time tracking","\u{1F6E3}\uFE0F Multiple stops with voice input","\u{1F4B3} Secure payments","\u2B50 Rate your experience","\u{1F3AF} Favorite locations","\u{1F3E2} Corporate discounts"].map((c,v)=>e("div",{style:{color:"#64748b",fontSize:"16px"},children:c},v))})]})]}),e("div",{style:{marginTop:"20px"},children:e(Ar,{url:"https://c3ae5066-b07d-4ca3-8a63-d0ea5329a006-00-3c9c4iku143gi.sisko.replit.dev/rider",size:180})}),e("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center",color:"white"},children:t("p",{style:{margin:"0",fontSize:"14px",opacity:"0.9"},children:[e("strong",{children:"Demo Account:"})," demo@rider.com | Password: password"]})})]})},nu=()=>{const[i,o]=l.exports.useState(null),[r,n]=l.exports.useState(!1),[s,d]=l.exports.useState(!1);return l.exports.useEffect(()=>{const c=/iPad|iPhone|iPod/.test(navigator.userAgent);d(c);const v=u=>{u.preventDefault(),o(u),n(!0)};return window.addEventListener("beforeinstallprompt",v),()=>{window.removeEventListener("beforeinstallprompt",v)}},[]),t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{fontSize:"64px",marginBottom:"10px"},children:"\u03C0"}),e("h1",{style:{color:"white",fontSize:"48px",margin:"0",fontWeight:"700"},children:"Pi VIP Driver"}),e("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"18px",margin:"10px 0"},children:"Start Earning Premium"})]}),e("div",{style:{width:"300px",height:"600px",background:"white",borderRadius:"30px",padding:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",marginBottom:"40px",position:"relative",overflow:"hidden"},children:t("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"\u{1F699}"}),e("h3",{style:{color:"#1e293b",fontSize:"24px",marginBottom:"10px"},children:"Drive & Earn"}),e("p",{style:{color:"#64748b",fontSize:"16px",lineHeight:"1.5",padding:"0 20px"},children:"Premium earnings, flexible schedule, instant payouts, and professional support"}),e("div",{style:{background:"#10b981",color:"white",padding:"12px 24px",borderRadius:"25px",marginTop:"20px",fontSize:"16px",fontWeight:"600"},children:"Start Driving"})]})}),t("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[e("h2",{style:{color:"#1e293b",fontSize:"24px",textAlign:"center",marginBottom:"20px",fontWeight:"600"},children:"Install Pi VIP Driver App"}),r&&t("button",{onClick:async()=>{if(i){i.prompt();const{outcome:c}=await i.userChoice;c==="accepted"&&(o(null),n(!1))}},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",marginBottom:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e($i,{size:24}),"Install App Now"]}),s&&t("div",{style:{background:"#f1f5f9",borderRadius:"15px",padding:"20px",marginBottom:"15px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e(va,{size:20,color:"#1e293b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:"iOS Installation:"})]}),t("ol",{style:{color:"#64748b",margin:0,paddingLeft:"20px"},children:[t("li",{children:["Tap the Share button ",e("span",{style:{fontSize:"18px"},children:"\u2B06\uFE0F"})]}),e("li",{children:'Select "Add to Home Screen"'}),e("li",{children:'Tap "Add" to install'})]})]}),t("button",{onClick:()=>{window.location.href="/driver"},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e(za,{size:24}),"Open Driver App"]}),t("div",{style:{background:"#f0fdf4",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center"},children:[e(Nt,{size:32,color:"#10b981",style:{marginBottom:"10px"}}),e("h3",{style:{color:"#1e293b",fontSize:"18px",margin:"0 0 10px"},children:"Premium Earnings"}),t("p",{style:{color:"#64748b",fontSize:"14px",margin:0},children:["Earn up to ",e("strong",{children:"$35/hour"})," with surge pricing and tips"]})]}),t("div",{style:{marginTop:"25px"},children:[e("h3",{style:{color:"#1e293b",fontSize:"18px",marginBottom:"15px"},children:"Driver Benefits:"}),e("div",{style:{display:"grid",gap:"10px"},children:["\u{1F4B0} Instant payouts","\u{1F4CA} Earnings tracking","\u{1F5FA}\uFE0F Smart routing & multiple stops","\u{1F3C6} Performance bonuses","\u{1F6E1}\uFE0F Insurance coverage","\u{1F4DE} 24/7 support"].map((c,v)=>e("div",{style:{color:"#64748b",fontSize:"16px"},children:c},v))})]})]}),e("div",{style:{marginTop:"20px"},children:e(Ar,{url:"https://c3ae5066-b07d-4ca3-8a63-d0ea5329a006-00-3c9c4iku143gi.sisko.replit.dev/driver",size:180})}),e("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center",color:"white"},children:t("p",{style:{margin:"0",fontSize:"14px",opacity:"0.9"},children:[e("strong",{children:"Demo Account:"})," demo@driver.com | Password: password"]})})]})},au=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(!0),[s,d]=l.exports.useState("all"),[p,h]=l.exports.useState("all"),[c,v]=l.exports.useState(null),[u,x]=l.exports.useState({status:"",notes:"",expiry_date:""});l.exports.useEffect(()=>{z()},[]);const z=async()=>{try{const m=await fetch(ie("api/admin/badge-verifications"),{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}});if(m.ok){const y=await m.json();o(y.verifications||[])}}catch(m){console.error("Error fetching verifications:",m)}finally{n(!1)}},E=async m=>{if(!u.status){alert("Please select verify or reject");return}try{const y=await fetch(ie("api/admin/badge-verifications/"+m+"/review"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify({verification_status:u.status,verification_notes:u.notes,new_expiry_date:u.expiry_date||null})});if(y.ok)await z(),v(null),x({status:"",notes:"",expiry_date:""});else{const f=await y.json();alert(f.error||"Failed to review")}}catch(y){console.error("Error reviewing:",y),alert("Error reviewing verification")}},F=i.filter(m=>{const y=s==="all"||m.verification_status===s,f=p==="all"||m.badge_type===p;return y&&f}),b=m=>{switch(m){case"verified":return{bg:"#D1FAE5",text:"#047857"};case"rejected":return{bg:"#FEE2E2",text:"#DC2626"};default:return{bg:"#FEF3C7",text:"#D97706"}}},S=m=>{switch(m){case"student":return{bg:"#DBEAFE",text:"#1D4ED8"};case"military":return{bg:"#E0E7FF",text:"#4338CA"};case"senior":return{bg:"#FCE7F3",text:"#BE185D"};default:return{bg:"#F3E8FF",text:"#7C3AED"}}};return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading verifications..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(mo,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Rider Badge Verification"})]})}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[t("select",{value:s,onChange:m=>d(m.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"verified",children:"Verified"}),e("option",{value:"rejected",children:"Rejected"})]}),t("select",{value:p,onChange:m=>h(m.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[e("option",{value:"all",children:"All Types"}),e("option",{value:"student",children:"Student"}),e("option",{value:"military",children:"Military/Veteran"}),e("option",{value:"senior",children:"Senior"}),e("option",{value:"corporate",children:"Corporate"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[["pending","verified","rejected"].map(m=>{const y=i.filter(w=>w.verification_status===m).length,f=b(m);return t("div",{style:{padding:"16px",backgroundColor:f.bg,borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:f.text},children:y}),e("div",{style:{fontSize:"14px",color:f.text,textTransform:"capitalize"},children:m})]},m)}),t("div",{style:{padding:"16px",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#374151"},children:i.length}),e("div",{style:{fontSize:"14px",color:"#374151"},children:"Total"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#F9FAFB"},children:[e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Rider"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Badge Type"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Status"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Submitted"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Expires"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Actions"})]})}),e("tbody",{children:F.length===0?e("tr",{children:e("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:"No verifications found"})}):F.map(m=>{const y=b(m.verification_status),f=S(m.badge_type);return t("tr",{style:{borderTop:"1px solid #E5E7EB"},children:[t("td",{style:{padding:"12px 16px"},children:[e("div",{style:{fontWeight:"500"},children:m.rider_name||"Unknown"}),e("div",{style:{fontSize:"12px",color:"#6B7280"},children:m.rider_email})]}),e("td",{style:{padding:"12px 16px"},children:e("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:f.bg,color:f.text,textTransform:"capitalize"},children:m.badge_type})}),e("td",{style:{padding:"12px 16px"},children:e("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:y.bg,color:y.text,textTransform:"capitalize"},children:m.verification_status})}),e("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#6B7280"},children:new Date(m.created_at).toLocaleDateString()}),e("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#6B7280"},children:m.new_expiry_date?new Date(m.new_expiry_date).toLocaleDateString():"-"}),e("td",{style:{padding:"12px 16px"},children:e("button",{onClick:()=>v(m),style:{padding:"6px 12px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Review"})})]},m.id)})})]})}),c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"500px",maxHeight:"80vh",overflow:"auto"},children:[e("h2",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:"600"},children:"Review Badge Verification"}),t("div",{style:{marginBottom:"16px"},children:[e("strong",{children:"Rider:"})," ",c.rider_name||"Unknown"]}),t("div",{style:{marginBottom:"16px"},children:[e("strong",{children:"Email:"})," ",c.rider_email]}),t("div",{style:{marginBottom:"16px"},children:[e("strong",{children:"Badge Type:"})," ",e("span",{style:{textTransform:"capitalize"},children:c.badge_type})]}),t("div",{style:{marginBottom:"16px"},children:[e("strong",{children:"Submitted:"})," ",new Date(c.created_at).toLocaleString()]}),c.documents&&t("div",{style:{marginBottom:"16px"},children:[e("strong",{children:"Documents:"}),e("button",{onClick:()=>{var m;return window.open((m=c.documents)==null?void 0:m.url,"_blank")},style:{marginLeft:"10px",padding:"4px 8px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View Document"})]}),c.verification_status==="pending"&&t(ve,{children:[t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Decision *"}),t("div",{style:{display:"flex",gap:"12px"},children:[t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"status",value:"verified",checked:u.status==="verified",onChange:m=>x({...u,status:"verified"})}),e(bt,{size:16,color:"#047857"})," Verify"]}),t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"status",value:"rejected",checked:u.status==="rejected",onChange:m=>x({...u,status:"rejected"})}),e(Bi,{size:16,color:"#DC2626"})," Reject"]})]})]}),u.status==="verified"&&t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Expiry Date"}),e("input",{type:"date",value:u.expiry_date,onChange:m=>x({...u,expiry_date:m.target.value}),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #D1D5DB"}})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Notes"}),e("textarea",{value:u.notes,onChange:m=>x({...u,notes:m.target.value}),placeholder:"Optional notes...",rows:3,style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #D1D5DB",resize:"vertical"}})]})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"20px"},children:[e("button",{onClick:()=>{v(null),x({status:"",notes:"",expiry_date:""})},style:{padding:"10px 16px",border:"1px solid #D1D5DB",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"Cancel"}),c.verification_status==="pending"&&e("button",{onClick:()=>E(c.id),disabled:!u.status,style:{padding:"10px 16px",border:"none",borderRadius:"6px",backgroundColor:u.status==="verified"?"#047857":u.status==="rejected"?"#DC2626":"#9CA3AF",color:"white",cursor:u.status?"pointer":"not-allowed"},children:u.status==="verified"?"Verify Badge":u.status==="rejected"?"Reject Badge":"Select Decision"})]})]})})]})},lu=()=>{const[i,o]=l.exports.useState([]),[r,n]=l.exports.useState(!0),[s,d]=l.exports.useState("all"),[p,h]=l.exports.useState("all"),[c,v]=l.exports.useState(!1),[u,x]=l.exports.useState({target:"all",userId:"",title:"",message:"",type:"general"}),[z,E]=l.exports.useState(!1);l.exports.useEffect(()=>{F()},[]);const F=async()=>{try{const w=await fetch(ie("api/admin/notifications"),{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}});if(w.ok){const L=await w.json();o(L.notifications||[])}}catch(w){console.error("Error fetching notifications:",w)}finally{n(!1)}},b=async()=>{if(!u.title.trim()||!u.message.trim()){alert("Title and message are required");return}if(u.target==="single"&&!u.userId.trim()){alert("User ID is required for single user notification");return}E(!0);try{const w=await fetch(ie("api/admin/notifications/send"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(u)});if(w.ok){const L=await w.json();alert(L.message||"Notification sent successfully"),v(!1),x({target:"all",userId:"",title:"",message:"",type:"general"}),F()}else{const L=await w.json();alert(L.error||"Failed to send notification")}}catch(w){console.error("Error sending notification:",w),alert("Error sending notification")}finally{E(!1)}},S=async w=>{if(!!confirm("Delete this notification?"))try{(await fetch(ie("api/admin/notifications/"+w),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}})).ok&&F()}catch(L){console.error("Error deleting notification:",L)}},m=i.filter(w=>{const L=s==="all"||w.type===s,A=p==="all"||p==="read"&&w.is_read||p==="unread"&&!w.is_read;return L&&A}),y=[...new Set(i.map(w=>w.type).filter(Boolean))],f=w=>{switch(w){case"ride":return{bg:"#DBEAFE",text:"#1D4ED8"};case"payment":return{bg:"#D1FAE5",text:"#047857"};case"promo":return{bg:"#FEF3C7",text:"#D97706"};case"alert":return{bg:"#FEE2E2",text:"#DC2626"};default:return{bg:"#F3F4F6",text:"#374151"}}};return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading notifications..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(ei,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Push Notifications"})]}),t("button",{onClick:()=>v(!0),style:{padding:"10px 20px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},children:[e(Rn,{size:16})," Send Notification"]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[t("div",{style:{padding:"16px",backgroundColor:"#EEF2FF",borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4F46E5"},children:i.length}),e("div",{style:{fontSize:"14px",color:"#6366F1"},children:"Total Sent"})]}),t("div",{style:{padding:"16px",backgroundColor:"#FEF3C7",borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#D97706"},children:i.filter(w=>!w.is_read).length}),e("div",{style:{fontSize:"14px",color:"#D97706"},children:"Unread"})]}),t("div",{style:{padding:"16px",backgroundColor:"#D1FAE5",borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#047857"},children:i.filter(w=>w.is_read).length}),e("div",{style:{fontSize:"14px",color:"#047857"},children:"Read"})]}),t("div",{style:{padding:"16px",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#374151"},children:new Date().toLocaleDateString()}),e("div",{style:{fontSize:"14px",color:"#374151"},children:"Today"})]})]}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[t("select",{value:s,onChange:w=>d(w.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[e("option",{value:"all",children:"All Types"}),y.map(w=>e("option",{value:w,children:w},w))]}),t("select",{value:p,onChange:w=>h(w.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"read",children:"Read"}),e("option",{value:"unread",children:"Unread"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#F9FAFB"},children:[e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Title"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Message"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Type"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"User"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Status"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Sent"}),e("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Actions"})]})}),e("tbody",{children:m.length===0?e("tr",{children:e("td",{colSpan:7,style:{padding:"40px",textAlign:"center",color:"#6B7280"},children:"No notifications found"})}):m.map(w=>{const L=f(w.type);return t("tr",{style:{borderTop:"1px solid #E5E7EB"},children:[e("td",{style:{padding:"12px 16px",fontWeight:"500"},children:w.title}),e("td",{style:{padding:"12px 16px",color:"#6B7280",maxWidth:"250px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w.message}),e("td",{style:{padding:"12px 16px"},children:e("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:L.bg,color:L.text,textTransform:"capitalize"},children:w.type||"general"})}),e("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#6B7280"},children:w.user_name||w.user_email||"Broadcast"}),e("td",{style:{padding:"12px 16px"},children:e("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:w.is_read?"#D1FAE5":"#FEF3C7",color:w.is_read?"#047857":"#D97706"},children:w.is_read?"Read":"Unread"})}),e("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#6B7280"},children:new Date(w.created_at).toLocaleString()}),e("td",{style:{padding:"12px 16px"},children:e("button",{onClick:()=>S(w.id),style:{padding:"6px",backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#DC2626"},children:e(_r,{size:16})})})]},w.id)})})]})}),c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"500px",maxHeight:"80vh",overflow:"auto"},children:[e("h2",{style:{margin:"0 0 20px",fontSize:"20px",fontWeight:"600"},children:"Send Push Notification"}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Target Audience *"}),e("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[{value:"all",label:"All Users",icon:no},{value:"drivers",label:"Drivers",icon:je},{value:"riders",label:"Riders",icon:je},{value:"single",label:"Single User",icon:je}].map(w=>t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"8px 12px",borderRadius:"6px",border:u.target===w.value?"2px solid #4F46E5":"1px solid #D1D5DB",backgroundColor:u.target===w.value?"#EEF2FF":"white"},children:[e("input",{type:"radio",name:"target",value:w.value,checked:u.target===w.value,onChange:L=>x({...u,target:L.target.value}),style:{display:"none"}}),e(w.icon,{size:16}),w.label]},w.value))})]}),u.target==="single"&&t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"User ID *"}),e("input",{type:"text",value:u.userId,onChange:w=>x({...u,userId:w.target.value}),placeholder:"Enter user UUID",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #D1D5DB"}})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Notification Type"}),t("select",{value:u.type,onChange:w=>x({...u,type:w.target.value}),style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #D1D5DB"},children:[e("option",{value:"general",children:"General"}),e("option",{value:"promo",children:"Promotion"}),e("option",{value:"alert",children:"Alert"}),e("option",{value:"update",children:"Update"})]})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Title *"}),e("input",{type:"text",value:u.title,onChange:w=>x({...u,title:w.target.value}),placeholder:"Notification title",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #D1D5DB"}})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Message *"}),e("textarea",{value:u.message,onChange:w=>x({...u,message:w.target.value}),placeholder:"Notification message",rows:4,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #D1D5DB",resize:"vertical"}})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"20px"},children:[e("button",{onClick:()=>{v(!1),x({target:"all",userId:"",title:"",message:"",type:"general"})},style:{padding:"10px 16px",border:"1px solid #D1D5DB",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:b,disabled:z,style:{padding:"10px 16px",border:"none",borderRadius:"6px",backgroundColor:"#4F46E5",color:"white",cursor:z?"not-allowed":"pointer",opacity:z?.6:1},children:z?"Sending...":"Send Notification"})]})]})})]})};function su(){return e(ms,{children:t(Gl,{children:[e(ke,{path:"/",element:e(iu,{})}),e(ke,{path:"/download-rider",element:e(ru,{})}),e(ke,{path:"/download-driver",element:e(nu,{})}),e(ke,{path:"/rider",element:e(Rp,{})}),e(ke,{path:"/rider/auth",element:e(Fp,{})}),e(ke,{path:"/rider/badge-upload",element:e(tu,{})}),e(ke,{path:"/driver",element:e(Tp,{})}),e(ke,{path:"/driver/earnings",element:e(jp,{})}),e(ke,{path:"/driver/documents",element:e(ja,{})}),e(ke,{path:"/airport-queue",element:e(Up,{})}),e(ke,{path:"/car-demo",element:e(ou,{})}),t(ke,{path:"/dashboard",element:e(kc,{}),children:[e(ke,{index:!0,element:e(vp,{})}),e(ke,{path:"drivers",element:e(Dp,{})}),e(ke,{path:"riders",element:e(Bp,{})}),e(ke,{path:"rides",element:e(Wp,{})}),e(ke,{path:"analytics",element:e(Mp,{})}),e(ke,{path:"dispatch",element:e(_p,{})}),e(ke,{path:"history",element:e(Pp,{})}),e(ke,{path:"settings",element:e(Lp,{})}),e(ke,{path:"payment",element:e(Np,{})}),e(ke,{path:"profile",element:e($p,{})}),e(ke,{path:"inbox",element:e(Op,{})}),e(ke,{path:"markets",element:e(Vp,{})}),e(ke,{path:"surge-map",element:e(qp,{})}),e(ke,{path:"surge-control",element:e(Hp,{})}),e(ke,{path:"disputes",element:e(Kp,{})}),e(ke,{path:"corporations",element:e(Zp,{})}),e(ke,{path:"corporate-applications",element:e(Qp,{})}),e(ke,{path:"rider-badge-verification",element:e(au,{})}),e(ke,{path:"driver-badge-verification",element:e(eu,{})}),e(ke,{path:"push-notifications",element:e(lu,{})})]})]})})}const du=document.getElementById("root"),cu=ia(du);cu.render(e(su,{}));
