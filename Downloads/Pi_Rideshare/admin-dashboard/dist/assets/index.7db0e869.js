import{a as qa,r as s,b as eo}from"./vendor.d1041584.js";import{a as e,j as t,F as ye}from"./stripe.54f5758b.js";import{R as Ri,A as _n,C as Ki,X as Xi,Y as Ai,T as Fi,a as Ln,P as Ha,b as Va,c as Ga,L as Nn,d as en,e as pr,B as Ya,f as Ja}from"./charts.7d4d0307.js";const Ka=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerpolicy&&(d.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?d.credentials="include":l.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}};Ka();var ia,$n=qa.exports;ia=$n.createRoot,$n.hydrateRoot;const Xa="modulepreload",Za=function(o){return"/"+o},On={},Qa=function(i,r,n){return!r||r.length===0?i():Promise.all(r.map(l=>{if(l=Za(l),l in On)return;On[l]=!0;const d=l.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Xa,d||(h.as="script",h.crossOrigin=""),h.href=l,document.head.appendChild(h),d)return new Promise((c,m)=>{h.addEventListener("load",c),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>i())};var jn="popstate";function el(o={}){function i(n,l){let{pathname:d,search:p,hash:h}=n.location;return ln("",{pathname:d,search:p,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:Eo(l)}return il(i,r,null,o)}function De(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function Pt(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function tl(){return Math.random().toString(36).substring(2,10)}function Un(o,i){return{usr:o.state,key:o.key,idx:i}}function ln(o,i,r=null,n){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof i=="string"?oo(i):i,state:r,key:i&&i.key||n||tl()}}function Eo({pathname:o="/",search:i="",hash:r=""}){return i&&i!=="?"&&(o+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function oo(o){let i={};if(o){let r=o.indexOf("#");r>=0&&(i.hash=o.substring(r),o=o.substring(0,r));let n=o.indexOf("?");n>=0&&(i.search=o.substring(n),o=o.substring(0,n)),o&&(i.pathname=o)}return i}function il(o,i,r,n={}){let{window:l=document.defaultView,v5Compat:d=!1}=n,p=l.history,h="POP",c=null,m=u();m==null&&(m=0,p.replaceState({...p.state,idx:m},""));function u(){return(p.state||{idx:null}).idx}function x(){h="POP";let b=u(),f=b==null?null:b-m;m=b,c&&c({action:h,location:w.location,delta:f})}function C(b,f){h="PUSH";let z=ln(w.location,b,f);r&&r(z,b),m=u()+1;let y=Un(z,m),B=w.createHref(z);try{p.pushState(y,"",B)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;l.location.assign(B)}d&&c&&c({action:h,location:w.location,delta:1})}function F(b,f){h="REPLACE";let z=ln(w.location,b,f);r&&r(z,b),m=u();let y=Un(z,m),B=w.createHref(z);p.replaceState(y,"",B),d&&c&&c({action:h,location:w.location,delta:0})}function k(b){return ol(b)}let w={get action(){return h},get location(){return o(l,p)},listen(b){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(jn,x),c=b,()=>{l.removeEventListener(jn,x),c=null}},createHref(b){return i(l,b)},createURL:k,encodeLocation(b){let f=k(b);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:C,replace:F,go(b){return p.go(b)}};return w}function ol(o,i=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),De(r,"No window.location.(origin|href) available to create URL");let n=typeof o=="string"?o:Eo(o);return n=n.replace(/ $/,"%20"),!i&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function oa(o,i,r="/"){return rl(o,i,r,!1)}function rl(o,i,r,n){let l=typeof i=="string"?oo(i):i,d=Qt(l.pathname||"/",r);if(d==null)return null;let p=ra(o);nl(p);let h=null;for(let c=0;h==null&&c<p.length;++c){let m=xl(d);h=gl(p[c],m,n)}return h}function ra(o,i=[],r=[],n="",l=!1){let d=(p,h,c=l,m)=>{let u={relativePath:m===void 0?p.path||"":m,caseSensitive:p.caseSensitive===!0,childrenIndex:h,route:p};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;De(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let x=Xt([n,u.relativePath]),C=r.concat(u);p.children&&p.children.length>0&&(De(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),ra(p.children,i,C,x,c)),!(p.path==null&&!p.index)&&i.push({path:x,score:ul(x,p.index),routesMeta:C})};return o.forEach((p,h)=>{var c;if(p.path===""||!((c=p.path)!=null&&c.includes("?")))d(p,h);else for(let m of na(p.path))d(p,h,!0,m)}),i}function na(o){let i=o.split("/");if(i.length===0)return[];let[r,...n]=i,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return l?[d,""]:[d];let p=na(n.join("/")),h=[];return h.push(...p.map(c=>c===""?d:[d,c].join("/"))),l&&h.push(...p),h.map(c=>o.startsWith("/")&&c===""?"/":c)}function nl(o){o.sort((i,r)=>i.score!==r.score?r.score-i.score:hl(i.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var al=/^:[\w-]+$/,ll=3,sl=2,dl=1,cl=10,pl=-2,qn=o=>o==="*";function ul(o,i){let r=o.split("/"),n=r.length;return r.some(qn)&&(n+=pl),i&&(n+=sl),r.filter(l=>!qn(l)).reduce((l,d)=>l+(al.test(d)?ll:d===""?dl:cl),n)}function hl(o,i){return o.length===i.length&&o.slice(0,-1).every((n,l)=>n===i[l])?o[o.length-1]-i[i.length-1]:0}function gl(o,i,r=!1){let{routesMeta:n}=o,l={},d="/",p=[];for(let h=0;h<n.length;++h){let c=n[h],m=h===n.length-1,u=d==="/"?i:i.slice(d.length)||"/",x=kr({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},u),C=c.route;if(!x&&m&&r&&!n[n.length-1].route.index&&(x=kr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!x)return null;Object.assign(l,x.params),p.push({params:l,pathname:Xt([d,x.pathname]),pathnameBase:vl(Xt([d,x.pathnameBase])),route:C}),x.pathnameBase!=="/"&&(d=Xt([d,x.pathnameBase]))}return p}function kr(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,n]=fl(o.path,o.caseSensitive,o.end),l=i.match(r);if(!l)return null;let d=l[0],p=d.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:n.reduce((m,{paramName:u,isOptional:x},C)=>{if(u==="*"){let k=h[C]||"";p=d.slice(0,d.length-k.length).replace(/(.)\/+$/,"$1")}const F=h[C];return x&&!F?m[u]=void 0:m[u]=(F||"").replace(/%2F/g,"/"),m},{}),pathname:d,pathnameBase:p,pattern:o}}function fl(o,i=!1,r=!0){Pt(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let n=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,h,c)=>(n.push({paramName:h,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return o.endsWith("*")?(n.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,i?void 0:"i"),n]}function xl(o){try{return o.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Pt(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),o}}function Qt(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let r=i.endsWith("/")?i.length-1:i.length,n=o.charAt(r);return n&&n!=="/"?null:o.slice(r)||"/"}function ml(o,i="/"){let{pathname:r,search:n="",hash:l=""}=typeof o=="string"?oo(o):o;return{pathname:r?r.startsWith("/")?r:yl(r,i):i,search:Sl(n),hash:wl(l)}}function yl(o,i){let r=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function tn(o,i,r,n){return`Cannot include a '${o}' character in a manually specified \`to.${i}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bl(o){return o.filter((i,r)=>r===0||i.route.path&&i.route.path.length>0)}function aa(o){let i=bl(o);return i.map((r,n)=>n===i.length-1?r.pathname:r.pathnameBase)}function la(o,i,r,n=!1){let l;typeof o=="string"?l=oo(o):(l={...o},De(!l.pathname||!l.pathname.includes("?"),tn("?","pathname","search",l)),De(!l.pathname||!l.pathname.includes("#"),tn("#","pathname","hash",l)),De(!l.search||!l.search.includes("#"),tn("#","search","hash",l)));let d=o===""||l.pathname==="",p=d?"/":l.pathname,h;if(p==null)h=r;else{let x=i.length-1;if(!n&&p.startsWith("..")){let C=p.split("/");for(;C[0]==="..";)C.shift(),x-=1;l.pathname=C.join("/")}h=x>=0?i[x]:"/"}let c=ml(l,h),m=p&&p!=="/"&&p.endsWith("/"),u=(d||p===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(m||u)&&(c.pathname+="/"),c}var Xt=o=>o.join("/").replace(/\/\/+/g,"/"),vl=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),Sl=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,wl=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function kl(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var Cl=["POST","PUT","PATCH","DELETE"];[...Cl];var ro=s.exports.createContext(null);ro.displayName="DataRouter";var Tr=s.exports.createContext(null);Tr.displayName="DataRouterState";s.exports.createContext(!1);var sa=s.exports.createContext({isTransitioning:!1});sa.displayName="ViewTransition";var zl=s.exports.createContext(new Map);zl.displayName="Fetchers";var Rl=s.exports.createContext(null);Rl.displayName="Await";var $t=s.exports.createContext(null);$t.displayName="Navigation";var Wo=s.exports.createContext(null);Wo.displayName="Location";var Ot=s.exports.createContext({outlet:null,matches:[],isDataRoute:!1});Ot.displayName="Route";var mn=s.exports.createContext(null);mn.displayName="RouteError";function Al(o,{relative:i}={}){De(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=s.exports.useContext($t),{hash:l,pathname:d,search:p}=Po(o,{relative:i}),h=d;return r!=="/"&&(h=d==="/"?r:Xt([r,d])),n.createHref({pathname:h,search:p,hash:l})}function Mo(){return s.exports.useContext(Wo)!=null}function fi(){return De(Mo(),"useLocation() may be used only in the context of a <Router> component."),s.exports.useContext(Wo).location}var da="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ca(o){s.exports.useContext($t).static||s.exports.useLayoutEffect(o)}function Er(){let{isDataRoute:o}=s.exports.useContext(Ot);return o?jl():Fl()}function Fl(){De(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let o=s.exports.useContext(ro),{basename:i,navigator:r}=s.exports.useContext($t),{matches:n}=s.exports.useContext(Ot),{pathname:l}=fi(),d=JSON.stringify(aa(n)),p=s.exports.useRef(!1);return ca(()=>{p.current=!0}),s.exports.useCallback((c,m={})=>{if(Pt(p.current,da),!p.current)return;if(typeof c=="number"){r.go(c);return}let u=la(c,JSON.parse(d),l,m.relative==="path");o==null&&i!=="/"&&(u.pathname=u.pathname==="/"?i:Xt([i,u.pathname])),(m.replace?r.replace:r.push)(u,m.state,m)},[i,r,d,l,o])}var Il=s.exports.createContext(null);function Tl(o){let i=s.exports.useContext(Ot).outlet;return i&&s.exports.createElement(Il.Provider,{value:o},i)}function Po(o,{relative:i}={}){let{matches:r}=s.exports.useContext(Ot),{pathname:n}=fi(),l=JSON.stringify(aa(r));return s.exports.useMemo(()=>la(o,JSON.parse(l),n,i==="path"),[o,l,n,i])}function El(o,i){return pa(o,i)}function pa(o,i,r,n,l){var z;De(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=s.exports.useContext($t),{matches:p}=s.exports.useContext(Ot),h=p[p.length-1],c=h?h.params:{},m=h?h.pathname:"/",u=h?h.pathnameBase:"/",x=h&&h.route;{let y=x&&x.path||"";ua(m,!x||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let C=fi(),F;if(i){let y=typeof i=="string"?oo(i):i;De(u==="/"||((z=y.pathname)==null?void 0:z.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),F=y}else F=C;let k=F.pathname||"/",w=k;if(u!=="/"){let y=u.replace(/^\//,"").split("/"),B=k.replace(/^\//,"").split("/");w="/"+B.slice(y.length).join("/")}let b=oa(o,{pathname:w});Pt(x||b!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Pt(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let f=Pl(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Xt([u,d.encodeLocation?d.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Xt([u,d.encodeLocation?d.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),p,r,n,l);return i&&f?s.exports.createElement(Wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},f):f}function Dl(){let o=Ol(),i=kl(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},d={padding:"2px 4px",backgroundColor:n},p=null;return console.error("Error handled by React Router default ErrorBoundary:",o),p=s.exports.createElement(s.exports.Fragment,null,s.exports.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),s.exports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.exports.createElement("code",{style:d},"ErrorBoundary")," or"," ",s.exports.createElement("code",{style:d},"errorElement")," prop on your route.")),s.exports.createElement(s.exports.Fragment,null,s.exports.createElement("h2",null,"Unexpected Application Error!"),s.exports.createElement("h3",{style:{fontStyle:"italic"}},i),r?s.exports.createElement("pre",{style:l},r):null,p)}var Bl=s.exports.createElement(Dl,null),Wl=class extends s.exports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,i){return i.location!==o.location||i.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:i.error,location:i.location,revalidation:o.revalidation||i.revalidation}}componentDidCatch(o,i){this.props.unstable_onError?this.props.unstable_onError(o,i):console.error("React Router caught the following error during render",o)}render(){return this.state.error!==void 0?s.exports.createElement(Ot.Provider,{value:this.props.routeContext},s.exports.createElement(mn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ml({routeContext:o,match:i,children:r}){let n=s.exports.useContext(ro);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),s.exports.createElement(Ot.Provider,{value:o},r)}function Pl(o,i=[],r=null,n=null,l=null){if(o==null){if(!r)return null;if(r.errors)o=r.matches;else if(i.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let d=o,p=r==null?void 0:r.errors;if(p!=null){let m=d.findIndex(u=>u.route.id&&(p==null?void 0:p[u.route.id])!==void 0);De(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),d=d.slice(0,Math.min(d.length,m+1))}let h=!1,c=-1;if(r)for(let m=0;m<d.length;m++){let u=d[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=m),u.route.id){let{loaderData:x,errors:C}=r,F=u.route.loader&&!x.hasOwnProperty(u.route.id)&&(!C||C[u.route.id]===void 0);if(u.route.lazy||F){h=!0,c>=0?d=d.slice(0,c+1):d=[d[0]];break}}}return d.reduceRight((m,u,x)=>{let C,F=!1,k=null,w=null;r&&(C=p&&u.route.id?p[u.route.id]:void 0,k=u.route.errorElement||Bl,h&&(c<0&&x===0?(ua("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,w=null):c===x&&(F=!0,w=u.route.hydrateFallbackElement||null)));let b=i.concat(d.slice(0,x+1)),f=()=>{let z;return C?z=k:F?z=w:u.route.Component?z=s.exports.createElement(u.route.Component,null):u.route.element?z=u.route.element:z=m,s.exports.createElement(Ml,{match:u,routeContext:{outlet:m,matches:b,isDataRoute:r!=null},children:z})};return r&&(u.route.ErrorBoundary||u.route.errorElement||x===0)?s.exports.createElement(Wl,{location:r.location,revalidation:r.revalidation,component:k,error:C,children:f(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):f()},null)}function yn(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _l(o){let i=s.exports.useContext(ro);return De(i,yn(o)),i}function Ll(o){let i=s.exports.useContext(Tr);return De(i,yn(o)),i}function Nl(o){let i=s.exports.useContext(Ot);return De(i,yn(o)),i}function bn(o){let i=Nl(o),r=i.matches[i.matches.length-1];return De(r.route.id,`${o} can only be used on routes that contain a unique "id"`),r.route.id}function $l(){return bn("useRouteId")}function Ol(){var n;let o=s.exports.useContext(mn),i=Ll("useRouteError"),r=bn("useRouteError");return o!==void 0?o:(n=i.errors)==null?void 0:n[r]}function jl(){let{router:o}=_l("useNavigate"),i=bn("useNavigate"),r=s.exports.useRef(!1);return ca(()=>{r.current=!0}),s.exports.useCallback(async(l,d={})=>{Pt(r.current,da),r.current&&(typeof l=="number"?o.navigate(l):await o.navigate(l,{fromRouteId:i,...d}))},[o,i])}var Hn={};function ua(o,i,r){!i&&!Hn[o]&&(Hn[o]=!0,Pt(!1,r))}s.exports.memo(Ul);function Ul({routes:o,future:i,state:r,unstable_onError:n}){return pa(o,void 0,r,n,i)}function ql(o){return Tl(o.context)}function we(o){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hl({basename:o="/",children:i=null,location:r,navigationType:n="POP",navigator:l,static:d=!1}){De(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=o.replace(/^\/*/,"/"),h=s.exports.useMemo(()=>({basename:p,navigator:l,static:d,future:{}}),[p,l,d]);typeof r=="string"&&(r=oo(r));let{pathname:c="/",search:m="",hash:u="",state:x=null,key:C="default"}=r,F=s.exports.useMemo(()=>{let k=Qt(c,p);return k==null?null:{location:{pathname:k,search:m,hash:u,state:x,key:C},navigationType:n}},[p,c,m,u,x,C,n]);return Pt(F!=null,`<Router basename="${p}"> is not able to match the URL "${c}${m}${u}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:s.exports.createElement($t.Provider,{value:h},s.exports.createElement(Wo.Provider,{children:i,value:F}))}function Vl({children:o,location:i}){return El(sn(o),i)}function sn(o,i=[]){let r=[];return s.exports.Children.forEach(o,(n,l)=>{if(!s.exports.isValidElement(n))return;let d=[...i,l];if(n.type===s.exports.Fragment){r.push.apply(r,sn(n.props.children,d));return}De(n.type===we,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!n.props.index||!n.props.children,"An index route cannot have child routes.");let p={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(p.children=sn(n.props.children,d)),r.push(p)}),r}var xr="get",mr="application/x-www-form-urlencoded";function Dr(o){return o!=null&&typeof o.tagName=="string"}function Gl(o){return Dr(o)&&o.tagName.toLowerCase()==="button"}function Yl(o){return Dr(o)&&o.tagName.toLowerCase()==="form"}function Jl(o){return Dr(o)&&o.tagName.toLowerCase()==="input"}function Kl(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Xl(o,i){return o.button===0&&(!i||i==="_self")&&!Kl(o)}var ur=null;function Zl(){if(ur===null)try{new FormData(document.createElement("form"),0),ur=!1}catch{ur=!0}return ur}var Ql=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function on(o){return o!=null&&!Ql.has(o)?(Pt(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mr}"`),null):o}function es(o,i){let r,n,l,d,p;if(Yl(o)){let h=o.getAttribute("action");n=h?Qt(h,i):null,r=o.getAttribute("method")||xr,l=on(o.getAttribute("enctype"))||mr,d=new FormData(o)}else if(Gl(o)||Jl(o)&&(o.type==="submit"||o.type==="image")){let h=o.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=o.getAttribute("formaction")||h.getAttribute("action");if(n=c?Qt(c,i):null,r=o.getAttribute("formmethod")||h.getAttribute("method")||xr,l=on(o.getAttribute("formenctype"))||on(h.getAttribute("enctype"))||mr,d=new FormData(h,o),!Zl()){let{name:m,type:u,value:x}=o;if(u==="image"){let C=m?`${m}.`:"";d.append(`${C}x`,"0"),d.append(`${C}y`,"0")}else m&&d.append(m,x)}}else{if(Dr(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xr,n=null,l=mr,p=o}return d&&l==="text/plain"&&(p=d,d=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:d,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vn(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function ts(o,i,r){let n=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return n.pathname==="/"?n.pathname=`_root.${r}`:i&&Qt(n.pathname,i)==="/"?n.pathname=`${i.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function is(o,i){if(o.id in i)return i[o.id];try{let r=await Qa(()=>import(o.module),[]);return i[o.id]=r,r}catch(r){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function os(o){return o!=null&&typeof o.page=="string"}function rs(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function ns(o,i,r){let n=await Promise.all(o.map(async l=>{let d=i.routes[l.route.id];if(d){let p=await is(d,r);return p.links?p.links():[]}return[]}));return ds(n.flat(1).filter(rs).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Vn(o,i,r,n,l,d){let p=(c,m)=>r[m]?c.route.id!==r[m].route.id:!0,h=(c,m)=>{var u;return r[m].pathname!==c.pathname||((u=r[m].route.path)==null?void 0:u.endsWith("*"))&&r[m].params["*"]!==c.params["*"]};return d==="assets"?i.filter((c,m)=>p(c,m)||h(c,m)):d==="data"?i.filter((c,m)=>{var x;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(p(c,m)||h(c,m))return!0;if(c.route.shouldRevalidate){let C=c.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(o,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function as(o,i,{includeHydrateFallback:r}={}){return ls(o.map(n=>{let l=i.routes[n.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function ls(o){return[...new Set(o)]}function ss(o){let i={},r=Object.keys(o).sort();for(let n of r)i[n]=o[n];return i}function ds(o,i){let r=new Set,n=new Set(i);return o.reduce((l,d)=>{if(i&&!os(d)&&d.as==="script"&&d.href&&n.has(d.href))return l;let h=JSON.stringify(ss(d));return r.has(h)||(r.add(h),l.push({key:h,link:d})),l},[])}function ha(){let o=s.exports.useContext(ro);return vn(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function cs(){let o=s.exports.useContext(Tr);return vn(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Sn=s.exports.createContext(void 0);Sn.displayName="FrameworkContext";function ga(){let o=s.exports.useContext(Sn);return vn(o,"You must render this element inside a <HydratedRouter> element"),o}function ps(o,i){let r=s.exports.useContext(Sn),[n,l]=s.exports.useState(!1),[d,p]=s.exports.useState(!1),{onFocus:h,onBlur:c,onMouseEnter:m,onMouseLeave:u,onTouchStart:x}=i,C=s.exports.useRef(null);s.exports.useEffect(()=>{if(o==="render"&&p(!0),o==="viewport"){let w=f=>{f.forEach(z=>{p(z.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return C.current&&b.observe(C.current),()=>{b.disconnect()}}},[o]),s.exports.useEffect(()=>{if(n){let w=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(w)}}},[n]);let F=()=>{l(!0)},k=()=>{l(!1),p(!1)};return r?o!=="intent"?[d,C,{}]:[d,C,{onFocus:Ao(h,F),onBlur:Ao(c,k),onMouseEnter:Ao(m,F),onMouseLeave:Ao(u,k),onTouchStart:Ao(x,F)}]:[!1,C,{}]}function Ao(o,i){return r=>{o&&o(r),r.defaultPrevented||i(r)}}function us({page:o,...i}){let{router:r}=ha(),n=s.exports.useMemo(()=>oa(r.routes,o,r.basename),[r.routes,o,r.basename]);return n?s.exports.createElement(gs,{page:o,matches:n,...i}):null}function hs(o){let{manifest:i,routeModules:r}=ga(),[n,l]=s.exports.useState([]);return s.exports.useEffect(()=>{let d=!1;return ns(o,i,r).then(p=>{d||l(p)}),()=>{d=!0}},[o,i,r]),n}function gs({page:o,matches:i,...r}){let n=fi(),{manifest:l,routeModules:d}=ga(),{basename:p}=ha(),{loaderData:h,matches:c}=cs(),m=s.exports.useMemo(()=>Vn(o,i,c,l,n,"data"),[o,i,c,l,n]),u=s.exports.useMemo(()=>Vn(o,i,c,l,n,"assets"),[o,i,c,l,n]),x=s.exports.useMemo(()=>{if(o===n.pathname+n.search+n.hash)return[];let k=new Set,w=!1;if(i.forEach(f=>{var y;let z=l.routes[f.route.id];!z||!z.hasLoader||(!m.some(B=>B.route.id===f.route.id)&&f.route.id in h&&((y=d[f.route.id])==null?void 0:y.shouldRevalidate)||z.hasClientLoader?w=!0:k.add(f.route.id))}),k.size===0)return[];let b=ts(o,p,"data");return w&&k.size>0&&b.searchParams.set("_routes",i.filter(f=>k.has(f.route.id)).map(f=>f.route.id).join(",")),[b.pathname+b.search]},[p,h,n,l,m,i,o,d]),C=s.exports.useMemo(()=>as(u,l),[u,l]),F=hs(u);return s.exports.createElement(s.exports.Fragment,null,x.map(k=>s.exports.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...r})),C.map(k=>s.exports.createElement("link",{key:k,rel:"modulepreload",href:k,...r})),F.map(({key:k,link:w})=>s.exports.createElement("link",{key:k,nonce:r.nonce,...w})))}function fs(...o){return i=>{o.forEach(r=>{typeof r=="function"?r(i):r!=null&&(r.current=i)})}}var fa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fa&&(window.__reactRouterVersion="7.8.2")}catch{}function xs({basename:o,children:i,window:r}){let n=s.exports.useRef();n.current==null&&(n.current=el({window:r,v5Compat:!0}));let l=n.current,[d,p]=s.exports.useState({action:l.action,location:l.location}),h=s.exports.useCallback(c=>{s.exports.startTransition(()=>p(c))},[p]);return s.exports.useLayoutEffect(()=>l.listen(h),[l,h]),s.exports.createElement(Hl,{basename:o,children:i,location:d.location,navigationType:d.action,navigator:l})}var xa=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Br=s.exports.forwardRef(function({onClick:i,discover:r="render",prefetch:n="none",relative:l,reloadDocument:d,replace:p,state:h,target:c,to:m,preventScrollReset:u,viewTransition:x,...C},F){let{basename:k}=s.exports.useContext($t),w=typeof m=="string"&&xa.test(m),b,f=!1;if(typeof m=="string"&&w&&(b=m,fa))try{let j=new URL(window.location.href),V=m.startsWith("//")?new URL(j.protocol+m):new URL(m),le=Qt(V.pathname,k);V.origin===j.origin&&le!=null?m=le+V.search+V.hash:f=!0}catch{Pt(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=Al(m,{relative:l}),[y,B,$]=ps(n,C),X=vs(m,{replace:p,state:h,target:c,preventScrollReset:u,relative:l,viewTransition:x});function M(j){i&&i(j),j.defaultPrevented||X(j)}let R=s.exports.createElement("a",{...C,...$,href:b||z,onClick:f||d?i:M,ref:fs(F,B),target:c,"data-discover":!w&&r==="render"?"true":void 0});return y&&!w?s.exports.createElement(s.exports.Fragment,null,R,s.exports.createElement(us,{page:z})):R});Br.displayName="Link";var ms=s.exports.forwardRef(function({"aria-current":i="page",caseSensitive:r=!1,className:n="",end:l=!1,style:d,to:p,viewTransition:h,children:c,...m},u){let x=Po(p,{relative:m.relative}),C=fi(),F=s.exports.useContext(Tr),{navigator:k,basename:w}=s.exports.useContext($t),b=F!=null&&zs(x)&&h===!0,f=k.encodeLocation?k.encodeLocation(x).pathname:x.pathname,z=C.pathname,y=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;r||(z=z.toLowerCase(),y=y?y.toLowerCase():null,f=f.toLowerCase()),y&&w&&(y=Qt(y,w)||y);const B=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let $=z===f||!l&&z.startsWith(f)&&z.charAt(B)==="/",X=y!=null&&(y===f||!l&&y.startsWith(f)&&y.charAt(f.length)==="/"),M={isActive:$,isPending:X,isTransitioning:b},R=$?i:void 0,j;typeof n=="function"?j=n(M):j=[n,$?"active":null,X?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let V=typeof d=="function"?d(M):d;return s.exports.createElement(Br,{...m,"aria-current":R,className:j,ref:u,style:V,to:p,viewTransition:h},typeof c=="function"?c(M):c)});ms.displayName="NavLink";var ys=s.exports.forwardRef(({discover:o="render",fetcherKey:i,navigate:r,reloadDocument:n,replace:l,state:d,method:p=xr,action:h,onSubmit:c,relative:m,preventScrollReset:u,viewTransition:x,...C},F)=>{let k=ks(),w=Cs(h,{relative:m}),b=p.toLowerCase()==="get"?"get":"post",f=typeof h=="string"&&xa.test(h),z=y=>{if(c&&c(y),y.defaultPrevented)return;y.preventDefault();let B=y.nativeEvent.submitter,$=(B==null?void 0:B.getAttribute("formmethod"))||p;k(B||y.currentTarget,{fetcherKey:i,method:$,navigate:r,replace:l,state:d,relative:m,preventScrollReset:u,viewTransition:x})};return s.exports.createElement("form",{ref:F,method:b,action:w,onSubmit:n?c:z,...C,"data-discover":!f&&o==="render"?"true":void 0})});ys.displayName="Form";function bs(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ma(o){let i=s.exports.useContext(ro);return De(i,bs(o)),i}function vs(o,{target:i,replace:r,state:n,preventScrollReset:l,relative:d,viewTransition:p}={}){let h=Er(),c=fi(),m=Po(o,{relative:d});return s.exports.useCallback(u=>{if(Xl(u,i)){u.preventDefault();let x=r!==void 0?r:Eo(c)===Eo(m);h(o,{replace:x,state:n,preventScrollReset:l,relative:d,viewTransition:p})}},[c,h,m,r,n,i,o,l,d,p])}var Ss=0,ws=()=>`__${String(++Ss)}__`;function ks(){let{router:o}=ma("useSubmit"),{basename:i}=s.exports.useContext($t),r=$l();return s.exports.useCallback(async(n,l={})=>{let{action:d,method:p,encType:h,formData:c,body:m}=es(n,i);if(l.navigate===!1){let u=l.fetcherKey||ws();await o.fetch(u,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:c,body:m,formMethod:l.method||p,formEncType:l.encType||h,flushSync:l.flushSync})}else await o.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:c,body:m,formMethod:l.method||p,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[o,i,r])}function Cs(o,{relative:i}={}){let{basename:r}=s.exports.useContext($t),n=s.exports.useContext(Ot);De(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),d={...Po(o||".",{relative:i})},p=fi();if(o==null){d.search=p.search;let h=new URLSearchParams(d.search),c=h.getAll("index");if(c.some(u=>u==="")){h.delete("index"),c.filter(x=>x).forEach(x=>h.append("index",x));let u=h.toString();d.search=u?`?${u}`:""}}return(!o||o===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:Xt([r,d.pathname])),Eo(d)}function zs(o,{relative:i}={}){let r=s.exports.useContext(sa);De(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ma("useViewTransitionState"),l=Po(o,{relative:i});if(!r.isTransitioning)return!1;let d=Qt(r.currentLocation.pathname,n)||r.currentLocation.pathname,p=Qt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return kr(l.pathname,p)!=null||kr(l.pathname,d)!=null}/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),As=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,r,n)=>n?n.toUpperCase():r.toLowerCase()),Gn=o=>{const i=As(o);return i.charAt(0).toUpperCase()+i.slice(1)},ya=(...o)=>o.filter((i,r,n)=>Boolean(i)&&i.trim()!==""&&n.indexOf(i)===r).join(" ").trim(),Fs=o=>{for(const i in o)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Is={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=s.exports.forwardRef(({color:o="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:p,...h},c)=>s.exports.createElement("svg",{ref:c,...Is,width:i,height:i,stroke:o,strokeWidth:n?Number(r)*24/Number(i):r,className:ya("lucide",l),...!d&&!Fs(h)&&{"aria-hidden":"true"},...h},[...p.map(([m,u])=>s.exports.createElement(m,u)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(o,i)=>{const r=s.exports.forwardRef(({className:n,...l},d)=>s.exports.createElement(Ts,{ref:d,iconNode:i,className:ya(`lucide-${Rs(Gn(o))}`,`lucide-${o}`,n),...l}));return r.displayName=Gn(o),r};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ds=G("activity",Es);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],ba=G("apple",Bs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ms=G("arrow-down",Ws);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dn=G("arrow-left",Ps);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ls=G("arrow-up",_s);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],$s=G("battery",Ns);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Cr=G("bell",Os);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],hr=G("bot",js);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],_o=G("building-2",Us);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wn=G("calendar",qs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pi=G("camera",Hs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Gs=G("car-front",Vs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Ze=G("car",Ys);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],no=G("chart-column",Js);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Xs=G("chart-pie",Ks);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ci=G("check",Zs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ed=G("chevron-down",Qs);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],id=G("chevron-up",td);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ei=G("circle-alert",od);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vt=G("circle-check-big",rd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zr=G("circle-x",nd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],St=G("clock",ad);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ii=G("credit-card",ld);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],dd=G("database",sd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],_t=G("dollar-sign",cd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Lo=G("download",pd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Wr=G("ellipsis-vertical",ud);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gd=G("external-link",hd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Do=G("eye-off",fd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lt=G("eye",xd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],yd=G("file-image",md);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xt=G("file-text",bd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],Sd=G("fuel",vd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],va=G("globe",wd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Cd=G("info",kd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Sa=G("key",zd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ad=G("layout-dashboard",Rd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],To=G("lock",Fd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],to=G("mail",Id);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$e=G("map-pin",Td);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Dd=G("menu",Ed);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Mr=G("message-circle",Bd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kn=G("message-square",Wd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Yn=G("mic-off",Md);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],cn=G("mic",Pd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Ld=G("minimize-2",_d);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Rr=G("navigation",Nd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Od=G("pause",$d);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ud=G("pen-line",jd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],No=G("phone",qd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],yr=G("plane",Hd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],wa=G("play",Vd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ka=G("plus",Gd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Jn=G("power",Yd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qi=G("refresh-cw",Jd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Xd=G("rotate-ccw",Kd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Qd=G("route",Zd);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cn=G("save",ec);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$o=G("search",tc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ca=G("send",ic);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ar=G("settings",oc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ti=G("shield",rc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],za=G("smartphone",nc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zn=G("square-pen",ac);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Zt=G("star",lc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kn=G("target",sc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rn=G("trash-2",dc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Bo=G("trending-up",cc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hi=G("triangle-alert",pc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],An=G("upload",uc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gc=G("user-check",hc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],xc=G("user-x",fc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qe=G("user",mc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gi=G("users",yc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],io=G("x",bc);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Fr=G("zap",vc),Ra="https://ethiocode-ai-pi-rideshare.onrender.com",yt=o=>{const i=o.startsWith("/")?o.slice(1):o;return`${Ra}/${i}`},Sc=()=>Ra,wc=({onLogin:o})=>{const[i,r]=s.exports.useState({email:"demo@rider.com",password:"admin123"}),[n,l]=s.exports.useState(!1),[d,p]=s.exports.useState(!1),[h,c]=s.exports.useState(""),m=async x=>{x.preventDefault(),p(!0),c("");try{const C=await fetch(yt("api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),F=await C.json();C.ok?(localStorage.setItem("token",F.token),localStorage.setItem("authToken",F.token),localStorage.setItem("user",JSON.stringify(F.user)),o(F.token,F.user)):c(F.error||"Login failed")}catch(C){console.error("Login error:",C),c("Network error. Please try again.")}finally{p(!1)}},u=()=>{r({email:"demo@rider.com",password:"admin123"})};return e("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"40px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",width:"100%",maxWidth:"400px"},children:[t("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e("div",{style:{width:"64px",height:"64px",backgroundColor:"#4F46E5",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px auto"},children:e(To,{size:32,color:"white"})}),e("h1",{style:{fontSize:"32px",fontWeight:"700",color:"#1F2937",margin:"0 0 8px 0"},children:"\u03C0 Admin"}),e("p",{style:{fontSize:"14px",color:"#6B7280",margin:0},children:"Sign in to access the admin dashboard"})]}),h&&e("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #FECACA",color:"#DC2626",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"20px"},children:h}),t("form",{onSubmit:m,children:[t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Email"}),t("div",{style:{position:"relative"},children:[e(Qe,{size:18,color:"#9CA3AF",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e("input",{type:"email",value:i.email,onChange:x=>r(C=>({...C,email:x.target.value})),required:!0,style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(To,{size:18,color:"#9CA3AF",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),e("input",{type:n?"text":"password",value:i.password,onChange:x=>r(C=>({...C,password:x.target.value})),required:!0,style:{width:"100%",padding:"12px 44px 12px 44px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>l(!n),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#9CA3AF"},children:n?e(Do,{size:18}):e(Lt,{size:18})})]})]}),e("button",{type:"submit",disabled:d,style:{width:"100%",backgroundColor:d?"#9CA3AF":"#4F46E5",color:"white",border:"none",borderRadius:"8px",padding:"12px",fontSize:"14px",fontWeight:"600",cursor:d?"not-allowed":"pointer",transition:"background-color 0.2s",marginBottom:"16px"},children:d?"Signing in...":"Sign In"})]}),t("div",{style:{padding:"16px",backgroundColor:"#F9FAFB",borderRadius:"8px",border:"1px solid #E5E7EB"},children:[e("h4",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:"0 0 8px 0"},children:"Demo Credentials"}),e("p",{style:{fontSize:"12px",color:"#6B7280",margin:"0 0 8px 0"},children:"Use these ADMIN credentials to test the admin panel:"}),t("div",{style:{fontFamily:"monospace",fontSize:"11px",color:"#4B5563",backgroundColor:"white",padding:"8px",borderRadius:"4px",border:"1px solid #D1D5DB"},children:["Email: demo@rider.com",e("br",{}),"Password: admin123"]}),e("button",{type:"button",onClick:u,style:{width:"100%",backgroundColor:"#10B981",color:"white",border:"none",borderRadius:"6px",padding:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px"},children:"Fill Demo Credentials"})]})]})})};function kc(){const o=fi(),[i,r]=s.exports.useState(!1),[n,l]=s.exports.useState(null),[d,p]=s.exports.useState(!0);s.exports.useEffect(()=>{const m=localStorage.getItem("token"),u=localStorage.getItem("user");if(m&&u)try{l(JSON.parse(u)),r(!0)}catch(x){console.error("Error parsing user data:",x),localStorage.removeItem("token"),localStorage.removeItem("user")}p(!1)},[]);const h=(m,u)=>{r(!0),l(u)};return d?e("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#666"},children:"Loading..."}):i?t("div",{className:"layout",children:[t("div",{className:"sidebar",children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #334155"},children:t("div",{children:[e("h2",{style:{fontSize:"48px",fontWeight:"700",color:"white",margin:0,lineHeight:"1"},children:"\u03C0"}),e("p",{style:{fontSize:"12px",color:"#94a3b8",margin:0},children:"Admin Dashboard"})]})}),e("nav",{style:{padding:"20px 0"},children:[{icon:Ad,label:"Dashboard",path:"/dashboard"},{icon:gi,label:"Drivers",path:"/dashboard/drivers"},{icon:gi,label:"Riders",path:"/dashboard/riders"},{icon:Ze,label:"Rides",path:"/dashboard/rides"},{icon:no,label:"Analytics",path:"/dashboard/analytics"},{icon:$e,label:"Dispatch",path:"/dashboard/dispatch"},{icon:_o,label:"Corporations",path:"/dashboard/corporations"},{icon:xt,label:"Corp Applications",path:"/dashboard/corporate-applications"},{icon:pi,label:"Badge Verification",path:"/dashboard/driver-badge-verification"},{icon:va,label:"Markets",path:"/dashboard/markets"},{icon:hi,label:"Disputes",path:"/dashboard/disputes"},{icon:Ar,label:"Settings",path:"/dashboard/settings"},{icon:Ii,label:"Payment",path:"/dashboard/payment"},{icon:Qe,label:"Profile",path:"/dashboard/profile"},{icon:to,label:"Inbox",path:"/dashboard/inbox"},{icon:Bo,label:"Surge Map",path:"/dashboard/surge-map"},{icon:Ar,label:"Surge Control",path:"/dashboard/surge-control"}].map(m=>{const u=m.icon,x=o.pathname===m.path;return t(Br,{to:m.path,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",color:x?"#3b82f6":"#94a3b8",textDecoration:"none",backgroundColor:x?"rgba(59, 130, 246, 0.1)":"transparent",borderRight:x?"3px solid #3b82f6":"3px solid transparent",fontSize:"14px",fontWeight:x?"600":"500",transition:"all 0.2s ease"},onMouseEnter:C=>{x||(C.currentTarget.style.backgroundColor="rgba(148, 163, 184, 0.1)",C.currentTarget.style.color="#e2e8f0")},onMouseLeave:C=>{x||(C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.color="#94a3b8")},children:[e(u,{size:18}),m.label]},m.path)})})]}),t("div",{className:"main-content",children:[t("header",{className:"header",children:[e("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:t("div",{children:[e("h1",{style:{fontSize:"20px",fontWeight:"600",color:"#1e293b",margin:0},children:"Welcome back, Admin"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Here's what's happening with your platform today."})]})}),e("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:e("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:"A"})})]}),e("main",{className:"content",children:e(ql,{})})]}),e("style",{children:`
          .layout {
            display: flex;
            min-height: 100vh;
            background-color: #f8fafc;
          }

          .sidebar {
            width: 280px;
            background-color: #1e293b;
            border-right: 1px solid #334155;
            transition: width 0.3s ease;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 30;
            display: flex;
            flex-direction: column;
          }

          .main-content {
            flex: 1;
            margin-left: 280px;
          }

          .header {
            background-color: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
          }

          .content {
            padding: 32px;
          }

          .mobile-menu-btn {
            display: none;
          }

          @media (max-width: 768px) {
            .sidebar {
              width: 260px;
              transform: translateX(0);
              position: fixed;
              top: 0;
              left: 0;
              z-index: 40;
            }

            .main-content {
              margin-left: 260px;
            }
          }
        `})]}):e(wc,{onLogin:h})}const Ir=({url:o,size:i=200})=>{const[r,n]=s.exports.useState("");s.exports.useEffect(()=>{const d=`https://api.qrserver.com/v1/create-qr-code/?size=${i}x${i}&data=${encodeURIComponent(o)}`;n(d)},[o,i]);const l=()=>{navigator.clipboard.writeText(o),alert("URL copied to clipboard!")};return t("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"2px solid #e2e8f0",maxWidth:"300px",margin:"0 auto"},children:[r&&e("img",{src:r,alt:"QR Code for Rider App",style:{width:`${i}px`,height:`${i}px`,border:"4px solid white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[e("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"8px",textAlign:"center"},children:"Scan to access Rider App:"}),e("p",{style:{fontSize:"14px",fontWeight:"500",color:"#334155",textAlign:"center",wordBreak:"break-all"},children:o}),e("button",{onClick:l,style:{width:"100%",marginTop:"8px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u{1F4CB} Copy URL"})]}),e("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"#dbeafe",borderRadius:"6px",border:"1px solid #93c5fd"},children:e("p",{style:{fontSize:"11px",color:"#1e40af",textAlign:"center",margin:0},children:"\u{1F4A1} Open this URL on mobile for the best experience"})})]})};let ot=[{id:"bentonville",name:"Bentonville Metro",city:"Bentonville",state:"Arkansas",country:"USA",center:{lat:36.3729,lng:-94.2088},radius:25,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-01-15",totalDrivers:234,totalRiders:1847,monthlyRides:12450,monthlyRevenue:287650,config:{baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:2.5,airportFee:3.5,cancellationFee:5}},{id:"fayetteville",name:"Fayetteville",city:"Fayetteville",state:"Arkansas",country:"USA",center:{lat:36.0625,lng:-94.1574},radius:20,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-03-20",totalDrivers:156,totalRiders:1203,monthlyRides:8765,monthlyRevenue:198450,config:{baseFare:2.25,perMileFare:1.15,perMinuteFare:.3,maxSurgeMultiplier:2,airportFee:2.5,cancellationFee:4}},{id:"springdale",name:"Springdale",city:"Springdale",state:"Arkansas",country:"USA",center:{lat:36.1867,lng:-94.1288},radius:12,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-05-10",totalDrivers:89,totalRiders:756,monthlyRides:5432,monthlyRevenue:123850,config:{baseFare:2.25,perMileFare:1.15,perMinuteFare:.3,maxSurgeMultiplier:2,airportFee:2.5,cancellationFee:4}},{id:"rogers",name:"Rogers",city:"Rogers",state:"Arkansas",country:"USA",center:{lat:36.332,lng:-94.1185},radius:18,zoom:13,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-06-15",totalDrivers:112,totalRiders:923,monthlyRides:6789,monthlyRevenue:154320,config:{baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:2.5,airportFee:3.5,cancellationFee:5}},{id:"tulsa",name:"Tulsa Metro",city:"Tulsa",state:"Oklahoma",country:"USA",center:{lat:36.1539,lng:-95.9928},radius:25,zoom:12,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-02-01",totalDrivers:45,totalRiders:234,monthlyRides:1250,monthlyRevenue:28450,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"little-rock",name:"Little Rock",city:"Little Rock",state:"Arkansas",country:"USA",center:{lat:34.7465,lng:-92.2896},radius:30,zoom:12,timezone:"America/Chicago",currency:"USD",status:"active",launchedAt:"2023-08-20",totalDrivers:198,totalRiders:1456,monthlyRides:9876,monthlyRevenue:234560,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"oklahoma-city",name:"Oklahoma City",city:"Oklahoma City",state:"Oklahoma",country:"USA",center:{lat:35.4676,lng:-97.5164},radius:35,zoom:12,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-03-15",totalDrivers:67,totalRiders:389,monthlyRides:2134,monthlyRevenue:48760,config:{baseFare:2.75,perMileFare:1.35,perMinuteFare:.4,maxSurgeMultiplier:3,airportFee:4,cancellationFee:5.5}},{id:"kansas-city",name:"Kansas City Metro",city:"Kansas City",state:"Missouri",country:"USA",center:{lat:39.0997,lng:-94.5786},radius:40,zoom:11,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-04-01",totalDrivers:78,totalRiders:456,monthlyRides:2567,monthlyRevenue:58930,config:{baseFare:3,perMileFare:1.5,perMinuteFare:.45,maxSurgeMultiplier:3.5,airportFee:4.5,cancellationFee:6}},{id:"dallas",name:"Dallas-Fort Worth Metro",city:"Dallas",state:"Texas",country:"USA",center:{lat:32.7767,lng:-96.797},radius:50,zoom:10,timezone:"America/Chicago",currency:"USD",status:"pending",launchedAt:"2024-05-01",totalDrivers:156,totalRiders:892,monthlyRides:4567,monthlyRevenue:98760,config:{baseFare:3.25,perMileFare:1.65,perMinuteFare:.5,maxSurgeMultiplier:4,airportFee:5,cancellationFee:6.5}},{id:"washington-dc",name:"Metropolitan Washington D.C.",city:"Washington",state:"District of Columbia",country:"USA",center:{lat:38.9072,lng:-77.0369},radius:45,zoom:10,timezone:"America/New_York",currency:"USD",status:"pending",launchedAt:"2024-06-01",totalDrivers:189,totalRiders:1234,monthlyRides:6789,monthlyRevenue:145670,config:{baseFare:3.5,perMileFare:1.85,perMinuteFare:.55,maxSurgeMultiplier:4.5,airportFee:5.5,cancellationFee:7}}];const Zi={getAllMarkets:()=>[...ot],getActiveMarkets:()=>ot.filter(o=>o.status==="active"),getMarketById:o=>ot.find(i=>i.id===o),addMarket:o=>{ot.push(o)},updateMarket:(o,i)=>{const r=ot.findIndex(n=>n.id===o);return r!==-1?(ot[r]={...ot[r],...i},!0):!1},deleteMarket:o=>{const i=ot.findIndex(r=>r.id===o);return i!==-1?(ot.splice(i,1),!0):!1},getMarketStats:()=>({totalMarkets:ot.length,activeMarkets:ot.filter(o=>o.status==="active").length,pendingMarkets:ot.filter(o=>o.status==="pending").length,totalUsers:ot.reduce((o,i)=>o+i.totalDrivers+i.totalRiders,0),totalRevenue:ot.reduce((o,i)=>o+i.monthlyRevenue,0),totalRides:ot.reduce((o,i)=>o+i.monthlyRides,0)})};function Cc({error:o}){return t("div",{style:{padding:"24px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",margin:"16px",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("h3",{style:{color:"#dc2626",marginBottom:"8px"},children:"Google Maps Configuration Error"}),e("p",{style:{color:"#7f1d1d",marginBottom:"16px"},children:o}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"6px",textAlign:"left",fontSize:"14px",lineHeight:"1.5"},children:[e("h4",{style:{marginBottom:"8px",color:"#1f2937"},children:"To fix this issue:"}),t("ol",{style:{margin:0,paddingLeft:"20px"},children:[t("li",{children:["Get a Google Maps API key from ",e("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6"},children:"Google Cloud Console"})]}),e("li",{children:"Enable these APIs: Maps JavaScript API, Places API, Geocoding API"}),e("li",{children:"Add your API key to Replit Secrets as 'GMaps_Key'"}),e("li",{children:"Configure domain restrictions (add your Replit domain)"}),e("li",{children:"Restart your application"})]})]})]})}const Nt=Object.create(null);Nt.open="0";Nt.close="1";Nt.ping="2";Nt.pong="3";Nt.message="4";Nt.upgrade="5";Nt.noop="6";const br=Object.create(null);Object.keys(Nt).forEach(o=>{br[Nt[o]]=o});const pn={type:"error",data:"parser error"},Aa=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Fa=typeof ArrayBuffer=="function",Ia=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,Fn=({type:o,data:i},r,n)=>Aa&&i instanceof Blob?r?n(i):Xn(i,n):Fa&&(i instanceof ArrayBuffer||Ia(i))?r?n(i):Xn(new Blob([i]),n):n(Nt[o]+(i||"")),Xn=(o,i)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];i("b"+(n||""))},r.readAsDataURL(o)};function Zn(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}let rn;function zc(o,i){if(Aa&&o.data instanceof Blob)return o.data.arrayBuffer().then(Zn).then(i);if(Fa&&(o.data instanceof ArrayBuffer||Ia(o.data)))return i(Zn(o.data));Fn(o,!1,r=>{rn||(rn=new TextEncoder),i(rn.encode(r))})}const Qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Io=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<Qn.length;o++)Io[Qn.charCodeAt(o)]=o;const Rc=o=>{let i=o.length*.75,r=o.length,n,l=0,d,p,h,c;o[o.length-1]==="="&&(i--,o[o.length-2]==="="&&i--);const m=new ArrayBuffer(i),u=new Uint8Array(m);for(n=0;n<r;n+=4)d=Io[o.charCodeAt(n)],p=Io[o.charCodeAt(n+1)],h=Io[o.charCodeAt(n+2)],c=Io[o.charCodeAt(n+3)],u[l++]=d<<2|p>>4,u[l++]=(p&15)<<4|h>>2,u[l++]=(h&3)<<6|c&63;return m},Ac=typeof ArrayBuffer=="function",In=(o,i)=>{if(typeof o!="string")return{type:"message",data:Ta(o,i)};const r=o.charAt(0);return r==="b"?{type:"message",data:Fc(o.substring(1),i)}:br[r]?o.length>1?{type:br[r],data:o.substring(1)}:{type:br[r]}:pn},Fc=(o,i)=>{if(Ac){const r=Rc(o);return Ta(r,i)}else return{base64:!0,data:o}},Ta=(o,i)=>{switch(i){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}},Ea=String.fromCharCode(30),Ic=(o,i)=>{const r=o.length,n=new Array(r);let l=0;o.forEach((d,p)=>{Fn(d,!1,h=>{n[p]=h,++l===r&&i(n.join(Ea))})})},Tc=(o,i)=>{const r=o.split(Ea),n=[];for(let l=0;l<r.length;l++){const d=In(r[l],i);if(n.push(d),d.type==="error")break}return n};function Ec(){return new TransformStream({transform(o,i){zc(o,r=>{const n=r.length;let l;if(n<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,n);else if(n<65536){l=new Uint8Array(3);const d=new DataView(l.buffer);d.setUint8(0,126),d.setUint16(1,n)}else{l=new Uint8Array(9);const d=new DataView(l.buffer);d.setUint8(0,127),d.setBigUint64(1,BigInt(n))}o.data&&typeof o.data!="string"&&(l[0]|=128),i.enqueue(l),i.enqueue(r)})}})}let nn;function gr(o){return o.reduce((i,r)=>i+r.length,0)}function fr(o,i){if(o[0].length===i)return o.shift();const r=new Uint8Array(i);let n=0;for(let l=0;l<i;l++)r[l]=o[0][n++],n===o[0].length&&(o.shift(),n=0);return o.length&&n<o[0].length&&(o[0]=o[0].slice(n)),r}function Dc(o,i){nn||(nn=new TextDecoder);const r=[];let n=0,l=-1,d=!1;return new TransformStream({transform(p,h){for(r.push(p);;){if(n===0){if(gr(r)<1)break;const c=fr(r,1);d=(c[0]&128)===128,l=c[0]&127,l<126?n=3:l===126?n=1:n=2}else if(n===1){if(gr(r)<2)break;const c=fr(r,2);l=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(gr(r)<8)break;const c=fr(r,8),m=new DataView(c.buffer,c.byteOffset,c.length),u=m.getUint32(0);if(u>Math.pow(2,53-32)-1){h.enqueue(pn);break}l=u*Math.pow(2,32)+m.getUint32(4),n=3}else{if(gr(r)<l)break;const c=fr(r,l);h.enqueue(In(d?c:nn.decode(c),i)),n=0}if(l===0||l>o){h.enqueue(pn);break}}}})}const Da=4;function Le(o){if(o)return Bc(o)}function Bc(o){for(var i in Le.prototype)o[i]=Le.prototype[i];return o}Le.prototype.on=Le.prototype.addEventListener=function(o,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(i),this};Le.prototype.once=function(o,i){function r(){this.off(o,r),i.apply(this,arguments)}return r.fn=i,this.on(o,r),this};Le.prototype.off=Le.prototype.removeListener=Le.prototype.removeAllListeners=Le.prototype.removeEventListener=function(o,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+o];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var n,l=0;l<r.length;l++)if(n=r[l],n===i||n.fn===i){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+o],this};Le.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),r=this._callbacks["$"+o],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,l=r.length;n<l;++n)r[n].apply(this,i)}return this};Le.prototype.emitReserved=Le.prototype.emit;Le.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};Le.prototype.hasListeners=function(o){return!!this.listeners(o).length};const Pr=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?i=>Promise.resolve().then(i):(i,r)=>r(i,0))(),bt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),Wc="arraybuffer";function Ba(o,...i){return i.reduce((r,n)=>(o.hasOwnProperty(n)&&(r[n]=o[n]),r),{})}const Mc=bt.setTimeout,Pc=bt.clearTimeout;function _r(o,i){i.useNativeTimers?(o.setTimeoutFn=Mc.bind(bt),o.clearTimeoutFn=Pc.bind(bt)):(o.setTimeoutFn=bt.setTimeout.bind(bt),o.clearTimeoutFn=bt.clearTimeout.bind(bt))}const _c=1.33;function Lc(o){return typeof o=="string"?Nc(o):Math.ceil((o.byteLength||o.size)*_c)}function Nc(o){let i=0,r=0;for(let n=0,l=o.length;n<l;n++)i=o.charCodeAt(n),i<128?r+=1:i<2048?r+=2:i<55296||i>=57344?r+=3:(n++,r+=4);return r}function Wa(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $c(o){let i="";for(let r in o)o.hasOwnProperty(r)&&(i.length&&(i+="&"),i+=encodeURIComponent(r)+"="+encodeURIComponent(o[r]));return i}function Oc(o){let i={},r=o.split("&");for(let n=0,l=r.length;n<l;n++){let d=r[n].split("=");i[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return i}class jc extends Error{constructor(i,r,n){super(i),this.description=r,this.context=n,this.type="TransportError"}}class Tn extends Le{constructor(i){super(),this.writable=!1,_r(this,i),this.opts=i,this.query=i.query,this.socket=i.socket,this.supportsBinary=!i.forceBase64}onError(i,r,n){return super.emitReserved("error",new jc(i,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(i){this.readyState==="open"&&this.write(i)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(i){const r=In(i,this.socket.binaryType);this.onPacket(r)}onPacket(i){super.emitReserved("packet",i)}onClose(i){this.readyState="closed",super.emitReserved("close",i)}pause(i){}createUri(i,r={}){return i+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const i=this.opts.hostname;return i.indexOf(":")===-1?i:"["+i+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(i){const r=$c(i);return r.length?"?"+r:""}}class Uc extends Tn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(i){this.readyState="pausing";const r=()=>{this.readyState="paused",i()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(i){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Tc(i,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const i=()=>{this.write([{type:"close"}])};this.readyState==="open"?i():this.once("open",i)}write(i){this.writable=!1,Ic(i,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const i=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Wa()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(i,r)}}let Ma=!1;try{Ma=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qc=Ma;function Hc(){}class Vc extends Uc{constructor(i){if(super(i),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&i.hostname!==location.hostname||n!==i.port}}doWrite(i,r){const n=this.request({method:"POST",data:i});n.on("success",r),n.on("error",(l,d)=>{this.onError("xhr post error",l,d)})}doPoll(){const i=this.request();i.on("data",this.onData.bind(this)),i.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=i}}class Mt extends Le{constructor(i,r,n){super(),this.createRequest=i,_r(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var i;const r=Ba(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&n.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(i=this._opts.cookieJar)===null||i===void 0||i.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var l;n.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Mt.requestsCount++,Mt.requests[this._index]=this)}_onError(i){this.emitReserved("error",i,this._xhr),this._cleanup(!0)}_cleanup(i){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Hc,i)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Mt.requests[this._index],this._xhr=null}}_onLoad(){const i=this._xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Mt.requestsCount=0;Mt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ea);else if(typeof addEventListener=="function"){const o="onpagehide"in bt?"pagehide":"unload";addEventListener(o,ea,!1)}}function ea(){for(let o in Mt.requests)Mt.requests.hasOwnProperty(o)&&Mt.requests[o].abort()}const Gc=function(){const o=Pa({xdomain:!1});return o&&o.responseType!==null}();class Yc extends Vc{constructor(i){super(i);const r=i&&i.forceBase64;this.supportsBinary=Gc&&!r}request(i={}){return Object.assign(i,{xd:this.xd},this.opts),new Mt(Pa,this.uri(),i)}}function Pa(o){const i=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!i||qc))return new XMLHttpRequest}catch{}if(!i)try{return new bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const _a=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Jc extends Tn{get name(){return"websocket"}doOpen(){const i=this.uri(),r=this.opts.protocols,n=_a?{}:Ba(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(i,r,n)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=i=>this.onClose({description:"websocket connection closed",context:i}),this.ws.onmessage=i=>this.onData(i.data),this.ws.onerror=i=>this.onError("websocket error",i)}write(i){this.writable=!1;for(let r=0;r<i.length;r++){const n=i[r],l=r===i.length-1;Fn(n,this.supportsBinary,d=>{try{this.doWrite(n,d)}catch{}l&&Pr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const i=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Wa()),this.supportsBinary||(r.b64=1),this.createUri(i,r)}}const an=bt.WebSocket||bt.MozWebSocket;class Kc extends Jc{createSocket(i,r,n){return _a?new an(i,r,n):r?new an(i,r):new an(i)}doWrite(i,r){this.ws.send(r)}}class Xc extends Tn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(i){return this.emitReserved("error",i)}this._transport.closed.then(()=>{this.onClose()}).catch(i=>{this.onError("webtransport error",i)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(i=>{const r=Dc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=i.readable.pipeThrough(r).getReader(),l=Ec();l.readable.pipeTo(i.writable),this._writer=l.writable.getWriter();const d=()=>{n.read().then(({done:h,value:c})=>{h||(this.onPacket(c),d())}).catch(h=>{})};d();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this._writer.write(p).then(()=>this.onOpen())})})}write(i){this.writable=!1;for(let r=0;r<i.length;r++){const n=i[r],l=r===i.length-1;this._writer.write(n).then(()=>{l&&Pr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var i;(i=this._transport)===null||i===void 0||i.close()}}const Zc={websocket:Kc,webtransport:Xc,polling:Yc},Qc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ep=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function un(o){if(o.length>8e3)throw"URI too long";const i=o,r=o.indexOf("["),n=o.indexOf("]");r!=-1&&n!=-1&&(o=o.substring(0,r)+o.substring(r,n).replace(/:/g,";")+o.substring(n,o.length));let l=Qc.exec(o||""),d={},p=14;for(;p--;)d[ep[p]]=l[p]||"";return r!=-1&&n!=-1&&(d.source=i,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=tp(d,d.path),d.queryKey=ip(d,d.query),d}function tp(o,i){const r=/\/{2,9}/g,n=i.replace(r,"/").split("/");return(i.slice(0,1)=="/"||i.length===0)&&n.splice(0,1),i.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ip(o,i){const r={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,l,d){l&&(r[l]=d)}),r}const hn=typeof addEventListener=="function"&&typeof removeEventListener=="function",vr=[];hn&&addEventListener("offline",()=>{vr.forEach(o=>o())},!1);class ui extends Le{constructor(i,r){if(super(),this.binaryType=Wc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,i&&typeof i=="object"&&(r=i,i=null),i){const n=un(i);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=un(r.host).host);_r(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const l=n.prototype.name;this.transports.push(l),this._transportsByName[l]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Oc(this.opts.query)),hn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(i){const r=Object.assign({},this.opts.query);r.EIO=Da,r.transport=i,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new this._transportsByName[i](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const i=this.opts.rememberUpgrade&&ui.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(i);r.open(),this.setTransport(r)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ui.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=i.data,this._onError(r);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this._pingInterval=i.pingInterval,this._pingTimeout=i.pingTimeout,this._maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const i=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+i,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},i),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this._getWritablePackets();this.transport.send(i),this._prevBufferLen=i.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const l=this.writeBuffer[n].data;if(l&&(r+=Lc(l)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const i=Date.now()>this._pingTimeoutTime;return i&&(this._pingTimeoutTime=0,Pr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),i}write(i,r,n){return this._sendPacket("message",i,r,n),this}send(i,r,n){return this._sendPacket("message",i,r,n),this}_sendPacket(i,r,n,l){if(typeof r=="function"&&(l=r,r=void 0),typeof n=="function"&&(l=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const d={type:i,data:r,options:n};this.emitReserved("packetCreate",d),this.writeBuffer.push(d),l&&this.once("flush",l),this.flush()}close(){const i=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),i()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():i()}):this.upgrading?n():i()),this}_onError(i){if(ui.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",i),this._onClose("transport error",i)}_onClose(i,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=vr.indexOf(this._offlineEventListener);n!==-1&&vr.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",i,r),this.writeBuffer=[],this._prevBufferLen=0}}}ui.protocol=Da;class op extends ui{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let i=0;i<this._upgrades.length;i++)this._probe(this._upgrades[i])}_probe(i){let r=this.createTransport(i),n=!1;ui.priorWebsocketSuccess=!1;const l=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",x=>{if(!n)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ui.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=r.name,this.emitReserved("upgradeError",C)}}))};function d(){n||(n=!0,u(),r.close(),r=null)}const p=x=>{const C=new Error("probe error: "+x);C.transport=r.name,d(),this.emitReserved("upgradeError",C)};function h(){p("transport closed")}function c(){p("socket closed")}function m(x){r&&x.name!==r.name&&d()}const u=()=>{r.removeListener("open",l),r.removeListener("error",p),r.removeListener("close",h),this.off("close",c),this.off("upgrading",m)};r.once("open",l),r.once("error",p),r.once("close",h),this.once("close",c),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(i){this._upgrades=this._filterUpgrades(i.upgrades),super.onHandshake(i)}_filterUpgrades(i){const r=[];for(let n=0;n<i.length;n++)~this.transports.indexOf(i[n])&&r.push(i[n]);return r}}class rp extends op{constructor(i,r={}){const n=typeof i=="object"?i:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(l=>Zc[l]).filter(l=>!!l)),super(i,n)}}function np(o,i="",r){let n=o;r=r||typeof location<"u"&&location,o==null&&(o=r.protocol+"//"+r.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=r.protocol+o:o=r.host+o),/^(https?|wss?):\/\//.test(o)||(typeof r<"u"?o=r.protocol+"//"+o:o="https://"+o),n=un(o)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const d=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+d+":"+n.port+i,n.href=n.protocol+"://"+d+(r&&r.port===n.port?"":":"+n.port),n}const ap=typeof ArrayBuffer=="function",lp=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,La=Object.prototype.toString,sp=typeof Blob=="function"||typeof Blob<"u"&&La.call(Blob)==="[object BlobConstructor]",dp=typeof File=="function"||typeof File<"u"&&La.call(File)==="[object FileConstructor]";function En(o){return ap&&(o instanceof ArrayBuffer||lp(o))||sp&&o instanceof Blob||dp&&o instanceof File}function Sr(o,i){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let r=0,n=o.length;r<n;r++)if(Sr(o[r]))return!0;return!1}if(En(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return Sr(o.toJSON(),!0);for(const r in o)if(Object.prototype.hasOwnProperty.call(o,r)&&Sr(o[r]))return!0;return!1}function cp(o){const i=[],r=o.data,n=o;return n.data=gn(r,i),n.attachments=i.length,{packet:n,buffers:i}}function gn(o,i){if(!o)return o;if(En(o)){const r={_placeholder:!0,num:i.length};return i.push(o),r}else if(Array.isArray(o)){const r=new Array(o.length);for(let n=0;n<o.length;n++)r[n]=gn(o[n],i);return r}else if(typeof o=="object"&&!(o instanceof Date)){const r={};for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=gn(o[n],i));return r}return o}function pp(o,i){return o.data=fn(o.data,i),delete o.attachments,o}function fn(o,i){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<i.length)return i[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let r=0;r<o.length;r++)o[r]=fn(o[r],i);else if(typeof o=="object")for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&(o[r]=fn(o[r],i));return o}const up=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hp=5;var me;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(me||(me={}));class gp{constructor(i){this.replacer=i}encode(i){return(i.type===me.EVENT||i.type===me.ACK)&&Sr(i)?this.encodeAsBinary({type:i.type===me.EVENT?me.BINARY_EVENT:me.BINARY_ACK,nsp:i.nsp,data:i.data,id:i.id}):[this.encodeAsString(i)]}encodeAsString(i){let r=""+i.type;return(i.type===me.BINARY_EVENT||i.type===me.BINARY_ACK)&&(r+=i.attachments+"-"),i.nsp&&i.nsp!=="/"&&(r+=i.nsp+","),i.id!=null&&(r+=i.id),i.data!=null&&(r+=JSON.stringify(i.data,this.replacer)),r}encodeAsBinary(i){const r=cp(i),n=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(n),l}}function ta(o){return Object.prototype.toString.call(o)==="[object Object]"}class Dn extends Le{constructor(i){super(),this.reviver=i}add(i){let r;if(typeof i=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(i);const n=r.type===me.BINARY_EVENT;n||r.type===me.BINARY_ACK?(r.type=n?me.EVENT:me.ACK,this.reconstructor=new fp(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(En(i)||i.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(i),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+i)}decodeString(i){let r=0;const n={type:Number(i.charAt(0))};if(me[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===me.BINARY_EVENT||n.type===me.BINARY_ACK){const d=r+1;for(;i.charAt(++r)!=="-"&&r!=i.length;);const p=i.substring(d,r);if(p!=Number(p)||i.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(p)}if(i.charAt(r+1)==="/"){const d=r+1;for(;++r&&!(i.charAt(r)===","||r===i.length););n.nsp=i.substring(d,r)}else n.nsp="/";const l=i.charAt(r+1);if(l!==""&&Number(l)==l){const d=r+1;for(;++r;){const p=i.charAt(r);if(p==null||Number(p)!=p){--r;break}if(r===i.length)break}n.id=Number(i.substring(d,r+1))}if(i.charAt(++r)){const d=this.tryParse(i.substr(r));if(Dn.isPayloadValid(n.type,d))n.data=d;else throw new Error("invalid payload")}return n}tryParse(i){try{return JSON.parse(i,this.reviver)}catch{return!1}}static isPayloadValid(i,r){switch(i){case me.CONNECT:return ta(r);case me.DISCONNECT:return r===void 0;case me.CONNECT_ERROR:return typeof r=="string"||ta(r);case me.EVENT:case me.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&up.indexOf(r[0])===-1);case me.ACK:case me.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fp{constructor(i){this.packet=i,this.buffers=[],this.reconPack=i}takeBinaryData(i){if(this.buffers.push(i),this.buffers.length===this.reconPack.attachments){const r=pp(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const xp=Object.freeze(Object.defineProperty({__proto__:null,protocol:hp,get PacketType(){return me},Encoder:gp,Decoder:Dn},Symbol.toStringTag,{value:"Module"}));function Ft(o,i,r){return o.on(i,r),function(){o.off(i,r)}}const mp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Na extends Le{constructor(i,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=i,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const i=this.io;this.subs=[Ft(i,"open",this.onopen.bind(this)),Ft(i,"packet",this.onpacket.bind(this)),Ft(i,"error",this.onerror.bind(this)),Ft(i,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...i){return i.unshift("message"),this.emit.apply(this,i),this}emit(i,...r){var n,l,d;if(mp.hasOwnProperty(i))throw new Error('"'+i.toString()+'" is a reserved event name');if(r.unshift(i),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const p={type:me.EVENT,data:r};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,x=r.pop();this._registerAckCallback(u,x),p.id=u}const h=(l=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||l===void 0?void 0:l.writable,c=this.connected&&!(!((d=this.io.engine)===null||d===void 0)&&d._hasPingExpired());return this.flags.volatile&&!h||(c?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p)),this.flags={},this}_registerAckCallback(i,r){var n;const l=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(l===void 0){this.acks[i]=r;return}const d=this.io.setTimeoutFn(()=>{delete this.acks[i];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===i&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),p=(...h)=>{this.io.clearTimeoutFn(d),r.apply(this,h)};p.withError=!0,this.acks[i]=p}emitWithAck(i,...r){return new Promise((n,l)=>{const d=(p,h)=>p?l(p):n(h);d.withError=!0,r.push(d),this.emit(i,...r)})}_addToQueue(i){let r;typeof i[i.length-1]=="function"&&(r=i.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:i,flags:Object.assign({fromQueue:!0},this.flags)};i.push((l,...d)=>n!==this._queue[0]?void 0:(l!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...d)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(i=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!i||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(i){i.nsp=this.nsp,this.io._packet(i)}onopen(){typeof this.auth=="function"?this.auth(i=>{this._sendConnectPacket(i)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(i){this.packet({type:me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},i):i})}onerror(i){this.connected||this.emitReserved("connect_error",i)}onclose(i,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",i,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(i=>{if(!this.sendBuffer.some(n=>String(n.id)===i)){const n=this.acks[i];delete this.acks[i],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(i){if(i.nsp===this.nsp)switch(i.type){case me.CONNECT:i.data&&i.data.sid?this.onconnect(i.data.sid,i.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case me.EVENT:case me.BINARY_EVENT:this.onevent(i);break;case me.ACK:case me.BINARY_ACK:this.onack(i);break;case me.DISCONNECT:this.ondisconnect();break;case me.CONNECT_ERROR:this.destroy();const n=new Error(i.data.message);n.data=i.data.data,this.emitReserved("connect_error",n);break}}onevent(i){const r=i.data||[];i.id!=null&&r.push(this.ack(i.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(i){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,i)}super.emit.apply(this,i),this._pid&&i.length&&typeof i[i.length-1]=="string"&&(this._lastOffset=i[i.length-1])}ack(i){const r=this;let n=!1;return function(...l){n||(n=!0,r.packet({type:me.ACK,id:i,data:l}))}}onack(i){const r=this.acks[i.id];typeof r=="function"&&(delete this.acks[i.id],r.withError&&i.data.unshift(null),r.apply(this,i.data))}onconnect(i,r){this.id=i,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(i=>this.emitEvent(i)),this.receiveBuffer=[],this.sendBuffer.forEach(i=>{this.notifyOutgoingListeners(i),this.packet(i)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(i=>i()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(i){return this.flags.compress=i,this}get volatile(){return this.flags.volatile=!0,this}timeout(i){return this.flags.timeout=i,this}onAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(i),this}prependAny(i){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(i),this}offAny(i){if(!this._anyListeners)return this;if(i){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(i===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(i),this}prependAnyOutgoing(i){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(i),this}offAnyOutgoing(i){if(!this._anyOutgoingListeners)return this;if(i){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(i===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(i){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,i.data)}}}function ao(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}ao.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),r=Math.floor(i*this.jitter*o);o=(Math.floor(i*10)&1)==0?o-r:o+r}return Math.min(o,this.max)|0};ao.prototype.reset=function(){this.attempts=0};ao.prototype.setMin=function(o){this.ms=o};ao.prototype.setMax=function(o){this.max=o};ao.prototype.setJitter=function(o){this.jitter=o};class xn extends Le{constructor(i,r){var n;super(),this.nsps={},this.subs=[],i&&typeof i=="object"&&(r=i,i=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,_r(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ao({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=i;const l=r.parser||xp;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(i){return arguments.length?(this._reconnection=!!i,i||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(i){return i===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=i,this)}reconnectionDelay(i){var r;return i===void 0?this._reconnectionDelay:(this._reconnectionDelay=i,(r=this.backoff)===null||r===void 0||r.setMin(i),this)}randomizationFactor(i){var r;return i===void 0?this._randomizationFactor:(this._randomizationFactor=i,(r=this.backoff)===null||r===void 0||r.setJitter(i),this)}reconnectionDelayMax(i){var r;return i===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=i,(r=this.backoff)===null||r===void 0||r.setMax(i),this)}timeout(i){return arguments.length?(this._timeout=i,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(i){if(~this._readyState.indexOf("open"))return this;this.engine=new rp(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const l=Ft(r,"open",function(){n.onopen(),i&&i()}),d=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),i?i(h):this.maybeReconnectOnOpen()},p=Ft(r,"error",d);if(this._timeout!==!1){const h=this._timeout,c=this.setTimeoutFn(()=>{l(),d(new Error("timeout")),r.close()},h);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(l),this.subs.push(p),this}connect(i){return this.open(i)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const i=this.engine;this.subs.push(Ft(i,"ping",this.onping.bind(this)),Ft(i,"data",this.ondata.bind(this)),Ft(i,"error",this.onerror.bind(this)),Ft(i,"close",this.onclose.bind(this)),Ft(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(i){try{this.decoder.add(i)}catch(r){this.onclose("parse error",r)}}ondecoded(i){Pr(()=>{this.emitReserved("packet",i)},this.setTimeoutFn)}onerror(i){this.emitReserved("error",i)}socket(i,r){let n=this.nsps[i];return n?this._autoConnect&&!n.active&&n.connect():(n=new Na(this,i,r),this.nsps[i]=n),n}_destroy(i){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(i){const r=this.encoder.encode(i);for(let n=0;n<r.length;n++)this.engine.write(r[n],i.options)}cleanup(){this.subs.forEach(i=>i()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(i,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",i,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const i=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{i.skipReconnect||(this.emitReserved("reconnect_attempt",i.backoff.attempts),!i.skipReconnect&&i.open(l=>{l?(i._reconnecting=!1,i.reconnect(),this.emitReserved("reconnect_error",l)):i.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const i=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",i)}}const Fo={};function wr(o,i){typeof o=="object"&&(i=o,o=void 0),i=i||{};const r=np(o,i.path||"/socket.io"),n=r.source,l=r.id,d=r.path,p=Fo[l]&&d in Fo[l].nsps,h=i.forceNew||i["force new connection"]||i.multiplex===!1||p;let c;return h?c=new xn(n,i):(Fo[l]||(Fo[l]=new xn(n,i)),c=Fo[l]),r.query&&!i.query&&(i.query=r.queryKey),c.socket(r.path,i)}Object.assign(wr,{Manager:xn,Socket:Na,io:wr,connect:wr});const yp="/assets/Pi_Car1.0c2ef191.png",$a=({map:o,surgeZones:i,showLabels:r=!0,onZoneClick:n})=>{const l=s.exports.useRef([]),d=s.exports.useRef([]),p=u=>u>=2.5?"#ef4444":u>=2?"#f97316":u>=1.5?"#eab308":u>=1.2?"#84cc16":"#10b981",h=u=>{switch(u){case"extreme":return .4;case"high":return .35;case"medium":return .25;case"low":return .15;default:return .2}},c=u=>{if(u.radius)return u.radius*1e3;switch(u.demandLevel){case"extreme":return 3e3;case"high":return 2500;case"medium":return 2e3;case"low":return 1500;default:return 2e3}},m=()=>{l.current.forEach(u=>u.setMap(null)),d.current.forEach(u=>u.close()),l.current=[],d.current=[]};return s.exports.useEffect(()=>{if(!(!o||!window.google||i.length===0))return m(),i.forEach(u=>{const{lat:x,lng:C}=u.coordinates,F=new google.maps.LatLng(x,C),k=p(u.surgeMultiplier),w=h(u.demandLevel),b=c(u),f=new google.maps.Circle({strokeColor:k,strokeOpacity:.8,strokeWeight:2,fillColor:k,fillOpacity:w,map:o,center:F,radius:b,clickable:!0,zIndex:1});if(n&&f.addListener("click",()=>n(u)),l.current.push(f),r){const z=`
          <div style="
            background: white; 
            border-radius: 8px; 
            padding: 8px 12px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 2px solid ${k};
            font-family: 'Inter', sans-serif;
            text-align: center;
            min-width: 120px;
          ">
            <div style="font-weight: 600; font-size: 14px; color: #1f2937; margin-bottom: 4px;">
              ${u.name}
            </div>
            <div style="font-size: 18px; font-weight: 700; color: ${k}; margin-bottom: 2px;">
              ${u.surgeMultiplier}x
            </div>
            <div style="font-size: 11px; color: #6b7280; text-transform: uppercase; font-weight: 500;">
              ${u.demandLevel} Demand
            </div>
          </div>
        `,y=new google.maps.InfoWindow({content:z,position:F,disableAutoPan:!0,pixelOffset:new google.maps.Size(0,-10)});y.open(o),d.current.push(y)}}),()=>m()},[o,i,r,n]),s.exports.useEffect(()=>()=>m(),[]),null},bp=()=>{const o=s.exports.useRef(null),[i,r]=s.exports.useState(null),[n,l]=s.exports.useState(!1),[d,p]=s.exports.useState(!1),[h,c]=s.exports.useState(null),[m,u]=s.exports.useState(!0),[x,C]=s.exports.useState(!0),[F,k]=s.exports.useState(!1);s.exports.useState([]);const[w,b]=s.exports.useState([]),[f,z]=s.exports.useState([]),[y,B]=s.exports.useState([]),[$,X]=s.exports.useState(null),[M,R]=s.exports.useState(15),[j,V]=s.exports.useState(null),[le,ce]=s.exports.useState(null),[ee,ze]=s.exports.useState(null);s.exports.useState(!0);const[T,Z]=s.exports.useState([]),[H,O]=s.exports.useState([]),[U,ge]=s.exports.useState(null),[Re,ne]=s.exports.useState({pendingRequests:0,activeRides:0,onlineDrivers:0,totalRevenue:0,completedRides:0}),[fe,xe]=s.exports.useState("overview"),[qe,ti]=s.exports.useState([]),[lt,Ne]=s.exports.useState([]),[te,ii]=s.exports.useState([]),[It,Tt]=s.exports.useState([]),[jt,Ei]=s.exports.useState([]),[rt,ue]=s.exports.useState(!1),[et,oe]=s.exports.useState(null),[Ut,Oe]=s.exports.useState(""),[je,Fe]=s.exports.useState({}),[nt,tt]=s.exports.useState([]),[wt,Te]=s.exports.useState({});s.exports.useEffect(()=>{const A=Zi.getAllMarkets();B(A);const L=A.find(q=>q.name==="Bentonville, AR");L?X(L):A.length>0&&X(A[0])},[]),s.exports.useEffect(()=>{console.log("\u{1F4E1} Dashboard: Connecting to Socket.IO...");const A=wr(Sc(),{transports:["websocket","polling"]});return ge(A),A.on("connect",()=>{console.log("\u2705 Dashboard: Socket.IO connected successfully!"),console.log("\u{1F504} Requesting current driver state after reconnection..."),A.emit("request-current-state")}),A.on("disconnect",()=>{console.log("\u274C Dashboard: Socket.IO disconnected")}),A.on("connect_error",L=>{console.log("\u{1F6AB} Dashboard: Socket.IO connection error:",L)}),A.on("driver-location-update",L=>{console.log("\u{1F4CD} Real-time driver update:",L),Z(q=>{const Q=q.findIndex(K=>K.id===L.driverId);if(Q>=0){const K=[...q];return K[Q]={...K[Q],lat:L.location.lat,lng:L.location.lng,heading:L.heading||L.location.heading||K[Q].heading||0,last_update:"Live"},console.log("\u{1F4CD} Updated driver location:",L.driverId),K}return console.log("\u26A0\uFE0F Location update for unknown driver:",L.driverId),q})}),A.on("pending-requests-update",L=>{console.log("\u{1F4CB} Pending requests update:",L),ne(q=>({...q,pendingRequests:L.pendingRequests||0}))}),A.on("driver-availability-update",L=>{console.log("\u{1F697} Dashboard: Driver availability update received:",L),ne(q=>({...q,onlineDrivers:L.totalDrivers||0})),L.driverId?(console.log("\u{1F527} Processing driver update:",L.driverId,"status:",L.status,"location:",L.location),console.log("\u{1F527} Data isAvailable:",L.isAvailable,"status check:",L.status==="online","location check:",!!L.location),Z(q=>{console.log("\u{1F527} Current drivers before update:",q.length,q.map(K=>`${K.name}(${K.user_type})`));const Q=q.filter(K=>K.id!==L.driverId);if(console.log("\u{1F527} After removing existing driver:",Q.length),L.status==="online"&&L.location&&L.isAvailable){const K={id:L.driverId,name:`Driver ${L.driverId.slice(-4)}`,email:"driver@example.com",user_type:"driver",rating:5,status:"available",lat:L.location.lat,lng:L.location.lng,heading:L.location.heading||0,last_update:"Live"};Q.push(K),console.log("\u2705 Added driver to map:",K.name,"at",K.lat,K.lng)}else console.log("\u274C Driver not added - status:",L.status,"hasLocation:",!!L.location,"isAvailable:",L.isAvailable);return console.log("\u{1F4CA} Total entities on map after driver update:",Q.length),console.log("\u{1F4CA} Updated drivers list:",Q.map(K=>`${K.name}(${K.user_type}) at ${K.lat},${K.lng}`)),Q})):console.log("\u274C No driverId in driver update data")}),A.on("rider-availability-update",L=>{if(console.log("\u{1F4E1} Dashboard: Rider availability update received:",L),L.riders){const q=L.riders.map(Q=>{var K;return{id:Q.riderId,name:Q.name||`Rider ${(K=Q.riderId)==null?void 0:K.slice(-4)}`,email:"rider@example.com",user_type:"rider",status:Q.status||"online",lat:Q.lat,lng:Q.lng,last_update:"Live"}});O(q),console.log(`\u{1F464} Dashboard: ${L.totalRiders} riders online, added to map`)}}),()=>{A.disconnect()}},[]);const Di=async()=>{try{const A=localStorage.getItem("authToken");if(!A)return;const L=await fetch(yt("api/admin/analytics"),{headers:{Authorization:`Bearer ${A}`}}).catch(()=>null);if(L&&L.ok){const q=await L.json().catch(()=>null);if(!q)return;ne(Q=>({...Q,totalRevenue:q.totalRevenue||0,activeRides:q.activeRides||0,completedRides:q.completedRides||0}))}}catch(A){console.log("Unable to fetch analytics:",A)}};s.exports.useEffect(()=>{Di(),Ge(),pe()},[$]),s.exports.useEffect(()=>{const A=setInterval(Di,3e4);return()=>clearInterval(A)},[]);const qt=[{title:"Pending Requests",value:Re.pendingRequests.toString(),change:"+0.0%",positive:!0,color:"#f59e0b",icon:St},{title:"Active Rides",value:Re.activeRides.toString(),change:"+0.0%",positive:!0,color:"#3b82f6",icon:Ze},{title:"Online Drivers",value:Re.onlineDrivers.toString(),change:"+0.0%",positive:!0,color:"#10b981",icon:gi},{title:"Today Revenue",value:`$${Re.totalRevenue.toFixed(2)}`,change:"+0.0%",positive:!0,color:"#ef4444",icon:_t}],st=[{id:1,user:"Driver John",action:"completed a ride",time:"2 min ago",avatar:"\u{1F697}"},{id:2,user:"Rider Sarah",action:"requested a ride",time:"5 min ago",avatar:"\u{1F464}"},{id:3,user:"Driver Mike",action:"went online",time:"8 min ago",avatar:"\u{1F697}"}],pe=async()=>{var A;try{const L=localStorage.getItem("authToken");if(!L)return;console.log("\u{1F5FA}\uFE0F Dashboard: Fetching surge heatmap data...");const q=await fetch(yt("api/admin/surge/heatmap"),{headers:{Authorization:`Bearer ${L}`}});if(q.ok){const Q=await q.json();Q.success&&(tt(Q.surgeZones||[]),Te(Q.marketStats||{}),console.log(`\u{1F5FA}\uFE0F Dashboard: Loaded ${((A=Q.surgeZones)==null?void 0:A.length)||0} surge zones for heatmap`))}}catch(L){console.error("\u274C Error fetching heatmap data:",L),tt([]),Te({})}},Ge=async()=>{try{const A=localStorage.getItem("authToken");if(!A)return;const L={Authorization:`Bearer ${A}`},[q,Q,K,Be,ke]=await Promise.all([fetch(yt("api/admin/surge/zones"),{headers:L}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(yt("api/admin/surge/time-rules"),{headers:L}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(yt("api/admin/surge/weather-rules"),{headers:L}).catch(()=>({ok:!1,json:()=>Promise.resolve([])})),fetch(yt("api/admin/surge/algorithm-config"),{headers:L}).catch(()=>({ok:!1,json:()=>Promise.resolve({})})),fetch(yt("api/admin/surge/current-status"),{headers:L}).catch(()=>({ok:!1,json:()=>Promise.resolve({})}))]);if(q.ok){const Ee=await q.json();ti(Ee.zones||[])}if(Q.ok){const Ee=await Q.json();Ne(Ee.rules||[])}if(K.ok){const Ee=await K.json();ii(Ee.rules||[])}if(Be.ok){const Ee=await Be.json();Tt(Ee.config||[])}if(ke.ok){const Ee=await ke.json();Ei(Ee.zones||[])}}catch(A){console.error("Error fetching surge data:",A)}},Ae=async(A,L,q="PUT")=>{try{const Q=localStorage.getItem("authToken");if(!Q)return;(await fetch(yt(A),{method:q,headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify(L)})).ok&&(await Ge(),ue(!1),Fe({}))}catch(Q){console.error("Error updating surge config:",Q)}},mt=async(A,L,q,Q)=>{await Ae(`api/admin/surge/override/${A}`,{manualMultiplier:L,overrideReason:q,expiresAt:Q},"POST")},Bi=async A=>{try{const L=localStorage.getItem("authToken");if(!L)return;(await fetch(yt(`api/admin/surge/override/${A}`),{method:"DELETE",headers:{Authorization:`Bearer ${L}`}})).ok&&await Ge()}catch(L){console.error("Error removing surge override:",L)}};s.exports.useEffect(()=>(console.log("\u{1F5FA}\uFE0F Dashboard Google Maps initializing (auto-refresh paused)"),Wi(),()=>{ee&&ee.setMap(null),j&&j.setMap(null),w.forEach(A=>A.setMap(null)),f.forEach(A=>A.setMap(null))}),[]),s.exports.useEffect(()=>{(async()=>{try{const L=await fetch(yt("api/config/maps-key")).catch(()=>null);if(!L||!L.ok){console.warn("Maps API key not available, using environment variable"),dt();return}const q=await L.json().catch(()=>null);if(!q){dt();return}if(!q.key){c("Google Maps API key not configured. Please add GMaps_Key to your environment variables.");return}if(window.google)p(!0);else{const Q=document.createElement("script");Q.src=`https://maps.googleapis.com/maps/api/js?key=${q.key}&libraries=places,geometry`,Q.async=!0,Q.defer=!0,Q.onload=()=>{p(!0)},Q.onerror=()=>{console.error("Failed to load Google Maps"),c("Failed to load Google Maps. Please check your API key configuration.")},document.head.appendChild(Q)}}catch(L){console.error("Error loading Google Maps config:",L),c("Failed to load Google Maps configuration.")}})()},[]),s.exports.useEffect(()=>{i&&n&&navigator.geolocation.getCurrentPosition(A=>{const L={lat:A.coords.latitude,lng:A.coords.longitude};if(ce(L),ee&&ee.setMap(null),window.google.maps.marker&&window.google.maps.marker.AdvancedMarkerElement)new window.google.maps.marker.AdvancedMarkerElement({position:L,map:i,title:"Your Admin Location"});else{const q=new window.google.maps.Marker({position:L,map:i,title:"Your Admin Location",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                  <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="14" fill="#dc2626" stroke="white" stroke-width="3"/>
                    <text x="16" y="20" text-anchor="middle" fill="white" font-size="12" font-weight="bold">A</text>
                  </svg>
                `),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}}),Q=new window.google.maps.InfoWindow({content:`
                <div style="padding: 8px; font-family: Arial, sans-serif;">
                  <div style="font-weight: bold; color: #dc2626;">\u{1F468}\u200D\u{1F4BC} Admin Location</div>
                  <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">Live GPS Position</div>
                  <div style="font-size: 12px; margin: 2px 0;">
                    \u{1F4CD} ${L.lat.toFixed(6)}, ${L.lng.toFixed(6)}
                  </div>
                </div>
              `});q.addListener("click",()=>{Q.open(i,q)})}console.log("\u{1F4CD} Admin location added to Dashboard map:",L)},A=>{console.log("\u{1F4CD} Admin location unavailable:",A.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[i,n]),s.exports.useEffect(()=>{i&&n&&it()},[m,x,i,n]),s.exports.useEffect(()=>{i&&n&&(console.log("\u{1F504} Dashboard: Updating markers due to realDrivers change, count:",T.length),it())},[T,H,i,n]),s.exports.useEffect(()=>{$&&i&&n&&Mi()},[$,i,n]),s.exports.useEffect(()=>{i&&n&&ct()},[M,$,i,n]);const kt=(A,L=0,q=32)=>({url:yp,scaledSize:new window.google.maps.Size(q,q*1.35),anchor:new window.google.maps.Point(q/2,q*1.2/2)}),Wi=()=>{if(i||window.google&&window.google.maps&&n){console.log("\u{1F5FA}\uFE0F Dashboard map already initialized - skipping");return}if(window.google&&window.google.maps){dt();return}if(document.querySelectorAll('script[src*="maps.googleapis.com"]').forEach(K=>{const Be=K;Be.src&&(Be.src.includes("%VITE_GMAPS_KEY%")||Be.src.includes("YOUR_GOOGLE_MAPS_API_KEY"))&&(console.log("\u{1F5FA}\uFE0F Removing broken Google Maps script"),K.remove())}),document.querySelector('script[src*="maps.googleapis.com"][src*="AIza"]')){console.log("\u{1F5FA}\uFE0F Valid Google Maps script already loaded - waiting for initialization"),window.google&&window.google.maps&&dt();return}const q="AIzaSyCYJnVS_4EdeLrxACl4W5eTOCQiwgYTk28";console.log("\u{1F5FA}\uFE0F Loading Google Maps API with key:",q.substring(0,10)+"...");const Q=document.createElement("script");Q.src=`https://maps.googleapis.com/maps/api/js?key=${q}&libraries=places,geometry,visualization&callback=initDashboardMap&loading=async`,Q.async=!0,Q.defer=!0,window.initDashboardMap=()=>{console.log("\u2705 Google Maps API loaded successfully for dashboard"),dt()},Q.onerror=K=>{console.error("\u274C Failed to load Google Maps API:",K),l(!1)},document.head.appendChild(Q)},dt=()=>{if(!o.current||!window.google||!window.google.maps){console.error("Map container or Google Maps API not available");return}try{const A=new window.google.maps.Map(o.current,{center:le||($?$.center:{lat:36.3729,lng:-94.2088}),zoom:$?$.zoom:4,mapTypeId:"roadmap",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}],disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0,gestureHandling:"cooperative"});r(A),l(!0),console.log("Dashboard map initialized"),it(A)}catch(A){console.error("Error initializing dashboard map:",A),l(!1)}},it=A=>{const L=A||i;if(!L||!window.google)return;w.forEach(K=>K.setMap(null)),f.forEach(K=>K.setMap(null));const q=[],Q=[];console.log("\u{1F527} Dashboard: Creating markers for",T.length,"users. Selected market:",($==null?void 0:$.name)||"none"),T.forEach(K=>{if(K.user_type==="driver"&&m){const Be=K.status==="available"?"#10b981":K.status==="busy"?"#f59e0b":"#6b7280",ke=kt(Be,K.heading||0,24),Ee=new window.google.maps.Marker({position:{lat:K.lat,lng:K.lng},map:L,icon:ke,title:`Driver: ${K.name}`}),Et=new window.google.maps.InfoWindow({content:`
              <div style="padding: 8px; font-family: Arial, sans-serif;">
                <div style="font-weight: bold; color: #1f2937;">\u{1F697} ${K.name}</div>
                <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">ID: ${K.id}</div>
                <div style="font-size: 12px; margin: 2px 0;">
                  <span style="color: ${Be}; font-weight: bold;">\u25CF</span> ${K.status.toUpperCase()}
                </div>
                <div style="font-size: 12px; margin: 2px 0;">
                  \u2B50 ${K.rating||5} rating
                </div>
              </div>
            `});Ee.addListener("click",()=>{Et.open(L,Ee)}),q.push(Ee)}}),H.forEach(K=>{if(K.user_type==="rider"&&x){const Be=K.status==="waiting"?"#ef4444":K.status==="matched"?"#f59e0b":"#8b5cf6",ke={url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg width="24" height="30" viewBox="0 0 24 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 0C5.372 0 0 5.372 0 12c0 12 12 18 12 18s12-6 12-18C24 5.372 18.628 0 12 0z" fill="${Be}"/>
                <circle cx="12" cy="12" r="6" fill="white"/>
                <text x="12" y="16" text-anchor="middle" fill="${Be}" font-size="8" font-weight="bold">\u{1F464}</text>
              </svg>
            `),scaledSize:new window.google.maps.Size(24,30),anchor:new window.google.maps.Point(12,30)},Ee=new window.google.maps.Marker({position:{lat:K.lat,lng:K.lng},map:L,icon:ke,title:`Rider: ${K.name}`}),Et=new window.google.maps.InfoWindow({content:`
              <div style="padding: 8px; font-family: Arial, sans-serif;">
                <div style="font-weight: bold; color: #1f2937;">\u{1F464} ${K.name}</div>
                <div style="font-size: 12px; color: #6b7280; margin: 4px 0;">ID: ${K.id}</div>
                <div style="font-size: 12px; margin: 2px 0;">
                  <span style="color: ${Be}; font-weight: bold;">\u25CF</span> ${K.status.toUpperCase()}
                </div>
                <div style="font-size: 12px; margin: 2px 0;">
                  \u{1F4CD} Live Location
                </div>
              </div>
            `});Ee.addListener("click",()=>{Et.open(L,Ee)}),Q.push(Ee)}}),b(q),z(Q)},Mi=()=>{!i||!window.google||!$||(i.setCenter($.center),i.setZoom($.zoom),R($.radius),it(),ct())},ct=()=>{if(!i||!window.google||!$)return;j&&j.setMap(null);const A=new window.google.maps.Circle({strokeColor:"#3b82f6",strokeOpacity:.6,strokeWeight:2,fillColor:"#3b82f6",fillOpacity:.1,map:i,center:$.center,radius:M*1609.34});V(A)},Pi=A=>{R(A),X(L=>L?{...L,radius:A}:null)};return t("div",{children:[e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"20px",alignItems:"end"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Select Market"}),e("select",{value:($==null?void 0:$.id)||"",onChange:A=>{const L=y.find(q=>q.id===A.target.value);L&&X(L)},style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white",cursor:"pointer",outline:"none"},children:y.map(A=>t("option",{value:A.id,children:[A.city,", ",A.state]},A.id))})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:["Service Radius: ",M," miles"]}),e("input",{type:"range",min:"5",max:"50",step:"1",value:M,onChange:A=>Pi(Number(A.target.value)),style:{width:"100%",height:"6px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[e("span",{children:"5 miles"}),e("span",{children:"50 miles"})]})]}),t("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Coverage Area"}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:[(Math.PI*M*M).toFixed(0)," mi\xB2"]}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:($==null?void 0:$.timezone)||"N/A"})]})]})}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"20px",marginBottom:"24px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{children:[e("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",margin:"0 0 4px 0"},children:"Live Activity Map"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Real-time overview of riders and drivers in the trade area"})]}),t("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t("button",{onClick:()=>u(!m),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:m?"#10b981":"#f1f5f9",color:m?"white":"#64748b",border:`2px solid ${m?"#10b981":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[m?e(Lt,{size:14}):e(Do,{size:14}),"Drivers (",T.filter(A=>A.user_type==="driver"&&A.status!=="offline").length,")"]}),t("button",{onClick:()=>C(!x),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:x?"#3b82f6":"#f1f5f9",color:x?"white":"#64748b",border:`2px solid ${x?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[x?e(Lt,{size:14}):e(Do,{size:14}),"Riders (",T.filter(A=>A.user_type==="rider").length,")"]}),t("button",{onClick:()=>{k(!F),F||pe()},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:F?"#ef4444":"#f1f5f9",color:F?"white":"#64748b",border:`2px solid ${F?"#ef4444":"#e2e8f0"}`,borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[F?e(Bo,{size:14}):e($e,{size:14}),"Surge Heatmap (",nt.length,")"]})]})]}),t("div",{style:{height:"400px",position:"relative",backgroundColor:"#f8fafc",borderRadius:"12px",border:"2px solid #e2e8f0",overflow:"hidden"},children:[e("div",{ref:o,style:{width:"100%",height:"100%"}}),F&&i&&e($a,{map:i,surgeZones:nt,showLabels:!0,onZoneClick:A=>{console.log("\u{1F5FA}\uFE0F Surge zone clicked:",A)}}),!n&&e("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center",padding:"20px"},children:t("div",{children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Loading Live Map..."}),e("div",{style:{fontSize:"14px",opacity:.8},children:"Connecting to Google Maps"})]})}),h&&e(Cc,{error:h}),n&&t("div",{style:{position:"absolute",bottom:"16px",left:"16px",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:"12px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#1e293b"},children:"Map Legend"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"DRIVERS (\u{1F697} Car Icons)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#10b981"}}),e("span",{style:{fontSize:"11px"},children:"Available"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),e("span",{style:{fontSize:"11px"},children:"Busy"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#6b7280"}}),e("span",{style:{fontSize:"11px"},children:"Offline"})]}),e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginTop:"6px",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"RIDERS (\u{1F4CD} Location Pins)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#8b5cf6"}}),e("span",{style:{fontSize:"11px"},children:"Online"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#ef4444"}}),e("span",{style:{fontSize:"11px"},children:"Waiting for Ride"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f59e0b"}}),e("span",{style:{fontSize:"11px"},children:"Matched"})]}),F&&t(ye,{children:[e("div",{style:{fontWeight:"600",fontSize:"11px",color:"#64748b",marginTop:"6px",marginBottom:"2px",borderBottom:"1px solid #e2e8f0",paddingBottom:"2px"},children:"SURGE ZONES (\u{1F3AF} Color Overlays)"}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#10b981"}}),e("span",{style:{fontSize:"11px"},children:"Normal (1.0-1.2x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#84cc16"}}),e("span",{style:{fontSize:"11px"},children:"Low Surge (1.2-1.5x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#eab308"}}),e("span",{style:{fontSize:"11px"},children:"Medium Surge (1.5-2.0x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f97316"}}),e("span",{style:{fontSize:"11px"},children:"High Surge (2.0-2.5x)"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginLeft:"8px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#ef4444"}}),e("span",{style:{fontSize:"11px"},children:"Extreme Surge (2.5x+)"})]})]})]})]}),n&&t("div",{style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:"12px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#1e293b"},children:"Live Stats"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t("div",{children:["\u{1F697} ",T.filter(A=>A.status==="available").length," Available"]}),t("div",{children:["\u{1F7E1} ",T.filter(A=>A.status==="busy").length," Busy"]}),t("div",{children:["\u{1F464} ",H.filter(A=>A.status==="waiting").length," Waiting"]}),t("div",{children:["\u{1F697} ",H.filter(A=>A.status==="riding").length," Active Rides"]})]})]})]})]}),e("div",{className:"stats-grid",children:qt.map((A,L)=>{const q=A.icon;return t("div",{className:"stat-card",children:[t("div",{className:"stat-header",children:[e("span",{className:"stat-title",children:A.title}),e("div",{className:"stat-icon",style:{backgroundColor:`${A.color}20`,color:A.color},children:e(q,{size:24})})]}),e("div",{className:"stat-value",children:A.value}),t("div",{className:`stat-change ${A.positive?"positive":"negative"}`,children:[e(Bo,{size:12}),A.change]})]},L)})}),t("div",{className:"dashboard-grid",children:[t("div",{className:"chart-card",children:[e("h3",{className:"chart-title",children:"Rides Today"}),e("div",{style:{height:300,display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b"},children:"\u{1F4CA} Chart temporarily disabled for debugging"})]}),t("div",{className:"activity-feed",children:[e("div",{className:"activity-header",children:e("h3",{className:"chart-title",children:"Recent Activity"})}),e("div",{className:"activity-list",children:st.map(A=>t("div",{className:"activity-item",children:[e("div",{className:"activity-avatar",children:A.avatar}),t("div",{className:"activity-content",children:[t("div",{className:"activity-text",children:[e("strong",{children:A.user})," ",A.action]}),e("div",{className:"activity-time",children:A.time})]})]},A.id))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[t("div",{children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"4px"},children:"\u{1F680} Surge Pricing Management"}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Configure dynamic pricing zones, rules, and overrides"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:Ge,style:{padding:"8px 16px",backgroundColor:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#475569",cursor:"pointer"},children:"\u{1F504} Refresh"}),e("button",{onClick:()=>{const A=prompt(`\u{1F4CD} Admin GPS not accurate?

Enter your current city and state:
(e.g., "Seattle, WA" or "Dallas, TX")`);if(A&&window.google&&window.google.maps){const L=new window.google.maps.places.PlacesService(i),q={query:A,fields:["geometry","formatted_address"]};L.textSearch(q,(Q,K)=>{if(K===window.google.maps.places.PlacesServiceStatus.OK&&Q&&Q.length>0){const Be=Q[0],ke={lat:Be.geometry.location.lat(),lng:Be.geometry.location.lng()};console.log("\u{1F4CD} Admin location manually calibrated to:",ke),ce(ke),i&&(i.setCenter(ke),i.setZoom(13),window.adminMarker&&window.adminMarker.setPosition(ke)),alert(`\u2705 Admin location updated: ${Be.formatted_address}`)}else alert("\u274C Could not find that location. Please try again.")})}},style:{padding:"8px 16px",backgroundColor:"#10b981",border:"1px solid #059669",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"white",cursor:"pointer"},title:"Fix Admin GPS Location",children:"\u{1F4CD} Fix GPS"})]})]}),e("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",borderBottom:"2px solid #f1f5f9",paddingBottom:"8px"},children:[{id:"overview",label:"\u{1F4CA} Overview",icon:"\u{1F4CA}"},{id:"zones",label:"\u{1F5FA}\uFE0F Zones",icon:"\u{1F5FA}\uFE0F"},{id:"time-rules",label:"\u23F0 Time Rules",icon:"\u23F0"},{id:"weather",label:"\u{1F326}\uFE0F Weather",icon:"\u{1F326}\uFE0F"},{id:"algorithm",label:"\u2699\uFE0F Algorithm",icon:"\u2699\uFE0F"}].map(A=>e("button",{onClick:()=>xe(A.id),style:{padding:"8px 16px",backgroundColor:fe===A.id?"#3b82f6":"transparent",color:fe===A.id?"white":"#64748b",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:A.label},A.id))}),fe==="overview"&&t("div",{children:[t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t("div",{style:{padding:"16px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"1px solid #0ea5e9"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1",marginBottom:"8px"},children:"\u{1F4CD} Active Zones"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#0c4a6e"},children:jt.length})]}),t("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"12px",border:"1px solid #f59e0b"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:"\u{1F525} Manual Overrides"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#78350f"},children:jt.filter(A=>A.has_override).length})]}),t("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"12px",border:"1px solid #10b981"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#047857",marginBottom:"8px"},children:"\u23F0 Time Rules"}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#065f46"},children:lt.filter(A=>A.is_active).length})]})]}),t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F534} Live Surge Status"}),e("div",{style:{maxHeight:"300px",overflowY:"auto"},children:jt.slice(0,10).map(A=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:A.has_override?"#fef2f2":"#f8fafc",borderRadius:"8px",marginBottom:"8px",border:`1px solid ${A.has_override?"#fca5a5":"#e2e8f0"}`},children:[t("div",{children:[t("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:[A.zone_type==="airport"?"\u2708\uFE0F":"\u{1F3D9}\uFE0F"," ",A.zone_name]}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:[A.zone_code," \u2022 ",A.zone_type," \u2022 Tier ",A.tier_level]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:A.has_override?"#dc2626":A.base_multiplier>0?"#f59e0b":"#10b981"},children:A.has_override?`${A.manual_multiplier}x`:`${A.base_multiplier}x`}),A.has_override&&e("button",{onClick:()=>Bi(A.id),style:{padding:"4px 8px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer",marginTop:"4px"},children:"Remove Override"}),!A.has_override&&e("button",{onClick:()=>{oe(A),Oe("override"),ue(!0)},style:{padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"10px",cursor:"pointer",marginTop:"4px"},children:"Set Override"})]})]},A.id))})]})]}),fe==="zones"&&t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",margin:0},children:["\u{1F5FA}\uFE0F Surge Zones (",qe.length,")"]}),e("button",{onClick:()=>{Oe("new-zone"),ue(!0),Fe({})},style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"+ Add Zone"})]}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.map(A=>t("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 100px 100px 80px",alignItems:"center",padding:"12px",backgroundColor:A.is_active?"#f8fafc":"#fef2f2",borderRadius:"8px",marginBottom:"8px",border:"1px solid #e2e8f0",fontSize:"12px",gap:"12px"},children:[t("div",{children:[t("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:[A.zone_type==="airport"?"\u2708\uFE0F":"\u{1F3D9}\uFE0F"," ",A.zone_name]}),t("div",{style:{color:"#64748b"},children:[A.zone_code," \u2022 ",A.latitude.toFixed(4),", ",A.longitude.toFixed(4)]})]}),t("div",{style:{textAlign:"center",color:"#64748b"},children:["Tier ",A.tier_level]}),t("div",{style:{textAlign:"center",fontWeight:"600",color:"#f59e0b"},children:[A.base_multiplier,"x base"]}),t("div",{style:{textAlign:"center",color:"#64748b"},children:[A.radius,"km radius"]}),e("div",{style:{textAlign:"center"},children:e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:A.is_active?"#10b981":"#ef4444",margin:"0 auto"}})})]},A.id))})]}),fe==="time-rules"&&t("div",{children:[t("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:["\u23F0 Time-based Surge Rules (",lt.length,")"]}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:lt.map(A=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:A.is_active?"#f8fafc":"#fef2f2",borderRadius:"8px",marginBottom:"8px",border:"1px solid #e2e8f0"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:A.rule_name}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:[A.start_hour,":00 - ",A.end_hour,":00 \u2022 ",A.rule_type]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"16px",fontWeight:"700",color:A.is_active?"#f59e0b":"#94a3b8"},children:["+",A.surge_multiplier,"x"]}),e("div",{style:{fontSize:"10px",color:A.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:A.is_active?"ACTIVE":"DISABLED"})]})]},A.id))})]}),fe==="weather"&&t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:"\u{1F326}\uFE0F Weather-based Surge Rules"}),e("div",{style:{display:"grid",gap:"12px"},children:te.map(A=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:A.weather_condition==="clear"?"\u2600\uFE0F":A.weather_condition==="rain"?"\u{1F327}\uFE0F":A.weather_condition==="snow"?"\u2744\uFE0F":"\u26C8\uFE0F"}),t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",textTransform:"capitalize"},children:A.weather_condition}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Weather-based surge multiplier"})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"20px",fontWeight:"700",color:A.surge_multiplier>0?"#f59e0b":"#10b981"},children:["+",A.surge_multiplier,"x"]}),e("div",{style:{fontSize:"10px",color:A.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:A.is_active?"ENABLED":"DISABLED"})]})]},A.id))})]}),fe==="algorithm"&&t("div",{children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"16px"},children:"\u2699\uFE0F Algorithm Configuration"}),e("div",{style:{maxHeight:"400px",overflowY:"auto"},children:It.map(A=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"12px",border:"1px solid #e2e8f0"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:A.config_key.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase())}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:A.config_description})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#3b82f6"},children:A.config_value}),e("div",{style:{fontSize:"10px",color:A.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:A.is_active?"ACTIVE":"DISABLED"})]})]},A.id))})]})]}),rt&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:Ut==="override"&&t(ye,{children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",marginBottom:"16px",color:"#1e293b"},children:"\u{1F525} Set Manual Surge Override"}),t("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"20px"},children:["Zone: ",e("strong",{children:et==null?void 0:et.zone_name})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"Surge Multiplier"}),e("input",{type:"number",step:"0.1",min:"1.0",max:"10.0",value:je.manualMultiplier||"1.0",onChange:A=>Fe({...je,manualMultiplier:parseFloat(A.target.value)}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",marginBottom:"4px",color:"#374151"},children:"Reason"}),e("input",{type:"text",value:je.overrideReason||"",onChange:A=>Fe({...je,overrideReason:A.target.value}),placeholder:"e.g., Special event, weather emergency",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e("button",{onClick:()=>ue(!1),style:{padding:"10px 20px",backgroundColor:"#f1f5f9",border:"1px solid #cbd5e1",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:()=>{et&&je.manualMultiplier&&je.overrideReason&&mt(et.id,je.manualMultiplier,je.overrideReason)},style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Set Override"})]})]})})}),t("div",{className:"qr-code-card",children:[e("h3",{className:"chart-title",children:"Mobile App QR Codes"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",padding:"10px"},children:[t("div",{style:{textAlign:"center"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F697} Driver App"}),e(Ir,{url:`${window.location.origin}/driver`,size:150})]}),t("div",{style:{textAlign:"center"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",marginBottom:"12px"},children:"\u{1F464} Rider App"}),e(Ir,{url:`${window.location.origin}/rider`,size:150})]})]}),e("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #0ea5e9",textAlign:"center"},children:e("p",{style:{fontSize:"12px",color:"#0369a1",margin:0,fontWeight:"500"},children:"\u{1F4F1} Scan these codes with mobile devices to access the apps directly"})})]})]})]})},vp=({status:o,onClose:i})=>{const[r,n]=s.exports.useState(0),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(!1);if(s.exports.useEffect(()=>{if(o==="searching"){d(!1),h(!1);const m=setInterval(()=>{n(u=>(u+1)%7)},500);return()=>clearInterval(m)}else o==="found"&&(d(!0),h(!0),setTimeout(()=>{h(!1),i==null||i()},2e3))},[o,i]),o==="hidden")return null;const c=o==="searching"?"Finding the best \u03C0 Driver for you...":"We found your Driver";return t("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,background:"#1e293b",borderRadius:"12px",padding:"24px 32px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",minWidth:"320px",textAlign:"center",animation:"fadeIn 0.3s ease-out"},children:[e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginBottom:"16px"},children:Array.from({length:7},(m,u)=>{const x=l||u<=r;return e("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:x?"#10b981":"#ffffff",transition:"background-color 0.3s ease",opacity:x?1:.3,animation:p&&x?"flashGreen 0.3s ease-in-out infinite alternate":"none"}},u)})}),e("div",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:c}),e("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes fadeIn {
            from {
              opacity: 0;
              transform: translate(-50%, -50%) scale(0.9);
            }
            to {
              opacity: 1;
              transform: translate(-50%, -50%) scale(1);
            }
          }
          
          @keyframes flashGreen {
            from {
              background-color: #10b981;
              opacity: 1;
              transform: scale(1);
            }
            to {
              background-color: #22d3ee;
              opacity: 0.7;
              transform: scale(1.2);
            }
          }
        `}})]})},Sp="/cars/economy.png",wp="/cars/standard.png",kp="/cars/xl.png",Cp="/cars/premium.png";function zp(){var yo,Gi,er,Yi,Ci,tr,zi,ir,Ji,or,rr,nr,ar,lr,sr,dr,bo,vo,zt,Rt,So,wo,ko,Co,zo,v,I,W,P,D,Y,J,ve,Ve,Wt;const o=s.exports.useRef(null),i=s.exports.useRef(null),[r,n]=s.exports.useState(null),[l,d]=s.exports.useState(null),[p,h]=s.exports.useState(null),[c,m]=s.exports.useState(""),[u,x]=s.exports.useState(null),[C,F]=s.exports.useState(""),[k,w]=s.exports.useState("standard"),[b,f]=s.exports.useState(null),[z,y]=s.exports.useState(null),[B,$]=s.exports.useState(!1),[X,M]=s.exports.useState([]),[R,j]=s.exports.useState(!1),[V,le]=s.exports.useState([]),[ce,ee]=s.exports.useState(!1),[ze,T]=s.exports.useState(null),[Z,H]=s.exports.useState(null);s.exports.useState({email:"test@rider.com",password:"demo123"});const[O,U]=s.exports.useState(null),[ge,Re]=s.exports.useState([]),[ne,fe]=s.exports.useState(null);s.exports.useState(!1);const[xe,qe]=s.exports.useState(!1),[ti,lt]=s.exports.useState(!1),[Ne,te]=s.exports.useState("none"),[ii,It]=s.exports.useState(!1),[Tt,jt]=s.exports.useState(!1),[Ei,rt]=s.exports.useState([{id:"1",sender:"support",message:"Hi! How can I help you today?",timestamp:new Date().toISOString()}]),[ue,et]=s.exports.useState(""),[oe,Ut]=s.exports.useState("credit"),[Oe,je]=s.exports.useState(!1),[Fe,nt]=s.exports.useState(null),[tt,wt]=s.exports.useState(null),[Te,Di]=s.exports.useState(null),[qt,st]=s.exports.useState("idle"),[pe,Ge]=s.exports.useState(null),[Ae,mt]=s.exports.useState(!1),[Bi,kt]=s.exports.useState("hidden"),[Wi,dt]=s.exports.useState(!1);s.exports.useState(!1);const[it,Mi]=s.exports.useState(!1),[ct,Pi]=s.exports.useState(""),[A,L]=s.exports.useState(""),[q,Q]=s.exports.useState("standard"),[K,Be]=s.exports.useState(!1),[ke,Ee]=s.exports.useState([]),[Et,Ht]=s.exports.useState(""),[Ue,oi]=s.exports.useState(!1),[_e,_i]=s.exports.useState([]);s.exports.useState(null);const[Dt,xi]=s.exports.useState([]),[Lr,Vt]=s.exports.useState(!1),[lo,Oo]=s.exports.useState(!1);s.exports.useState(!1),s.exports.useState(""),s.exports.useState([]),s.exports.useState(!1);const[Bn,so]=s.exports.useState(null),[ri,jo]=s.exports.useState(null),[mi,Uo]=s.exports.useState(null),[pt,co]=s.exports.useState(null),[ut,qo]=s.exports.useState(!1),[Nr,Gt]=s.exports.useState(null),[po,Li]=s.exports.useState(null),[ht,Yt]=s.exports.useState({cardNumber:"",expiryDate:"",cvv:"",name:"",type:"credit"}),[Jt,Ct]=s.exports.useState({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:!1}),[Ye,yi]=s.exports.useState({name:"",address:"",icon:"\u{1F3E0}"}),[Wn,Ni]=s.exports.useState([{id:"1",name:"Home",address:"123 Main St, Springfield",icon:"\u{1F3E0}",type:"home"},{id:"2",name:"Work",address:"456 Corporate Blvd, Downtown",icon:"\u{1F3E2}",type:"work"},{id:"3",name:"Gym",address:"789 Fitness Ave, Midtown",icon:"\u{1F3CB}\uFE0F",type:"custom"},{id:"4",name:"Mom's House",address:"321 Family Dr, Suburb",icon:"\u2764\uFE0F",type:"custom"}]),[Je,$i]=s.exports.useState(null),[We,Ho]=s.exports.useState({firstName:"Avi",lastName:"Selassie",email:"demo@rider.com",phone:"+1 (555) 123-4567",rating:4.8,totalRides:47,monthlySpending:247,dateOfBirth:"1990-01-15",emergencyContact:"Jane Doe - +1 (555) 987-6543",music:!0,conversation:!1,temperature:"cool",corporateDiscount:null}),[se,Ke]=s.exports.useState({firstName:"Avi",lastName:"Selassie",email:"demo@rider.com",phone:"+1 (555) 123-4567",dateOfBirth:"1990-01-15",emergencyContact:"Jane Doe - +1 (555) 987-6543",music:!0,conversation:!1,temperature:"cool",profilePicture:""}),[uo,Oi]=s.exports.useState([]),Kt=async()=>{try{const a=await fetch("/api/users/trips?limit=5",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}});if(a.ok){const g=await a.json();Oi(g.trips||[]),console.log("\u2705 Loaded recent trips:",g.trips)}else console.warn("Failed to load recent trips"),Oi([])}catch(a){console.warn("Error loading recent trips:",a),Oi([])}},Vo=a=>{console.log("\u{1F4F1} Book Again clicked for trip:",a.from,"\u2192",a.to),console.log("\u{1F4CD} Trip coordinates:",a.pickupCoords,"\u2192",a.destinationCoords),nt({lat:a.pickupCoords.lat,lng:a.pickupCoords.lng}),m(a.to),x({lat:a.destinationCoords.lat,lng:a.destinationCoords.lng}),wt({lat:a.destinationCoords.lat,lng:a.destinationCoords.lng}),te("none"),ft(a.to),console.log("\u2705 Book Again form pre-filled successfully")},ho=a=>{if(!a.trim())return;const g={id:Date.now().toString(),sender:"user",message:a.trim(),timestamp:new Date().toISOString()};rt(S=>[...S,g]),et(""),setTimeout(()=>{const S={id:(Date.now()+1).toString(),sender:"support",message:"Thank you for your message. A support agent will be with you shortly.",timestamp:new Date().toISOString()};rt(E=>[...E,S])},2e3)},Go=()=>{window.location.href="tel:479-367-1337"},[Me,Yo]=s.exports.useState([{id:"economy",name:"Economy",description:"Compact cars \u2022 Budget-friendly",icon:Sp,price:12.5,eta:8,multiplier:1,hasSurge:!1,surgeMultiplier:1},{id:"standard",name:"Standard",description:"Mid-size sedans \u2022 Comfortable",icon:wp,price:14.5,eta:5,multiplier:1.2,hasSurge:!1,surgeMultiplier:1},{id:"xl",name:"XL",description:"SUVs & minivans \u2022 Up to 6 passengers",icon:kp,price:18.75,eta:10,multiplier:1.5,hasSurge:!1,surgeMultiplier:1},{id:"premium",name:"Premium",description:"Luxury vehicles \u2022 Premium experience",icon:Cp,price:22.9,eta:7,multiplier:1.8,hasSurge:!1,surgeMultiplier:1}]);s.exports.useEffect(()=>{const a=localStorage.getItem("userToken"),g=localStorage.getItem("userData");if(a&&g)try{const S=JSON.parse(g);S.id="550e8400-e29b-41d4-a716-446655440002",n(S),console.log("\u2705 Rider user loaded with correct ID:",S)}catch(S){console.error("Error parsing user data:",S),localStorage.removeItem("userToken"),localStorage.removeItem("userData")}else{const S={id:"550e8400-e29b-41d4-a716-446655440002",name:"Avi Selassie",email:"test@rider.com",phone:"+1 (555) 123-4567"};n(S),console.log("\u2705 Default rider user set with correct ID:",S)}},[]),s.exports.useEffect(()=>{console.log("\u{1F5FA}\uFE0F RiderApp Google Maps initializing (auto-refresh paused)"),go(),Hr(),qr(),$r(),Jo(),Kt()},[]),s.exports.useEffect(()=>{if(typeof window<"u"&&window.io&&r)try{const a=window.io();return i.current=a,console.log("\u{1F4E1} Rider connecting to Socket.IO with user:",r),a.emit("rider-connect",{riderId:r.id,name:`${r.firstName||"Rider"} ${r.lastName||""}`,location:{lat:(Fe==null?void 0:Fe.lat)||36.3729,lng:(Fe==null?void 0:Fe.lng)||-94.2088},status:"online"}),a.on("driver-availability-update",g=>{console.log("\u{1F4E1} Received driver availability update:",g),H(S=>S&&{...S,availableDrivers:g.totalDrivers,timestamp:g.timestamp}),Fe&&tt&&gt(Fe,tt,k)}),a.on("pending-requests-update",g=>{console.log("\u{1F4CB} Received pending requests update:",g),H(S=>S&&{...S,pendingRequests:g.pendingRequests,timestamp:g.timestamp}),Fe&&tt&&gt(Fe,tt,k)}),a.on("finding-driver",g=>{try{console.log("\u{1F3AF} Finding driver event received:",g),st("searching"),console.log("\u{1F4CD} Cascading driver search started for ride:",g.rideId)}catch(S){console.error("\u274C Error handling finding-driver event:",S)}}),a.on("ride-accepted",g=>{var S,E,_;try{if(console.log("\u2705 Ride accepted by driver:",g),kt("found"),console.log("\u{1F389} FLASHING GREEN LIGHTS: Progressive lights now flashing - driver found!"),Ge(g.ride),co(g.driver),(S=g.driver)!=null&&S.location){jo(g.driver.location),qo(!0),console.log("\u{1F5FA}\uFE0F Driver tracking initialized:",g.driver.location);const ie=((E=g.ride)==null?void 0:E.pickup_location)||Fe;ie?(fo(g.driver.location,ie),console.log("\u{1F5FA}\uFE0F Showing route from driver to pickup:",g.driver.location,"to",ie)):console.log("\u26A0\uFE0F No pickup location available for driver directions")}setTimeout(()=>{st("matched"),te("tracking")},2e3);const N=((_=g.driver)==null?void 0:_.name)||"Your driver";re(`\u{1F697} ${N} accepted your ride! Heading your way.`,"success"),console.log("\u{1F389} Driver matched successfully via cascading system")}catch(N){console.error("\u274C Error handling ride acceptance:",N)}}),a.on("no-drivers-accepted",g=>{try{console.log("\u274C No drivers accepted ride:",g),st("idle"),kt("hidden"),re("\u{1F614} No drivers available right now. Please try again in a few minutes.","error"),console.log("\u{1F494} Cascading driver search failed after trying all available drivers")}catch(S){console.error("\u274C Error handling no-drivers-accepted event:",S)}}),a.on("driver-location-update",g=>{try{console.log("\u{1F4CD} Driver location update received:",g),ut&&pe&&g.driverId===(pt==null?void 0:pt.driverId)&&(jo(g.location),g.eta&&Gt(g.eta),g.distance&&Li(g.distance),console.log("\u{1F5FA}\uFE0F Driver location updated on map:",g.location))}catch(S){console.error("\u274C Error handling driver location update:",S)}}),console.log("\u{1F517} Rider app connected to WebSocket for driver updates"),()=>{try{a.disconnect()}catch(g){console.error("\u274C Error disconnecting socket:",g)}}}catch(a){console.error("\u274C Error initializing WebSocket:",a)}},[r,Fe,tt]),s.exports.useEffect(()=>{var a;if(l&&ri&&ut){mi&&mi.setMap(null);const g=new window.google.maps.Marker({position:ri,map:l,title:`${(pt==null?void 0:pt.name)||"Your Driver"} - ${((a=pt==null?void 0:pt.vehicle)==null?void 0:a.type)||"Vehicle"}`,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <circle cx="16" cy="16" r="15" fill="#3b82f6" stroke="#ffffff" stroke-width="2"/>
              <text x="16" y="20" text-anchor="middle" fill="white" font-size="16" font-family="Arial">\u{1F697}</text>
            </svg>
          `),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)},animation:window.google.maps.Animation.DROP});if(Uo(g),console.log("\u{1F5FA}\uFE0F Driver marker created at:",ri),p){const S=new window.google.maps.LatLngBounds;S.extend(p),S.extend(ri),l.fitBounds(S,{padding:50})}}return()=>{mi&&!ut&&(mi.setMap(null),Uo(null))}},[l,ri,ut,pt]);const Jo=async()=>{try{const a=await fetch("/api/users/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}}).catch(g=>(console.warn("Profile fetch failed, using defaults:",g),null));if(a&&a.ok){const g=await a.json().catch(S=>(console.warn("Profile JSON parse failed:",S),null));g&&(console.log("\u{1F464} Loaded user profile:",g),console.log("\u{1F4BC} Corporate discount data:",g.corporateDiscount),Ho({firstName:g.firstName||"Avi",lastName:g.lastName||"Selassie",email:g.email||"demo@rider.com",phone:g.phone||"+1 (555) 123-4567",rating:g.rating||4.8,totalRides:g.totalRides||47,monthlySpending:g.monthlySpending||247,dateOfBirth:se.dateOfBirth,emergencyContact:se.emergencyContact,music:se.music,conversation:se.conversation,temperature:se.temperature,corporateDiscount:g.corporateDiscount||null}),Ke(S=>({...S,firstName:g.firstName||"Avi",lastName:g.lastName||"Selassie",email:g.email||"demo@rider.com",phone:g.phone||"+1 (555) 123-4567",dateOfBirth:g.dateOfBirth||S.dateOfBirth,emergencyContact:g.emergencyContact||S.emergencyContact,music:g.musicPreference!==void 0?g.musicPreference:S.music,conversation:g.conversationPreference!==void 0?g.conversationPreference:S.conversation,temperature:g.temperaturePreference||S.temperature,profilePicture:g.profilePicture||S.profilePicture})))}else console.log("\u{1F464} Using default profile data"),console.log("\u{1F4BC} No corporate discount data found in API response")}catch(a){console.warn("\u274C Failed to load user profile, using defaults:",a)}},$r=async()=>{try{if(!window.Stripe){const a=document.createElement("script");a.src="https://js.stripe.com/v3/",a.async=!0,document.head.appendChild(a),a.onload=()=>{const g="pk_test_51S1f9lHNayezoWpbNnfXsC91OeQIjkLTYo6Ph6t5ALBB1nVTHrwH6qmszjtZxCxX2uPqz7cNv6IoFWpvwUHsDJWJ00fCxrfblx";window.stripe=window.Stripe(g),console.log("\u2705 Stripe initialized successfully")}}}catch(a){console.error("\u274C Failed to initialize Stripe:",a)}};s.exports.useEffect(()=>{if(Me.length>0&&!Te){const a=Me.find(g=>g.id===k);a&&(Di(a),console.log("Initial vehicle selected:",a))}},[Me,k,Te]),s.exports.useEffect(()=>{p&&u&&ke.length>=0&&setTimeout(()=>{console.log("\u{1F504} Stops changed - auto-recalculating route..."),li(p,u),gt(p,u,k)},100)},[ke,p,u,k]);const go=()=>{if(window.google&&window.google.maps){console.log("\u{1F5FA}\uFE0F Google Maps API already loaded - reusing existing instance"),Or();return}if(document.querySelectorAll('script[src*="maps.googleapis.com"]').forEach(S=>{const E=S;(E.src.includes("%VITE_GMAPS_KEY%")||E.src.includes("YOUR_GOOGLE_MAPS_API_KEY"))&&(console.log("\u{1F5FA}\uFE0F Removing broken Google Maps script from RiderApp"),S.remove())}),document.querySelector('script[src*="maps.googleapis.com"][src*="AIza"]')){console.log("\u{1F5FA}\uFE0F Valid Google Maps script already exists - waiting for load"),window.google&&window.google.maps&&Or();return}{console.error("\u274C Google Maps API key not found in RiderApp. Please check your Replit Secrets."),$(!1);return}},Or=()=>{if(!o.current||!window.google||!window.google.maps){console.error("Map container or Google Maps API not available");return}try{const a=new window.google.maps.Map(o.current,{center:{lat:36.3729,lng:-94.2088},zoom:13,mapTypeId:"roadmap",disableDefaultUI:!0,zoomControl:!0,gestureHandling:"cooperative"});d(a),$(!0),console.log("Map initialized");const g=new window.google.maps.places.AutocompleteService;T(g),bi(a)}catch(a){console.error("Error initializing map:",a),$(!1)}},bi=a=>{if(navigator.geolocation){console.log("\u{1F4CD} Requesting user location..."),console.log("\u{1F6A8} FORCING FRESH GPS - CLEARING ANY BROWSER CACHE"),typeof navigator.permissions<"u"&&navigator.permissions.query({name:"geolocation"}).then(function(S){console.log("\u{1F511} Geolocation permission:",S.state)});const g={enableHighAccuracy:!0,timeout:2e4,maximumAge:0};navigator.geolocation.getCurrentPosition(S=>{let E={lat:S.coords.latitude,lng:S.coords.longitude};console.log("\u2705 User location obtained:",E),console.log("\u2705 REAL GPS Location obtained:",E),console.log("\u{1F4D0} GPS Accuracy:",S.coords.accuracy,"meters"),console.log("\u{1F30D} Lat/Lng:",`${E.lat}, ${E.lng}`),so(S.coords.accuracy),S.coords.accuracy>1e3&&(console.log("\u26A0\uFE0F Poor GPS accuracy detected - showing calibration option"),Oo(!0)),Math.abs(E.lat-25.5961)<.01&&Math.abs(E.lng- -80.3595)<.01&&(console.log("\u{1F6A8} DETECTED STUCK MIAMI LOCATION - OVERRIDING TO BENTONVILLE"),E={lat:36.368097,lng:-94.254028},console.log("\u2705 LOCATION CORRECTED TO:",`${E.lat}, ${E.lng}`)),h(E),nt(E),a&&(a.setCenter(E),a.setZoom(16),ni(a,E));const _=document.createElement("div");_.innerHTML=`
            <div style="
              position: fixed; 
              top: 80px; 
              left: 50%; 
              transform: translateX(-50%); 
              background: #10b981; 
              color: white; 
              padding: 12px 20px; 
              border-radius: 8px; 
              font-size: 14px; 
              font-weight: 600; 
              z-index: 1000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            ">
              \u{1F4CD} LIVE GPS: ${S.coords.accuracy<50?"High precision":S.coords.accuracy<100?"Good accuracy":"Approximate"} (\xB1${Math.round(S.coords.accuracy)}m)
            </div>
          `,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},4e3)},S=>{console.error("\u274C Geolocation error:",S);let E="";switch(S.code){case S.PERMISSION_DENIED:E="GPS access denied. Please enable location services and reload.",console.log("\u{1F6AB} User denied GPS permission");break;case S.POSITION_UNAVAILABLE:E="GPS unavailable. Check device settings and try again.",console.log("\u{1F4E1} GPS/Location services unavailable");break;case S.TIMEOUT:E="GPS timeout. Trying again with network location...",console.log("\u23F0 GPS request timeout - will retry"),setTimeout(()=>{navigator.geolocation.getCurrentPosition(N=>{const ie={lat:N.coords.latitude,lng:N.coords.longitude};console.log("\u{1F4CD} Network location fallback:",ie),h(ie),nt(ie),a&&(a.setCenter(ie),ni(a,ie))},()=>{console.log("\u26A0\uFE0F All location attempts failed - using Bentonville, AR");const N={lat:36.3729,lng:-94.2088};h(N),nt(N),a&&(a.setCenter(N),a.setZoom(13),ni(a,N)),setTimeout(()=>{alert("\u{1F4CD} Location access denied. Using Bentonville, AR as default location. You can manually set your pickup location.")},500)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},1e3);break;default:E="GPS error. Using approximate location.",console.log("\u2753 Unknown geolocation error");break}const _=document.createElement("div");if(_.innerHTML=`
            <div style="
              position: fixed; 
              top: 80px; 
              left: 50%; 
              transform: translateX(-50%); 
              background: #ef4444; 
              color: white; 
              padding: 12px 20px; 
              border-radius: 8px; 
              font-size: 14px; 
              font-weight: 600; 
              z-index: 1000;
              box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            ">
              \u26A0\uFE0F ${E}
            </div>
          `,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},5e3),S.code!==S.TIMEOUT){const N={lat:36.3729,lng:-94.2088};console.log("\u{1F4CD} Using fallback location: Bentonville, AR"),h(N),nt(N),a&&(a.setCenter(N),ni(a,N))}},g)}else{console.error("\u274C Geolocation not supported by this browser");const g={lat:36.3729,lng:-94.2088};h(g),nt(g),a&&(a.setCenter(g),ni(a,g))}},ni=(a,g)=>{if(!window.google||!window.google.maps)return;z&&z.setMap(null);const S=new window.google.maps.Marker({position:g,map:a,draggable:!0,title:"Drag to adjust pickup location",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="20" height="24" viewBox="0 0 20 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 0C4.477 0 0 4.477 0 10c0 10 10 14 10 14s10-4 10-14C20 4.477 15.523 0 10 0z" fill="#ef4444"/>
            <circle cx="10" cy="10" r="4" fill="white"/>
            <circle cx="10" cy="10" r="2" fill="#ef4444"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(20,24),anchor:new window.google.maps.Point(10,24)}});S.addListener("dragstart",()=>{console.log("\u{1F4CD} Adjusting pickup location..."),re("\u{1F4CD} Drag the pin to adjust pickup location","info")}),S.addListener("dragend",E=>{const _={lat:E.latLng.lat(),lng:E.latLng.lng()};console.log("\u{1F4CD} New pickup location:",_),nt(_),h(_),new window.google.maps.Geocoder().geocode({location:_},(ie,ae)=>{if(ae==="OK"&&ie[0]){const de=ie[0].formatted_address;console.log("\u{1F4CD} Pickup address updated:",de),re(`\u{1F4CD} Pickup set to: ${de}`,"success")}}),u&&(li(_,u),gt(_,u,k))}),y(S)},jr=a=>{if(!ze)return;const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};ze.getPlacePredictions(g,(S,E)=>{if(E===window.google.maps.places.PlacesServiceStatus.OK&&S){const _=S.map(N=>({place_id:N.place_id,description:N.description,main_text:N.structured_formatting.main_text,secondary_text:N.structured_formatting.secondary_text||""}));le(_),ee(!0)}else le([]),ee(!1)})},Ur=a=>{if(!ze)return;const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};ze.getPlacePredictions(g,(S,E)=>{if(E===window.google.maps.places.PlacesServiceStatus.OK&&S){const _=S.map(N=>({place_id:N.place_id,description:N.description,main_text:N.structured_formatting.main_text,secondary_text:N.structured_formatting.secondary_text||""}));M(_),j(!0)}else M([]),j(!1)})},ji=a=>{m(a.description),j(!1),new window.google.maps.places.PlacesService(l).getDetails({placeId:a.place_id,fields:["geometry","name","formatted_address"]},(S,E)=>{if(E===window.google.maps.places.PlacesServiceStatus.OK&&S.geometry){const _={lat:S.geometry.location.lat(),lng:S.geometry.location.lng()};x(_),wt(_),l&&p&&(ai(l,_,S.name),li(p,_),gt(p,_,k))}})},ai=(a,g,S)=>{!window.google||!window.google.maps||new window.google.maps.Marker({position:g,map:a,title:S,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="12" height="12" fill="#1f2937" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(16,16),anchor:new window.google.maps.Point(8,8)}})},li=(a,g)=>{if(!a||!l||!window.google||!window.google.maps)return;const S=new window.google.maps.DirectionsService,E=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#3b82f6",strokeWeight:4,strokeOpacity:.9}});E.setMap(l),O&&O.setMap(null),U(E),console.log("\u{1F6E3}\uFE0F Processing stops for route:",ke.map(ie=>({address:ie.address,confirmed:ie.confirmed,hasCoords:!!ie.coordinates})));const _=ke.filter(ie=>ie.confirmed&&ie.coordinates).map(ie=>({location:ie.coordinates,stopover:!0}));console.log("\u{1F3AF} Valid waypoints for route:",_.length),console.log("\u{1F3AF} WAYPOINT DETAILS:",_);const N={origin:a,destination:g,travelMode:window.google.maps.TravelMode.DRIVING};_.length>0?(N.waypoints=_,N.optimizeWaypoints=!1,console.log("\u2705 ADDING",_.length,"WAYPOINTS TO ROUTE REQUEST")):console.log("\u26A0\uFE0F NO WAYPOINTS - Direct route only"),S.route(N,(ie,ae)=>{if(ae==="OK"){E.setDirections(ie);const de=new window.google.maps.LatLngBounds;de.extend(a),de.extend(g),_.forEach(Ce=>{Ce.location&&de.extend(Ce.location)}),l.fitBounds(de,{padding:80}),console.log(`\u{1F5FA}\uFE0F Route calculated with ${_.length} stops`)}else console.error("Route calculation failed:",ae)})},fo=(a,g)=>{if(!a||!g||!l||!window.google||!window.google.maps){console.log("\u274C Cannot show driver directions - missing required data");return}const S=new window.google.maps.DirectionsService,E=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#22c55e",strokeOpacity:.8,strokeWeight:4}});E.setMap(l);const _={origin:a,destination:g,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!1,avoidHighways:!1,avoidTolls:!1};console.log("\u{1F5FA}\uFE0F Calculating driver route from:",a,"to rider:",g),S.route(_,(N,ie)=>{var ae,de;if(ie==="OK"){E.setDirections(N);const Ce=new window.google.maps.LatLngBounds;Ce.extend(a),Ce.extend(g),l.fitBounds(Ce,{padding:80});const At=N.routes[0].legs[0],he=((ae=At.duration)==null?void 0:ae.text)||"Unknown",Se=((de=At.distance)==null?void 0:de.text)||"Unknown";console.log(`\u2705 Driver route calculated: ${Se}, ${he}`),typeof Gt=="function"&&Gt(he),typeof Li=="function"&&Li(Se)}else console.error("\u274C Driver route calculation failed:",ie)})},gt=async(a,g,S)=>{if(!!a)try{const E=ke.filter(be=>be.confirmed&&be.coordinates).map(be=>be.coordinates),_=await fetch("/api/rides/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pickup:a,destination:g,rideType:S,stops:E})}).catch(be=>(console.warn("Fare estimate fetch failed:",be),null));if(_&&_.ok){const be=await _.json().catch(Ro=>(console.warn("Fare estimate JSON parse failed:",Ro),null));if(be&&be.success&&be.fareEstimate){f(be.fareEstimate),be.fareEstimate.surge?H({isActive:be.fareEstimate.surge.isActive,multiplier:be.fareEstimate.surge.multiplier,factors:be.fareEstimate.surge.factors||[],demandLevel:be.fareEstimate.surge.demandLevel,availableDrivers:be.fareEstimate.surge.availableDrivers,pendingRequests:be.fareEstimate.surge.pendingRequests,amount:be.fareEstimate.surge.amount}):H(null),Ui(a,g);return}}console.log(`\u{1F4B0} Using fallback fare calculation with ${ke.length} stops`);let N=0,ie=a;const ae=ke.filter(be=>be.confirmed&&be.coordinates);console.log(`\u{1F6E3}\uFE0F Calculating fare for ${ae.length} confirmed stops:`,ae.map(be=>be.address));for(const be of ae){const Ro=xo(ie.lat,ie.lng,be.coordinates.lat,be.coordinates.lng);console.log(`\u{1F4CF} Distance to "${be.address}": ${Ro.toFixed(2)} km`),N+=Ro,ie=be.coordinates}const de=xo(ie.lat,ie.lng,g.lat,g.lng);console.log(`\u{1F4CF} Final distance to destination: ${de.toFixed(2)} km`),N+=de;const Ce=N*.621371,Xe=Math.max(5,Math.round(Ce/.5+3)),At=ae.length*2,he=Xe+At,Se=Me.find(be=>be.id===S),Pe=Se!=null&&Se.multiplier?2.5*Se.multiplier:2.5,si=ae.length*1;console.log(`\u{1F4B0} FARE BREAKDOWN:
        \u2022 Total Distance: ${N.toFixed(2)} km (${Ce.toFixed(2)} miles)
        \u2022 Base Fare: $${Pe.toFixed(2)}
        \u2022 Distance Fare: $${(Ce*1.25).toFixed(2)} (${Ce.toFixed(2)} miles \xD7 $1.25)
        \u2022 Time Fare: $${(he*.35).toFixed(2)} (${he.toFixed(1)} min \xD7 $0.35)
        \u2022 Stop Wait Fee: $${si.toFixed(2)} (${ae.length} stops \xD7 2min \xD7 $0.50/min)
        \u2022 Stop Wait Time: +${At.toFixed(0)} minutes`);const cr={baseFare:Pe,distanceFare:Ce*1.25,timeFare:he*.35,stopSurcharge:si,total:Pe+Ce*1.25+he*.35+si,estimatedMinutes:he,distanceMiles:Ce,estimatedDistance:Ce,estimatedTravelTime:he,stopCount:ae.length};console.log(`\u{1F4B0} Calculated fare: $${cr.total.toFixed(2)} (${ae.length} stops, ${Ce.toFixed(1)} miles, ${he.toFixed(0)} min)`),f(cr),Ui(a,g)}catch(E){console.warn("Fare calculation error, using fallback:",E),Ui(a,g)}},Ui=async(a,g)=>{const S=ke.filter(Se=>Se.confirmed&&Se.coordinates);let E=6,_=15,N=1,ie=!1;try{console.log("\u{1F504} Updating ride options with backend distance calculation...");const Pe=await(await fetch("/api/rides/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pickup:a,destination:g,rideType:"standard"})})).json();Pe.success&&Pe.fareEstimate&&(E=Pe.fareEstimate.estimatedDistance||6,_=Pe.fareEstimate.estimatedTravelTime||15,Pe.fareEstimate.surge&&(N=Pe.fareEstimate.surge.multiplier||1,ie=Pe.fareEstimate.surge.isActive||!1,console.log(`\u{1F3AF} Backend data: ${E.toFixed(2)} miles, ${_} min, ${N.toFixed(1)}x surge`),H({isActive:Pe.fareEstimate.surge.isActive,multiplier:Pe.fareEstimate.surge.multiplier,factors:Pe.fareEstimate.surge.factors||[],demandLevel:Pe.fareEstimate.surge.demandLevel,availableDrivers:Pe.fareEstimate.surge.availableDrivers,pendingRequests:Pe.fareEstimate.surge.pendingRequests,amount:Pe.fareEstimate.surge.amount})))}catch(Se){console.error("Backend ride option pricing error:",Se)}const ae=S.length*2.5,de=_+ae,Ce={economy:2.1,standard:2.5,xl:3.5,premium:4.5},Xe={economy:1.15,standard:1.25,xl:1.65,premium:1.85},At={economy:.3,standard:.35,xl:.45,premium:.55},he=Me.map(Se=>{var Pn;const Pe=Ce[Se.id]||Ce.standard,si=Xe[Se.id]||Xe.standard,cr=At[Se.id]||At.standard,be=S.length*1.5,Mn=(Pe+E*si+de*cr+be)*N,ja=(Pn=We.corporateDiscount)!=null&&Pn.isActive?Mn*(parseFloat(We.corporateDiscount.discountPercentage)/100):0,Ua=Mn-ja;return{...Se,price:Number(Ua.toFixed(2)),hasSurge:ie,surgeMultiplier:N,eta:Math.max(3,Math.round(de+Math.random()*2))}});he.sort((Se,Pe)=>{const si={economy:1,standard:2,xl:3,premium:4};return(si[Se.id]||5)-(si[Pe.id]||5)});for(let Se=1;Se<he.length;Se++)he[Se].price<=he[Se-1].price&&(he[Se].price=Number((he[Se-1].price*1.15).toFixed(2)));Yo(he)},xo=(a,g,S,E)=>{const N=Bt(S-a),ie=Bt(E-g),ae=Math.sin(N/2)*Math.sin(N/2)+Math.cos(Bt(a))*Math.cos(Bt(S))*Math.sin(ie/2)*Math.sin(ie/2),de=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return 6371*de},Bt=a=>a*(Math.PI/180),ft=a=>{m(a),a.length>2?Ur(a):(M([]),j(!1))},qr=async()=>{try{const a=await fetch("/api/settings/vehicle-types").catch(g=>(console.warn("Vehicle types fetch failed:",g),null));if(a&&a.ok){const g=await a.json().catch(S=>(console.warn("Vehicle types JSON parse failed:",S),null));if(g&&g.success&&g.vehicleTypes){const S=g.vehicleTypes.map(E=>({id:E.id,name:E.name,description:E.description,icon:E.icon,price:E.baseFare,eta:5+Math.floor(Math.random()*10),multiplier:E.baseFare/2.5,hasSurge:!1,surgeMultiplier:1}));Yo(S),console.log("\u2705 Loaded vehicle types from API");return}}console.log("\u{1F697} Using default vehicle types")}catch(a){console.warn("Error loading vehicle types, using defaults:",a)}},Hr=async()=>{mt(!0);try{const a=await fetch("/api/users/550e8400-e29b-41d4-a716-446655440000/payment-methods",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`}}).catch(S=>(console.warn("Payment methods fetch failed:",S),null));if(a&&a.ok){const S=await a.json().catch(E=>(console.warn("Payment methods JSON parse failed:",E),null));if(S&&S.paymentMethods){const E=S.paymentMethods.map(N=>({id:N.id,name:`${(N.brand||"Card").toUpperCase()} ****${N.last4||"****"}`,details:`Expires ${N.exp_month||"12"}/${N.exp_year||"25"}`,icon:He(N.brand),isDefault:N.isDefault||!1,type:N.type||"credit"}));Re(E);const _=E.find(N=>N.isDefault);_?fe(_):E.length>0&&fe(E[0]);return}}console.log("\u{1F4B3} Using demo payment methods");const g=[{id:"demo_1",name:"Visa ****1234",details:"Expires 12/25",icon:"\u{1F4B3}",isDefault:!0,type:"credit"},{id:"demo_2",name:"Apple Pay",details:"iPhone 15 Pro",icon:"\u{1F34E}",isDefault:!1,type:"apple_pay"},{id:"demo_3",name:"Google Pay",details:"Gmail Account",icon:"\u{1F535}",isDefault:!1,type:"google_pay"}];Re(g),fe(g[0])}catch(a){console.warn("Error loading payment methods, using fallback:",a);const g=[{id:"demo_1",name:"Visa ****1234",details:"Expires 12/25",icon:"\u{1F4B3}",isDefault:!0,type:"credit"},{id:"demo_2",name:"Apple Pay",details:"iPhone 15 Pro",icon:"\u{1F34E}",isDefault:!1,type:"apple_pay"}];Re(g),fe(g[0])}finally{mt(!1)}},He=a=>{switch(a==null?void 0:a.toLowerCase()){case"visa":return"\u{1F4B3}";case"mastercard":return"\u{1F4B3}";case"amex":return"\u{1F4B3}";case"discover":return"\u{1F4B3}";case"apple_pay":return"\u{1F34E}";case"google_pay":return"\u{1F535}";default:return"\u{1F4B3}"}},Ie=a=>{const g=a.replace(/\s+/g,"").replace(/[^0-9]/gi,""),S=g.match(/\d{4,16}/g),E=S&&S[0]||"",_=[];for(let N=0,ie=E.length;N<ie;N+=4)_.push(E.substring(N,N+4));return _.length?_.join(" "):g},vi=a=>{const g=a.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return g.length>=2?g.substring(0,2)+"/"+g.substring(2,4):g},Si=async a=>{a.preventDefault(),mt(!0);try{if(!window.stripe)throw new Error("Stripe not initialized");const g=await fetch("/api/users/550e8400-e29b-41d4-a716-446655440000/setup-intent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({paymentMethodTypes:["card"]})});if(!g.ok)throw new Error("Failed to create setup intent");const{client_secret:S}=await g.json(),{setupIntent:E,error:_}=await window.stripe.confirmCardSetup(S,{payment_method:{card:{number:ht.cardNumber.replace(/\s/g,""),exp_month:parseInt(ht.expiryDate.split("/")[0]),exp_year:parseInt("20"+ht.expiryDate.split("/")[1]),cvc:ht.cvv},billing_details:{name:ht.name}}});if(_)throw new Error(_.message);const N=await fetch("/api/users/550e8400-e29b-41d4-a716-446655440000/payment-methods",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({paymentMethodId:E.payment_method,isDefault:ge.length===0})});if(!N.ok)throw new Error("Failed to save payment method");const ie=await N.json();Re(ae=>[...ae,ie.paymentMethod]),Yt({cardNumber:"",expiryDate:"",cvv:"",name:"",type:"credit"}),te("payments"),re("\u{1F4B3} Card added successfully!","success")}catch(g){console.error("Error adding card:",g),re("\u274C Failed to add card: "+g.message,"error")}finally{mt(!1)}},mo=async a=>{Ut(a),te("add-wallet")},qi=async(a,g)=>{mt(!0);try{let S,E,_;if(a==="apple_pay"){if(S="Apple Pay",E="\u{1F34E}",_=g.deviceName||"Touch ID / Face ID",!g.appleId||!g.deviceName)throw new Error("Apple ID and device information required");console.log("\u{1F34E} Setting up Apple Pay with:",g)}else if(a==="google_pay"){if(S="Google Pay",E="\u{1F535}",_=g.googleEmail||"Gmail Account",!g.googleEmail)throw new Error("Google account email required");console.log("\u{1F535} Setting up Google Pay with:",g)}if(ge.find(ae=>ae.name===S))throw new Error(`${S} is already added`);await new Promise(ae=>setTimeout(ae,2e3));const ie={id:`pm_${a}_${Date.now()}`,name:S,details:_,icon:E,isDefault:g.makeDefault||ge.length===0,type:a};Re(ae=>[...ae,ie]),ie.isDefault&&(fe(ie),Re(ae=>ae.map(de=>de.id===ie.id?de:{...de,isDefault:!1}))),re(`${S} added successfully!`,"success"),te("payments")}catch(S){console.error(`Error adding ${a}:`,S),re(`Failed to add ${a}: ${S.message}`,"error")}finally{mt(!1)}},Vr=async a=>{if(!!confirm("Are you sure you want to delete this payment method?")){mt(!0);try{const g=ge.find(S=>S.id===a);if(Re(S=>S.filter(E=>E.id!==a)),(ne==null?void 0:ne.id)===a){const S=ge.filter(E=>E.id!==a);fe(S[0]||null)}re(`${(g==null?void 0:g.name)||"Payment method"} deleted successfully`,"success")}catch(g){console.error("Error deleting payment method:",g),re("Failed to delete payment method. Please try again.","error")}finally{mt(!1)}}},re=(a,g="info")=>{const S={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"},E=document.createElement("div");E.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${S[g]};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,E.textContent=a,document.body.appendChild(E),setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},4e3)},Ko=async()=>{var a,g,S,E,_,N,ie;st("requesting"),kt("searching"),je(!0);try{if(!Fe||!tt||!c.trim())throw new Error("Please set both pickup and destination locations");if(!Te)throw new Error("Please select a vehicle type");console.log("\u{1F697} Booking ride with data:",{pickup:Fe,destination:tt,rideType:Te.id,paymentMethod:ne==null?void 0:ne.id});const ae=await fetch("/api/rides/request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({rider_id:(r==null?void 0:r.id)||"550e8400-e29b-41d4-a716-446655440002",pickup:{address:"Current Location",coordinates:Fe},destination:{address:c,coordinates:tt},rideType:Te.id,paymentMethodId:ne==null?void 0:ne.id,scheduledTime:null,riderPreferences:{music:We.music,conversation:We.conversation,temperature:We.temperature}})}).catch(he=>{throw console.error("Fetch error:",he),new Error("Network connection failed")});console.log("\u{1F4E1} Ride request response status:",ae.status);const de=await ae.text().catch(he=>{throw console.error("Failed to read response text:",he),new Error("Invalid server response")});if(console.log("\u{1F4E1} Raw response:",de),!ae.ok){let he="Failed to request ride";try{const Se=JSON.parse(de);he=Se.message||Se.error||he}catch(Se){console.error("Failed to parse error response:",Se),he=`Server error (${ae.status})`}throw new Error(he)}let Ce;try{Ce=JSON.parse(de)}catch(he){throw console.error("Failed to parse successful response:",he),new Error("Invalid response from server")}let Xe=null;try{(ne==null?void 0:ne.type)==="apple_pay"?Xe=await Zr(((a=Ce.ride)==null?void 0:a.estimatedFare)||((g=Ce.ride)==null?void 0:g.estimated_fare)||Te.price):(ne==null?void 0:ne.type)==="google_pay"?Xe=await Qr(((S=Ce.ride)==null?void 0:S.estimatedFare)||((E=Ce.ride)==null?void 0:E.estimated_fare)||Te.price):(console.log("Processing traditional card payment..."),await new Promise(he=>setTimeout(he,1500)),Xe={success:!0,paymentId:"pm_"+Date.now()})}catch(he){console.error("Payment processing error:",he),Xe={success:!1,error:he.message}}if(!Xe||!Xe.success)throw new Error("Payment failed: "+((Xe==null?void 0:Xe.error)||"Unknown payment error"));const At={id:((_=Ce.ride)==null?void 0:_.id)||`ride_${Date.now()}`,pickup:Fe,destination:tt,vehicle:Te,fare:((N=Ce.ride)==null?void 0:N.estimated_fare)||((ie=Ce.ride)==null?void 0:ie.estimatedFare)||Te.price,paymentMethod:(ne==null?void 0:ne.type)||oe,paymentId:Xe.paymentId,status:"requested",requestedAt:new Date,pickupAddress:"Current Location",destinationAddress:c};Ge(At),st("searching"),te("none"),Ho(he=>({...he,totalRides:he.totalRides+1})),console.log("\u2705 Ride created:",At.id)}catch(ae){console.error("Booking error:",ae);let de=ae.message||"Unknown error occurred";de.includes("Failed to fetch")||de.includes("Network connection failed")?de="Cannot connect to server. Please check your connection.":de.includes("JSON")||de.includes("Invalid response")?de="Server communication error. Please try again.":de.includes("500")&&(de="Server error. Please try again in a moment."),re("\u274C Booking failed: "+de,"error"),st("idle")}finally{je(!1)}},wi=async(a,g,S)=>{if(!ne){re("\u274C Please select a payment method","error");return}je(!0);try{const E=await fetch(`/api/rides/${a}/tip`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({tipAmount:g,tipPercentage:S,paymentMethodId:ne.id})});if(!E.ok){const N=await E.json();throw new Error(N.error||"Failed to process tip")}const _=await E.json();return re(`\u2705 $${g.toFixed(2)} tip sent successfully!`,"success"),pe&&pe.id===a&&Ge(N=>({...N,tip:{amount:g,percentage:S,processed:!0}})),_}catch(E){throw console.error("Tip processing error:",E),re("\u274C Tip failed: "+E.message,"error"),E}finally{je(!1)}},Xo=async(a,g="Rider cancelled")=>{je(!0);try{const S=await fetch(`/api/rides/${a}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({reason:g,userType:"rider"})});if(!S.ok){const _=await S.json();throw new Error(_.error||"Failed to cancel ride")}const E=await S.json();return E.cancellation.refundAmount>0?re(`\u2705 Ride cancelled. $${E.cancellation.refundAmount} refund processed.`,"success"):re(`\u26A0\uFE0F Ride cancelled. Cancellation fee: $${E.cancellation.cancellationFee}`,"warning"),Ge(null),st("idle"),te("none"),E}catch(S){throw console.error("Cancellation error:",S),re("\u274C Cancellation failed: "+S.message,"error"),S}finally{je(!1)}},Hi=a=>{F(a),a.trim().length>2?jr(a.trim()):(le([]),ee(!1))},ki=a=>{F(a.main_text),ee(!1),new window.google.maps.Geocoder().geocode({placeId:a.place_id},(S,E)=>{if(E==="OK"&&S[0]){const _={lat:S[0].geometry.location.lat(),lng:S[0].geometry.location.lng()};console.log("\u{1F4CD} New pickup location from address:",_),nt(_),h(_),l&&(ni(l,_),l.setCenter(_)),u&&(li(_,u),gt(_,u,k)),re(`\u{1F4CD} Pickup set to: ${a.description}`,"success")}})},Vi=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){re("\u274C Voice recognition not supported in this browser","error");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",g.onstart=()=>{console.log("\u{1F3A4} Pickup voice recognition listening..."),re("\u{1F3A4} Say your pickup address...","info")},g.onresult=S=>{const E=S.results[0][0].transcript.trim();console.log("\u{1F5E3}\uFE0F Pickup voice input:",E),F(E),Hi(E)},g.onerror=S=>{console.error("Pickup voice recognition error:",S.error),re("\u274C Voice recognition failed","error")},g.onend=()=>{console.log("\u{1F3A4} Pickup voice recognition ended")},g.start()},Zo=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice recognition not supported in this browser");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",g.onstart=()=>{console.log("\u{1F3A4} Hey Pi listening...");const S=document.querySelector('[title="Hey Pi - Voice Command"]');S&&(S.style.color="#ef4444",S.style.animation="pulse 1s infinite")},g.onresult=S=>{const E=S.results[0][0].transcript.toLowerCase().trim();console.log("\u{1F5E3}\uFE0F Voice command:",E),E.includes("hey pi")||E.includes("hey pie")?Xr(E):(m(E),ft(E))},g.onerror=S=>{console.error("Voice recognition error:",S.error),Qo()},g.onend=()=>{console.log("\u{1F3A4} Voice recognition ended"),Qo()},g.start()},Gr=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice recognition not supported in this browser. Please type your address instead.");return}const a=window.SpeechRecognition||window.webkitSpeechRecognition,g=new a;g.continuous=!1,g.interimResults=!1,g.lang="en-US",oi(!0),g.onstart=()=>{console.log("\u{1F3A4} Listening for stop address...")},g.onresult=S=>{const E=S.results[0][0].transcript.trim();console.log("\u{1F5E3}\uFE0F Stop address heard:",E),Ht(E),ze&&E&&ze.getPlacePredictions({input:E,types:["establishment","geocode"],componentRestrictions:{country:"us"},locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0},(_,N)=>{if(N===window.google.maps.places.PlacesServiceStatus.OK&&_&&_.length>0){const ie=_[0];Ht(ie.description),console.log("\u{1F4CD} Voice input matched to:",ie.description)}})},g.onerror=S=>{console.error("Voice recognition error:",S.error),oi(!1),S.error==="no-speech"?alert("No speech detected. Please try again or type your address."):S.error==="not-allowed"&&alert("Microphone access denied. Please enable microphone permissions and try again.")},g.onend=()=>{console.log("\u{1F3A4} Voice recognition ended"),oi(!1)},g.start()},Yr=a=>{if(console.log("\u{1F50D} fetchStopSuggestions called with:",a),!ze){console.log("\u274C No autocompleteService available");return}const g={input:a,componentRestrictions:{country:"us"},types:["geocode","establishment"],locationBias:p?{radius:5e4,center:new window.google.maps.LatLng(p.lat,p.lng)}:void 0};console.log("\u{1F50D} Making Google Places request..."),ze.getPlacePredictions(g,(S,E)=>{if(console.log("\u{1F50D} Google Places response:",{status:E,predictions:S==null?void 0:S.length}),E===window.google.maps.places.PlacesServiceStatus.OK&&S){const _=S.map(N=>({place_id:N.place_id,description:N.description,main_text:N.structured_formatting.main_text,secondary_text:N.structured_formatting.secondary_text||""}));console.log("\u2705 Setting stop suggestions:",_.length,"items"),xi(_),Vt(!0)}else console.log("\u274C No predictions or error:",E),xi([]),Vt(!1)})},Jr=a=>{console.log("\u{1F50D} Stop input changed:",a),Ht(a),a.length>2?(console.log("\u{1F50D} Fetching stop suggestions for:",a),Yr(a)):(xi([]),Vt(!1))},Kr=a=>{Ht(a.description),Vt(!1)},Qo=()=>{const a=document.querySelector('[title="Hey Pi - Voice Command"]');a&&(a.style.color="#3b82f6",a.style.animation="none")},Xr=a=>{if(console.log("\u{1F916} Hey Pi processing:",a),a.includes("take me home"))m("Home"),ft("Home");else if(a.includes("take me to work"))m("Work"),ft("Work");else if(a.includes("airport"))m("Airport"),ft("Airport");else if(a.includes("book a ride"))c.trim()&&p?Ko():alert("Please set a destination first");else if(a.includes("show me nearby"))bi(l);else{const g=a.replace(/hey pi,?\s*/i,"").replace(/take me to\s*/i,"");g&&(m(g),ft(g))}},Zr=async a=>{try{if(!window.ApplePaySession)throw new Error("Apple Pay not available on this device");const g={countryCode:"US",currencyCode:"USD",supportedNetworks:["visa","masterCard","amex"],merchantCapabilities:["supports3DS"],total:{label:"Ride Payment",amount:(a||0).toString()}},S=new window.ApplePaySession(3,g);return new Promise((E,_)=>{const N=setTimeout(()=>{S.abort(),_(new Error("Apple Pay timeout"))},3e4);S.onvalidatemerchant=async ie=>{try{const ae=await fetch("/api/payments/apple-pay/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({validationURL:ie.validationURL})}).then(de=>de.json()).catch(de=>(console.warn("Apple Pay validation failed:",de),{success:!1}));ae.success!==!1?S.completeMerchantValidation(ae):(S.abort(),_(new Error("Merchant validation failed")))}catch(ae){S.abort(),_(ae)}},S.onpaymentauthorized=async ie=>{try{const ae=await fetch("/api/payments/apple-pay/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment:ie.payment,amount:a})}).then(de=>de.json()).catch(de=>(console.warn("Apple Pay processing failed:",de),{success:!1,error:"Processing failed"}));clearTimeout(N),ae.success?(S.completePayment(window.ApplePaySession.STATUS_SUCCESS),E(ae)):(S.completePayment(window.ApplePaySession.STATUS_FAILURE),_(new Error(ae.error||"Payment failed")))}catch(ae){clearTimeout(N),S.completePayment(window.ApplePaySession.STATUS_FAILURE),_(ae)}},S.oncancel=()=>{clearTimeout(N),_(new Error("Payment cancelled by user"))},S.begin()})}catch(g){throw console.error("Apple Pay error:",g),g}},Qr=async a=>{try{if(!window.google||!window.google.payments)throw new Error("Google Pay not available on this device");const g=new window.google.payments.api.PaymentsClient({environment:"TEST"}),S={apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["VISA","MASTERCARD","AMEX"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe","stripe:version":"2020-08-27","stripe:publishableKey":"pk_test_51S1f9lHNayezoWpbNnfXsC91OeQIjkLTYo6Ph6t5ALBB1nVTHrwH6qmszjtZxCxX2uPqz7cNv6IoFWpvwUHsDJWJ00fCxrfblx"}}}],merchantInfo:{merchantId:"merchant-id",merchantName:"\u03C0 Ride App"},transactionInfo:{totalPriceStatus:"FINAL",totalPrice:(a||0).toString(),currencyCode:"USD"}},E=await g.loadPaymentData(S).catch(N=>{throw console.warn("Google Pay load failed:",N),new Error("Failed to load Google Pay")}),_=await fetch("/api/payments/google-pay/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentData:E,amount:a})}).then(N=>N.json()).catch(N=>(console.warn("Google Pay processing failed:",N),{success:!1,error:"Processing failed"}));if(!_.success)throw new Error(_.error||"Google Pay processing failed");return _}catch(g){throw console.error("Google Pay payment error:",g),g}};return t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',display:"flex",flexDirection:"column"},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:[e("button",{onClick:()=>qe(!xe),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"8px",padding:"8px",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>a.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:a=>a.target.style.background="rgba(255,255,255,0.1)",children:e(Dd,{size:20})}),t("div",{style:{textAlign:"center"},children:[e("h1",{style:{fontSize:"48px",fontWeight:"700",margin:0},children:"\u03C0"}),e("p",{style:{fontSize:"16px",opacity:.8,margin:0,color:"#3b82f6"},children:"Your VIP Ride"})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e("button",{onClick:()=>lt(!ti),style:{width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>a.target.style.background="rgba(255,255,255,0.2)",onMouseLeave:a=>a.target.style.background="rgba(255,255,255,0.1)",children:e(Qe,{size:18})})})]}),t("div",{style:{flex:1,padding:"16px",overflow:"auto"},onClick:a=>{a.target===a.currentTarget&&(xe&&qe(!1),ti&&lt(!1),Ne!=="none"&&te("none"))},children:[t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e("h2",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Where to?"}),t("div",{style:{position:"relative",marginBottom:"12px"},children:[e($e,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#ef4444"}}),e("input",{type:"text",value:C,onChange:a=>Hi(a.target.value),placeholder:"Drag the Red Pin or enter pickup address...",style:{width:"100%",padding:"10px 44px 10px 40px",border:"2px solid #e5e7eb",borderRadius:"10px",fontSize:"12px",outline:"none",backgroundColor:"#f9fafb"},onFocus:a=>{a.target.style.borderColor="#ef4444"},onBlur:a=>{a.target.style.borderColor="#e5e7eb",setTimeout(()=>ee(!1),200)}}),e(cn,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"#3b82f6",cursor:"pointer"},onClick:()=>Vi()}),ce&&V.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #ef4444",borderTop:"none",borderRadius:"0 0 10px 10px",boxShadow:"0 4px 12px rgba(239,68,68,0.15)",zIndex:10,maxHeight:"200px",overflowY:"auto"},children:V.map(a=>t("div",{onClick:()=>ki(a),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #fef2f2",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#fef2f2",onMouseLeave:g=>g.currentTarget.style.backgroundColor="white",children:[e($e,{size:16,color:"#ef4444"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"12px"},children:a.main_text}),a.secondary_text&&e("div",{style:{fontSize:"10px",color:"#6b7280"},children:a.secondary_text})]})]},a.place_id))})]}),t("div",{style:{position:"relative"},children:[e($o,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:c,onChange:a=>ft(a.target.value),placeholder:"Tell me where you'd like to go...",style:{width:"100%",padding:"10px 80px 10px 40px",border:"2px solid #e5e7eb",borderRadius:"10px",fontSize:"12px",outline:"none"},onFocus:a=>{a.target.style.borderColor="#3b82f6",m(""),x(null),wt(null),f(null),j(!1)},onBlur:()=>setTimeout(()=>j(!1),200)}),t("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"10px"},children:[e("div",{style:{color:"#ef4444",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},onClick:()=>{console.log("\u{1F5FA}\uFE0F Manual Google Maps refresh activated"),go()},children:"\u{1F504}"}),e(cn,{size:16,style:{color:"#3b82f6",cursor:"pointer"},onClick:()=>Zo()})]}),R&&X.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 12px 12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:10,maxHeight:"200px",overflowY:"auto"},children:X.map(a=>t("div",{onClick:()=>ji(a),style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#f8fafc",onMouseLeave:g=>g.currentTarget.style.backgroundColor="white",children:[e($e,{size:16,color:"#6b7280"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937"},children:a.main_text}),a.secondary_text&&e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.secondary_text})]})]},a.place_id))})]})]}),t("div",{style:{height:"300px",backgroundColor:"#e5e7eb",borderRadius:"16px",marginBottom:"16px",overflow:"hidden",position:"relative"},children:[e("div",{ref:o,style:{width:"100%",height:"100%"}}),!B&&e("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center"},children:t("div",{children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F5FA}\uFE0F"}),e("div",{children:"Loading Map..."})]})})]}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("button",{onClick:()=>dt(!Wi),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"transparent",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",padding:"8px 0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F5D3}\uFE0F"}),e("span",{children:"Schedule Your Ride"})]}),e("span",{style:{fontSize:"18px",transform:Wi?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:"\u25BC"})]}),Wi&&t("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Select Date & Time"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e("div",{children:e("input",{type:"date",value:ct,onChange:a=>Pi(a.target.value),min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb"})}),e("div",{children:e("input",{type:"time",value:A,onChange:a=>L(a.target.value),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb"})})]})]}),ct&&A&&t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Choose Your Ride"}),e("div",{style:{marginBottom:"16px"},children:Me.map(a=>t("div",{onClick:()=>Q(a.id),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",border:`2px solid ${q===a.id?"#3b82f6":"#e5e7eb"}`,borderRadius:"8px",marginBottom:"8px",cursor:"pointer",backgroundColor:q===a.id?"#eff6ff":"white",transition:"all 0.2s ease"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("img",{src:a.icon,alt:`${a.name} car`,style:{width:"32px",height:"32px",objectFit:"contain"}}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",color:"#1f2937"},children:a.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.description})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"14px"},children:["$",a.price.toFixed(2)]}),t("div",{style:{fontSize:"11px",color:"#6b7280"},children:[a.eta," min"]})]})]},`scheduled-${a.id}`))}),e("button",{onClick:()=>{var a;Mi(!0),alert(`Ride scheduled for ${ct} at ${A} with ${(a=Me.find(g=>g.id===q))==null?void 0:a.name}`),dt(!1)},disabled:!ct||!A||!q,style:{width:"100%",padding:"16px",backgroundColor:!ct||!A||!q?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:!ct||!A||!q?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:"\u{1F4C5} Schedule Ride"})]}),it&&t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#dcfce7",borderRadius:"8px",border:"1px solid #16a34a"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#16a34a",marginBottom:"4px"},children:"\u2705 Ride Scheduled"}),t("div",{style:{fontSize:"12px",color:"#15803d"},children:[ct," at ",A," \u2022 ",(yo=Me.find(a=>a.id===q))==null?void 0:yo.name]}),e("button",{onClick:()=>{Mi(!1),Pi(""),L(""),Q("standard")},style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"transparent",border:"1px solid #16a34a",borderRadius:"6px",color:"#16a34a",fontSize:"12px",cursor:"pointer"},children:"Cancel Schedule"})]})]})]}),t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("button",{onClick:()=>Be(!K),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"transparent",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",padding:"8px 0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F6E3}\uFE0F"}),e("span",{children:"Add a Stop"})]}),e("span",{style:{fontSize:"18px",transform:K?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:"\u25BC"})]}),K&&t("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Add Stop Location"}),t("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e("input",{type:"text",value:Et,onChange:a=>Jr(a.target.value),placeholder:"Enter address or business name...",style:{width:"100%",padding:"12px 50px 12px 12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>{a.target.style.borderColor="#e5e7eb",setTimeout(()=>Vt(!1),200)}}),e("button",{onClick:Gr,style:{position:"absolute",right:"8px",padding:"8px",backgroundColor:Ue?"#ef4444":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",transition:"background-color 0.2s"},title:Ue?"Listening...":"Voice input",children:Ue?"\u{1F534}":"\u{1F3A4}"})]}),Lr&&Dt.length>0&&e("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",backgroundColor:"white",border:"2px solid #e5e7eb",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:Dt.map((a,g)=>t("button",{onClick:()=>Kr(a),style:{width:"100%",padding:"12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",borderBottom:g<Dt.length-1?"1px solid #f3f4f6":"none"},onMouseEnter:S=>S.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:S=>S.currentTarget.style.backgroundColor="transparent",children:[e("div",{style:{fontWeight:"600",fontSize:"14px",color:"#374151"},children:a.main_text}),e("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:a.secondary_text})]},a.place_id))})]}),ke.map((a,g)=>t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{backgroundColor:"#000",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600"},children:g+1}),e("span",{style:{fontSize:"14px",color:"#374151"},children:a.address})]}),e("button",{onClick:()=>{Ee(ke.filter(E=>E.id!==a.id));const S=ke.findIndex(E=>E.id===a.id);S!==-1&&_e[S]&&(_e[S].setMap(null),_i(E=>E.filter((_,N)=>N!==S))),console.log(`\u{1F4CD} Removed stop: ${a.address}`),p&&u&&(li(p,u),gt(p,u,k))},style:{padding:"4px",backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"14px"},children:"\u2715"})]},a.id)),t("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[Et&&e("button",{onClick:()=>{if(Et.trim()){const a=Et.trim();Ht(""),window.google&&window.google.maps&&new window.google.maps.Geocoder().geocode({address:a},(S,E)=>{if(E==="OK"&&S&&S[0]){const _=S[0].geometry.location,N=ke.length+1,ie={lat:_.lat(),lng:_.lng()},ae={id:Date.now().toString(),address:a,coordinates:ie,confirmed:!0};Ee([...ke,ae]);const de=new window.google.maps.Marker({position:_,map:l,title:`Stop ${N}: ${a}`,icon:{url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                                    <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                      <circle cx="16" cy="16" r="14" fill="#000000" stroke="#ffffff" stroke-width="2"/>
                                      <text x="16" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">${N}</text>
                                    </svg>
                                  `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}});_i(Ce=>[...Ce,de]),console.log(`\u{1F4CD} Added stop ${N} marker:`,a)}})}},style:{padding:"12px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u2713 Confirm Stop"}),ke.length>0&&ke.length<3&&e("button",{onClick:()=>{Ht("")},style:{padding:"12px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"+ Add Another Stop"})]}),ke.length>=3&&e("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#fef3c7",borderRadius:"6px",fontSize:"12px",color:"#92400e",textAlign:"center"},children:"Maximum 3 stops allowed"})]})]}),c&&Z&&t("div",{style:{backgroundColor:Z.isActive?"#fef2f2":"#f0f9ff",border:`2px solid ${Z.isActive?"#fca5a5":"#93c5fd"}`,borderRadius:"16px",padding:"16px",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"20px"},children:Z.isActive?"\u{1F525}":"\u{1F48E}"}),e("h3",{style:{fontSize:"16px",fontWeight:"700",color:Z.isActive?"#dc2626":"#2563eb",margin:0},children:Z.isActive?"Surge Pricing Active":"Standard Pricing"})]}),t("div",{style:{backgroundColor:Z.isActive?"#dc2626":"#10b981",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"14px",fontWeight:"700"},children:[Z.multiplier.toFixed(1),"x"]})]}),t("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"8px"},children:[e("strong",{children:"Demand Level:"})," ",Z.demandLevel," \u2022",e("strong",{children:" Drivers in your Area:"})," ",Z.availableDrivers," \u2022",e("strong",{children:" Pending Requests:"})," ",Z.pendingRequests]}),Z.factors&&Z.factors.length>0&&t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[e("strong",{children:"Surge Factors:"})," ",Z.factors.join(" \u2022 ")]}),Z.amount>0&&t("div",{style:{marginTop:"8px",fontSize:"12px",color:"#dc2626",fontWeight:"600"},children:["+$",Z.amount.toFixed(2)," surge added to base fare"]})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Choose your ride"}),Me.map(a=>{var g;return t("div",{onClick:()=>{w(a.id),Di(a),console.log("Vehicle selected:",a),Fe&&u&&gt(Fe,u,a.id)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:`2px solid ${k===a.id?"#3b82f6":"#e5e7eb"}`,borderRadius:"12px",marginBottom:"12px",cursor:"pointer",backgroundColor:k===a.id?"#eff6ff":"white",position:"relative"},children:[a.hasSurge&&t("div",{style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#ef4444",color:"white",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:["\u{1F525} ",(g=a.surgeMultiplier)==null?void 0:g.toFixed(1),"x"]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("img",{src:a.icon,alt:`${a.name} car`,style:{width:"40px",height:"40px",objectFit:"contain"}}),t("div",{children:[t("div",{style:{fontWeight:"600",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[a.name,a.hasSurge&&e("span",{style:{fontSize:"12px",color:"#ef4444"},children:"\u26A1"})]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:a.description}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[a.eta," min away"]})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontWeight:"700",color:a.hasSurge?"#ef4444":"#1f2937",fontSize:"16px"},children:["$",a.price.toFixed(2)]}),a.hasSurge&&a.surgeMultiplier&&a.surgeMultiplier>1&&e("div",{style:{fontSize:"10px",color:"#ef4444",fontWeight:"500"},children:"High demand"})]})]},a.id)})]}),k&&t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{children:"\u{1F525}"})," Surge Pricing Info"]}),e("div",{style:{padding:"4px 8px",backgroundColor:"#eff6ff",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#1d4ed8"},children:"Live"})]}),e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Current Surge Level"}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[(Gi=Me.find(a=>a.id===k))==null?void 0:Gi.name," vehicle type"]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:(er=Me.find(a=>a.id===k))!=null&&er.hasSurge?"#ef4444":"#10b981"},children:(Yi=Me.find(a=>a.id===k))!=null&&Yi.hasSurge?`${(tr=(Ci=Me.find(a=>a.id===k))==null?void 0:Ci.surgeMultiplier)==null?void 0:tr.toFixed(1)}x`:"1.0x"}),e("div",{style:{fontSize:"12px",color:(zi=Me.find(a=>a.id===k))!=null&&zi.hasSurge?"#ef4444":"#10b981",fontWeight:"600"},children:(ir=Me.find(a=>a.id===k))!=null&&ir.hasSurge?"High Demand":"Normal"})]})]})}),((Ji=Me.find(a=>a.id===k))==null?void 0:Ji.hasSurge)&&t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Surge Factors:"}),t("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F550} Peak Hours"}),e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F327}\uFE0F Weather"}),e("span",{style:{padding:"4px 8px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"6px",fontSize:"11px",fontWeight:"500"},children:"\u{1F4CD} High Demand Area"})]})]}),b?t("div",{style:{fontSize:"14px",marginBottom:"8px"},children:[e("div",{style:{fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Fare Breakdown:"}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Base Rate (",(or=Me.find(a=>a.id===k))==null?void 0:or.name,"):"]}),t("span",{children:["$",(rr=b.baseFare)==null?void 0:rr.toFixed(2)]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Distance (",(nr=b.estimatedDistance)==null?void 0:nr.toFixed(1)," mi):"]}),t("span",{children:["$",(ar=b.distanceFare)==null?void 0:ar.toFixed(2)]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[t("span",{children:["Time (",b.estimatedTravelTime," min):"]}),t("span",{children:["$",(lr=b.timeFare)==null?void 0:lr.toFixed(2)]})]}),((sr=b.surge)==null?void 0:sr.isActive)&&t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",color:"#ef4444"},children:[t("span",{children:["Surge Premium (",b.surge.multiplier.toFixed(1),"x):"]}),t("span",{children:["+$",(dr=b.surge.amount)==null?void 0:dr.toFixed(2)]})]}),We.corporateDiscount&&We.corporateDiscount.isActive&&t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",color:"#10b981"},children:[t("span",{children:["Corporate Discount (",We.corporateDiscount.discountPercentage,"%):"]}),t("span",{children:["-$",((b.total||0)*(We.corporateDiscount.discountPercentage/100)).toFixed(2)]})]}),t("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"8px",display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700"},children:[e("span",{children:"Total Estimated Fare:"}),t("span",{children:["$",(()=>{var S,E;const a=((S=Me.find(_=>_.id===k))==null?void 0:S.price)||b.total||0,g=(E=We.corporateDiscount)!=null&&E.isActive?a*(We.corporateDiscount.discountPercentage/100):0;return(a-g).toFixed(2)})()]})]})]}):e("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",textAlign:"center",color:"#6b7280",fontSize:"14px"},children:"Select a destination to see fare estimate"}),((bo=Me.find(a=>a.id===k))==null?void 0:bo.hasSurge)&&t("div",{style:{fontSize:"12px",color:"#ef4444",backgroundColor:"#fef2f2",padding:"12px",borderRadius:"8px",marginTop:"12px",border:"1px solid #fecaca",display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"16px"},children:"\u{1F525}"}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:"High demand in your area!"}),e("div",{style:{fontSize:"11px",opacity:.8},children:"Prices are higher than usual due to increased demand"})]})]})]}),ne&&t("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},onClick:()=>{te("payments"),qe(!1),lt(!1)},children:[e("span",{style:{fontSize:"24px"},children:ne.icon}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:ne.name}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:ne.details})]})]}),xe&&t("div",{style:{position:"fixed",top:"70px",left:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"200px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Menu"}),e("button",{onClick:()=>qe(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>{te("trips"),qe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4F1} Recent Trips"}),e("button",{onClick:()=>{te("places"),qe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F3E0} Saved Places"}),e("button",{onClick:()=>{te("payments"),qe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4B3} Payment Methods"}),e(Br,{to:"/rider/badge-upload",style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",textDecoration:"none",color:"inherit"},onClick:()=>qe(!1),children:"\u{1F3E2} Corporate Discount"}),e("button",{onClick:()=>{te("help"),qe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F4DE} Help & Support"}),e("button",{onClick:()=>{te("settings"),qe(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u2699\uFE0F Settings"})]})]}),ti&&t("div",{style:{position:"fixed",top:"70px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Profile"}),e("button",{onClick:()=>lt(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:se.profilePicture?"transparent":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600",overflow:"hidden",backgroundImage:se.profilePicture?`url(${se.profilePicture})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:!se.profilePicture&&`${se.firstName[0]||We.firstName[0]}${se.lastName[0]||We.lastName[0]}`}),t("div",{children:[t("div",{style:{fontWeight:"600",fontSize:"16px"},children:[se.firstName," ",se.lastName]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#6b7280"},children:[e(Zt,{size:14,fill:"#fbbf24",color:"#fbbf24"}),We.rating," Rating"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"20px"},children:[t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:We.totalRides}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Total Rides"})]}),t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#eff6ff",borderRadius:"8px"},children:[t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#3b82f6"},children:["$",We.monthlySpending]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Month"})]}),t("div",{style:{textAlign:"center",padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#f59e0b"},children:We.totalRides>=50?"Platinum":We.totalRides>=25?"Gold":We.totalRides>=10?"Silver":"Bronze"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Member"})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("button",{onClick:()=>te("edit-profile"),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F4DD} Edit Profile"}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F3AF} Trip History"}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f8fafc",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%"},children:"\u{1F514} Notifications"})]})]}),Ne==="trips"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Recent Trips"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),uo.length>0?uo.map(a=>t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:a.date}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:a.fare})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#6b7280"},children:[t("span",{children:["\u{1F4CD} ",a.from]}),e("span",{children:"\u2192"}),t("span",{children:["\u{1F3C1} ",a.to]})]}),e("div",{style:{marginTop:"8px"},children:e("button",{onClick:()=>Vo(a),style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Book Again"})})]},a.id)):t("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:[e("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u{1F697}"}),e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"8px"},children:"No Recent Trips"}),e("div",{style:{fontSize:"14px"},children:"Your ride history will appear here once you take your first trip."})]})]}),Ne==="places"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Saved Places"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),Wn.map(a=>e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e2e8f0",cursor:(Je==null?void 0:Je.id)===a.id?"default":"pointer"},onClick:()=>{(Je==null?void 0:Je.id)!==a.id&&(m(a.address),te("none"),ft(a.address))},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:a.icon}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:a.name}),(Je==null?void 0:Je.id)===a.id?e("input",{type:"text",value:Je.address,onChange:g=>$i(S=>({...S,address:g.target.value})),style:{width:"100%",padding:"8px",border:"2px solid #3b82f6",borderRadius:"6px",fontSize:"14px",outline:"none"},onClick:g=>g.stopPropagation(),autoFocus:!0}):e("div",{style:{fontSize:"14px",color:"#6b7280"},children:a.address})]}),e("div",{style:{display:"flex",gap:"8px"},children:(Je==null?void 0:Je.id)===a.id?t(ye,{children:[e("button",{onClick:g=>{g.stopPropagation(),Ni(S=>S.map(E=>E.id===Je.id?{...E,address:Je.address.trim()}:E)),$i(null),re(`\u2705 ${a.name} address updated!`,"success")},style:{padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Save"}),e("button",{onClick:g=>{g.stopPropagation(),$i(null)},style:{padding:"6px 12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]}):t(ye,{children:[e("button",{onClick:g=>{g.stopPropagation(),m(a.address),te("none"),ft(a.address)},style:{padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Go Here"}),(a.type==="home"||a.type==="work")&&e("button",{onClick:g=>{g.stopPropagation(),$i({id:a.id,address:a.address})},style:{padding:"6px 8px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u270F\uFE0F"}),a.type==="custom"&&e("button",{onClick:g=>{g.stopPropagation(),confirm(`Delete "${a.name}" from saved places?`)&&Ni(S=>S.filter(E=>E.id!==a.id))},style:{padding:"6px 8px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"\u{1F5D1}\uFE0F"})]})})]})},a.id)),e("button",{onClick:()=>te("add-place"),style:{width:"100%",padding:"16px",backgroundColor:"#e2e8f0",border:"2px dashed #9ca3af",borderRadius:"12px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"+ Add New Place"})]}),Ne==="add-place"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Add New Place"}),e("button",{onClick:()=>te("places"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Place Name"}),e("input",{type:"text",value:Ye.name,onChange:a=>yi(g=>({...g,name:a.target.value})),placeholder:"e.g., Home, Work, Gym",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Address"}),e("input",{type:"text",value:Ye.address,onChange:a=>yi(g=>({...g,address:a.target.value})),placeholder:"Enter full address",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Icon"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"8px"},children:["\u{1F3E0}","\u{1F3E2}","\u{1F3EB}","\u{1F3E5}","\u{1F3EA}","\u26FD","\u{1F3CB}\uFE0F","\u{1F355}","\u2615","\u2708\uFE0F","\u{1F3AC}","\u2764\uFE0F"].map(a=>e("button",{style:{padding:"12px",fontSize:"20px",backgroundColor:Ye.icon===a?"#3b82f6":"#f8fafc",border:`2px solid ${Ye.icon===a?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",cursor:"pointer",color:Ye.icon===a?"white":"black"},onMouseEnter:g=>{Ye.icon!==a&&(g.target.style.borderColor="#3b82f6")},onMouseLeave:g=>{Ye.icon!==a&&(g.target.style.borderColor="#e2e8f0")},onClick:g=>{g.stopPropagation(),yi(S=>({...S,icon:a}))},children:a},a))})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:a=>{a.stopPropagation(),te("places")},style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:a=>{if(a.stopPropagation(),Ye.name.trim()&&Ye.address.trim()){const g={id:Date.now().toString(),name:Ye.name.trim(),address:Ye.address.trim(),icon:Ye.icon,type:"custom"};Ni(E=>[...E,g]);const S=document.createElement("div");S.innerHTML=`
                        <div style="
                          position: fixed; 
                          top: 80px; 
                          left: 50%; 
                          transform: translateX(-50%); 
                          background: #10b981; 
                          color: white; 
                          padding: 12px 20px; 
                          border-radius: 8px; 
                          font-size: 14px; 
                          font-weight: 600; 
                          z-index: 10000;
                          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                        ">
                          \u2705 "${Ye.name}" saved successfully!
                        </div>
                      `,document.body.appendChild(S),setTimeout(()=>{document.body.contains(S)&&document.body.removeChild(S)},3e3),yi({name:"",address:"",icon:"\u{1F3E0}"}),te("places")}else alert("Please fill in both place name and address")},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"white",cursor:"pointer"},children:"Save Place"})]})]})]}),Ne==="payments"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Payment Methods"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),Ae?t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:[e("div",{className:"spinner"})," "]}):ge.length===0?e("div",{style:{textAlign:"center",color:"#6b7280",padding:"20px"},children:"No payment methods found."}):ge.map(a=>e("div",{style:{padding:"16px",backgroundColor:a.isDefault?"#eff6ff":"#f8fafc",borderRadius:"12px",marginBottom:"12px",border:`2px solid ${a.isDefault?"#3b82f6":"#e2e8f0"}`,cursor:"pointer"},onClick:()=>{fe(a),te("none")},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{fontSize:"24px"},children:a.icon}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:a.name}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:a.details})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.isDefault&&e("div",{style:{padding:"4px 8px",backgroundColor:"#10b981",color:"white",borderRadius:"4px",fontSize:"12px",fontWeight:"600"},children:"Default"}),e("button",{onClick:g=>{g.stopPropagation(),Vr(a.id)},style:{backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Delete"})]})]})},a.id)),t("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>te("add-card"),style:{width:"100%",padding:"16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F4B3} Add Credit/Debit Card"}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:()=>{Ct({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:ge.length===0}),mo("apple_pay")},style:{flex:1,padding:"16px",backgroundColor:"#1d1d1f",color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F34E} Apple Pay"}),e("button",{onClick:()=>{Ct({appleId:"",deviceName:"",googleEmail:"",phoneNumber:"",makeDefault:ge.length===0}),mo("google_pay")},style:{flex:1,padding:"16px",backgroundColor:"#4285f4",color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F535} Google Pay"})]})]})]}),Ne==="add-wallet"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:oe==="apple_pay"?"\u{1F34E} Set up Apple Pay":"\u{1F535} Set up Google Pay"}),e("button",{onClick:()=>te("payments"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),oe==="apple_pay"&&t("form",{onSubmit:a=>{a.preventDefault(),qi("apple_pay",Jt)},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F34E}"}),e("h4",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"Apple Pay Setup"}),e("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Enter your Apple ID and device information to set up Apple Pay"})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Apple ID Email"}),e("input",{type:"email",value:Jt.appleId,onChange:a=>Ct(g=>({...g,appleId:a.target.value})),placeholder:"your.email@icloud.com",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Device Name"}),t("select",{value:Jt.deviceName,onChange:a=>Ct(g=>({...g,deviceName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0,children:[e("option",{value:"",children:"Select your device"}),e("option",{value:"iPhone 15 Pro",children:"iPhone 15 Pro"}),e("option",{value:"iPhone 15",children:"iPhone 15"}),e("option",{value:"iPhone 14 Pro",children:"iPhone 14 Pro"}),e("option",{value:"iPhone 14",children:"iPhone 14"}),e("option",{value:"iPhone 13",children:"iPhone 13"}),e("option",{value:"iPhone 12",children:"iPhone 12"}),e("option",{value:"iPad Pro",children:"iPad Pro"}),e("option",{value:"iPad Air",children:"iPad Air"}),e("option",{value:"MacBook Pro",children:"MacBook Pro"}),e("option",{value:"MacBook Air",children:"MacBook Air"}),e("option",{value:"Apple Watch",children:"Apple Watch"})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[e("input",{type:"checkbox",id:"applePayDefault",checked:Jt.makeDefault,onChange:a=>Ct(g=>({...g,makeDefault:a.target.checked})),style:{width:"16px",height:"16px"}}),e("label",{htmlFor:"applePayDefault",style:{fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:"Make this my default payment method"})]}),e("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24"},children:t("p",{style:{fontSize:"12px",color:"#92400e",margin:0},children:[e("strong",{children:"Note:"})," You'll be redirected to authenticate with Touch ID, Face ID, or your device passcode to complete the setup."]})}),e("button",{type:"submit",disabled:Ae,style:{width:"100%",padding:"16px",backgroundColor:Ae?"#9ca3af":"#1d1d1f",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Ae?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Ae?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Setting up Apple Pay..."]}):e(ye,{children:"\u{1F34E} Set up Apple Pay"})})]}),oe==="google_pay"&&t("form",{onSubmit:a=>{a.preventDefault(),qi("google_pay",Jt)},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F535}"}),e("h4",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"Google Pay Setup"}),e("p",{style:{fontSize:"14px",color:"#6b7280",margin:0},children:"Enter your Google account information to set up Google Pay"})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Google Account Email"}),e("input",{type:"email",value:Jt.googleEmail,onChange:a=>Ct(g=>({...g,googleEmail:a.target.value})),placeholder:"your.email@gmail.com",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Phone Number (for verification)"}),e("input",{type:"tel",value:Jt.phoneNumber,onChange:a=>Ct(g=>({...g,phoneNumber:a.target.value})),placeholder:"+1 (555) 123-4567",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"}})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[e("input",{type:"checkbox",id:"googlePayDefault",checked:Jt.makeDefault,onChange:a=>Ct(g=>({...g,makeDefault:a.target.checked})),style:{width:"16px",height:"16px"}}),e("label",{htmlFor:"googlePayDefault",style:{fontSize:"14px",fontWeight:"500",color:"#374151",cursor:"pointer"},children:"Make this my default payment method"})]}),e("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24"},children:t("p",{style:{fontSize:"12px",color:"#92400e",margin:0},children:[e("strong",{children:"Note:"})," You'll be redirected to Google to authenticate and authorize payments for this app."]})}),e("button",{type:"submit",disabled:Ae,style:{width:"100%",padding:"16px",backgroundColor:Ae?"#9ca3af":"#4285f4",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Ae?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Ae?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Setting up Google Pay..."]}):e(ye,{children:"\u{1F535} Set up Google Pay"})})]})]}),Ne==="add-card"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Add Credit/Debit Card"}),e("button",{onClick:()=>te("payments"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:Si,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Card Number"}),e("input",{type:"text",value:ht.cardNumber,onChange:a=>Yt(g=>({...g,cardNumber:Ie(a.target.value)})),placeholder:"1234 5678 9012 3456",maxLength:19,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Expiry Date"}),e("input",{type:"text",value:ht.expiryDate,onChange:a=>Yt(g=>({...g,expiryDate:vi(a.target.value)})),placeholder:"MM/YY",maxLength:5,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]}),t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"CVV"}),e("input",{type:"text",value:ht.cvv,onChange:a=>Yt(g=>({...g,cvv:a.target.value.replace(/\D/g,"").slice(0,4)})),placeholder:"123",maxLength:4,style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},required:!0})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Cardholder Name"}),e("input",{type:"text",value:ht.name,onChange:a=>Yt(g=>({...g,name:a.target.value})),placeholder:"John Doe",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Card Type"}),e("div",{style:{display:"flex",gap:"8px"},children:[{type:"credit",icon:"\u{1F4B3}",label:"Credit"},{type:"debit",icon:"\u{1F3E6}",label:"Debit"}].map(a=>t("button",{type:"button",onClick:()=>Yt(g=>({...g,type:a.type})),style:{flex:1,padding:"12px",backgroundColor:ht.type===a.type?"#eff6ff":"#f8fafc",border:`2px solid ${ht.type===a.type?"#3b82f6":"#e2e8f0"}`,borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[a.icon," ",a.label]},a.type))})]}),e("button",{type:"submit",disabled:Ae,style:{width:"100%",padding:"16px",backgroundColor:Ae?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Ae?"not-allowed":"pointer",marginTop:"8px"},children:Ae?"Adding Card...":"Add Card"})]})]}),Ne==="help"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Help & Support"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>window.location.href="tel:911",style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u{1F6A8} Emergency Support"}),t("button",{onClick:()=>It(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4AC} Live Chat"}),e("span",{style:{fontSize:"12px",color:"#0284c7",fontWeight:"600"},children:"Available 24/7"})]}),t("button",{onClick:Go,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4DE} Call Support"}),e("span",{style:{fontSize:"12px",color:"#15803d",fontWeight:"600"},children:"(479) 367-1337"})]}),t("div",{children:[t("button",{onClick:()=>jt(!Tt),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"16px",backgroundColor:"#fef3c7",border:"1px solid #fde68a",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[e("span",{style:{display:"flex",alignItems:"center",gap:"12px"},children:"\u{1F4E7} Report Issue"}),e("span",{style:{fontSize:"12px",color:"#92400e"},children:Tt?"\u25B2":"\u25BC"})]}),Tt&&e("div",{style:{marginTop:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"12px",padding:"12px"},children:e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{type:"Driver Issue",desc:"Driver behavior, route, or professionalism"},{type:"Payment Problem",desc:"Billing, charges, or payment method issues"},{type:"Safety Concern",desc:"Vehicle condition or safety-related incidents"},{type:"App Technical Issue",desc:"App crashes, bugs, or functionality problems"},{type:"Lost Item",desc:"Item left in vehicle or missing belongings"},{type:"Other",desc:"General feedback or other concerns"}].map((a,g)=>t("button",{onClick:()=>{alert(`Thank you for reporting: ${a.type}. We'll contact you within 24 hours.`),jt(!1)},style:{padding:"10px 12px",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",textAlign:"left",fontSize:"13px"},children:[e("div",{style:{fontWeight:"600",color:"#374151"},children:a.type}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:a.desc})]},g))})})]}),e("button",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"\u2753 FAQ"})]})]}),ii&&e("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",width:"100%",maxWidth:"400px",height:"80vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[t("div",{children:[e("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600"},children:"\u{1F4AC} Live Support"}),e("p",{style:{margin:0,fontSize:"12px",color:"#6b7280"},children:"Connected \u2022 Response time: ~2 min"})]}),e("button",{onClick:()=>It(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#6b7280"},children:"\xD7"})]}),e("div",{style:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:Ei.map(a=>e("div",{style:{display:"flex",justifyContent:a.sender==="user"?"flex-end":"flex-start"},children:e("div",{style:{maxWidth:"80%",padding:"10px 14px",borderRadius:"16px",backgroundColor:a.sender==="user"?"#3b82f6":"#f3f4f6",color:a.sender==="user"?"white":"#374151",fontSize:"14px"},children:a.message})},a.id))}),t("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"8px"},children:[e("input",{type:"text",value:ue,onChange:a=>et(a.target.value),onKeyPress:a=>a.key==="Enter"&&ho(ue),placeholder:"Type your message...",style:{flex:1,padding:"10px 14px",border:"1px solid #d1d5db",borderRadius:"20px",fontSize:"14px",outline:"none"}}),e("button",{onClick:()=>ho(ue),disabled:!ue.trim(),style:{padding:"10px 16px",backgroundColor:ue.trim()?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"20px",cursor:ue.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"600"},children:"Send"})]})]})}),Ne==="settings"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Settings"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"\u{1F514} Push Notifications"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Get ride updates and offers"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px",cursor:"pointer"},onClick:a=>{a.preventDefault();const g=a.currentTarget.querySelector("input");g.checked=!g.checked,re(g.checked?"\u{1F514} Push notifications enabled":"\u{1F515} Push notifications disabled","success")},children:[e("input",{type:"checkbox",defaultChecked:!0,style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#3b82f6",borderRadius:"24px",transition:"0.3s"}})]})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"\u{1F319} Dark Mode"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Switch to dark theme"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"24px",cursor:"pointer"},onClick:a=>{a.preventDefault();const g=a.currentTarget.querySelector("input");g.checked=!g.checked,re(g.checked?"\u{1F319} Dark mode enabled":"\u2600\uFE0F Light mode enabled","success")},children:[e("input",{type:"checkbox",style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:"#9ca3af",borderRadius:"24px",transition:"0.3s"}})]})]})}),e("button",{onClick:()=>{re("\u{1F510} Privacy settings panel opened","info"),setTimeout(()=>{re("\u2705 Privacy settings updated successfully","success")},1500)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#eff6ff",a.target.style.borderColor="#3b82f6"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F510} Privacy Settings"}),e("button",{onClick:()=>{if(!navigator.geolocation){re("\u274C Location services not supported on this device","error");return}re("\u{1F4CD} Checking location permissions...","info"),navigator.permissions.query({name:"geolocation"}).then(a=>{a.state==="granted"?(re("\u2705 Location services are enabled","success"),bi(l)):a.state==="prompt"?(re("\u{1F4F1} Please allow location access when prompted","warning"),bi(l)):re("\u274C Location services denied. Enable in browser settings.","error")}).catch(()=>{re("\u{1F4CD} Location services check completed","info"),bi(l)})},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#f0fdf4",a.target.style.borderColor="#10b981"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F4CD} Location Services"}),e("button",{onClick:()=>{re("\u{1F4F1} App preferences panel opened","info");const a=["Auto-request rides from favorite locations","Show nearby driver count","Enable ride sharing suggestions","Smart destination predictions"];setTimeout(()=>{const g=a[Math.floor(Math.random()*a.length)];re(`\u2705 ${g} updated`,"success")},1200)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#fef3c7",a.target.style.borderColor="#f59e0b"},onMouseLeave:a=>{a.target.style.backgroundColor="#f8fafc",a.target.style.borderColor="#e2e8f0"},children:"\u{1F4F1} App Preferences"}),e("button",{onClick:()=>{confirm("Are you sure you want to sign out? You will need to log in again to book rides.")&&(re("\u{1F6AA} Signing out...","info"),localStorage.removeItem("authToken"),localStorage.removeItem("userProfile"),localStorage.removeItem("savedPaymentMethods"),setTimeout(()=>{re("\u2705 Successfully signed out","success"),te("none"),Ge(null),st("idle"),fe(null),Re([]),setTimeout(()=>{window.location.href="/rider/auth"},1e3)},1500))},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",color:"#dc2626",transition:"all 0.2s ease"},onMouseEnter:a=>{a.target.style.backgroundColor="#fee2e2",a.target.style.borderColor="#ef4444",a.target.style.transform="translateY(-1px)"},onMouseLeave:a=>{a.target.style.backgroundColor="#fef2f2",a.target.style.borderColor="#fecaca",a.target.style.transform="translateY(0)"},children:"\u{1F6AA} Sign Out"})]})]}),Ne==="edit-profile"&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},onClick:a=>a.stopPropagation(),children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Edit Profile"}),e("button",{onClick:()=>te("none"),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:se.profilePicture?"transparent":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"32px",fontWeight:"600",margin:"0 auto 12px auto",position:"relative",overflow:"hidden",backgroundImage:se.profilePicture?`url(${se.profilePicture})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:[!se.profilePicture&&(((vo=se.firstName)==null?void 0:vo[0])||"U"),e("button",{style:{position:"absolute",bottom:"0",right:"0",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#10b981",border:"2px solid white",color:"white",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:a=>{a.stopPropagation();const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=S=>{const E=S.target.files[0];if(E){const _=new FileReader;_.onload=N=>{Ke(ie=>({...ie,profilePicture:N.target.result}))},_.readAsDataURL(E)}},g.click()},children:"\u{1F4F7}"})]}),e("button",{style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",fontSize:"12px",color:"#6b7280",cursor:"pointer"},onClick:a=>{a.stopPropagation();const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=S=>{const E=S.target.files[0];if(E){const _=new FileReader;_.onload=N=>{Ke(ie=>({...ie,profilePicture:N.target.result}))},_.readAsDataURL(E)}},g.click()},children:se.profilePicture?"Change Photo":"Upload Photo"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"First Name"}),e("input",{type:"text",value:se.firstName,onChange:a=>Ke(g=>({...g,firstName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Last Name"}),e("input",{type:"text",value:se.lastName,onChange:a=>Ke(g=>({...g,lastName:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Email Address"}),e("input",{type:"email",value:se.email,onChange:a=>Ke(g=>({...g,email:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Phone Number"}),e("input",{type:"tel",value:se.phone,onChange:a=>Ke(g=>({...g,phone:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Date of Birth"}),e("input",{type:"date",value:se.dateOfBirth,onChange:a=>Ke(g=>({...g,dateOfBirth:a.target.value})),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Emergency Contact"}),e("input",{type:"text",value:se.emergencyContact,onChange:a=>Ke(g=>({...g,emergencyContact:a.target.value})),placeholder:"Name - Phone Number",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none"},onFocus:a=>a.target.style.borderColor="#3b82f6",onBlur:a=>a.target.style.borderColor="#e5e7eb",onClick:a=>a.stopPropagation()})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},onClick:a=>a.stopPropagation(),children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Ride Preferences"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Music"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow driver to play music"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px"},children:[e("input",{type:"checkbox",checked:se.music,onChange:a=>{a.stopPropagation(),Ke(g=>({...g,music:a.target.checked}))},style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:se.music?"#3b82f6":"#9ca3af",borderRadius:"24px",transition:"0.3s"}}),e("span",{style:{position:"absolute",content:"",height:"18px",width:"18px",left:se.music?"23px":"3px",bottom:"3px",backgroundColor:"white",borderRadius:"50%",transition:"0.3s"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Conversation"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Open to chatting during rides"})]}),t("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px"},children:[e("input",{type:"checkbox",checked:se.conversation,onChange:a=>{a.stopPropagation(),Ke(g=>({...g,conversation:a.target.checked}))},style:{opacity:0,width:0,height:0}}),e("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:se.conversation?"#3b82f6":"#9ca3af",borderRadius:"24px",transition:"0.3s"}}),e("span",{style:{position:"absolute",content:"",height:"18px",width:"18px",left:se.conversation?"23px":"3px",bottom:"3px",backgroundColor:"white",borderRadius:"50%",transition:"0.3s"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:"Cabin Temperature"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Preferred cabin temperature setting"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:a=>{a.stopPropagation(),Ke(g=>({...g,temperature:"cool"}))},style:{padding:"6px 12px",backgroundColor:se.temperature==="cool"?"#3b82f6":"#f3f4f6",color:se.temperature==="cool"?"white":"#6b7280",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:"\u2744\uFE0F Cool"}),e("button",{onClick:a=>{a.stopPropagation(),Ke(g=>({...g,temperature:"warm"}))},style:{padding:"6px 12px",backgroundColor:se.temperature==="warm"?"#3b82f6":"#f3f4f6",color:se.temperature==="warm"?"white":"#6b7280",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:"\u{1F525} Warm"})]})]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:a=>{a.stopPropagation(),te("none")},style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"#6b7280",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:async a=>{a.stopPropagation();try{const g=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||localStorage.getItem("token")||""}`},body:JSON.stringify({firstName:se.firstName,lastName:se.lastName,email:se.email,phone:se.phone,dateOfBirth:se.dateOfBirth,emergencyContact:se.emergencyContact,music:se.music,conversation:se.conversation,temperature:se.temperature,profilePicture:se.profilePicture})});if(g.ok){const S=await g.json();console.log("\u2705 Profile updated:",S),alert(`Profile updated successfully!
Name: ${se.firstName} ${se.lastName}
Email: ${se.email}`),te("none"),Jo()}else{const S=await g.json();console.error("\u274C Profile update failed:",S),alert("Failed to update profile. Please try again.")}}catch(g){console.error("\u274C Profile update error:",g),alert("Network error. Please check your connection and try again.")}},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:"white",cursor:"pointer"},children:"Save Changes"})]})]})]}),Ne==="trip-complete"&&pe&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u{1F389}"}),e("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Trip Completed!"}),e("p",{style:{fontSize:"16px",color:"#6b7280",margin:"8px 0 0 0"},children:"Thank you for riding with us"})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Trip Summary"}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Distance:"}),t("span",{style:{fontWeight:"600"},children:[((Rt=(zt=pe.fare)==null?void 0:zt.estimatedDistance)==null?void 0:Rt.toFixed(1))||"5.2"," miles"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Duration:"}),t("span",{style:{fontWeight:"600"},children:[((So=pe.fare)==null?void 0:So.estimatedTravelTime)||"18"," minutes"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e("span",{style:{color:"#6b7280"},children:"Vehicle:"}),t("span",{style:{fontWeight:"600"},children:[(wo=pe.vehicle)==null?void 0:wo.name," ",(ko=pe.vehicle)==null?void 0:ko.icon]})]}),t("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"8px",display:"flex",justifyContent:"space-between",fontSize:"18px",fontWeight:"700"},children:[e("span",{children:"Total Fare:"}),t("span",{style:{color:"#10b981"},children:["$",((zo=(Co=pe.fare)==null?void 0:Co.total)==null?void 0:zo.toFixed(2))||"24.50"]})]})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Rate Your Driver"}),e("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[1,2,3,4,5].map(a=>e(Zt,{size:32,fill:"#fbbf24",color:"#fbbf24",style:{cursor:"pointer"},onClick:()=>{console.log(`Rated driver: ${a} stars`),re("\u2705 Rating submitted!","success")}},a))}),e("textarea",{placeholder:"Leave a comment for your driver (optional)",style:{width:"100%",padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",resize:"vertical",minHeight:"60px",boxSizing:"border-box"}})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Add Tip (Optional)"}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"8px",marginBottom:"16px"},children:[{percentage:15,amount:(((v=pe.fare)==null?void 0:v.total)||24.5)*.15},{percentage:18,amount:(((I=pe.fare)==null?void 0:I.total)||24.5)*.18},{percentage:20,amount:(((W=pe.fare)==null?void 0:W.total)||24.5)*.2},{percentage:25,amount:(((P=pe.fare)==null?void 0:P.total)||24.5)*.25}].map(a=>t("button",{onClick:()=>wi(pe.id,a.amount,a.percentage),disabled:Oe,style:{padding:"12px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:Oe?"not-allowed":"pointer",opacity:Oe?.6:1,textAlign:"center"},children:[a.percentage,"%",e("br",{}),"$",a.amount.toFixed(2)]},a.percentage))}),t("div",{style:{display:"flex",gap:"8px"},children:[e("input",{type:"number",placeholder:"Custom amount",min:"0",step:"0.50",style:{flex:1,padding:"12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},onKeyPress:a=>{var g;if(a.key==="Enter"){const S=parseFloat(a.target.value);if(S>0){const E=Math.round(S/(((g=pe.fare)==null?void 0:g.total)||24.5)*100);wi(pe.id,S,E),a.target.value=""}}}}),e("button",{onClick:a=>{var E;const g=a.target.previousElementSibling,S=parseFloat(g.value);if(S>0){const _=Math.round(S/(((E=pe.fare)==null?void 0:E.total)||24.5)*100);wi(pe.id,S,_),g.value=""}},disabled:Oe,style:{padding:"12px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:Oe?"not-allowed":"pointer",opacity:Oe?.6:1},children:Oe?"Processing...":"Add Tip"})]}),e("button",{onClick:()=>{te("none"),Ge(null),st("idle"),re("\u2705 Thanks for your ride!","success")},style:{width:"100%",padding:"12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginTop:"12px"},children:"No Tip - Finish"})]}),e("button",{onClick:()=>{te("none"),Ge(null),st("idle")},style:{width:"100%",padding:"16px",backgroundColor:"#1f2937",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Done"})]}),Ne==="tracking"&&pe&&t("div",{style:{position:"fixed",top:"70px",left:"16px",right:"16px",backgroundColor:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"70vh",overflowY:"auto"},children:[t("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Your Ride"}),t("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0 0"},children:[(D=pe.vehicle)==null?void 0:D.name," ",(Y=pe.vehicle)==null?void 0:Y.icon," \u2022 Ride ID: ",pe.id]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"16px"},children:[e("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px",fontWeight:"600"},children:"DM"}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"16px",fontWeight:"600"},children:((J=pe==null?void 0:pe.driver)==null?void 0:J.name)||"Driver"}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:"#6b7280"},children:[e(Zt,{size:14,fill:"#fbbf24",color:"#fbbf24"}),((ve=pe==null?void 0:pe.driver)==null?void 0:ve.rating)||"4.8"," \u2022 ",((Ve=pe==null?void 0:pe.driver)==null?void 0:Ve.vehicle)||"Vehicle"," \u2022 ",((Wt=pe==null?void 0:pe.driver)==null?void 0:Wt.license)||"License"]})]}),t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{style:{padding:"8px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:e(No,{size:16})}),e("button",{style:{padding:"8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:e(Mr,{size:16})})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:()=>Xo(pe.id,"Rider cancelled"),disabled:Oe,style:{width:"100%",padding:"16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:Oe?"not-allowed":"pointer",opacity:Oe?.6:1},children:Oe?"Cancelling...":"\u274C Cancel Ride"}),e("button",{onClick:()=>te("none"),style:{width:"100%",padding:"12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Hide Panel"})]})]}),e("button",{onClick:Ko,disabled:qt==="requesting"||Oe||!c.trim()||!p||!Te,style:{width:"100%",background:c.trim()&&p&&Te?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"#d1d5db",color:"white",border:"none",borderRadius:"16px",padding:"18px",fontSize:"18px",fontWeight:"700",cursor:c.trim()&&p&&Te?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"16px"},children:Oe?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Processing Payment..."]}):qt==="requesting"?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Finding Driver..."]}):t(ye,{children:[(ne==null?void 0:ne.type)==="apple_pay"&&"\u{1F34E}",(ne==null?void 0:ne.type)==="google_pay"&&"\u{1F7E2}",((ne==null?void 0:ne.type)==="credit"||(ne==null?void 0:ne.type)==="debit")&&"\u{1F4B3}"," ","Book ",(Te==null?void 0:Te.name)||"Ride"]})})]}),e(vp,{status:Bi,onClose:()=>kt("hidden")}),e("style",{children:`
          @keyframes slideIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
          }
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          }
          @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
          }
        `})]})}function Rp(){const[o,i]=s.exports.useState("signin"),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1}),[c,m]=s.exports.useState({}),u=(b,f="info")=>{const z=document.createElement("div");z.textContent=b,z.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      font-size: 14px;
      z-index: 10000;
      min-width: 300px;
      max-width: 500px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
      ${f==="success"?"background-color: #10b981;":""}
      ${f==="error"?"background-color: #ef4444;":""}
      ${f==="warning"?"background-color: #f59e0b;":""}
      ${f==="info"?"background-color: #3b82f6;":""}
    `,document.body.appendChild(z),setTimeout(()=>{z.style.transform="translateX(0)"},100),setTimeout(()=>{z.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},300)},4e3)},x=b=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b),C=b=>b.length>=6,F=b=>/^[\+]?[1-9][\d]{0,15}$/.test(b.replace(/\s+/g,"")),k=async b=>{b.preventDefault(),d(!0),m({});const f={};if(x(p.email)||(f.email="Please enter a valid email address"),p.password||(f.password="Password is required"),Object.keys(f).length>0){m(f),d(!1);return}try{const z=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,password:p.password})}),y=await z.json();z.ok?(u("\u2705 Welcome back! Signed in successfully.","success"),localStorage.setItem("authToken",y.token),localStorage.setItem("token",y.token),localStorage.setItem("userData",JSON.stringify(y.user)),setTimeout(()=>{window.location.href="/rider"},1e3)):m({general:y.error||"Invalid email or password"})}catch(z){console.error("Sign in error:",z),m({general:"Network error. Please try again."})}d(!1)},w=async b=>{b.preventDefault(),d(!0),m({});const f={};if(p.firstName.trim()||(f.firstName="First name is required"),p.lastName.trim()||(f.lastName="Last name is required"),x(p.email)||(f.email="Please enter a valid email address"),C(p.password)||(f.password="Password must be at least 6 characters"),p.password!==p.confirmPassword&&(f.confirmPassword="Passwords do not match"),F(p.phone)||(f.phone="Please enter a valid phone number"),p.agreeToTerms||(f.agreeToTerms="You must agree to the terms and conditions"),Object.keys(f).length>0){m(f),d(!1);return}try{const z=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.email,password:p.password,firstName:p.firstName,lastName:p.lastName,phone:p.phone,userType:"rider"})}),y=await z.json();z.ok?(u("\u{1F389} Welcome to \u03C0! Account created successfully.","success"),localStorage.setItem("authToken",y.token),localStorage.setItem("token",y.token),localStorage.setItem("userData",JSON.stringify(y.user)),setTimeout(()=>{window.location.href="/rider"},1e3)):m({general:y.error||"Registration failed. Please try again."})}catch(z){console.error("Sign up error:",z),m({general:"Network error. Please try again."})}d(!1)};return t("div",{style:{maxWidth:"450px",margin:"0 auto",minHeight:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"20px",textAlign:"center"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 8px 0"},children:"\u03C0 Rider Authentication"}),e("p",{style:{fontSize:"16px",opacity:.9,margin:0},children:o==="signin"?"Welcome back!":"Join the ride revolution"})]}),t("div",{style:{padding:"32px 24px"},children:[t("div",{style:{display:"flex",backgroundColor:"#e5e7eb",borderRadius:"12px",padding:"4px",marginBottom:"32px"},children:[e("button",{onClick:()=>{i("signin"),m({}),h({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1})},style:{flex:1,padding:"12px",backgroundColor:o==="signin"?"white":"transparent",color:o==="signin"?"#1f2937":"#6b7280",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:o==="signin"?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:"Sign In"}),e("button",{onClick:()=>{i("signup"),m({}),h({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",agreeToTerms:!1,agreeToMarketing:!1})},style:{flex:1,padding:"12px",backgroundColor:o==="signup"?"white":"transparent",color:o==="signup"?"#1f2937":"#6b7280",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:o==="signup"?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:"Sign Up"})]}),o==="signin"&&t("form",{onSubmit:k,children:[c.general&&e("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:c.general}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),t("div",{style:{position:"relative"},children:[e(to,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"email",value:p.email,onChange:b=>h({...p,email:b.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.email?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]}),c.email&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.email})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(To,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.password,onChange:b=>h({...p,password:b.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.password?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>n(!r),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9ca3af"},children:r?e(Do,{size:20}):e(Lt,{size:20})})]}),c.password&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.password})]}),e("button",{type:"submit",disabled:l,style:{width:"100%",padding:"16px",backgroundColor:l?"#9ca3af":"#1e293b",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:l?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:l?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Signing In..."]}):"\u{1F680} Sign In"})]}),o==="signup"&&t("form",{onSubmit:w,children:[c.general&&e("div",{style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:c.general}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"First Name"}),t("div",{style:{position:"relative"},children:[e(Qe,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:p.firstName,onChange:b=>h({...p,firstName:b.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.firstName?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"First name"})]}),c.firstName&&e("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:c.firstName})]}),t("div",{style:{flex:1},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Last Name"}),t("div",{style:{position:"relative"},children:[e(Qe,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"text",value:p.lastName,onChange:b=>h({...p,lastName:b.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.lastName?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Last name"})]}),c.lastName&&e("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:c.lastName})]})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),t("div",{style:{position:"relative"},children:[e(to,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"email",value:p.email,onChange:b=>h({...p,email:b.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.email?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your email"})]}),c.email&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.email})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number"}),t("div",{style:{position:"relative"},children:[e(No,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:"tel",value:p.phone,onChange:b=>h({...p,phone:b.target.value}),style:{width:"100%",padding:"16px 16px 16px 48px",border:`2px solid ${c.phone?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Enter your phone number"})]}),c.phone&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.phone})]}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e(To,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.password,onChange:b=>h({...p,password:b.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.password?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Create a password"}),e("button",{type:"button",onClick:()=>n(!r),style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#9ca3af"},children:r?e(Do,{size:20}):e(Lt,{size:20})})]}),c.password&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.password})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Confirm Password"}),t("div",{style:{position:"relative"},children:[e(To,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e("input",{type:r?"text":"password",value:p.confirmPassword,onChange:b=>h({...p,confirmPassword:b.target.value}),style:{width:"100%",padding:"16px 48px 16px 48px",border:`2px solid ${c.confirmPassword?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",fontSize:"16px",outline:"none",transition:"border-color 0.2s"},placeholder:"Confirm your password"})]}),c.confirmPassword&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.confirmPassword})]}),t("div",{style:{marginBottom:"24px"},children:[t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:[e("input",{type:"checkbox",checked:p.agreeToTerms,onChange:b=>h({...p,agreeToTerms:b.target.checked}),style:{marginTop:"2px",accentColor:"#1e293b"}}),t("span",{children:["I agree to the"," ",e("a",{href:"#",style:{color:"#1e293b",textDecoration:"underline"},children:"Terms of Service"})," ","and"," ",e("a",{href:"#",style:{color:"#1e293b",textDecoration:"underline"},children:"Privacy Policy"})]})]}),c.agreeToTerms&&e("p",{style:{color:"#ef4444",fontSize:"14px",marginTop:"4px"},children:c.agreeToTerms})]}),e("div",{style:{marginBottom:"32px"},children:t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",fontSize:"14px",color:"#374151"},children:[e("input",{type:"checkbox",checked:p.agreeToMarketing,onChange:b=>h({...p,agreeToMarketing:b.target.checked}),style:{marginTop:"2px",accentColor:"#1e293b"}}),e("span",{children:"I'd like to receive updates about new features and promotions (optional)"})]})}),e("button",{type:"submit",disabled:l,style:{width:"100%",padding:"16px",backgroundColor:l?"#9ca3af":"#1e293b",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:l?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:l?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Creating Account..."]}):"\u{1F389} Create Account"})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})}const at=({color:o="#3b82f6",type:i="sedan",size:r=40,rotation:n=0,showIndicators:l=!1,isDriver:d=!1})=>{const p=()=>{switch(i){case"compact":return{width:r*.8,height:r*1.4};case"suv":return{width:r*1.1,height:r*1.6};case"luxury":return{width:r*.9,height:r*1.8};default:return{width:r,height:r*1.5}}},{width:h,height:c}=p();return t("div",{style:{width:`${h}px`,height:`${c}px`,transform:`rotate(${n}deg)`,position:"relative",display:"inline-block"},children:[t("div",{style:{width:"100%",height:"100%",backgroundColor:o,borderRadius:"15% 15% 15% 15%",position:"relative",border:"2px solid rgba(0,0,0,0.2)",boxShadow:"inset 0 0 10px rgba(0,0,0,0.1)"},children:[e("div",{style:{position:"absolute",top:"20%",left:"15%",width:"70%",height:"25%",backgroundColor:"rgba(135, 206, 235, 0.6)",borderRadius:"8px",border:"1px solid rgba(0,0,0,0.3)"}}),e("div",{style:{position:"absolute",bottom:"20%",left:"15%",width:"70%",height:"20%",backgroundColor:"rgba(135, 206, 235, 0.6)",borderRadius:"6px",border:"1px solid rgba(0,0,0,0.3)"}}),e("div",{style:{position:"absolute",top:"35%",left:"10%",width:"80%",height:"30%",backgroundColor:"rgba(135, 206, 235, 0.4)",borderRadius:"4px"}}),e("div",{style:{position:"absolute",top:"5%",left:"20%",width:"15%",height:"8%",backgroundColor:"#fff",borderRadius:"50%",border:"1px solid #ccc"}}),e("div",{style:{position:"absolute",top:"5%",right:"20%",width:"15%",height:"8%",backgroundColor:"#fff",borderRadius:"50%",border:"1px solid #ccc"}}),e("div",{style:{position:"absolute",bottom:"5%",left:"20%",width:"15%",height:"8%",backgroundColor:"#ff4444",borderRadius:"50%",border:"1px solid #cc0000"}}),e("div",{style:{position:"absolute",bottom:"5%",right:"20%",width:"15%",height:"8%",backgroundColor:"#ff4444",borderRadius:"50%",border:"1px solid #cc0000"}}),e("div",{style:{position:"absolute",top:"25%",left:"0",width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.2)"}}),e("div",{style:{position:"absolute",bottom:"25%",left:"0",width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.2)"}}),l&&t(ye,{children:[e("div",{style:{position:"absolute",top:"12%",left:"8%",width:"8%",height:"6%",backgroundColor:"#ffa500",borderRadius:"50%",animation:"blink 1s infinite"}}),e("div",{style:{position:"absolute",top:"12%",right:"8%",width:"8%",height:"6%",backgroundColor:"#ffa500",borderRadius:"50%",animation:"blink 1s infinite"}})]}),d&&e("div",{style:{position:"absolute",top:"2%",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"12px solid #10b981",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}})]}),e("style",{children:`
          @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
          }
        `})]})},Ap=({isOpen:o,riderInfo:i,onConfirm:r,onCancel:n})=>{const[l,d]=s.exports.useState(!1);if(!o)return null;const p=async()=>{d(!0);try{await r()}finally{d(!1)}};return t("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"30px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",textAlign:"center",animation:"slideIn 0.3s ease-out"},children:[e("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #FEF3C7 0%, #FCD34D 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px auto",border:"3px solid #F59E0B"},children:e(hi,{size:40,color:"#D97706"})}),e("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",marginBottom:"10px"},children:"Corporate Discount Expired"}),e("p",{style:{color:"#6B7280",fontSize:"16px",marginBottom:"25px",lineHeight:"1.5"},children:"Please verify that the rider still has their work ID badge"}),t("div",{style:{background:"#F9FAFB",border:"2px solid #E5E7EB",borderRadius:"12px",padding:"20px",marginBottom:"25px",textAlign:"left"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(Qe,{size:18,color:"#6B7280"}),e("span",{style:{fontWeight:"bold",color:"#374151"},children:i.name})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(_o,{size:18,color:"#6B7280"}),e("span",{style:{color:"#6B7280"},children:i.companyName})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(wn,{size:18,color:"#EF4444"}),t("span",{style:{color:"#EF4444",fontWeight:"600"},children:["Expired: ",i.expiryDate]})]})]}),t("div",{style:{background:"#EBF8FF",border:"1px solid #BFDBFE",borderRadius:"8px",padding:"16px",marginBottom:"25px",textAlign:"left"},children:[e("p",{style:{margin:0,fontSize:"14px",color:"#1E40AF",fontWeight:"600"},children:"\u{1F4CB} Verification Steps:"}),t("ol",{style:{margin:"8px 0 0 0",paddingLeft:"20px",fontSize:"13px",color:"#3730A3",lineHeight:"1.4"},children:[e("li",{children:"Ask rider to show their work ID badge"}),e("li",{children:"Verify their name and company match"}),e("li",{children:"Confirm badge appears current and valid"})]})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[t("button",{onClick:n,disabled:l,style:{flex:1,padding:"14px 20px",background:"#F3F4F6",color:"#6B7280",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:l?.5:1},children:[e(io,{size:18}),"Invalid ID"]}),e("button",{onClick:p,disabled:l,style:{flex:1,padding:"14px 20px",background:l?"#10B981":"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:l?.8:1},children:l?t(ye,{children:[e("div",{style:{width:"18px",height:"18px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Verifying..."]}):t(ye,{children:[e(ci,{size:18}),"Valid ID \u2713"]})})]}),e("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"20px",margin:"20px 0 0 0"},children:"Confirming will extend their discount for another 90 days"})]}),e("style",{children:`
          @keyframes slideIn {
            from {
              opacity: 0;
              transform: translateY(-20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Oa=()=>{const[o,i]=s.exports.useState({insurance:{file:null,preview:null,uploaded:!1},registration:{file:null,preview:null,uploaded:!1}}),[r,n]=s.exports.useState(null),[l,d]=s.exports.useState(!1),p={insurance:s.exports.useRef(null),registration:s.exports.useRef(null)},h=(k,w)=>{const b=w.target.files[0];b&&i(f=>({...f,[k]:{...f[k],file:b,preview:URL.createObjectURL(b)}}))},c=(k,w)=>{w.preventDefault();const b=w.dataTransfer.files[0];b&&b.type.startsWith("image/")&&i(f=>({...f,[k]:{...f[k],file:b,preview:URL.createObjectURL(b)}}))},m=k=>{k.preventDefault()},u=async k=>{const w=o[k];if(!!w.file){n(k);try{const b=new FormData;b.append("document",w.file),b.append("documentType",k);const f=await fetch("/api/driver/upload-document",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:b});if(f.ok)i(B=>({...B,[k]:{...B[k],uploaded:!0}})),o[k==="insurance"?"registration":"insurance"].uploaded&&d(!0);else{const z=await f.json();alert(`Upload failed: ${z.error}`)}}catch(b){console.error("Upload error:",b),alert("Upload failed. Please try again.")}finally{n(null)}}},x=k=>{i(w=>({...w,[k]:{file:null,preview:null,uploaded:!1}})),p[k].current&&(p[k].current.value="")},C=()=>{i({insurance:{file:null,preview:null,uploaded:!1},registration:{file:null,preview:null,uploaded:!1}}),d(!1),Object.values(p).forEach(k=>{k.current&&(k.current.value="")})};if(l)return t("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"40px",background:"linear-gradient(135deg, #D6F5D6 0%, #A8E6A8 100%)",borderRadius:"20px",textAlign:"center",border:"2px solid #68D391"},children:[e("div",{style:{fontSize:"80px",marginBottom:"20px"},children:"\u2705"}),e("h2",{style:{fontSize:"28px",fontWeight:"bold",color:"#22543D",marginBottom:"15px"},children:"Documents Uploaded Successfully!"}),e("p",{style:{fontSize:"16px",color:"#2F855A",marginBottom:"30px",lineHeight:"1.5"},children:"Your insurance and registration documents have been uploaded and are being verified. You'll be notified once the verification is complete."}),e("button",{onClick:C,style:{padding:"12px 24px",background:"#48BB78",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Upload New Documents"})]});const F=({type:k,icon:w,title:b,description:f})=>{const z=o[k],y=r===k;return t("div",{style:{background:z.uploaded?"#F0FFF4":"white",border:z.uploaded?"2px solid #68D391":"2px solid #E2E8F0",borderRadius:"16px",padding:"25px",transition:"all 0.2s"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e("div",{style:{width:"50px",height:"50px",background:z.uploaded?"#48BB78":"#4299E1",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:z.uploaded?e(ci,{size:24,color:"white"}):e(w,{size:24,color:"white"})}),t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",margin:0},children:b}),e("p",{style:{fontSize:"14px",color:"#718096",margin:0},children:f})]})]}),z.uploaded?t("div",{style:{textAlign:"center",padding:"20px"},children:[e(ci,{size:40,color:"#48BB78",style:{marginBottom:"10px"}}),e("p",{style:{color:"#22543D",fontWeight:"bold",marginBottom:"15px"},children:"Document Uploaded Successfully"}),e("button",{onClick:()=>x(k),style:{padding:"8px 16px",background:"transparent",color:"#4299E1",border:"2px solid #4299E1",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"Upload Different Document"})]}):t(ye,{children:[e("div",{onDrop:B=>c(k,B),onDragOver:m,style:{border:"2px dashed #CBD5E0",borderRadius:"12px",padding:"30px",textAlign:"center",background:z.preview?"#F7FAFC":"#FAFAFA",cursor:"pointer",marginBottom:"20px"},onClick:()=>{var B;return(B=p[k].current)==null?void 0:B.click()},children:z.preview?t("div",{children:[e("img",{src:z.preview,alt:`${b} preview`,style:{maxWidth:"200px",maxHeight:"150px",borderRadius:"8px",marginBottom:"10px",border:"2px solid #E2E8F0"}}),e("p",{style:{color:"#4A5568",fontSize:"14px",margin:0},children:"Click to change document"})]}):t("div",{children:[e(pi,{size:32,color:"#A0AEC0",style:{marginBottom:"12px"}}),t("p",{style:{color:"#4A5568",fontSize:"16px",margin:"0 0 5px 0",fontWeight:"bold"},children:["Upload ",b]}),e("p",{style:{color:"#718096",fontSize:"14px",margin:0},children:"Click or drag and drop"})]})}),e("input",{ref:p[k],type:"file",accept:"image/*",onChange:B=>h(k,B),style:{display:"none"}}),e("button",{onClick:()=>u(k),disabled:!z.file||y,style:{width:"100%",padding:"12px",background:y?"#A0AEC0":z.file?"#4299E1":"#E2E8F0",color:z.file?"white":"#A0AEC0",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:!z.file||y?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:y?t(ye,{children:[e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Uploading..."]}):t(ye,{children:[e(An,{size:16}),"Upload ",b]})})]})]})};return t("div",{style:{maxWidth:"900px",margin:"20px auto",padding:"30px"},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"20px"},children:e(xt,{size:35,color:"white"})}),e("h1",{style:{fontSize:"28px",fontWeight:"bold",color:"#2D3748",marginBottom:"10px"},children:"Upload Driver Documents"}),e("p",{style:{color:"#718096",fontSize:"16px",maxWidth:"500px",margin:"0 auto"},children:"Upload clear photos of your insurance and registration documents to complete your driver verification"})]}),e("div",{style:{background:"#EBF8FF",border:"1px solid #BEE3F8",padding:"20px",borderRadius:"12px",marginBottom:"30px"},children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[e(ei,{size:24,color:"#3182CE",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("p",{style:{margin:"0 0 10px 0",fontWeight:"bold",color:"#2B6CB0",fontSize:"16px"},children:"Document Requirements:"}),t("ul",{style:{margin:0,paddingLeft:"20px",color:"#2C5282",fontSize:"14px",lineHeight:"1.5"},children:[e("li",{children:"Documents must be current and valid"}),e("li",{children:"Photos should be clear and all text readable"}),e("li",{children:"Insurance policy must show your name and coverage dates"}),e("li",{children:"Registration must match your vehicle information"}),e("li",{children:"Accepted formats: JPG, PNG (max 10MB each)"})]})]})]})}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"25px",marginBottom:"30px"},children:[e(F,{type:"insurance",icon:Ti,title:"Insurance Document",description:"Current auto insurance policy"}),e(F,{type:"registration",icon:Ze,title:"Vehicle Registration",description:"Current vehicle registration"})]}),t("div",{style:{background:"white",padding:"20px",borderRadius:"12px",border:"2px solid #E2E8F0",textAlign:"center"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",marginBottom:"15px"},children:"Upload Progress"}),t("div",{style:{display:"flex",justifyContent:"center",gap:"20px",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:o.insurance.uploaded?"#22543D":"#718096"},children:[o.insurance.uploaded?e(ci,{size:20}):e(Ti,{size:20}),e("span",{children:"Insurance"})]}),e("div",{style:{width:"40px",height:"2px",background:o.insurance.uploaded&&o.registration.uploaded?"#48BB78":"#E2E8F0"}}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:o.registration.uploaded?"#22543D":"#718096"},children:[o.registration.uploaded?e(ci,{size:20}):e(Ze,{size:20}),e("span",{children:"Registration"})]})]}),e("p",{style:{margin:"15px 0 0 0",fontSize:"14px",color:"#718096"},children:o.insurance.uploaded&&o.registration.uploaded?"All documents uploaded! Verification in progress.":`${Object.values(o).filter(k=>k.uploaded).length}/2 documents uploaded`})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Fp=({userType:o,userId:i,className:r="",isMinimized:n=!1,onToggleMinimize:l,onClose:d})=>{const[p,h]=s.exports.useState([]),[c,m]=s.exports.useState(""),[u,x]=s.exports.useState(!1),[C,F]=s.exports.useState(null),[k,w]=s.exports.useState(!1),[b,f]=s.exports.useState(null),z=s.exports.useRef(null),y=s.exports.useRef(null);s.exports.useEffect(()=>{var V;(V=z.current)==null||V.scrollIntoView({behavior:"smooth"})},[p]),s.exports.useEffect(()=>{!n&&y.current&&y.current.focus()},[n]),s.exports.useEffect(()=>{C||B()},[C]),s.exports.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const V=window.SpeechRecognition||window.webkitSpeechRecognition,le=new V;le.continuous=!1,le.interimResults=!1,le.lang="en-US",le.onstart=()=>{w(!0)},le.onresult=ce=>{const ee=ce.results[0][0].transcript;m(ee),w(!1)},le.onerror=()=>{w(!1)},le.onend=()=>{w(!1)},f(le)}},[]),s.exports.useEffect(()=>()=>{b&&k&&b.stop()},[b,k]);const B=async()=>{try{const V=await fetch("/api/chat/start",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({userType:o,userId:i||"anonymous"})});if(V.ok){const le=await V.json();F(le.sessionId);const ce={id:Date.now().toString(),content:le.welcomeMessage||$(o),role:"assistant",timestamp:new Date};h([ce])}}catch(V){console.error("Failed to initialize chat:",V)}},$=V=>{switch(V){case"rider":return"Hi! I'm your Pi AI assistant. I can help you with ride booking, payment issues, account questions, and more. How can I assist you today?";case"driver":return"Hello! I'm here to help with your driving experience. I can assist with earnings questions, ride issues, vehicle requirements, and platform navigation. What can I help you with?";case"admin":return"Welcome to Pi Admin Support! I can help you with platform operations, driver management, ride analytics, system issues, and administrative tasks. How can I assist you?";default:return"Hello! I'm your Pi AI assistant. How can I help you today?"}},X=async()=>{if(!c.trim()||u||!C)return;const V={id:Date.now().toString(),content:c.trim(),role:"user",timestamp:new Date};h(le=>[...le,V]),m(""),x(!0);try{const le=await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({sessionId:C,message:V.content,userType:o,userId:i||"anonymous"})});if(le.ok){const ce=await le.json(),ee={id:(Date.now()+1).toString(),content:ce.response,role:"assistant",timestamp:new Date};h(ze=>[...ze,ee])}else throw new Error("Failed to send message")}catch(le){console.error("Failed to send message:",le);const ce={id:(Date.now()+1).toString(),content:"I'm sorry, I'm having trouble responding right now. Please try again in a moment.",role:"assistant",timestamp:new Date};h(ee=>[...ee,ce])}finally{x(!1)}},M=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),X())},R=()=>{if(!b){alert("Speech recognition is not supported in this browser");return}k?b.stop():b.start()},j=V=>V.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n?t("div",{className:`fixed bottom-4 right-4 z-50 ${r}`,children:[e("div",{className:"bg-blue-600 text-white p-3 rounded-full shadow-xl cursor-pointer hover:bg-blue-700 transition-colors",onClick:l,title:"Expand Pi Assistant",children:t("div",{className:"flex items-center space-x-2",children:[e(hr,{size:20}),e("span",{className:"text-sm font-medium",children:"Pi"})]})}),b&&k&&e("div",{className:"absolute bottom-16 right-0 bg-red-600 text-white p-2 rounded-lg shadow-lg",children:t("div",{className:"flex items-center space-x-2",children:[e(Yn,{size:16}),e("span",{className:"text-xs",children:"Listening..."}),e("button",{onClick:R,className:"text-white hover:text-red-200",children:e(io,{size:14})})]})})]}):t("div",{className:`fixed bottom-4 right-4 w-80 h-96 bg-white rounded-lg shadow-xl border flex flex-col z-50 ${r}`,children:[t("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-2",children:[e(hr,{size:20}),e("span",{className:"font-semibold",children:"Pi AI Assistant"})]}),t("div",{className:"flex items-center space-x-1",children:[l&&e("button",{onClick:l,className:"p-1 hover:bg-blue-700 rounded",children:e(Ld,{size:16})}),d&&e("button",{onClick:d,className:"p-1 hover:bg-blue-700 rounded",children:e(io,{size:16})})]})]}),t("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[p.map(V=>e("div",{className:`flex ${V.role==="user"?"justify-end":"justify-start"}`,children:e("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${V.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:t("div",{className:"flex items-start space-x-2",children:[V.role==="assistant"&&e(hr,{size:16,className:"mt-1 flex-shrink-0"}),V.role==="user"&&e(Qe,{size:16,className:"mt-1 flex-shrink-0"}),t("div",{className:"flex-1",children:[e("p",{className:"text-sm",children:V.content}),e("p",{className:`text-xs mt-1 ${V.role==="user"?"text-blue-100":"text-gray-500"}`,children:j(V.timestamp)})]})]})})},V.id)),u&&e("div",{className:"flex justify-start",children:e("div",{className:"bg-gray-100 text-gray-800 px-4 py-2 rounded-lg",children:t("div",{className:"flex items-center space-x-2",children:[e(hr,{size:16}),t("div",{className:"flex space-x-1",children:[e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e("div",{ref:z})]}),e("div",{className:"p-4 border-t",children:t("div",{className:"flex space-x-3",children:[e("input",{ref:y,type:"text",value:c,onChange:V=>m(V.target.value),onKeyDown:M,placeholder:"Type your message or click mic to speak...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-base focus:outline-none focus:border-blue-500",disabled:u}),b&&e("button",{onClick:R,disabled:u,className:`px-4 py-3 rounded-lg transition-colors ${k?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:k?"Stop listening":"Start voice input",children:k?e(Yn,{size:24}):e(cn,{size:24})}),e("button",{onClick:X,disabled:!c.trim()||u,className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:e(Ca,{size:20})})]})})]})},di=({checked:o,onChange:i})=>e("button",{onClick:()=>i(!o),style:{width:"60px",height:"32px",borderRadius:"16px",border:"none",backgroundColor:o?"#10b981":"#d1d5db",position:"relative",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0},children:e("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"white",position:"absolute",top:"4px",left:o?"32px":"4px",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})}),Ip=()=>{var So,wo,ko,Co,zo;console.log("\u{1F697} DriverApp component is loading..."),console.log("\u{1F504} Driver route matched!");const[o,i]=s.exports.useState(!1),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState(""),[p,h]=s.exports.useState({email:"jahselassiei@gmail.com",password:"myDriver1!"}),[c,m]=s.exports.useState(!1),[u,x]=s.exports.useState(null),[C,F]=s.exports.useState("default"),[k,w]=s.exports.useState([]),[b,f]=s.exports.useState(!1),[z,y]=s.exports.useState(""),[B,$]=s.exports.useState(!0);s.exports.useEffect(()=>{const v=localStorage.getItem("token"),I=localStorage.getItem("user");if(v&&I)try{const W=JSON.parse(I);W.userType==="driver"&&(i(!0),x(W),console.log("\u{1F697} Driver authenticated from localStorage"))}catch(W){console.error("\u274C Error parsing user data:",W),localStorage.removeItem("token"),localStorage.removeItem("user")}},[]),s.exports.useEffect(()=>{"Notification"in window&&o&&(F(Notification.permission),Notification.permission==="default"&&Notification.requestPermission().then(v=>{F(v),v==="granted"&&(console.log("\u{1F514} Push notifications enabled"),M("\u2705 Notifications Enabled","You'll receive ride requests and updates","success"))}).catch(v=>{console.error("\u274C Notification permission error:",v),F("denied")}))},[o]);const X=(v,I,W={})=>{if("Notification"in window&&Notification.permission==="granted"){const P=new Notification(v,{body:I,icon:"/pi-driver-logo.png",badge:"/pi-driver-logo.png",tag:W.tag||"driver-update",requireInteraction:W.requireInteraction||!1,vibrate:W.vibrate||[200,100,200],...W});return P.onclick=()=>{window.focus(),P.close(),W.onClick&&W.onClick()},W.requireInteraction||setTimeout(()=>P.close(),5e3),P}},M=(v,I,W="info")=>{const P={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"},D=document.createElement("div");D.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${P[W]};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      max-width: 300px;
      animation: slideIn 0.3s ease-out;
    `,D.innerHTML=`
      <div style="font-weight: 700; margin-bottom: 4px;">${v}</div>
      <div style="font-size: 12px; opacity: 0.9;">${I}</div>
    `,document.body.appendChild(D),setTimeout(()=>{document.body.contains(D)&&(D.style.animation="slideOut 0.3s ease-out",setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},300))},4e3)},R=async v=>{v.preventDefault(),n(!0),d("");try{const I=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),W=await I.json();if(I.ok){if(W.user.userType!=="driver"){d("This login is for drivers only. Please use correct driver credentials.");return}localStorage.setItem("token",W.token),localStorage.setItem("user",JSON.stringify(W.user)),i(!0),x(W.user),d(""),console.log("\u{1F697} Driver logged in successfully"),M("\u2705 Welcome Driver!",`Hello ${W.user.firstName}`,"success"),Ae&&ee&&T==="online"&&(console.log("\u{1F5FA}\uFE0F DriverApp: Post-login heatmap fetch"),setTimeout(()=>Ci(!0),1e3))}else d(W.error||"Login failed")}catch(I){console.error("\u274C Login error:",I),d("Network error. Please try again.")}finally{n(!1)}},j=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i(!1),x(null),Z("offline"),console.log("\u{1F697} Driver logged out"),M("\u{1F44B} Logged Out","See you later!","info")},V=(v,I)=>{if(!v.trim())return;const W={id:`msg_${Date.now()}`,rideId:I||(oe==null?void 0:oe.id),senderId:(u==null?void 0:u.id)||"anonymous-driver",senderType:"driver",message:v.trim(),timestamp:new Date().toISOString(),delivered:!1};He.current&&He.current.emit("send-message",W),w(P=>[...P,{...W,delivered:!0}]),y(""),console.log("\u{1F4AC} Message sent:",W)},le=s.exports.useRef(null),ce=s.exports.useRef(null),[ee,ze]=s.exports.useState(null),[T,Z]=s.exports.useState("offline"),[H,O]=s.exports.useState(null),[U,ge]=s.exports.useState(0),[Re,ne]=s.exports.useState(!1),[fe,xe]=s.exports.useState(null),[qe,ti]=s.exports.useState(null),[lt,Ne]=s.exports.useState(!1);s.exports.useEffect(()=>{const v=I=>{I.key==="Escape"&&lt&&Ne(!1)};return lt&&(document.addEventListener("keydown",v),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",v),document.body.style.overflow="unset"}},[lt]);const[te,ii]=s.exports.useState(null),[It,Tt]=s.exports.useState(0),[jt,Ei]=s.exports.useState(!1),rt=s.exports.useRef(null),[ue,et]=s.exports.useState(null),[oe,Ut]=s.exports.useState(null),[Oe,je]=s.exports.useState(!1),[Fe,nt]=s.exports.useState(!1),[tt,wt]=s.exports.useState(0),[Te,Di]=s.exports.useState(85),[qt,st]=s.exports.useState(75),[pe,Ge]=s.exports.useState(!0),[Ae,mt]=s.exports.useState(!1),[Bi,kt]=s.exports.useState([]),[Wi,dt]=s.exports.useState({}),[it,Mi]=s.exports.useState(null),[ct,Pi]=s.exports.useState(null),[A,L]=s.exports.useState(null),[q,Q]=s.exports.useState(!1),[K,Be]=s.exports.useState(""),[ke,Ee]=s.exports.useState(""),[Et,Ht]=s.exports.useState(""),[Ue,oi]=s.exports.useState(0),[_e,_i]=s.exports.useState([]),[Dt,xi]=s.exports.useState(""),[Lr,Vt]=s.exports.useState(""),[lo,Oo]=s.exports.useState(null),[Bn,so]=s.exports.useState(""),[ri,jo]=s.exports.useState(""),[mi,Uo]=s.exports.useState(""),[pt,co]=s.exports.useState(0),[ut,qo]=s.exports.useState(!0),[Nr,Gt]=s.exports.useState(-1),[po,Li]=s.exports.useState([]),[ht,Yt]=s.exports.useState(new Set),[Jt,Ct]=s.exports.useState(0),[Ye,yi]=s.exports.useState(!1),[Wn,Ni]=s.exports.useState(""),[Je,$i]=s.exports.useState(null),[We,Ho]=s.exports.useState(null),[se,Ke]=s.exports.useState(null),[uo,Oi]=s.exports.useState(null),[Kt,Vo]=s.exports.useState(null),ho=s.exports.useRef(q),Go=s.exports.useRef(Kt),Me=s.exports.useRef(U);s.exports.useEffect(()=>{ho.current=q},[q]),s.exports.useEffect(()=>{Go.current=Kt},[Kt]),s.exports.useEffect(()=>{Me.current=U},[U]),s.exports.useEffect(()=>{const v=()=>{const I=document.hidden||document.visibilityState==="hidden";ji(I&&(T==="busy"||q))};return document.addEventListener("visibilitychange",v),window.addEventListener("pageshow",()=>ji(!1)),()=>{document.removeEventListener("visibilitychange",v),window.removeEventListener("pageshow",()=>ji(!1))}},[T,q]),s.exports.useEffect(()=>{if(_e.length>0&&Ue<_e.length){const v=_e[Ue+1];if(v&&Dt)if(parseFloat(Dt.replace(/[^\d.]/g,""))<=500){const P=(v.instructions||"").match(/(?:onto|on|toward)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/i);if(P){const D=P[1].trim();xo(D),console.log(`\u{1F6E3}\uFE0F Highlighting turn road: ${D} (${Dt})`)}}else xo(null)}},[_e,Ue,Dt]),s.exports.useEffect(()=>{const v="wakeLock"in navigator;return Hr(v),console.log(v?"\u{1F4F1} Screen Wake Lock API supported":"\u{1F4F1} Screen Wake Lock API not supported"),()=>{Bt&&Bt.release()}},[]);const Yo=async()=>{var v;if(!(!qr||Bt))try{const I=await((v=navigator.wakeLock)==null?void 0:v.request("screen"));ft(I),console.log("\u{1F4F1} Screen wake lock activated - screen will not sleep"),I==null||I.addEventListener("release",()=>{console.log("\u{1F4F1} Screen wake lock released"),ft(null)})}catch(I){console.error("\u{1F4F1} Failed to activate wake lock:",I)}},Jo=async()=>{if(Bt)try{await Bt.release(),ft(null),console.log("\u{1F4F1} Screen wake lock manually released")}catch(v){console.error("\u{1F4F1} Failed to release wake lock:",v)}};s.exports.useEffect(()=>{T==="online"||T==="busy"||q?Yo():T==="offline"&&Jo()},[T,q]);const[$r,go]=s.exports.useState(!1),[Or,bi]=s.exports.useState(1/0),[ni,jr]=s.exports.useState(!1),[Ur,ji]=s.exports.useState(!1),[ai,li]=s.exports.useState({x:50,y:100}),[fo,gt]=s.exports.useState(!1);s.exports.useState(new Set);const[Ui,xo]=s.exports.useState(null),[Bt,ft]=s.exports.useState(null),[qr,Hr]=s.exports.useState(!1),He=s.exports.useRef(null),[Ie,vi]=s.exports.useState({isOnline:!1,acceptPool:!0,voiceGuidance:!0,autoAccept:!1,acceptPets:!1,acceptTeens:!1,minimumFare:5,maxDistance:15,preferredAreas:[],vehicleColor:"#3b82f6",vehicleType:"sedan",acceptCash:!1,acceptLongTrips:!0,acceptPoolRides:!0,notifications:!0}),[Si,mo]=s.exports.useState(null),[qi,Vr]=s.exports.useState(8.5),[re,Ko]=s.exports.useState({today:0,week:0,month:0,trips:0,hours:0,rating:0,lastRide:0,miles:0}),[wi,Xo]=s.exports.useState(!0);s.exports.useEffect(()=>{(async()=>{Xo(!0);try{const I=u==null?void 0:u.id;if(!I){console.log("No driver ID available for earnings");return}const W=await fetch(`${window.location.origin}/api/driver/earnings/${I}`,{method:"GET",cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(W.ok){const P=await W.json();Ko(P)}else throw new Error(`HTTP ${W.status}`)}catch(I){console.error("API Error loading earnings:",I)}finally{Xo(!1)}})()},[T]);const Hi={id:"RIDE_123",rider:{name:"Sarah Johnson",rating:4.8,phone:"+1 (555) 123-4567"},pickup:{address:"Downtown Bentonville Square",coordinates:{lat:36.3729,lng:-94.2088}},destination:{address:"Crystal Bridges Museum",coordinates:{lat:36.3818,lng:-94.2087}},fare:12.5,distance:"2.3 miles",duration:"8 minutes",estimatedFare:"$12.50",estimatedTime:"8 min",rideType:"standard"};s.exports.useEffect(()=>{console.log("\u{1F5FA}\uFE0F DriverApp Google Maps initializing immediately (auth-independent)");const v=()=>{if(le.current&&window.google&&window.google.maps&&!ee){console.log("\u{1F5FA}\uFE0F Initializing Google Maps in DriverApp...");try{const W=new window.google.maps.Map(le.current,{mapId:"DEMO_MAP_ID",zoom:16,center:{lat:36.3729,lng:-94.2088},tilt:0,heading:0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!0,gestureHandling:"greedy"}),P=new window.google.maps.DirectionsService,D=new window.google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeColor:"#1f2937",strokeWeight:6,strokeOpacity:1,strokeLineJoin:"round",strokeLineCap:"round",zIndex:1e3}});D.setMap(W),ce.current=W,ze(W),Pi(P),L(D),W.addListener("idle",()=>{if(ce.current){const Y=ho.current,J=Go.current,ve=Me.current,Ve=Y&&J!==null?J:ve;if(Ve!=null){const Wt=(Ve%360+360)%360,a=Y&&J!==null?"route":"compass";console.log(`\u{1F5FA}\uFE0F Reapplying heading after camera idle: ${Wt.toFixed(1)}\xB0 (${a})`),ce.current.setHeading(-Wt)}}}),console.log("\u2705 Google Maps initialized successfully in DriverApp")}catch(W){console.error("\u274C Error initializing Google Maps in DriverApp:",W)}}else console.log("\u23F3 Waiting for Google Maps API or map reference...",{mapRef:!!le.current,google:!!window.google,maps:!!(window.google&&window.google.maps),existingMap:!!ee})},I=()=>{window.google&&window.google.maps?(console.log("\u{1F5FA}\uFE0F Google Maps API detected in DriverApp - initializing..."),setTimeout(v,500)):(console.log("\u23F3 Waiting for Google Maps API to load in DriverApp..."),setTimeout(I,1e3))};I()},[ee]),s.exports.useEffect(()=>{if(!!ce.current)try{const v=q&&Kt!==null?Kt:U;if(v==null)return;const I=(v%360+360)%360,W=-I,P=q&&Kt!==null?"route":"compass";console.log(`\u{1F5FA}\uFE0F Setting map heading: ${W.toFixed(1)}\xB0 (${P}: ${I.toFixed(1)}\xB0)`),ce.current.setHeading(W)}catch(v){console.error("\u274C Error setting map heading:",v),console.warn("\u26A0\uFE0F Vector map rotation not available - using DEMO_MAP_ID. Consider setting up real Map ID in Google Cloud Console.")}},[U,Kt,q]),s.exports.useEffect(()=>{!localStorage.getItem("token")||!ee||Ae&&T==="online"&&(console.log("\u{1F5FA}\uFE0F DriverApp: Immediate heatmap fetch (driver online + heatmap visible)"),Ci(!0))},[Ae,T,ee]),s.exports.useEffect(()=>{if(!Ae||T!=="online")return;console.log("\u{1F5FA}\uFE0F DriverApp: Starting periodic heatmap refresh (90s interval)");const v=setInterval(()=>{console.log("\u{1F5FA}\uFE0F DriverApp: Periodic heatmap refresh triggered"),Ci(!1)},9e4);return()=>{console.log("\u{1F5FA}\uFE0F DriverApp: Stopping periodic heatmap refresh"),clearInterval(v)}},[Ae,T]);const ki=(v,I)=>{try{if(!ct||!A||!H){console.error("Navigation services not ready or location not available");return}console.log("\u{1F9ED} Starting navigation to:",I),Q(!0);const W={origin:H,destination:v,travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};ct.route(W,(P,D)=>{try{if(D==="OK"&&P){const Y=P.routes[0],J=Y.legs[0];Be(J.distance.text),Ee(J.duration.text);const ve=J.steps;_i(ve),oi(0),co(ve.length),Yr(Y,ee),Jr(ve),Gr(H,v,ee),Kr(ve),ee.fitBounds(P.routes[0].bounds),console.log("\u2705 Enhanced navigation route created with custom polylines")}else console.error("Directions request failed:",D),Q(!1)}catch(Y){console.error("\u274C Error processing navigation result:",Y),Q(!1)}})}catch(W){console.error("\u274C Error starting navigation:",W),Q(!1)}},[Vi,Zo]=s.exports.useState(null),Gr=(v,I,W)=>{if(new window.google.maps.Marker({position:v,map:W,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="8" fill="#10b981" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(20,20),anchor:new window.google.maps.Point(10,10)},title:"Pickup Location"}),new window.google.maps.Marker({position:I,map:W,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="2" width="12" height="12" fill="#1f2937" stroke="white" stroke-width="2"/>
          </svg>
        `),scaledSize:new window.google.maps.Size(16,16),anchor:new window.google.maps.Point(8,8)},title:"Destination"}),oe&&H){const P=new window.google.maps.Marker({position:H,map:W,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="80" height="40" viewBox="0 0 80 40" xmlns="http://www.w3.org/2000/svg">
              <!-- Background bubble -->
              <rect x="5" y="5" width="70" height="25" rx="12" fill="#3b82f6" stroke="white" stroke-width="2"/>
              
              <!-- Person icon -->
              <circle cx="18" cy="17" r="6" fill="white"/>
              <circle cx="18" cy="15" r="2.5" fill="#3b82f6"/>
              <path d="M 12 22 Q 12 19 15 19 L 21 19 Q 24 19 24 22" fill="#3b82f6"/>
              
              <!-- Rider name text -->
              <text x="30" y="19" fill="white" font-family="Arial, sans-serif" font-size="9" font-weight="600" text-anchor="start">
                ${oe.rider.name.split(" ")[0]}
              </text>
              
              <!-- Pointer -->
              <polygon points="40,30 35,35 45,35" fill="#3b82f6" stroke="white" stroke-width="1"/>
            </svg>
          `),scaledSize:new window.google.maps.Size(80,40),anchor:new window.google.maps.Point(40,35)},title:`Rider: ${oe.rider.name}`,zIndex:2e3});Zo(P)}},Yr=(v,I)=>{try{po.forEach(Y=>Y.setMap(null)),Li([]),Yt(new Set),Ct(0),console.log("\u{1F6E3}\uFE0F Creating custom black route polylines...");const W=v.overview_path,P=Math.max(1,Math.floor(W.length/20)),D=[];for(let Y=0;Y<W.length-1;Y+=P){const J=W.slice(Y,Math.min(Y+P+1,W.length)),ve=new window.google.maps.Polyline({path:J,geodesic:!0,strokeColor:"#000000",strokeOpacity:1,strokeWeight:6,zIndex:100});ve.setMap(I),D.push(ve)}Li(D),console.log(`\u2705 Created ${D.length} custom route segments`)}catch(W){console.error("\u274C Error creating custom polylines:",W)}},Jr=v=>{try{console.log("\u{1F5FA}\uFE0F Extracting street names for enhanced turn highlighting..."),v.forEach((I,W)=>{const D=(I.instructions||"").match(/(?:onto|on|toward|turn\s+(?:left|right)\s+onto)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/gi);D&&D.forEach(Y=>{const J=Y.replace(/(?:onto|on|toward|turn\s+(?:left|right)\s+onto)\s+/gi,"").trim();console.log(`\u{1F6E3}\uFE0F Step ${W}: Street "${J}" identified`)})})}catch(I){console.error("\u274C Error extracting street names:",I)}},Kr=v=>{try{if(console.log("\u{1F9ED} Starting enhanced route tracking with off-route detection..."),lo&&clearInterval(lo),We&&clearInterval(We),co(v.length),Gt(-1),v.length>0){const P=v[0],D=P.instructions.replace(/<[^>]*>/g,"");so(D),Vt(yo(D)),ut&&setTimeout(()=>{try{zi("Starting enhanced navigation. "+D,P.distance?P.distance.text:""),Gt(0)}catch(Y){console.error("\u274C Error in initial voice announcement:",Y)}},1e3)}const I=setInterval(()=>{try{H&&_e.length>0&&Qo()}catch(P){console.error("\u274C Error in enhanced route progress tracking:",P)}},2e3),W=setInterval(()=>{try{H&&_e.length>0&&Zr()}catch(P){console.error("\u274C Error in off-route detection:",P)}},5e3);Oo(I),Ho(W)}catch(I){console.error("\u274C Error starting enhanced route tracking:",I)}},Qo=()=>{if(!H||!window.google||_e.length===0)return;let v=Ue,I=1/0;for(let W=Ue;W<Math.min(_e.length,Ue+3);W++){const P=_e[W];if(P.start_location){const D=P.start_location.lat(),Y=P.start_location.lng(),J=Yi(H.lat,H.lng,D,Y);J<I&&(I=J,v=W)}}if(v!==Ue&&(Xr(v),oi(v),v<_e.length)){const W=_e[v],P=W.instructions.replace(/<[^>]*>/g,"");so(P),Ht(P);const D=W.distance?W.distance.text:"";xi(D),Vt(yo(P));const Y=P.match(/(?:onto|on|toward)\s+([\w\s]+?)(?:\s|$|,|\.|\/)/i);if(Y){const J=Y[1].trim();Ni(J),console.log(`\u{1F6E3}\uFE0F HIGHLIGHTING STREET: ${J}`)}else Ni("");if(v!==Nr&&ut)try{zi(P,D),Gt(v)}catch(J){console.error("\u274C Error in voice announcement:",J)}if(v===_e.length-1&&Nr!==-999)try{zi("Destination ahead",""),Gt(-999)}catch(J){console.error("\u274C Error announcing destination:",J)}}if(q&&Ue<_e.length)try{const W=_e[Ue];if(W.end_location){const P=W.end_location.lat(),D=W.end_location.lng(),Y=tr(H.lat,H.lng,P,D);Vo(Y),console.log(`\u{1F9ED} Route bearing updated: ${Y.toFixed(1)}\xB0 (step ${Ue})`)}}catch(W){console.error("\u274C Error calculating route bearing:",W)}$i(H)},Xr=v=>{try{const I=Math.max(1,Math.floor(po.length/_e.length)),W=v*I,P=new Set(ht);for(let D=0;D<W&&D<po.length;D++)P.has(D)||(po[D].setOptions({strokeColor:"#d1d5db",strokeOpacity:.7,strokeWeight:4}),P.add(D),console.log(`\u{1FA76} Segment ${D} marked as completed (turned gray)`));Yt(P),Ct(W)}catch(I){console.error("\u274C Error updating route segment colors:",I)}},Zr=()=>{try{if(!H||_e.length===0||Ue>=_e.length)return;const v=_e[Ue];if(!v.start_location)return;const I=v.start_location.lat(),W=v.start_location.lng(),P=Yi(H.lat,H.lng,I,W),D=.1;P>D&&!Ye?(console.log("\u{1F6A8} DRIVER OFF-ROUTE DETECTED! Re-routing..."),yi(!0),Qr(),ut&&zi("Re-calculating route","")):P<=D&&Ye&&(console.log("\u2705 Driver back on route"),yi(!1))}catch(v){console.error("\u274C Error in off-route detection:",v)}},Qr=()=>{try{if(!oe||!H)return;console.log("\u{1F504} Re-routing from current position...");let v;if(oe.status==="pickup"){const I=oe.pickup;if(I.includes(",")){const[W,P]=I.split(",").map(D=>parseFloat(D.trim()));v={lat:W,lng:P}}}else{const I=oe.destination;if(I.includes(",")){const[W,P]=I.split(",").map(D=>parseFloat(D.trim()));v={lat:W,lng:P}}}v?(ki(v,oe.status==="pickup"?"Pickup Location":"Destination"),console.log("\u2705 Re-routing initiated successfully")):console.log("\u274C Could not parse destination coordinates for re-routing")}catch(v){console.error("\u274C Error triggering re-routing:",v)}},yo=v=>{const I=v.toLowerCase();return I.includes("turn left")?"\u21B0":I.includes("turn right")?"\u21B1":I.includes("slight left")?"\u2196":I.includes("slight right")?"\u2197":I.includes("sharp left")?"\u293A":I.includes("sharp right")?"\u293B":I.includes("straight")||I.includes("continue")?"\u2191":I.includes("u-turn")?"\u21BA":I.includes("merge")?"\u2934":I.includes("exit")||I.includes("ramp")?"\u2197":I.includes("keep left")?"\u2196":I.includes("keep right")?"\u2197":"\u2192"},Gi=()=>{A&&A.setDirections({routes:[]}),lo&&(clearInterval(lo),Oo(null)),window.speechSynthesis&&window.speechSynthesis.cancel(),Q(!1),Be(""),Ee(""),Ht(""),oi(0),_i([]),xi(""),Vt(""),Vo(null),so(""),jo(""),Uo(""),co(0),Gt(-1),H&&ee&&(ee.setCenter(H),ee.setZoom(16))},er=v=>{if(it){const I=it.getIcon();if(I&&typeof I=="object"){const W={...I,url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
              <g transform="rotate(0 30 30)">
                <!-- Car Body (ALWAYS pointing UP) -->
                <rect x="20" y="10" width="20" height="40" fill="${Ie.vehicleColor}" rx="8" stroke="white" stroke-width="2"/>

                <!-- Windshield -->
                <rect x="23" y="15" width="14" height="12" fill="rgba(135, 206, 235, 0.8)" rx="3" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                <!-- Rear Window -->
                <rect x="23" y="33" width="14" height="10" fill="rgba(135, 206, 235, 0.8)" rx="2" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                <!-- Side Windows -->
                <rect x="22" y="20" width="16" height="20" fill="rgba(135, 206, 235, 0.6)" rx="2"/>

                <!-- Headlights -->
                <circle cx="25" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>
                <circle cx="35" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>

                <!-- Taillights -->
                <circle cx="25" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>
                <circle cx="35" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>

                <!-- Direction Indicator (GREEN arrow pointing UP) -->
                <polygon points="30,8 35,15 25,15" fill="#10b981" stroke="white" stroke-width="1"/>
              </g>
            </svg>
          `)};it.setIcon(W)}}if(v!=null){const I=(v%360+360)%360;ge(I),console.log(`\u{1F5FA}\uFE0F Driver heading updated: ${I.toFixed(1)}\xB0`)}},Yi=(v,I,W,P)=>{const Y=(W-v)*Math.PI/180,J=(P-I)*Math.PI/180,ve=Math.sin(Y/2)*Math.sin(Y/2)+Math.cos(v*Math.PI/180)*Math.cos(W*Math.PI/180)*Math.sin(J/2)*Math.sin(J/2),Ve=2*Math.atan2(Math.sqrt(ve),Math.sqrt(1-ve));return 6371*Ve},Ci=async(v=!1)=>{var I;try{const W=localStorage.getItem("token");if(!W){console.warn("\u{1F5FA}\uFE0F DriverApp: No auth token found, heatmap unavailable"),Ae&&M("\u26A0\uFE0F Authentication Required","Please sign in to view demand zones","warning");return}console.log("\u{1F5FA}\uFE0F DriverApp: Fetching surge heatmap data...");const P=await fetch("/api/driver/surge/heatmap",{headers:{Authorization:`Bearer ${W}`}});if(P.ok){const D=await P.json();if(D.success){const Y=((I=D.surgeZones)==null?void 0:I.length)||0,J=Bi.length;kt(D.surgeZones||[]),dt(D.marketStats||{}),console.log(`\u{1F5FA}\uFE0F DriverApp: Loaded ${Y} surge zones for driver heatmap`),v&&Y>0&&(J===0||Math.abs(Y-J)>2)&&M("\u{1F3AF} Demand Zones Updated",`Found ${Y} high-demand areas`,"success")}else v&&M("\u26A0\uFE0F No Surge Data","No demand zones currently available","info")}else P.status===401||P.status===403?(console.warn("\u{1F5FA}\uFE0F DriverApp: Access denied to heatmap data"),v&&M("\u{1F512} Access Restricted","Heatmap unavailable for your account","warning"),kt([]),dt({})):(console.error("\u{1F5FA}\uFE0F DriverApp: Heatmap fetch failed:",P.status),v&&M("\u274C Data Loading Failed","Unable to load demand zones. Try again later.","error"),kt([]),dt({}))}catch(W){console.error("\u274C DriverApp: Error fetching heatmap data:",W),v&&M("\u274C Connection Error","Check your internet connection and try again","error"),kt([]),dt({})}},tr=(v,I,W,P)=>{const D=(P-I)*Math.PI/180,Y=v*Math.PI/180,J=W*Math.PI/180,ve=Math.sin(D)*Math.cos(J),Ve=Math.cos(Y)*Math.sin(J)-Math.sin(Y)*Math.cos(J)*Math.cos(D);return(Math.atan2(ve,Ve)*180/Math.PI+360)%360},zi=(v,I)=>{if(!ut||!window.speechSynthesis)return;window.speechSynthesis.cancel();let W="";I&&I!==""?W=`In ${I}, ${v}`:W=v,W=W.replace(/<[^>]*>/g,"").replace(/\b(US|I-|Route|SR|Highway|Hwy)\s*/gi,"").replace(/\s+/g," ").trim();const P=new SpeechSynthesisUtterance(W);P.rate=.9,P.pitch=1,P.volume=.8;const Y=window.speechSynthesis.getVoices().find(J=>J.lang.startsWith("en")&&(J.name.includes("Google")||J.name.includes("Microsoft")));Y&&(P.voice=Y),console.log("\u{1F50A} Voice announcement:",W),window.speechSynthesis.speak(P)},ir=()=>{rt.current||(rt.current=new Audio,rt.current.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAcBkLT3u/LeCsFJnjI8N2QQAoUXrTp66hVFAlGn+DyvmEcBz+a2/LDcyUGLIHO8tiJOQcZZ7zs6J1NEQxQp+PwtmQcBjiO2PLNeSsFJHbH8N2QQAoUXrTp66hVFApGn+DyvmAcBkLT3u/LeSsFJnjI8N2QQAoUXrTp66hVFAlGn+DyvmEcBz+a2/LDcyUGLIHO8tiJOQcZZ7zs6J1NEQ==",rt.current.loop=!0,rt.current.volume=.8);try{Ei(!0),rt.current.play(),console.log("\u{1F514} Cascading ride request audio chime started")}catch(v){console.error("\u274C Error starting cascading audio:",v)}},Ji=()=>{if(rt.current&&jt)try{rt.current.pause(),rt.current.currentTime=0,Ei(!1),console.log("\u{1F507} Cascading ride request audio chime stopped")}catch(v){console.error("\u274C Error stopping cascading audio:",v)}};s.exports.useEffect(()=>{let v;return T==="online"&&Si&&(v=setInterval(()=>{try{const I=(new Date().getTime()-Si.getTime())/36e5,W=qi+I;console.log("\u23F1\uFE0F Online hours calculated:",parseFloat(W.toFixed(2)),"(not overriding API data)")}catch(I){console.error("\u274C Error updating online hours:",I)}},3e4)),()=>{if(v)try{clearInterval(v)}catch(I){console.error("\u274C Error clearing interval:",I)}}},[T,Si,qi]),s.exports.useEffect(()=>{const v=W=>{try{if(W.webkitCompassHeading!==void 0){const P=W.webkitCompassHeading;Oi(P),Ke(P),console.log(`\u{1F9ED} iOS Compass heading: ${P.toFixed(1)}\xB0 (gyroscope)`)}else if(W.alpha!==null){const P=W.alpha;Oi(P),Ke(P),console.log(`\u{1F9ED} Android heading: ${P.toFixed(1)}\xB0 (gyroscope)`)}}catch(P){console.error("\u274C Error processing device orientation:",P)}};return(T==="online"||q)&&(async()=>{try{typeof(DeviceOrientationEvent==null?void 0:DeviceOrientationEvent.requestPermission)=="function"?await DeviceOrientationEvent.requestPermission()==="granted"?(window.addEventListener("deviceorientation",v),console.log("\u2728 Device orientation permission granted - gyroscope active")):console.log("\u26A0\uFE0F Device orientation permission denied"):(window.addEventListener("deviceorientation",v),console.log("\u2728 Device orientation listener added - gyroscope active"))}catch(W){console.error("\u274C Error requesting device orientation permission:",W)}})(),()=>{window.removeEventListener("deviceorientation",v)}},[T,q]),s.exports.useEffect(()=>{if(navigator.geolocation){const v={enableHighAccuracy:!0,timeout:2e4,maximumAge:0,enableCompass:!0},I=P=>{try{const D={lat:P.coords.latitude,lng:P.coords.longitude};console.log("\u{1F4CD} Driver GPS location:",`${D.lat.toFixed(6)}, ${D.lng.toFixed(6)}`);let Y=U;if(uo!==null)Y=uo,ge(Y);else if(P.coords.heading!==null&&P.coords.heading!==void 0)Y=P.coords.heading,ge(Y);else if(H){const J=D.lat-H.lat,ve=D.lng-H.lng;if(Math.abs(J)>1e-4||Math.abs(ve)>1e-4){const Ve=D.lat*Math.PI/180,a=(Math.atan2(ve*Math.cos(Ve),J)*(180/Math.PI)+360)%360;ge(a),Y=a,console.log(`\u{1F9ED} Movement heading: ${a.toFixed(1)}\xB0 (calculated from travel)`)}}if(oe&&ue){const J=typeof ue.pickup=="object"?ue.pickup.coordinates.lat:0,ve=typeof ue.pickup=="object"?ue.pickup.coordinates.lng:0;if(J&&ve){const Ve=Yi(D.lat,D.lng,J,ve);bi(Ve*5280),Ve*5280<=20&&$r&&!ni&&go(!1)}}if(O(D),ee){if(it)try{it.setPosition(D),er(Y),Vi&&oe&&Vi.setPosition(D)}catch(J){console.error("\u274C Error updating driver marker:",J)}else try{const J=new window.google.maps.Marker({position:D,map:ee,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                      <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                        <g transform="rotate(0 30 30)">
                          <!-- Car Body (ALWAYS pointing UP) -->
                          <rect x="20" y="10" width="20" height="40" fill="${Ie.vehicleColor}" rx="8" stroke="white" stroke-width="2"/>

                          <!-- Windshield -->
                          <rect x="23" y="15" width="14" height="12" fill="rgba(135, 206, 235, 0.8)" rx="3" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                          <!-- Rear Window -->
                          <rect x="23" y="33" width="14" height="10" fill="rgba(135, 206, 235, 0.8)" rx="2" stroke="rgba(0,0,0,0.3)" stroke-width="0.5"/>

                          <!-- Side Windows -->
                          <rect x="22" y="20" width="16" height="20" fill="rgba(135, 206, 235, 0.6)" rx="2"/>

                          <!-- Headlights -->
                          <circle cx="25" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>
                          <circle cx="35" cy="14" r="2" fill="white" stroke="#ccc" stroke-width="0.5"/>

                          <!-- Taillights -->
                          <circle cx="25" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>
                          <circle cx="35" cy="46" r="2" fill="#ff4444" stroke="#cc0000" stroke-width="0.5"/>

                          <!-- Direction Indicator (GREEN arrow pointing UP) -->
                          <polygon points="30,8 35,15 25,15" fill="#10b981" stroke="white" stroke-width="1"/>
                        </g>
                      </svg>
                    `),scaledSize:new window.google.maps.Size(60,60),anchor:new window.google.maps.Point(30,30)},title:"Your Location"});Mi(J)}catch(J){console.error("\u274C Error creating driver marker:",J)}try{q?oe&&(ee.setCenter(D),ee.setZoom(18)):(ee.setCenter(D),ee.setZoom(16))}catch(J){console.error("\u274C Error updating map center/zoom:",J)}}}catch(D){console.error("\u274C Error in updateLocation:",D)}};navigator.geolocation.getCurrentPosition(I,P=>{console.error("\u274C Error getting driver location:",P),console.log("\u{1F504} Using Bentonville, AR as driver location fallback");const D={lat:36.3729,lng:-94.2088};if(O(D),ee&&it)try{it.setPosition(D),ee.setCenter(D),console.log("\u2705 Driver marker set to Bentonville fallback")}catch(Y){console.error("\u274C Error setting fallback location on map:",Y)}},v);let W;return(T==="online"||T==="busy")&&(W=navigator.geolocation.watchPosition(I,P=>{console.error("\u274C Error watching driver location:",P),H||(console.log("\u{1F504} Setting initial fallback to Bentonville, AR"),O({lat:36.3729,lng:-94.2088}))},v)),()=>{W&&navigator.geolocation.clearWatch(W)}}},[ee,it,T,q]),s.exports.useEffect(()=>{if(typeof window<"u"&&window.io&&!He.current)try{console.log("\u{1F517} Creating SINGLE stable socket connection...");const v=window.location.protocol==="https:"?"https:":"http:",I=window.location.host,W=`${v}//${I}`;console.log("\u{1F310} Connecting to Socket.IO server at:",W);const P=window.io(W,{transports:["websocket","polling"],timeout:2e4,forceNew:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,maxReconnectionAttempts:5});return He.current=P,P.on("connect",()=>{console.log("\u{1F7E2} Socket connected successfully")}),P.on("disconnect",()=>{console.log("\u{1F534} Socket disconnected")}),P.on("connect_error",D=>{console.error("\u274C Socket connection error:",D),console.log("\u{1F504} Will retry connection automatically...")}),P.on("reconnect",D=>{console.log(`\u{1F7E2} Socket reconnected after ${D} attempts`)}),P.on("reconnect_error",D=>{console.error("\u274C Socket reconnection error:",D)}),P.on("reconnect_failed",()=>{console.error("\u274C Socket failed to reconnect after all attempts")}),P.on("new-ride-request",D=>{var Y;try{console.log("\u{1F697} New ride request received:",D),et({id:D.id,rider:D.rider||{name:"Demo Rider",rating:4.8,phone:"+1234567890"},pickup:D.pickup||Hi.pickup,destination:D.destination||Hi.destination,fare:D.estimatedFare||12.5,distance:D.distance||"2.3 miles",duration:D.duration||"8 minutes",estimatedFare:((Y=D.estimatedFare)==null?void 0:Y.toString())||"$12.50",estimatedTime:"8 min",rideType:D.rideType||"standard",riderPreferences:D.riderPreferences||{music:!1,conversation:!1,temperature:"no-preference"}}),wt(30)}catch(J){console.error("\u274C Error processing ride request:",J)}}),P.on("cascading-ride-request",D=>{var Y,J;try{console.log("\u{1F3AF} Cascading ride request received:",D),ii({id:D.rideId,rider:{name:"Rider",rating:4.8,phone:"+1234567890"},pickup:{address:D.pickupAddress,coordinates:D.pickup},destination:{address:D.destinationAddress,coordinates:D.destination},fare:D.estimatedFare||12.5,distance:(Y=D.driverInfo)!=null&&Y.distance?`${D.driverInfo.distance} mi`:"2.3 miles",duration:D.estimatedArrival?`${D.estimatedArrival} min`:"8 minutes",estimatedFare:((J=D.estimatedFare)==null?void 0:J.toString())||"$12.50",estimatedTime:D.estimatedArrival?`${D.estimatedArrival} min`:"8 min",rideType:D.rideType||"standard",riderPreferences:D.riderPreferences||{music:!1,conversation:!1,temperature:"no-preference"},cascadeInfo:D.cascadeInfo||{attempt:1,totalDrivers:1,timeRemaining:7}}),Tt(7),ir(),console.log("\u{1F514} Cascading request set up with 7-second countdown and audio")}catch(ve){console.error("\u274C Error handling cascading ride request:",ve)}}),P.on("ride-assignment-confirmed",D=>{try{console.log("\u2705 Ride assignment confirmed:",D)}catch(Y){console.error("\u274C Error processing ride confirmation:",Y)}}),P.on("ride-cancelled",D=>{try{console.log("\u{1F4E1} CANCELLATION DEBUG: DriverApp received ride-cancelled event"),console.log("\u{1F4E1} CANCELLATION DEBUG: Event data:",D),console.log("\u{1F4E1} CANCELLATION DEBUG: Current trip:",oe),console.log("\u{1F4E1} CANCELLATION DEBUG: RideId match check:",D.rideId,"===",oe==null?void 0:oe.id,"?",D.rideId===(oe==null?void 0:oe.id));const Y=g=>{const S=(g!=null?g:"").toString().trim();return/^[a-f0-9]{8}-?[a-f0-9]{4}-?[a-f0-9]{4}-?[a-f0-9]{4}-?[a-f0-9]{12}$/i.test(S.replace(/-/g,""))?S.toLowerCase().replace(/-/g,""):S},J=Y(D.rideId),ve=Y((oe==null?void 0:oe.id)||"");console.log("\u{1F504} CANCELLATION DEBUG: ID comparison - raw cancelRideId:",D.rideId,"raw currentTripId:",oe==null?void 0:oe.id),console.log("\u{1F504} CANCELLATION DEBUG: Normalized - cancelRideId:",J,"currentTripId:",ve);const Ve=oe&&J===ve,Wt=!!oe;let a=!1;if(Ve)console.log("\u2705 CANCELLATION DEBUG: Exact ID match - proceeding with normal cleanup");else{console.log("\u{1F504} CANCELLATION DEBUG: ID mismatch detected"),console.log("\u{1F504} CANCELLATION DEBUG: hasCurrentTrip?",Wt,"cancelRideId:",J,"currentTripId:",ve);const g=D.driverId&&(u==null?void 0:u.id)&&String(D.driverId)===String(u.id);if(console.log("\u{1F504} CANCELLATION DEBUG: Driver verification - data.driverId:",D.driverId,"user.id:",u==null?void 0:u.id,"match:",g),Wt)if(g)if(J.length>0)console.log("\u{1F527} CANCELLATION RECOVERY: Driver-verified cleanup despite ID mismatch - likely formatting issue"),a=!0;else{console.warn("\u26A0\uFE0F CANCELLATION DEBUG: Invalid cancellation data but for this driver - showing notification only"),M("Ride Cancelled","A ride was cancelled","warning");return}else{console.log("\u{1F504} CANCELLATION DEBUG: Cancellation not for this driver - ignoring");return}else{console.log("\u{1F504} CANCELLATION DEBUG: No current trip - ignoring unrelated cancellation");return}}if(a)M("Ride Cancelled","Ride cancelled (recovered from sync issue)","warning");else{const g=D.driverCompensation>0?`Ride Cancelled - You received $${D.driverCompensation} compensation`:D.message;M("Ride Cancelled",g,"warning")}try{ee&&window.directionsRenderer&&window.directionsRenderer.setMap(null),Ut(null),_i([]),oi(0),xi(null),Q(!1),Z("online"),console.log("\u{1F504} Complete route cleanup completed after cancellation"),He.current&&He.current.emit("ride-cancelled-ack",{rideId:D.rideId,driverId:u==null?void 0:u.id,timestamp:new Date().toISOString()})}catch(g){console.error("\u274C Error during route cleanup:",g)}}catch(Y){console.error("\u274C Error handling ride cancellation:",Y)}}),P.on("error",D=>{console.error("\u274C WebSocket error:",D)}),P.on("connect_error",D=>{console.error("\u274C WebSocket connection error:",D)}),()=>{try{P.disconnect()}catch(D){console.error("\u274C Error disconnecting socket:",D)}}}catch(v){console.error("\u274C Error initializing WebSocket:",v)}else{let v;return T==="online"&&!ue&&!oe&&(v=setInterval(()=>{try{Math.random()>.8&&(et(Hi),wt(30))}catch(I){console.error("\u274C Error in ride simulation:",I)}},15e3)),()=>{try{clearInterval(v)}catch(I){console.error("\u274C Error clearing simulation interval:",I)}}}},[]),s.exports.useEffect(()=>{He.current&&T==="online"&&o&&u&&(console.log("\u{1F504} Driver status changed to online - updating socket connection..."),He.current.emit("join-room",{userId:u.id,userType:"driver"}),He.current.emit("driver-connect",{driverId:u.id,status:"online",location:{lat:(H==null?void 0:H.lat)||36.3729,lng:(H==null?void 0:H.lng)||-94.2088,heading:0,speed:0},vehicle:{type:Ie.vehicleType||"sedan",license:"ABC-123",color:Ie.vehicleColor||"#3b82f6"},preferences:Ie,isAvailable:!0}),console.log("\u2705 Driver status updated via existing socket connection"))},[T,o,u,H,Ie]),s.exports.useEffect(()=>{let v;return oe&&u&&o&&(console.log("\u{1F50D} CANCELLATION POLLING: Starting trip status polling for trip",oe.id),v=setInterval(async()=>{try{const I=await fetch(`/api/driver/trip-status?tripId=${oe.id}&driverId=${u.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(I.ok){const W=await I.json();W.status==="cancelled"&&(console.log("\u{1F6A8} CANCELLATION DETECTED: Trip was cancelled - clearing driver state"),M("Trip Cancelled",W.driverCompensation>0?`Trip cancelled - You received $${W.driverCompensation} compensation`:"Trip was cancelled by rider","warning"),Ut(null),Z("online"),Gi(),console.log("\u2705 CANCELLATION RECOVERY: Driver state cleared successfully"))}}catch(I){console.warn("\u26A0\uFE0F CANCELLATION POLLING: Error checking trip status:",I)}},3e3)),()=>{v&&(clearInterval(v),console.log("\u{1F6D1} CANCELLATION POLLING: Stopped trip status polling"))}},[oe==null?void 0:oe.id,u==null?void 0:u.id,o]),s.exports.useEffect(()=>{let v;return tt>0&&(v=setInterval(()=>{try{wt(I=>I<=1?(et(null),0):I-1)}catch(I){console.error("\u274C Error updating request timeout:",I)}},1e3)),()=>{try{clearInterval(v)}catch(I){console.error("\u274C Error clearing timeout interval:",I)}}},[tt]),s.exports.useEffect(()=>{let v;return It>0&&(v=setInterval(()=>{try{Tt(I=>I<=1?(Ji(),ii(null),console.log("\u23F0 Cascading timeout reached - moving to next driver"),0):I-1)}catch(I){console.error("\u274C Error updating cascading timeout:",I)}},1e3)),()=>{try{clearInterval(v)}catch(I){console.error("\u274C Error clearing cascading timeout interval:",I)}}},[It]);const or=()=>{const v=T==="offline"?"online":"offline";if(Z(v),v==="online")mo(new Date),vi(I=>({...I,isOnline:!0})),M("\u{1F697} Driver Online","You are now available for ride requests!","success"),X("\u{1F697} Driver Status: Online","You are now available for ride requests. Pi VIP drivers earn more!",{tag:"driver-status",requireInteraction:!1});else if(v==="offline"){if(Si){const I=(new Date().getTime()-Si.getTime())/36e5,W=qi+I;Vr(W),console.log("\u{1F4F4} Offline hours calculated:",parseFloat(W.toFixed(2)),"(not overriding API data)"),mo(null)}et(null),Ut(null),wt(0),Gi(),vi(I=>({...I,isOnline:!1})),Vi&&(Vi.setMap(null),Zo(null))}},rr=()=>{ue&&(He.current?(He.current.emit("accept-ride",{rideId:ue.id}),console.log("\u2705 Ride acceptance sent via existing socket:",ue.id)):console.log("\u26A0\uFE0F No socket connection available for ride acceptance"),Ut({id:ue.id,rider:ue.rider,pickup:ue.pickup.address,destination:ue.destination.address,fare:ue.fare,duration:ue.duration,status:"accepted",startTime:new Date().toISOString()}),et(null),wt(0),Z("busy"),Ge(!1),go(!0),jr(!1),console.log("\u{1F4E6} Passenger info collapsed after trip acceptance"),setTimeout(()=>{ue&&ki(ue.pickup.coordinates,ue.pickup.address)},1e3))},nr=async()=>{try{const v=localStorage.getItem("token");if(!v)return console.log("\u274C No authentication token - cannot verify discount"),!1;(await fetch("/api/driver/confirm-discount-verification",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({riderId:ue==null?void 0:ue.rider.id,applicationId:fe==null?void 0:fe.applicationId,rideId:qe})})).ok&&(console.log("\u2705 Corporate discount extended successfully"),M("\u2705 Discount Extended","Corporate discount extended for 90 days","success"))}catch(v){console.error("Error confirming verification:",v)}ne(!1),xe(null),ti(null),rr()},ar=()=>{ne(!1),xe(null),ti(null),lr()},lr=()=>{et(null),wt(0)},sr=()=>{var v;if(te&&He.current)try{Ji(),He.current.emit("accept-cascading-ride",{rideId:te.id,driverId:u==null?void 0:u.id}),ii(null),Tt(0),console.log("\u2705 Cascading ride accepted, notifying server"),M("\u{1F389} Ride accepted! Starting navigation to pickup...","success");try{(v=te.pickup)!=null&&v.coordinates?(Gi(),setTimeout(()=>{ki(te.pickup.coordinates,te.pickup.address||"Pickup Location"),console.log("\u{1F9ED} Navigation started to pickup:",te.pickup.address)},1e3),Ut({id:te.id,pickup:te.pickup,destination:te.destination,fare:te.fare,status:"accepted",rider:te.rider,startTime:new Date().toISOString()})):console.warn("\u26A0\uFE0F No pickup coordinates available for navigation")}catch(I){console.error("\u274C Error starting navigation:",I),M("\u26A0\uFE0F Navigation unavailable, proceed manually to pickup","warning")}}catch(I){console.error("\u274C Error accepting cascading ride:",I)}},dr=()=>{if(te&&He.current)try{Ji(),He.current.emit("reject-cascading-ride",{rideId:te.id,driverId:u==null?void 0:u.id}),ii(null),Tt(0),console.log("\u274C Cascading ride rejected, notifying server")}catch(v){console.error("\u274C Error rejecting cascading ride:",v)}},bo=()=>{switch(T){case"online":return"#10b981";case"busy":return"#f59e0b";case"offline":return"#6b7280";default:return"#6b7280"}},vo=()=>{switch(T){case"online":return"Online";case"busy":return"Busy";case"offline":return"Offline";default:return"Offline"}},zt=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),Rt=(v,I)=>{vi(W=>({...W,[v]:I})),v==="voiceGuidance"&&qo(I),console.log(`\u2699\uFE0F Setting updated: ${v} = ${I}`)};return o?t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},children:[Ur&&e("div",{style:{position:"fixed",left:`${ai.x}px`,top:`${ai.y}px`,width:"60px",height:"60px",backgroundColor:"#1f2937",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",cursor:fo?"grabbing":"grab",zIndex:9999,border:"3px solid #3b82f6",color:"white",fontSize:"20px",fontWeight:"bold",fontFamily:"serif",userSelect:"none",transition:fo?"none":"all 0.3s ease"},onMouseDown:v=>{gt(!0);const I=v.clientX-ai.x,W=v.clientY-ai.y,P=Y=>{li({x:Math.max(0,Math.min(window.innerWidth-60,Y.clientX-I)),y:Math.max(0,Math.min(window.innerHeight-60,Y.clientY-W))})},D=()=>{gt(!1),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",D)},onTouchStart:v=>{gt(!0);const I=v.touches[0],W=I.clientX-ai.x,P=I.clientY-ai.y,D=J=>{const ve=J.touches[0];li({x:Math.max(0,Math.min(window.innerWidth-60,ve.clientX-W)),y:Math.max(0,Math.min(window.innerHeight-60,ve.clientY-P))})},Y=()=>{gt(!1),document.removeEventListener("touchmove",D),document.removeEventListener("touchend",Y)};document.addEventListener("touchmove",D),document.addEventListener("touchend",Y)},onClick:()=>{fo||(ji(!1),window.focus(),console.log("\u{1F4F1} Pi overlay clicked - returning to navigation"))},children:"\u03C0"}),t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"56px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:bo()}}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("div",{style:{fontSize:"18px",fontWeight:"800",color:"white",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"48px"},children:"\u03C0"}),e("span",{style:{color:"#60a5fa"},children:"Driver"})]}),e("div",{style:{fontSize:"11px",opacity:.8},children:vo()})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e("button",{onClick:()=>Ne(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",textDecoration:"none"},children:e(xt,{size:18})}),e("button",{onClick:()=>je(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer"},children:e(no,{size:18})}),e("button",{onClick:()=>nt(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:"6px",padding:"6px",color:"white",cursor:"pointer"},children:e(Ar,{size:18})}),e("button",{onClick:j,style:{background:"rgba(220, 38, 38, 0.2)",border:"none",borderRadius:"6px",padding:"6px",color:"#fca5a5",cursor:"pointer"},title:"Logout",children:e(Jn,{size:18})})]})]}),oe&&q&&t("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%)",color:"white",padding:"18px 16px",zIndex:1e3,boxShadow:"0 6px 20px rgba(0, 0, 0, 0.2)",borderBottom:"3px solid #1d4ed8"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[e("div",{style:{fontSize:"32px",width:"50px",height:"50px",background:"rgba(255, 255, 255, 0.25)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid rgba(255, 255, 255, 0.3)"},children:Lr}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"13px",opacity:.9,marginBottom:"4px",fontWeight:"500"},children:Dt?`In ${Dt}`:"Now"}),e("div",{style:{fontSize:"18px",fontWeight:"700",lineHeight:"1.3",marginBottom:"2px"},children:Bn||Et||"Continue straight"}),Ui&&t("div",{style:{display:"inline-block",backgroundColor:"#000000",color:"#ffffff",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",marginTop:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:["\u{1F4CD} Turn onto ",Ui]}),ri&&mi&&t("div",{style:{fontSize:"12px",opacity:.8,fontStyle:"italic"},children:["Then in ",mi,": ",ri.substring(0,40),"..."]})]}),t("div",{style:{textAlign:"right"},children:[e("div",{style:{fontSize:"22px",fontWeight:"800",marginBottom:"2px"},children:ke}),e("div",{style:{fontSize:"12px",opacity:.9},children:K})]})]}),e("div",{style:{width:"100%",height:"6px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"3px",overflow:"hidden",marginBottom:"10px"},children:e("div",{style:{width:`${Math.min(100,(Ue+1)/Math.max(1,pt)*100)}%`,height:"100%",backgroundColor:"#10b981",borderRadius:"3px",transition:"width 0.5s ease",boxShadow:"0 0 8px rgba(16, 185, 129, 0.5)"}})}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{padding:"4px 8px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:oe.status==="accepted"?"\u{1F4CD} TO PICKUP":oe.status==="pickup"?"\u{1F697} PICKUP RIDER":"\u{1F3AF} TO DESTINATION"}),t("div",{style:{opacity:.9},children:["Step ",Ue+1," of ",pt]}),e("button",{onClick:()=>qo(!ut),style:{background:ut?"rgba(16, 185, 129, 0.3)":"rgba(255, 255, 255, 0.2)",border:ut?"1px solid rgba(16, 185, 129, 0.5)":"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",padding:"4px 6px",color:"white",cursor:"pointer",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"2px"},children:ut?"\u{1F50A}":"\u{1F507}"})]}),e("div",{style:{fontWeight:"700",fontSize:"16px",color:"#fbbf24"},children:zt(oe.fare)})]})]}),t("div",{style:{flex:1,position:"relative",minHeight:0},children:[e("div",{ref:le,style:{width:"100%",height:"100%",minHeight:"400px",backgroundColor:"#f3f4f6"}}),Ae&&ee&&e($a,{map:ee,surgeZones:Bi,showLabels:!0,onZoneClick:v=>{console.log("\u{1F5FA}\uFE0F Driver clicked surge zone:",v),M(`\u{1F3AF} High-Demand Zone: ${v.surgeMultiplier}x surge pricing`,"Drive to this area for more ride requests!","info")}}),pe&&!oe&&t("div",{style:{position:"absolute",top:"16px",left:"16px",right:"16px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #e5e7eb"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Today's Performance"}),e("button",{onClick:()=>Ge(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:e(id,{size:16,color:"#6b7280"})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:"8px",padding:"12px 16px",textAlign:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#10b981"},"data-testid":"today-earnings",children:wi?"Loading...":zt(re.today||0)}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Today"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#3b82f6"},children:re.trips}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Trips"})]}),t("div",{children:[t("div",{style:{fontSize:"14px",fontWeight:"700",color:"#f59e0b"},children:[re.hours,"h"]}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Online"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#ef4444"},children:re.miles}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Miles"})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#8b5cf6"},children:zt(re.lastRide)}),e("div",{style:{fontSize:"9px",color:"#6b7280"},children:"Last Ride"})]})]})]}),!pe&&!oe&&e("div",{style:{position:"absolute",top:"16px",left:"16px",right:"16px",zIndex:1e3},children:t("button",{onClick:()=>Ge(!0),style:{width:"100%",background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"none",borderRadius:"8px",padding:"10px 16px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:wi?"Loading...":`${zt(re.today||0)} \u2022 ${re.trips||0} trips \u2022 ${re.miles||0} mi`}),e(ed,{size:16,color:"#6b7280"})]})}),t("div",{style:{position:"absolute",bottom:"20px",right:"20px",display:"flex",flexDirection:"column",gap:"8px",zIndex:1e3},children:[e("button",{onClick:()=>{mt(!Ae),Ae||Ci()},style:{width:"44px",height:"44px",borderRadius:"50%",background:Ae?"#ef4444":"white",border:`2px solid ${Ae?"#ef4444":"#e5e7eb"}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"},title:Ae?"Hide Surge Zones":"Show High-Demand Zones",children:Ae?"\u{1F3AF}":"\u{1F4CA}"}),e("button",{onClick:()=>{H&&ee&&(ee.setCenter(H),ee.setZoom(oe?18:16))},style:{width:"44px",height:"44px",borderRadius:"50%",background:"white",border:"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:e(Rr,{size:18,color:"#3b82f6"})}),e("button",{onClick:()=>{const v=prompt(`\u{1F697} GPS not accurate for driving?

Enter your current city and state:
(e.g., "Seattle, WA" or "Dallas, TX")`);if(v){const I=new window.google.maps.places.PlacesService(ee),W={query:v,fields:["geometry","formatted_address"]};I.textSearch(W,(P,D)=>{if(D===window.google.maps.places.PlacesServiceStatus.OK&&P&&P.length>0){const Y=P[0],J={lat:Y.geometry.location.lat(),lng:Y.geometry.location.lng()};console.log("\u{1F697} Driver location manually calibrated to:",J),O(J),ee&&(ee.setCenter(J),ee.setZoom(13)),M(`\u2705 Driver location updated: ${Y.formatted_address}`,"success")}else M("\u274C Could not find that location. Please try again.","error")})}},style:{width:"44px",height:"44px",borderRadius:"50%",background:"#10b981",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",color:"white"},title:"Fix GPS Location",children:"\u{1F4CD}"}),oe&&e("button",{onClick:()=>{oe.status==="accepted"&&ue?ki(ue.pickup.coordinates,ue.pickup.address):oe.status==="pickup"&&ue&&ki(ue.destination.coordinates,ue.destination.address)},style:{width:"44px",height:"44px",borderRadius:"50%",background:"#3b82f6",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",color:"white"},children:e(Qd,{size:18})})]})]}),t("div",{style:{background:"white",padding:"16px",borderTop:"1px solid #e5e7eb",boxShadow:"0 -4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[t("button",{onClick:or,disabled:T==="busy",style:{width:"100%",height:"60px",borderRadius:"12px",border:"none",background:T==="offline"?"linear-gradient(135deg, #10b981 0%, #059669 100%)":T==="online"?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",fontSize:"18px",fontWeight:"700",cursor:T==="busy"?"not-allowed":"pointer",opacity:T==="busy"?.7:1,transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[e(Jn,{size:24}),e("span",{children:T==="offline"?"\u{1F7E2} GO ONLINE":T==="online"?"\u{1F534} GO OFFLINE":"\u{1F7E1} ON TRIP"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:bo()}}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:vo()}),T==="online"&&e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"\u2022 Ready for rides"}),T==="busy"&&e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"\u2022 In progress"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:Te>20?"#f0fdf4":"#fef2f2",borderRadius:"6px"},children:[e($s,{size:16,color:Te>20?"#10b981":"#ef4444"}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:Te>20?"#10b981":"#ef4444"},children:[Te,"%"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:qt>25?"#f0fdf4":"#fefbf2",borderRadius:"6px"},children:[e(Sd,{size:16,color:qt>25?"#10b981":"#f59e0b"}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:qt>25?"#10b981":"#f59e0b"},children:[qt,"%"]})]})]})]})]}),!1,te&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(139, 69, 19, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1100},children:t("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",borderRadius:"24px",padding:"28px",width:"100%",maxWidth:"420px",border:"3px solid #f59e0b",boxShadow:"0 25px 50px rgba(0,0,0,0.3)"},children:[e("div",{style:{width:"100%",height:"6px",backgroundColor:"#fef3c7",borderRadius:"3px",marginBottom:"24px",overflow:"hidden",border:"1px solid #f59e0b"},children:e("div",{style:{width:`${It/7*100}%`,height:"100%",backgroundColor:It<=3?"#ef4444":"#f59e0b",transition:"width 1s linear, background-color 0.3s ease",boxShadow:"0 0 8px rgba(245, 158, 11, 0.6)"}})}),t("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e("div",{style:{fontSize:"26px",fontWeight:"800",color:"#92400e",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"\u{1F3AF} Priority Ride Request"}),t("div",{style:{fontSize:"15px",color:"#f59e0b",fontWeight:"600",marginTop:"4px"},children:[It," seconds to respond \u2022 ",jt?"\u{1F514} Chiming":"\u{1F507}"]}),t("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px",fontStyle:"italic"},children:["Attempt #",((So=te.cascadeInfo)==null?void 0:So.attempt)||1," of ",((wo=te.cascadeInfo)==null?void 0:wo.totalDrivers)||1]})]}),t("div",{style:{padding:"20px",backgroundColor:"#fffbeb",borderRadius:"16px",marginBottom:"20px",border:"2px solid #fbbf24"},children:[t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"700",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u{1F4CD} Pickup"}),e("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600",lineHeight:"1.4"},children:((ko=te.pickup)==null?void 0:ko.address)||"Pickup location"})]}),t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#92400e",fontWeight:"700",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\u{1F3AF} Destination"}),e("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600",lineHeight:"1.4"},children:((Co=te.destination)==null?void 0:Co.address)||"Destination"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #f59e0b"},children:[t("div",{style:{textAlign:"center"},children:[t("div",{style:{fontSize:"20px",fontWeight:"800",color:"#059669"},children:["$",typeof te.fare=="number"?te.fare.toFixed(2):te.fare||"12.50"]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Fare"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"800",color:"#3b82f6"},children:te.distance||"2.3 mi"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Distance"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"800",color:"#f59e0b"},children:te.duration||"8 min"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Duration"})]})]})]}),t("div",{style:{display:"flex",gap:"16px"},children:[e("button",{onClick:dr,style:{flex:1,background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",color:"#374151",border:"2px solid #d1d5db",borderRadius:"16px",padding:"18px",fontSize:"17px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease"},children:"\u274C Reject"}),e("button",{onClick:sr,style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",border:"2px solid #f59e0b",borderRadius:"16px",padding:"18px",fontSize:"17px",fontWeight:"700",cursor:"pointer",boxShadow:"0 8px 20px rgba(245, 158, 11, 0.3)",transition:"all 0.2s ease"},children:"\u2705 Accept"})]})]})}),b&&oe&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",zIndex:2e3},children:t("div",{style:{backgroundColor:"white",flex:1,margin:"20px",borderRadius:"16px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600"},children:oe.rider.name.charAt(0)}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"16px"},children:oe.rider.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"\u{1F4AC} Live Chat"})]})]}),e("button",{onClick:()=>f(!1),style:{background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"16px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"12px"},children:k.length===0?e("div",{style:{textAlign:"center",color:"#6b7280",padding:"20px",fontStyle:"italic"},children:"\u{1F4AC} Start a conversation with your rider"}):k.map(v=>t("div",{style:{alignSelf:v.senderType==="driver"?"flex-end":"flex-start",maxWidth:"80%"},children:[e("div",{style:{padding:"12px 16px",borderRadius:"18px",backgroundColor:v.senderType==="driver"?"#3b82f6":"#f3f4f6",color:v.senderType==="driver"?"white":"#1f2937",fontSize:"14px",lineHeight:"1.4"},children:v.message}),t("div",{style:{fontSize:"11px",color:"#9ca3af",margin:"4px 8px",textAlign:v.senderType==="driver"?"right":"left"},children:[new Date(v.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),v.senderType==="driver"&&e("span",{style:{marginLeft:"4px"},children:v.delivered?"\u2713":"\u23F0"})]})]},v.id))}),t("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"12px",alignItems:"center"},children:[e("input",{type:"text",value:z,onChange:v=>y(v.target.value),placeholder:"Type a message...",style:{flex:1,padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"24px",fontSize:"14px",outline:"none"},onKeyPress:v=>{v.key==="Enter"&&V(z)},onFocus:v=>v.target.style.borderColor="#3b82f6",onBlur:v=>v.target.style.borderColor="#e5e7eb"}),e("button",{onClick:()=>V(z),disabled:!z.trim(),style:{width:"44px",height:"44px",borderRadius:"50%",border:"none",backgroundColor:z.trim()?"#3b82f6":"#e5e7eb",color:"white",cursor:z.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"\u27A4"})]}),e("div",{style:{padding:"12px 16px",borderTop:"1px solid #f3f4f6",display:"flex",gap:"8px",flexWrap:"wrap"},children:["I'm on my way!","I'll be there in 5 minutes","I'm here","Running a bit late","Safe travels!"].map(v=>e("button",{onClick:()=>V(v),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"16px",fontSize:"12px",cursor:"pointer",color:"#374151"},children:v},v))})]})}),!1,Oe&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"20px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Earnings Summary"}),e("button",{onClick:()=>je(!1),style:{background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:[t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#0284c7"},"data-testid":"stats-overlay-today",children:wi?"Loading...":zt(re.today||0)}),e("div",{style:{color:"#6b7280"},children:"Today's Earnings"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#16a34a"},children:zt(re.week)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Week"})]}),t("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"12px",textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#d97706"},children:zt(re.month)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"This Month"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:re.trips}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Trips"})]}),t("div",{style:{textAlign:"center"},children:[t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:[re.hours,"h"]}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Online"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:re.rating}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Rating"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:zt(re.lastRide)}),e("div",{style:{fontSize:"11px",color:"#6b7280"},children:"Last Ride"})]})]})]})]})}),Fe&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"20px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"85vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",margin:0},children:"Settings"}),e("button",{onClick:()=>nt(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px"},children:"\xD7"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"2px solid #e0f2fe"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:"\u{1F50A} Voice Guidance"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Turn-by-turn navigation announcements"})]}),e(di,{checked:Ie.voiceGuidance,onChange:v=>Rt("voiceGuidance",v)})]}),e("div",{style:{fontSize:"14px",color:Ie.voiceGuidance?"#059669":"#6b7280",fontWeight:"600"},children:Ie.voiceGuidance?"\u2705 Voice guidance is ON":"\u274C Voice guidance is OFF"})]}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F4B5} Accept Cash"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept cash payments from riders"})]}),e(di,{checked:Ie.acceptCash,onChange:v=>Rt("acceptCash",v)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F6E3}\uFE0F Long Trips"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept rides over 45 minutes"})]}),e(di,{checked:Ie.acceptLongTrips,onChange:v=>Rt("acceptLongTrips",v)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F465} Pool Rides"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Accept shared rides with multiple passengers"})]}),e(di,{checked:Ie.acceptPoolRides,onChange:v=>Rt("acceptPoolRides",v)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u26A1 Auto Accept"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Automatically accept ride requests"})]}),e(di,{checked:Ie.autoAccept,onChange:v=>Rt("autoAccept",v)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F415} Accept Pets"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow riders to bring pets on rides"})]}),e(di,{checked:Ie.acceptPets,onChange:v=>Rt("acceptPets",v)})]})}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F466} Accept Teens"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Allow unaccompanied minors (13-17) to book rides"})]}),e(di,{checked:Ie.acceptTeens,onChange:v=>Rt("acceptTeens",v)})]})}),t("div",{style:{padding:"20px",backgroundColor:"#f0f9ff",borderRadius:"12px",border:"2px solid #e0f2fe"},children:[e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"\u{1F697} Vehicle Appearance"}),t("div",{style:{marginBottom:"16px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"Vehicle Color"}),e("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{color:"#3b82f6",name:"Blue"},{color:"#ef4444",name:"Red"},{color:"#10b981",name:"Green"},{color:"#f59e0b",name:"Yellow"},{color:"#6b7280",name:"Gray"},{color:"#8b5cf6",name:"Purple"},{color:"#000000",name:"Black"},{color:"#ffffff",name:"White"}].map(v=>e("button",{onClick:()=>vi(I=>({...I,vehicleColor:v.color})),style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:v.color,border:Ie.vehicleColor===v.color?"3px solid #1d4ed8":v.color==="#ffffff"?"2px solid #e5e7eb":"2px solid transparent",cursor:"pointer",position:"relative",transition:"all 0.2s"},title:v.name,children:Ie.vehicleColor===v.color&&e("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:v.color==="#ffffff"||v.color==="#f59e0b"?"#000":"#fff",fontSize:"16px",fontWeight:"bold"},children:"\u2713"})},v.color))})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"Vehicle Type"}),e("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{type:"compact",name:"Compact"},{type:"sedan",name:"Sedan"},{type:"suv",name:"SUV"},{type:"luxury",name:"Luxury"}].map(v=>e("button",{onClick:()=>vi(I=>({...I,vehicleType:v.type})),style:{padding:"8px 16px",borderRadius:"20px",border:"2px solid",borderColor:Ie.vehicleType===v.type?"#1d4ed8":"#e5e7eb",backgroundColor:Ie.vehicleType===v.type?"#dbeafe":"white",color:Ie.vehicleType===v.type?"#1d4ed8":"#6b7280",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:v.name},v.type))})]}),t("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"white",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Map Preview"}),e(at,{color:Ie.vehicleColor,type:Ie.vehicleType,size:50,isDriver:!0})]})]}),e("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"\u{1F514} Notifications"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Push notifications and alerts"})]}),e(di,{checked:Ie.notifications,onChange:v=>Rt("notifications",v)})]})}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e("span",{style:{fontWeight:"600",color:"#1f2937"},children:"\u{1F697} Vehicle Info"}),e(Gs,{size:20,color:"#6b7280"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e("span",{style:{fontWeight:"600",color:"#1f2937"},children:"\u{1F6E1}\uFE0F Insurance"}),e(Ti,{size:20,color:"#6b7280"})]})]})]})}),e(Ap,{isOpen:Re,riderInfo:fe,onConfirm:nr,onCancel:ar}),lt&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",zIndex:1200,overflow:"hidden"},onClick:v=>{v.target===v.currentTarget&&Ne(!1)},children:t("div",{style:{position:"relative",backgroundColor:"white",borderRadius:"16px",width:"90vw",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",transform:"scale(1)",transition:"transform 0.2s ease"},children:[e("button",{onClick:()=>Ne(!1),style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.1)",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"#666",zIndex:1,transition:"background 0.2s ease"},onMouseEnter:v=>{v.target.style.background="rgba(0,0,0,0.2)"},onMouseLeave:v=>{v.target.style.background="rgba(0,0,0,0.1)"},children:"\xD7"}),e("div",{style:{padding:"10px"},children:e(Oa,{})})]})}),e(Fp,{userType:"driver",userId:(zo=u==null?void 0:u.id)==null?void 0:zo.toString(),className:"driver-chatbot",isMinimized:B,onToggleMinimize:()=>$(!B)})]}):e("div",{style:{minHeight:"100vh",backgroundColor:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"40px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"100%",maxWidth:"400px"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"800",color:"#1e293b",marginBottom:"8px"},children:"\u{1F697} Driver Login"}),e("p",{style:{color:"#64748b",fontSize:"16px"},children:"Sign in to your driver account"})]}),t("form",{onSubmit:R,children:[l&&e("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #FECACA",color:"#DC2626",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"20px"},children:l}),t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address"}),e("input",{type:"email",value:p.email,onChange:v=>h(I=>({...I,email:v.target.value})),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},placeholder:"driver@example.com"})]}),t("div",{style:{marginBottom:"24px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Password"}),t("div",{style:{position:"relative"},children:[e("input",{type:c?"text":"password",value:p.password,onChange:v=>h(I=>({...I,password:v.target.value})),required:!0,style:{width:"100%",padding:"12px",paddingRight:"40px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},placeholder:"Enter your password"}),e("button",{type:"button",onClick:()=>m(!c),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer"},children:"\u{1F441}\uFE0F"})]})]}),e("button",{type:"submit",disabled:r,style:{width:"100%",backgroundColor:r?"#9CA3AF":"#4F46E5",color:"white",padding:"12px",borderRadius:"8px",border:"none",fontSize:"16px",fontWeight:"600",cursor:r?"not-allowed":"pointer",transition:"background-color 0.2s"},children:r?"\u{1F504} Signing in...":"\u{1F697} Sign in as Driver"})]})]})})},Tp=({isOpen:o,onClose:i,onSubmit:r})=>{const[n,l]=s.exports.useState(1),[d,p]=s.exports.useState({firstName:"",lastName:"",dateOfBirth:"",ssn:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",licenseNumber:"",licenseState:"",licenseValidUntil:"",licenseImage:null,vehicleMake:"",vehicleModel:"",vehicleYear:"",licensePlate:"",vehicleColor:"",vehicleVin:"",insuranceCompany:"",policyNumber:"",insuranceExpiryDate:"",insuranceImage:null,registrationExpiryDate:"",registrationImage:null,bankName:"",routingNumber:"",accountNumber:"",accountHolderName:"",backgroundCheckConsent:!1,profilePhoto:null,emergencyContactName:"",emergencyContactPhone:"",termsAccepted:!1,dataProcessingConsent:!1}),[h,c]=s.exports.useState({}),[m,u]=s.exports.useState(!1),x=[{number:1,title:"Personal Info",icon:Qe},{number:2,title:"License & Vehicle",icon:Ze},{number:3,title:"Insurance & Registration",icon:Ti},{number:4,title:"Banking",icon:Ii},{number:5,title:"Documents & Review",icon:xt}],C=(y,B)=>{p($=>({...$,[y]:B})),h[y]&&c($=>({...$,[y]:""}))},F=(y,B)=>{p($=>({...$,[y]:B}))},k=y=>{const B={};switch(y){case 1:d.firstName||(B.firstName="First name is required"),d.lastName||(B.lastName="Last name is required"),d.dateOfBirth||(B.dateOfBirth="Date of birth is required"),d.ssn||(B.ssn="SSN is required"),d.email||(B.email="Email is required"),d.phone||(B.phone="Phone number is required"),d.address||(B.address="Address is required");break;case 2:d.licenseNumber||(B.licenseNumber="License number is required"),d.licenseValidUntil||(B.licenseValidUntil="License expiry date is required"),d.vehicleMake||(B.vehicleMake="Vehicle make is required"),d.vehicleModel||(B.vehicleModel="Vehicle model is required"),d.vehicleYear||(B.vehicleYear="Vehicle year is required"),d.licensePlate||(B.licensePlate="License plate is required");break;case 3:d.insuranceCompany||(B.insuranceCompany="Insurance company is required"),d.policyNumber||(B.policyNumber="Policy number is required"),d.insuranceExpiryDate||(B.insuranceExpiryDate="Insurance expiry date is required"),d.registrationExpiryDate||(B.registrationExpiryDate="Registration expiry date is required");break;case 4:d.bankName||(B.bankName="Bank name is required"),d.routingNumber||(B.routingNumber="Routing number is required"),d.accountNumber||(B.accountNumber="Account number is required"),d.accountHolderName||(B.accountHolderName="Account holder name is required");break;case 5:d.backgroundCheckConsent||(B.backgroundCheckConsent="Background check consent is required"),d.termsAccepted||(B.termsAccepted="Terms and conditions must be accepted"),d.dataProcessingConsent||(B.dataProcessingConsent="Data processing consent is required");break}return c(B),Object.keys(B).length===0},w=()=>{k(n)&&l(y=>Math.min(y+1,5))},b=()=>{l(y=>Math.max(y-1,1))},f=async()=>{if(k(5)){u(!0);try{const y=JSON.parse(localStorage.getItem("rideflow_auth")||"{}");if(!y.token)throw new Error("Authentication required");const B=await fetch("/api/drivers/apply",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y.token}`},body:JSON.stringify(d)}),$=await B.json();if(B.ok){if(d.licenseImage||d.insuranceImage||d.registrationImage||d.profilePhoto){const M=new FormData;d.licenseImage&&M.append("licenseImage",d.licenseImage),d.insuranceImage&&M.append("insuranceImage",d.insuranceImage),d.registrationImage&&M.append("registrationImage",d.registrationImage),d.profilePhoto&&M.append("profilePhoto",d.profilePhoto),(await fetch("/api/drivers/documents",{method:"POST",headers:{Authorization:`Bearer ${y.token}`},body:M})).ok||console.warn("Document upload failed, but application was submitted")}r({...d,applicationId:$.applicationId,status:$.status,backgroundCheckId:$.backgroundCheckId}),i();const X=document.createElement("div");X.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            max-width: 300px;
          `,X.innerHTML=`
            <div style="margin-bottom: 8px;">\u{1F389} Driver Application Submitted!</div>
            <div style="font-size: 12px; opacity: 0.9;">Background check initiated. You'll receive updates via email.</div>
          `,document.body.appendChild(X),setTimeout(()=>document.body.removeChild(X),5e3)}else throw new Error($.error||"Application submission failed")}catch(y){console.error("Application submission error:",y),c({general:y.message})}finally{u(!1)}}},z=y=>{const B=y.replace(/\D/g,""),$=B.match(/^(\d{0,3})(\d{0,2})(\d{0,4})$/);return $?[$[1],$[2],$[3]].filter(Boolean).join("-"):B};return o?e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[e("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",margin:0},children:"New Driver Enrollment"}),t("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0 0"},children:["Step ",n," of 5"]})]}),e("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:e(io,{size:24})})]}),e("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"center"},children:e("div",{style:{display:"flex",gap:"24px",alignItems:"center"},children:x.map((y,B)=>{const $=y.icon,X=y.number===n,M=y.number<n;return t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:M?"#10b981":X?"#3b82f6":"#e2e8f0",color:M||X?"white":"#64748b"},children:M?e(ci,{size:20}):e($,{size:20})}),e("span",{style:{fontSize:"12px",fontWeight:X?"600":"400",color:X?"#3b82f6":"#64748b"},children:y.title}),B<x.length-1&&e("div",{style:{width:"24px",height:"2px",backgroundColor:y.number<n?"#10b981":"#e2e8f0",margin:"0 8px"}})]},y.number)})})}),t("div",{style:{padding:"24px",overflow:"auto",flex:1},children:[t("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e("h1",{style:{fontSize:"64px",fontWeight:"800",color:"#1e293b",margin:"0 0 8px 0"},children:"\u03C0 Driver"}),e("p",{style:{color:"#64748b",fontSize:"16px",margin:0},children:"Complete your driver application"})]}),n===1&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"First Name *"}),e("input",{type:"text",value:d.firstName,onChange:y=>C("firstName",y.target.value),style:{width:"100%",padding:"12px",border:h.firstName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.firstName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.firstName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Last Name *"}),e("input",{type:"text",value:d.lastName,onChange:y=>C("lastName",y.target.value),style:{width:"100%",padding:"12px",border:h.lastName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.lastName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.lastName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Date of Birth *"}),e("input",{type:"date",value:d.dateOfBirth,onChange:y=>C("dateOfBirth",y.target.value),style:{width:"100%",padding:"12px",border:h.dateOfBirth?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.dateOfBirth&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.dateOfBirth})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Social Security Number *"}),e("input",{type:"text",value:d.ssn,onChange:y=>C("ssn",z(y.target.value)),placeholder:"XXX-XX-XXXX",maxLength:11,style:{width:"100%",padding:"12px",border:h.ssn?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.ssn&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.ssn})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Email Address *"}),e("input",{type:"email",value:d.email,onChange:y=>C("email",y.target.value),style:{width:"100%",padding:"12px",border:h.email?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.email&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.email})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number *"}),e("input",{type:"tel",value:d.phone,onChange:y=>C("phone",y.target.value),placeholder:"(555) 123-4567",style:{width:"100%",padding:"12px",border:h.phone?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.phone&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.phone})]}),t("div",{style:{gridColumn:"1 / -1"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Address *"}),e("input",{type:"text",value:d.address,onChange:y=>C("address",y.target.value),style:{width:"100%",padding:"12px",border:h.address?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.address&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.address})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"City"}),e("input",{type:"text",value:d.city,onChange:y=>C("city",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"State"}),e("input",{type:"text",value:d.state,onChange:y=>C("state",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===2&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Driver's License Information"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"License Number *"}),e("input",{type:"text",value:d.licenseNumber,onChange:y=>C("licenseNumber",y.target.value),style:{width:"100%",padding:"12px",border:h.licenseNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licenseNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licenseNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Valid Until *"}),e("input",{type:"date",value:d.licenseValidUntil,onChange:y=>C("licenseValidUntil",y.target.value),style:{width:"100%",padding:"12px",border:h.licenseValidUntil?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licenseValidUntil&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licenseValidUntil})]}),e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"24px 0 16px 0"},children:"Vehicle Information"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Make *"}),e("input",{type:"text",value:d.vehicleMake,onChange:y=>C("vehicleMake",y.target.value),placeholder:"e.g., Toyota, Honda, Ford",style:{width:"100%",padding:"12px",border:h.vehicleMake?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleMake&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleMake})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Model *"}),e("input",{type:"text",value:d.vehicleModel,onChange:y=>C("vehicleModel",y.target.value),placeholder:"e.g., Camry, Accord, Focus",style:{width:"100%",padding:"12px",border:h.vehicleModel?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleModel&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleModel})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Year *"}),e("input",{type:"number",value:d.vehicleYear,onChange:y=>C("vehicleYear",y.target.value),min:"2010",max:new Date().getFullYear(),style:{width:"100%",padding:"12px",border:h.vehicleYear?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.vehicleYear&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.vehicleYear})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"License Plate *"}),e("input",{type:"text",value:d.licensePlate,onChange:y=>C("licensePlate",y.target.value.toUpperCase()),style:{width:"100%",padding:"12px",border:h.licensePlate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.licensePlate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.licensePlate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Color"}),e("input",{type:"text",value:d.vehicleColor,onChange:y=>C("vehicleColor",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"VIN Number"}),e("input",{type:"text",value:d.vehicleVin,onChange:y=>C("vehicleVin",y.target.value.toUpperCase()),maxLength:17,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===3&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Proof of Insurance"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Company *"}),e("input",{type:"text",value:d.insuranceCompany,onChange:y=>C("insuranceCompany",y.target.value),placeholder:"e.g., Geico, State Farm, Allstate",style:{width:"100%",padding:"12px",border:h.insuranceCompany?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.insuranceCompany&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.insuranceCompany})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Policy Number *"}),e("input",{type:"text",value:d.policyNumber,onChange:y=>C("policyNumber",y.target.value),style:{width:"100%",padding:"12px",border:h.policyNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.policyNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.policyNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Expiry Date *"}),e("input",{type:"date",value:d.insuranceExpiryDate,onChange:y=>C("insuranceExpiryDate",y.target.value),style:{width:"100%",padding:"12px",border:h.insuranceExpiryDate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.insuranceExpiryDate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.insuranceExpiryDate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Insurance Document"}),e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:y=>{var B;return F("insuranceImage",((B=y.target.files)==null?void 0:B[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e("div",{style:{gridColumn:"1 / -1"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"24px 0 16px 0"},children:"Vehicle Registration"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Registration Expiry Date *"}),e("input",{type:"date",value:d.registrationExpiryDate,onChange:y=>C("registrationExpiryDate",y.target.value),style:{width:"100%",padding:"12px",border:h.registrationExpiryDate?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.registrationExpiryDate&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.registrationExpiryDate})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Registration Document"}),e("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:y=>{var B;return F("registrationImage",((B=y.target.files)==null?void 0:B[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===4&&t("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e("div",{style:{gridColumn:"1 / -1"},children:t("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"16px",display:"flex",gap:"12px",alignItems:"flex-start",marginBottom:"24px"},children:[e(hi,{size:20,color:"#f59e0b"}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#92400e"},children:"Secure Banking Information"}),e("div",{style:{fontSize:"14px",color:"#92400e",marginTop:"4px"},children:"Your banking details are encrypted and secure. This information is only used for driver payouts."})]})]})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Bank Name *"}),e("input",{type:"text",value:d.bankName,onChange:y=>C("bankName",y.target.value),placeholder:"e.g., Wells Fargo, Chase, Bank of America",style:{width:"100%",padding:"12px",border:h.bankName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.bankName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.bankName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Account Holder Name *"}),e("input",{type:"text",value:d.accountHolderName,onChange:y=>C("accountHolderName",y.target.value),placeholder:"Full name as shown on bank account",style:{width:"100%",padding:"12px",border:h.accountHolderName?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.accountHolderName&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.accountHolderName})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Routing Number *"}),e("input",{type:"text",value:d.routingNumber,onChange:y=>C("routingNumber",y.target.value.replace(/\D/g,"")),placeholder:"9-digit routing number",maxLength:9,style:{width:"100%",padding:"12px",border:h.routingNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.routingNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.routingNumber})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Account Number *"}),e("input",{type:"text",value:d.accountNumber,onChange:y=>C("accountNumber",y.target.value),style:{width:"100%",padding:"12px",border:h.accountNumber?"1px solid #ef4444":"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}),h.accountNumber&&e("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:h.accountNumber})]}),e("div",{style:{gridColumn:"1 / -1",marginTop:"16px"},children:e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Emergency Contact"})}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Emergency Contact Name"}),e("input",{type:"text",value:d.emergencyContactName,onChange:y=>C("emergencyContactName",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Emergency Contact Phone"}),e("input",{type:"tel",value:d.emergencyContactPhone,onChange:y=>C("emergencyContactPhone",y.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),n===5&&t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Additional Documents"}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Profile Photo"}),e("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:y=>{var B;return F("profilePhoto",((B=y.target.files)==null?void 0:B[0])||null)},style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{children:[e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:"0 0 16px 0"},children:"Required Consents"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.backgroundCheckConsent,onChange:y=>C("backgroundCheckConsent",y.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Background Check Consent *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I authorize the company to conduct a background check, including criminal history and driving record verification."})]})]}),h.backgroundCheckConsent&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.backgroundCheckConsent}),t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.dataProcessingConsent,onChange:y=>C("dataProcessingConsent",y.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Data Processing Consent *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I consent to the processing of my personal data for driver verification and platform operations."})]})]}),h.dataProcessingConsent&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.dataProcessingConsent}),t("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:d.termsAccepted,onChange:y=>C("termsAccepted",y.target.checked),style:{marginTop:"2px"}}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:"Terms and Conditions *"}),e("div",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:"I have read and agree to the Terms and Conditions, Privacy Policy, and Driver Agreement."})]})]}),h.termsAccepted&&e("div",{style:{color:"#ef4444",fontSize:"12px"},children:h.termsAccepted})]})]}),t("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b",margin:"0 0 12px 0"},children:"Next Steps"}),t("ul",{style:{fontSize:"14px",color:"#64748b",margin:0,paddingLeft:"20px"},children:[e("li",{children:"Your application will be reviewed within 2-3 business days"}),e("li",{children:"Background check will be initiated upon application submission"}),e("li",{children:"Vehicle inspection will be scheduled once documents are approved"}),e("li",{children:"You'll receive email updates throughout the process"}),e("li",{children:"Driver onboarding will begin upon successful completion"})]})]})]})]}),t("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("button",{onClick:b,disabled:n===1,style:{padding:"12px 24px",backgroundColor:n===1?"#f1f5f9":"#f8fafc",color:n===1?"#94a3b8":"#64748b",border:"1px solid #e2e8f0",borderRadius:"8px",cursor:n===1?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:"Previous"}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[n<5&&e("button",{onClick:w,style:{padding:"12px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Next Step"}),n===5&&e("button",{onClick:f,disabled:m,style:{padding:"12px 24px",backgroundColor:m?"#a7f3d0":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:m?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600"},children:m?"Submitting...":"Submit Application"})]})]})]})}):null},Ep=()=>{const[o,i]=s.exports.useState(""),[r,n]=s.exports.useState("all"),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(null),[c,m]=s.exports.useState(null),[u,x]=s.exports.useState(!1),[C,F]=s.exports.useState(!1),[k,w]=s.exports.useState(!1),[b,f]=s.exports.useState(!1),[z,y]=s.exports.useState(!1),[B,$]=s.exports.useState(!1),[X,M]=s.exports.useState(null),[R,j]=s.exports.useState([]),[V,le]=s.exports.useState(!0);eo.useEffect(()=>{(async()=>{try{console.log("\u{1F697} Fetching drivers from API...");const U=localStorage.getItem("authToken"),ge=await fetch(yt("api/admin/drivers"),{headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"}});if(console.log("\u{1F697} Response status:",ge.status,ge.statusText),ge.ok){const Re=await ge.json();console.log("\u{1F697} API response data:",Re);const ne=Array.isArray(Re)?Re:Re.drivers||[];if(console.log("\u{1F697} Drivers list extracted:",ne),ne.length>0){const fe=ne.map(xe=>({id:xe.id,name:xe.name,email:xe.email,phone:xe.phone||"N/A",status:xe.status||"offline",rating:parseFloat(xe.rating)||5,totalRides:xe.total_rides||0,earnings:xe.total_earnings?`$${parseFloat(xe.total_earnings).toFixed(2)}`:"$0.00",vehicleModel:xe.vehicle_make&&xe.vehicle_model?`${xe.vehicle_year||""} ${xe.vehicle_make} ${xe.vehicle_model}`.trim():"Vehicle Pending",location:"City Area",joinDate:xe.created_at?new Date(xe.created_at).toLocaleDateString():"Unknown"}));console.log("\u{1F697} Transformed drivers:",fe),j(fe)}else console.log("\u{1F697} No drivers found in response")}else console.error("\u{1F697} API error:",ge.status,await ge.text())}catch(U){console.error("\u{1F697} Failed to fetch drivers:",U)}finally{le(!1)}})()},[]);const ce=O=>{switch(O){case"online":return"#10b981";case"offline":return"#6b7280";case"busy":return"#f59e0b";default:return"#6b7280"}},ee=O=>{switch(O){case"online":return e(vt,{size:16});case"offline":return e(zr,{size:16});case"busy":return e(St,{size:16});default:return e(zr,{size:16})}},ze=R.filter(O=>{const U=O.name.toLowerCase().includes(o.toLowerCase())||O.id.toLowerCase().includes(o.toLowerCase()),ge=r==="all"||O.status===r;return U&&ge}),T=O=>{console.log("\u{1F697} New Driver Application Submitted:",O),alert(`Driver application submitted successfully!

Name: ${O.firstName} ${O.lastName}
Email: ${O.email}
Vehicle: ${O.vehicleYear} ${O.vehicleMake} ${O.vehicleModel}

Application will be reviewed within 2-3 business days.`),d(!1)},Z=(O,U)=>{switch(m(U),h(null),O){case"view":x(!0);break;case"edit":F(!0);break;case"suspend":M({type:"suspend",driver:U});break;case"activate":M({type:"activate",driver:U});break;case"trips":w(!0);break;case"earnings":f(!0);break;case"message":y(!0);break;case"analytics":$(!0);break;case"deactivate":M({type:"deactivate",driver:U});break;case"reset-password":M({type:"reset-password",driver:U});break}},H=async(O,U)=>{try{switch(O){case"suspend":console.log(`Suspending driver ${U.name}`),alert(`Driver ${U.name} has been suspended.`);break;case"activate":console.log(`Activating driver ${U.name}`),alert(`Driver ${U.name} has been activated.`);break;case"deactivate":console.log(`Deactivating driver ${U.name}`),alert(`Driver ${U.name} has been permanently deactivated.`);break;case"reset-password":console.log(`Resetting password for driver ${U.name}`),alert(`Password reset email sent to ${U.email}`);break;default:break}M(null)}catch(ge){console.error("Action failed:",ge),alert("Action failed. Please try again.")}};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Driver Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage your driver fleet and monitor performance"})]}),e("button",{onClick:()=>d(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Add New Driver"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e($o,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search drivers...",value:o,onChange:O=>i(O.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:O=>n(O.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"120px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"online",children:"Online"}),e("option",{value:"offline",children:"Offline"}),e("option",{value:"busy",children:"Busy"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:V?"...":R.filter(O=>O.status==="online").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Online Drivers"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:V?"...":R.length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Drivers"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:V?"...":R.length>0?(R.reduce((O,U)=>O+U.rating,0)/R.length).toFixed(1):"0.0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Rating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:V?"...":R.length>0?`$${(R.reduce((O,U)=>O+parseFloat(U.earnings.replace("$","")),0)/R.length).toFixed(0)}`:"$0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Earnings"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Driver"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rating"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Earnings"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Vehicle"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:ze.map(O=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"40px",height:"40px",backgroundColor:"#e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#64748b"},children:O.name.split(" ").map(U=>U[0]).join("")}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:O.name}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:O.id})]})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${ce(O.status)}20`,color:ce(O.status)},children:[ee(O.status),O.status.charAt(0).toUpperCase()+O.status.slice(1)]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(Zt,{size:14,fill:"#f59e0b",color:"#f59e0b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:O.rating})]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:O.totalRides.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:O.earnings}),e("td",{style:{padding:"16px"},children:e("div",{style:{fontSize:"14px",color:"#64748b"},children:O.vehicleModel})}),t("td",{style:{padding:"16px",position:"relative"},children:[e("button",{onClick:()=>h(p===O.id?null:O.id),style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})}),p===O.id&&e("div",{style:{position:"absolute",top:"100%",right:"16px",backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"200px"},children:t("div",{style:{padding:"8px 0"},children:[t("button",{onClick:()=>Z("view",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Lt,{size:16,color:"#6b7280"}),"View Profile"]}),t("button",{onClick:()=>Z("edit",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(zn,{size:16,color:"#6b7280"}),"Edit Information"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),O.status==="online"?t("button",{onClick:()=>Z("suspend",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#f59e0b"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(xc,{size:16}),"Suspend Driver"]}):t("button",{onClick:()=>Z("activate",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#10b981"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(gc,{size:16}),"Activate Driver"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>Z("trips",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Ze,{size:16,color:"#6b7280"}),"View Trip History"]}),t("button",{onClick:()=>Z("earnings",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(_t,{size:16,color:"#6b7280"}),"Earnings Report"]}),t("button",{onClick:()=>Z("analytics",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(no,{size:16,color:"#6b7280"}),"Performance Analytics"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>Z("message",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(kn,{size:16,color:"#6b7280"}),"Send Message"]}),t("button",{onClick:()=>Z("reset-password",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(Sa,{size:16,color:"#6b7280"}),"Reset Password"]}),e("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),t("button",{onClick:()=>Z("deactivate",O),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#ef4444"},onMouseEnter:U=>U.target.style.backgroundColor="#f8fafc",onMouseLeave:U=>U.target.style.backgroundColor="transparent",children:[e(hi,{size:16}),"Deactivate Driver"]})]})})]})]},O.id))})]})})}),e(Tp,{isOpen:l,onClose:()=>d(!1),onSubmit:T}),u&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Driver Profile"}),e("button",{onClick:()=>x(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Personal Information"}),t("p",{children:[e("strong",{children:"Name:"})," ",c.name]}),t("p",{children:[e("strong",{children:"Email:"})," ",c.email]}),t("p",{children:[e("strong",{children:"Phone:"})," ",c.phone]}),t("p",{children:[e("strong",{children:"Status:"}),e("span",{style:{color:ce(c.status),fontWeight:"600",marginLeft:"8px"},children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})]}),t("p",{children:[e("strong",{children:"Member Since:"})," ",new Date(c.joinDate).toLocaleDateString()]})]}),t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Performance Metrics"}),t("p",{children:[e("strong",{children:"Rating:"})," \u2B50 ",c.rating]}),t("p",{children:[e("strong",{children:"Total Rides:"})," ",c.totalRides.toLocaleString()]}),t("p",{children:[e("strong",{children:"Total Earnings:"})," ",c.earnings]}),t("p",{children:[e("strong",{children:"Vehicle:"})," ",c.vehicleModel]}),t("p",{children:[e("strong",{children:"Current Location:"})," ",c.location]})]})]})]})}),C&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Edit Driver Information"}),e("button",{onClick:()=>F(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Full Name"}),e("input",{type:"text",defaultValue:c.name,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Email"}),e("input",{type:"email",defaultValue:c.email,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Phone"}),e("input",{type:"tel",defaultValue:c.phone,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Vehicle Model"}),e("input",{type:"text",defaultValue:c.vehicleModel,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:()=>{alert("Driver information updated successfully!"),F(!1)},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Save Changes"}),e("button",{onClick:()=>F(!1),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})}),k&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Trip History - ",c.name]}),e("button",{onClick:()=>w(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",overflow:"hidden"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{style:{backgroundColor:"#f8fafc"},children:t("tr",{children:[e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Date"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Route"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Fare"}),e("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b"},children:"Rating"})]})}),e("tbody",{children:[{date:"2024-01-15",from:"Downtown",to:"Airport",fare:"$45.50",rating:5},{date:"2024-01-15",from:"Mall",to:"Hospital",fare:"$28.75",rating:4},{date:"2024-01-14",from:"Hotel",to:"Conference Center",fare:"$18.25",rating:5},{date:"2024-01-14",from:"Airport",to:"Downtown",fare:"$52.00",rating:5},{date:"2024-01-13",from:"University",to:"Shopping Center",fare:"$22.50",rating:4}].map((O,U)=>t("tr",{style:{borderTop:U>0?"1px solid #f1f5f9":"none"},children:[e("td",{style:{padding:"12px",fontSize:"14px"},children:O.date}),t("td",{style:{padding:"12px",fontSize:"14px"},children:[O.from," \u2192 ",O.to]}),e("td",{style:{padding:"12px",fontSize:"14px",fontWeight:"600",color:"#10b981"},children:O.fare}),e("td",{style:{padding:"12px",fontSize:"14px"},children:"\u2B50".repeat(O.rating)})]},U))})]})})]})}),z&&c&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Send Message to ",c.name]}),e("button",{onClick:()=>y(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Subject"}),e("input",{type:"text",placeholder:"Message subject",style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Message"}),e("textarea",{placeholder:"Type your message here...",rows:6,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px",resize:"vertical"}})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{onClick:()=>{alert("Message sent successfully!"),y(!1)},style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Send Message"}),e("button",{onClick:()=>y(!1),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})}),X&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%"},children:[t("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e(hi,{size:48,color:"#f59e0b",style:{marginBottom:"16px"}}),t("h3",{style:{fontSize:"18px",fontWeight:"700",margin:"0 0 8px 0"},children:["Confirm ",X.type.charAt(0).toUpperCase()+X.type.slice(1)]}),t("p",{style:{color:"#64748b",margin:0},children:["Are you sure you want to ",X.type," ",X.driver.name,"?",X.type==="deactivate"&&" This action cannot be undone."]})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{onClick:()=>H(X.type,X.driver),style:{flex:1,padding:"12px",backgroundColor:X.type==="deactivate"?"#ef4444":"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:X.type==="reset-password"?"Send Reset Email":X.type.charAt(0).toUpperCase()+X.type.slice(1)}),e("button",{onClick:()=>M(null),style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})}),p&&e("div",{onClick:()=>h(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Dp=()=>{const[o,i]=s.exports.useState(""),[r,n]=s.exports.useState("all"),[l,d]=s.exports.useState([]),[p,h]=s.exports.useState(!0);eo.useEffect(()=>{(async()=>{try{console.log("\u{1F6B6} Fetching riders from API...");const x=await fetch("/api/admin/riders",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}});if(console.log("\u{1F6B6} Response status:",x.status,x.statusText),x.ok){const C=await x.json();console.log("\u{1F6B6} API response data:",C);const F=Array.isArray(C)?C:C.riders||[];if(console.log("\u{1F6B6} Riders list extracted:",F),F.length>0){const k=F.map(w=>({id:w.id,name:w.name,email:w.email,phone:w.phone||"N/A",status:w.status||"inactive",rating:parseFloat(w.rating)||5,totalRides:w.total_rides||0,totalSpent:w.total_spent?`$${parseFloat(w.total_spent).toFixed(2)}`:"$0.00",joinDate:w.created_at?new Date(w.created_at).toLocaleDateString():"Unknown",lastRide:w.last_ride?new Date(w.last_ride).toLocaleDateString():"Never",favoriteLocation:"Various Locations"}));console.log("\u{1F6B6} Transformed riders:",k),d(k)}else console.log("\u{1F6B6} No riders found in response")}else console.error("\u{1F6B6} API error:",x.status,await x.text())}catch(x){console.error("\u{1F6B6} Failed to fetch riders:",x)}finally{h(!1)}})()},[]);const c=u=>{switch(u){case"active":return"#10b981";case"inactive":return"#6b7280";default:return"#6b7280"}},m=l.filter(u=>{const x=u.name.toLowerCase().includes(o.toLowerCase())||u.id.toLowerCase().includes(o.toLowerCase()),C=r==="all"||u.status===r;return x&&C});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Rider Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor rider activity and engagement"})]}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Send Promotion"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e($o,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search riders...",value:o,onChange:u=>i(u.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:u=>n(u.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"120px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:p?"...":l.length.toLocaleString()}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Riders"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:p?"...":l.filter(u=>u.status==="active").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Active This Week"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:p?"...":l.length>0?(l.reduce((u,x)=>u+x.rating,0)/l.length).toFixed(1):"0.0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Rating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:p?"...":l.length>0?`$${(l.reduce((u,x)=>u+parseFloat(x.totalSpent.replace("$","")),0)/l.length).toFixed(0)}`:"$0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Spend"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rider"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rating"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Spent"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Last Ride"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:m.map(u=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"40px",height:"40px",backgroundColor:"#e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#64748b"},children:u.name.split(" ").map(x=>x[0]).join("")}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:u.name}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:u.email})]})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${c(u.status)}20`,color:c(u.status)},children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(Zt,{size:14,fill:"#f59e0b",color:"#f59e0b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:u.rating})]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:u.totalRides}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:u.totalSpent}),e("td",{style:{padding:"16px",fontSize:"14px",color:"#64748b"},children:u.lastRide}),e("td",{style:{padding:"16px"},children:e("button",{style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})})})]},u.id))})]})})})]})},Bp=()=>{const[o,i]=s.exports.useState(""),[r,n]=s.exports.useState("all"),[l,d]=s.exports.useState([]),[p,h]=s.exports.useState(!0);eo.useEffect(()=>{(async()=>{try{const x=await fetch("/api/admin/rides",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}});if(x.ok){const C=await x.json();if(C.success){const F=C.rides.map(k=>{var w;return{id:k.id,riderId:k.rider_id,riderName:k.rider_name,driverId:k.driver_id,driverName:k.driver_name||"Finding driver...",status:k.status,pickupLocation:k.pickup_address,dropoffLocation:k.destination_address,requestTime:k.requested_at?new Date(k.requested_at).toLocaleString():"Unknown",startTime:k.started_at?new Date(k.started_at).toLocaleString():null,endTime:k.completed_at?new Date(k.completed_at).toLocaleString():null,duration:k.completed_at&&k.started_at?Math.round((new Date(k.completed_at).getTime()-new Date(k.started_at).getTime())/6e4)+" min":k.status==="requested"?"Pending":"In Progress",distance:"Calculating...",fare:k.final_fare?`$${k.final_fare}`:(w=k.estimated_fare)!=null&&w.total?`~$${k.estimated_fare.total}`:"Calculating...",paymentMethod:"Card"}});d(F)}}}catch(x){console.error("Failed to fetch rides:",x)}finally{h(!1)}})()},[]);const c=u=>{switch(u){case"completed":return"#10b981";case"in_progress":return"#3b82f6";case"pending":return"#f59e0b";case"cancelled":return"#ef4444";default:return"#6b7280"}},m=l.filter(u=>{var F;const x=u.id.toLowerCase().includes(o.toLowerCase())||u.riderName.toLowerCase().includes(o.toLowerCase())||((F=u.driverName)==null?void 0:F.toLowerCase().includes(o.toLowerCase())),C=r==="all"||u.status===r;return x&&C});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Ride Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Track and manage all ride requests and trips"})]}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Export Data"})]}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0",display:"flex",gap:"16px",alignItems:"center"},children:[t("div",{style:{position:"relative",flex:1},children:[e($o,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search rides...",value:o,onChange:u=>i(u.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:r,onChange:u=>n(u.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minWidth:"140px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"in_progress",children:"In Progress"}),e("option",{value:"completed",children:"Completed"}),e("option",{value:"cancelled",children:"Cancelled"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:p?"...":l.filter(u=>u.status==="requested"||u.status==="pending").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Pending Rides"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:p?"...":l.filter(u=>u.status==="in_progress"||u.status==="accepted").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"In Progress"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:p?"...":l.filter(u=>u.status==="completed").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Completed Today"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:p?"...":l.length>0?"5.2":"0"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Wait (min)"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Ride ID"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Rider"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Driver"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Route"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Fare"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),e("tbody",{children:m.map(u=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px",fontWeight:"600",color:"#3b82f6"},children:u.id}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(Qe,{size:16,color:"#64748b"}),e("span",{style:{fontWeight:"500",color:"#1e293b"},children:u.riderName})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(Ze,{size:16,color:"#64748b"}),e("span",{style:{fontWeight:"500",color:"#1e293b"},children:u.driverName})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${c(u.status)}20`,color:c(u.status)},children:u.status.replace("_"," ").charAt(0).toUpperCase()+u.status.replace("_"," ").slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{fontSize:"12px",color:"#64748b",maxWidth:"200px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e($e,{size:12,color:"#10b981"}),e("span",{style:{fontSize:"11px",fontWeight:"500"},children:"From:"})]}),e("div",{style:{marginBottom:"4px",fontSize:"11px"},children:u.pickupLocation}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e(Rr,{size:12,color:"#ef4444"}),e("span",{style:{fontSize:"11px",fontWeight:"500"},children:"To:"})]}),e("div",{style:{fontSize:"11px"},children:u.dropoffLocation})]})}),t("td",{style:{padding:"16px"},children:[e("div",{style:{fontWeight:"600",color:"#10b981",fontSize:"16px"},children:u.fare}),e("div",{style:{fontSize:"11px",color:"#64748b"},children:u.distance})]}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{style:{padding:"6px",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(No,{size:12,color:"white"})}),e("button",{style:{padding:"6px",backgroundColor:"#10b981",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Mr,{size:12,color:"white"})}),e("button",{style:{padding:"6px",backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:12,color:"#64748b"})})]})})]},u.id))})]})})})]})},Wp=()=>{const[o,i]=s.exports.useState("7d"),[r,n]=s.exports.useState("overview"),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(!0),[c,m]=s.exports.useState({totalRevenue:0,activeRides:0,onlineDrivers:0,totalRiders:0}),[u,x]=s.exports.useState(null),[C,F]=s.exports.useState(!1);eo.useEffect(()=>{(async()=>{var j,V,le,ce;try{console.log("\u{1F4CA} ANALYTICS: Fetching real data...");const[ee,ze,T]=await Promise.all([fetch("/api/admin/rides",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}}),fetch("/api/admin/drivers",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}}),fetch("/api/admin/riders",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}})]);if(ee.ok&&ze.ok&&T.ok){const[Z,H,O]=await Promise.all([ee.json(),ze.json(),T.json()]),ge=(((j=Z.rides)==null?void 0:j.filter(xe=>xe.status==="completed"))||[]).reduce((xe,qe)=>xe+(parseFloat(qe.final_fare)||0),0),Re=((V=Z.rides)==null?void 0:V.filter(xe=>["requested","accepted","started","in_progress"].includes(xe.status)).length)||0,ne=((le=H.drivers)==null?void 0:le.filter(xe=>xe.status==="online").length)||0,fe=((ce=O.riders)==null?void 0:ce.length)||0;console.log("\u{1F4CA} ANALYTICS: Real totals calculated:"),console.log("- Total Revenue: $"+ge.toFixed(2)),console.log("- Active Rides:",Re),console.log("- Online Drivers:",ne),console.log("- Total Riders:",fe),m({totalRevenue:ge,activeRides:Re,onlineDrivers:ne,totalRiders:fe})}}catch(ee){console.error("\u{1F4CA} ANALYTICS: Failed to fetch data:",ee)}finally{h(!1)}})()},[]);const k=async()=>{try{F(!0),console.log("\u{1F916} ML ANALYTICS: Fetching ML data...");const R=await fetch("/api/admin/ml-analytics",{headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json"}});if(R.ok){const j=await R.json();console.log("\u2705 ML ANALYTICS: Data received:",j),x(j)}else console.error("\u274C ML ANALYTICS: Failed to fetch data")}catch(R){console.error("\u274C ML ANALYTICS: Error:",R)}finally{F(!1)}};eo.useEffect(()=>{r==="ml-analytics"&&!u&&k()},[r,u]);const w=[{title:"Total Revenue",value:p?"Loading...":`$${c.totalRevenue.toFixed(2)}`,change:"+0.0%",changePercent:0,trend:"stable",icon:_t,color:"#10b981"},{title:"Active Rides",value:p?"Loading...":c.activeRides.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:Ze,color:"#3b82f6"},{title:"Online Drivers",value:p?"Loading...":c.onlineDrivers.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:gi,color:"#f59e0b"},{title:"Total Riders",value:p?"Loading...":c.totalRiders.toString(),change:"+0.0%",changePercent:0,trend:"stable",icon:Zt,color:"#8b5cf6"},{title:"Completion Rate",value:p?"Loading...":"100%",change:"+0.0%",changePercent:0,trend:"stable",icon:Kn,color:"#06b6d4"},{title:"Avg Response Time",value:p?"Loading...":"< 1 min",change:"+0.0 min",changePercent:0,trend:"stable",icon:St,color:"#ef4444"}],b=[{date:"2025-09-05",revenue:p?0:c.totalRevenue,rides:p?0:5,drivers:p?0:3,avgFare:p?0:c.totalRevenue/4}],f=[{metric:"Revenue Growth",current:0,previous:0,target:15,unit:"%"},{metric:"Driver Utilization",current:p?0:c.onlineDrivers/3*100,previous:0,target:80,unit:"%"},{metric:"Customer Satisfaction",current:4.7,previous:4.7,target:4.9,unit:"/5"},{metric:"Ride Completion",current:100,previous:100,target:98,unit:"%"},{metric:"Market Share",current:.1,previous:0,target:25,unit:"%"},{metric:"Driver Retention",current:100,previous:100,target:90,unit:"%"}],z=[{hour:"06:00",predicted:0,confidence:60,zone:"Downtown"},{hour:"07:00",predicted:1,confidence:65,zone:"Downtown"},{hour:"08:00",predicted:2,confidence:70,zone:"Downtown"},{hour:"09:00",predicted:1,confidence:65,zone:"Downtown"},{hour:"10:00",predicted:1,confidence:60,zone:"Downtown"},{hour:"11:00",predicted:0,confidence:55,zone:"Downtown"},{hour:"12:00",predicted:2,confidence:70,zone:"Downtown"}],y=[{name:"Standard",value:3,color:"#3b82f6"},{name:"Economy",value:1,color:"#10b981"},{name:"XL",value:1,color:"#8b5cf6"},{name:"Airport",value:1,color:"#f59e0b"}],B=async()=>{var R,j,V,le;d(!0),h(!0);try{console.log("\u{1F504} ANALYTICS: Manual refresh triggered...");const[ce,ee,ze]=await Promise.all([fetch("/api/admin/rides",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}}),fetch("/api/admin/drivers",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}}),fetch("/api/admin/riders",{headers:{Authorization:"Bearer demo-admin-token","Content-Type":"application/json"}})]);if(ce.ok&&ee.ok&&ze.ok){const[T,Z,H]=await Promise.all([ce.json(),ee.json(),ze.json()]),U=(((R=T.rides)==null?void 0:R.filter(fe=>fe.status==="completed"))||[]).reduce((fe,xe)=>fe+(parseFloat(xe.final_fare)||0),0),ge=((j=T.rides)==null?void 0:j.filter(fe=>["requested","accepted","started","in_progress"].includes(fe.status)).length)||0,Re=((V=Z.drivers)==null?void 0:V.filter(fe=>fe.status==="online").length)||0,ne=((le=H.riders)==null?void 0:le.length)||0;console.log("\u{1F504} ANALYTICS: Refresh complete - updated totals:",{totalRevenue:U.toFixed(2),activeRides:ge,onlineDrivers:Re,totalRiders:ne}),m({totalRevenue:U,activeRides:ge,onlineDrivers:Re,totalRiders:ne})}}catch(ce){console.error("\u{1F504} ANALYTICS: Refresh failed:",ce)}finally{h(!1),d(!1)}},$=()=>{const R={period:o,timestamp:new Date().toISOString(),metrics:{totalRevenue:c.totalRevenue,activeRides:c.activeRides,onlineDrivers:c.onlineDrivers,totalRiders:c.totalRiders},performanceMetrics:f,revenueData:b},j=JSON.stringify(R,null,2),V=new Blob([j],{type:"application/json"}),le=URL.createObjectURL(V),ce=document.createElement("a");ce.href=le,ce.download=`analytics-${o}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(le),console.log("\u{1F4CA} ANALYTICS: Data exported successfully")},X=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(R),M=(R,j)=>{const V=R/j*100;return V>=95?"#10b981":V>=80?"#f59e0b":"#ef4444"};return t("div",{style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Business Intelligence Dashboard"}),e("p",{style:{color:"#64748b",margin:0},children:"Real-time analytics, performance metrics, and predictive insights"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("select",{value:o,onChange:R=>i(R.target.value),style:{padding:"8px 12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white"},children:[e("option",{value:"24h",children:"Last 24 Hours"}),e("option",{value:"7d",children:"Last 7 Days"}),e("option",{value:"30d",children:"Last 30 Days"}),e("option",{value:"90d",children:"Last 90 Days"})]}),t("button",{onClick:B,disabled:l,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:l?"not-allowed":"pointer",opacity:l?.7:1},children:[e(Qi,{size:14,style:{animation:l?"spin 1s linear infinite":"none"}}),"Refresh"]}),t("button",{onClick:$,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[e(Lo,{size:14}),"Export"]})]})]}),e("div",{style:{display:"flex",background:"white",borderRadius:"12px",padding:"4px",marginBottom:"24px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{key:"overview",label:"Overview",icon:no},{key:"revenue",label:"Revenue",icon:_t},{key:"operations",label:"Operations",icon:Ds},{key:"predictions",label:"Predictions",icon:Fr},{key:"ml-analytics",label:"ML Analytics",icon:Lt}].map(R=>t("button",{onClick:()=>n(R.key),style:{flex:1,background:r===R.key?"#3b82f6":"transparent",color:r===R.key?"white":"#6b7280",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(R.icon,{size:16}),R.label]},R.key))}),r==="overview"&&t(ye,{children:[e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"32px"},children:w.map((R,j)=>{const V=R.icon;return e("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"8px",fontWeight:"500"},children:R.title}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1f2937",marginBottom:"8px"},children:R.value}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",fontWeight:"600",color:R.trend==="up"?"#10b981":R.trend==="down"?"#ef4444":"#6b7280"},children:[R.trend==="up"?e(Ls,{size:14}):R.trend==="down"?e(Ms,{size:14}):null,R.change]})]}),e("div",{style:{width:"56px",height:"56px",background:`${R.color}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:e(V,{size:24,color:R.color})})]})},j)})}),t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"24px",marginBottom:"32px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Revenue Trend"}),e(Ri,{width:"100%",height:300,children:t(_n,{data:b,children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"date",stroke:"#6b7280",fontSize:12}),e(Ai,{stroke:"#6b7280",fontSize:12}),e(Fi,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(Ln,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:3,fill:"url(#colorRevenue)"}),e("defs",{children:t("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})})]})})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Ride Distribution"}),e(Ri,{width:"100%",height:300,children:t(Ha,{children:[e(Va,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:y.map((R,j)=>e(Ga,{fill:R.color},`cell-${j}`))}),e(Fi,{}),e(Nn,{})]})})]})]})]}),r==="revenue"&&t(ye,{children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginBottom:"32px"},children:[t("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Total Revenue"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:p?"Loading...":X(c.totalRevenue)}),e("div",{style:{fontSize:"12px",opacity:.8},children:"+12.5% vs last period"})]}),t("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Average Fare"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:X(38.42)}),e("div",{style:{fontSize:"12px",opacity:.8},children:"+2.1% vs last period"})]}),t("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:"16px",padding:"24px",color:"white"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Commission Rate"}),e("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:"25%"}),e("div",{style:{fontSize:"12px",opacity:.8},children:"Standard rate"})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Revenue vs Rides Correlation"}),e(Ri,{width:"100%",height:400,children:t(en,{data:b,children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"date",stroke:"#6b7280",fontSize:12}),e(Ai,{yAxisId:"left",stroke:"#6b7280",fontSize:12}),e(Ai,{yAxisId:"right",orientation:"right",stroke:"#6b7280",fontSize:12}),e(Fi,{}),e(Nn,{}),e(pr,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:3,name:"Revenue ($)"}),e(pr,{yAxisId:"right",type:"monotone",dataKey:"rides",stroke:"#3b82f6",strokeWidth:3,name:"Rides Count"})]})})]})]}),r==="operations"&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Performance Metrics"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:f.map((R,j)=>t("div",{style:{padding:"20px",border:"2px solid #e5e7eb",borderRadius:"12px",background:"#f9fafb"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:R.metric}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:M(R.current,R.target)},children:[R.current,R.unit]})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:e("div",{style:{width:`${Math.min(R.current/R.target*100,100)}%`,height:"100%",background:M(R.current,R.target),borderRadius:"4px",transition:"width 0.3s ease"}})}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280"},children:[t("span",{children:["Previous: ",R.previous,R.unit]}),t("span",{children:["Target: ",R.target,R.unit]})]})]},j))})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Driver Utilization"}),e(Ri,{width:"100%",height:250,children:t(Ya,{data:[{hour:"6AM",utilization:45},{hour:"9AM",utilization:78},{hour:"12PM",utilization:85},{hour:"3PM",utilization:72},{hour:"6PM",utilization:92},{hour:"9PM",utilization:68}],children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Ai,{stroke:"#6b7280",fontSize:12}),e(Fi,{}),e(Ja,{dataKey:"utilization",fill:"#3b82f6",radius:[4,4,0,0]})]})})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Completion Rates by Hour"}),e(Ri,{width:"100%",height:250,children:t(en,{data:[{hour:"6AM",rate:94},{hour:"9AM",rate:96},{hour:"12PM",rate:98},{hour:"3PM",rate:97},{hour:"6PM",rate:95},{hour:"9PM",rate:96}],children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Ai,{stroke:"#6b7280",fontSize:12,domain:[90,100]}),e(Fi,{}),e(pr,{type:"monotone",dataKey:"rate",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:4}})]})})]})]})]}),r==="predictions"&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:"ML-Based Demand Predictions"}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f0f9ff",padding:"8px 12px",borderRadius:"8px",border:"1px solid #0ea5e9"},children:[e(Fr,{size:16,color:"#0369a1"}),e("span",{style:{fontSize:"12px",color:"#0369a1",fontWeight:"600"},children:"AI-Powered Insights"})]})]}),e(Ri,{width:"100%",height:300,children:t(_n,{data:z,children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"hour",stroke:"#6b7280",fontSize:12}),e(Ai,{stroke:"#6b7280",fontSize:12}),e(Fi,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(Ln,{type:"monotone",dataKey:"predicted",stroke:"#8b5cf6",strokeWidth:3,fill:"url(#colorPrediction)"}),e("defs",{children:t("linearGradient",{id:"colorPrediction",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})})]})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Prediction Confidence"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:z.slice(0,4).map((R,j)=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:R.hour}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[R.predicted," predicted rides"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"60px",height:"6px",background:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:e("div",{style:{width:`${R.confidence}%`,height:"100%",background:R.confidence>=90?"#10b981":R.confidence>=80?"#f59e0b":"#ef4444",borderRadius:"3px"}})}),t("span",{style:{fontSize:"12px",fontWeight:"600",color:R.confidence>=90?"#10b981":R.confidence>=80?"#f59e0b":"#ef4444"},children:[R.confidence,"%"]})]})]},j))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"AI Recommendations"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"8px",borderLeft:"4px solid #10b981"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Bo,{size:16,color:"#10b981"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#065f46"},children:"High Demand Alert"})]}),e("p",{style:{fontSize:"12px",color:"#047857",margin:0},children:"Downtown area will see 35% higher demand at 8AM. Consider incentivizing drivers."})]}),t("div",{style:{padding:"16px",background:"#fef3c7",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(hi,{size:16,color:"#d97706"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#92400e"},children:"Driver Shortage"})]}),e("p",{style:{fontSize:"12px",color:"#b45309",margin:0},children:"Predicted 15% driver shortage during lunch hours. Deploy surge pricing."})]}),t("div",{style:{padding:"16px",background:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #3b82f6"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Kn,{size:16,color:"#1d4ed8"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1e40af"},children:"Optimization"})]}),e("p",{style:{fontSize:"12px",color:"#1e40af",margin:0},children:"Reallocate 12 drivers to airport zone for 22% efficiency gain."})]})]})]})]})]}),r==="ml-analytics"&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:"Machine Learning System Health"}),t("button",{onClick:k,disabled:C,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"500",cursor:C?"not-allowed":"pointer",opacity:C?.7:1},children:[e(Qi,{size:12,style:{animation:C?"spin 1s linear infinite":"none"}}),"Refresh ML Data"]})]}),C?e("div",{style:{textAlign:"center",padding:"20px"},children:"Loading ML analytics..."}):u?e(ye,{children:t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t("div",{style:{background:u.system_health.status==="healthy"?"#f0f9ff":"#fef2f2",border:`1px solid ${u.system_health.status==="healthy"?"#0ea5e9":"#ef4444"}`,borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"System Status"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:u.system_health.status==="healthy"?"#0369a1":"#dc2626",textTransform:"capitalize"},children:u.system_health.status})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Active Models"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:u.system_health.active_models})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Average Accuracy"}),t("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:[(u.system_health.average_accuracy*100).toFixed(1),"%"]})]}),t("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"16px"},children:[e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Total Predictions"}),e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#0369a1"},children:u.system_health.total_predictions})]})]})}):e("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:'Click "Refresh ML Data" to load ML analytics'})]}),u&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"ML Model Performance"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:u.model_performance.map((R,j)=>t("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",padding:"20px",background:"#f9fafb"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",margin:0},children:R.name}),e("span",{style:{background:R.status==="healthy"?"#dcfce7":"#fef2f2",color:R.status==="healthy"?"#166534":"#dc2626",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:R.status})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Accuracy:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[(R.accuracy*100).toFixed(1),"%"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Confidence:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[(R.confidence*100).toFixed(1),"%"]})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Predictions:"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:R.predictions})]}),t("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Response Time:"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[R.response_time,"ms"]})]})]})]},j))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"32px"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"Automated ML Insights"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.insights.map((R,j)=>t("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e("div",{style:{width:"6px",height:"6px",background:"#3b82f6",borderRadius:"50%",marginTop:"8px",flexShrink:0}}),e("span",{style:{fontSize:"14px",color:"#374151",lineHeight:"1.5"},children:R})]},j))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"20px"},children:"ML Performance Trends"}),e(Ri,{width:"100%",height:300,children:t(en,{data:u.performance_trends.accuracy_trend,children:[e(Ki,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e(Xi,{dataKey:"time",stroke:"#6b7280",fontSize:12}),e(Ai,{stroke:"#6b7280",fontSize:12}),e(Fi,{contentStyle:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e(pr,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]})]})]}),e("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},Mp=()=>{const[o,i]=s.exports.useState(null),[r,n]=s.exports.useState([]),[l,d]=s.exports.useState(!0);eo.useEffect(()=>{(async()=>{try{console.log("\u{1F697} DISPATCH: Starting to fetch rides...");const m=await fetch("/api/admin/rides",{method:"GET",headers:{"x-api-key":"admin-key-demo-123","Content-Type":"application/json",Accept:"application/json"}});if(console.log("\u{1F697} DISPATCH: Response status:",m.status),!m.ok){const x=await m.text();console.error("\u{1F697} DISPATCH: API error:",m.status,x),n([]);return}const u=await m.json();if(console.log("\u{1F697} DISPATCH: Raw API data:",u),u.success&&u.rides){const x=u.rides.map((C,F)=>{var k;return{id:C.id,riderId:C.rider_id,riderName:C.rider_name,driverId:C.driver_id,driverName:C.driver_name==="Unassigned"?null:C.driver_name,status:C.status==="requested"?"pending":C.status==="accepted"?"pickup":C.status==="started"?"in_progress":C.status,pickup:C.pickup_address,dropoff:C.destination_address,estimatedTime:C.status==="requested"?"Finding driver...":"12 min",fare:C.final_fare?`$${C.final_fare.toFixed(2)}`:(k=C.estimated_fare)!=null&&k.total?`~$${C.estimated_fare.total.toFixed(2)}`:"Calculating...",distance:"4.2 miles"}});console.log("\u{1F697} DISPATCH: Transformed rides:",x),console.log("\u{1F697} DISPATCH: Rider names:",x.map(C=>C.riderName)),n(x)}else console.error("\u{1F697} DISPATCH: Invalid data structure:",u),n([])}catch(m){console.error("\u{1F697} DISPATCH: Network error:",m),n([])}finally{d(!1)}})()},[]);const p=c=>{switch(c){case"pending":return"#f59e0b";case"pickup":return"#3b82f6";case"in_progress":return"#10b981";default:return"#6b7280"}},h=c=>{switch(c){case"pending":return e(St,{size:16});case"pickup":return e(Ze,{size:16});case"in_progress":return e(wa,{size:16});default:return e(ei,{size:16})}};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Live Dispatch Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor and manage active rides in real-time"})]}),e("div",{style:{display:"flex",gap:"12px"},children:t("button",{style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(vt,{size:16}),"Auto-Dispatch: ON"]})})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:l?"...":r.filter(c=>c.status==="pending").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Pending Requests"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:l?"...":r.filter(c=>c.status==="pickup").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"En Route to Pickup"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:l?"...":r.filter(c=>c.status==="in_progress").length}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Active Rides"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:l?"...":"3"}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Available Drivers"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b",margin:0},children:"Active Rides"})}),t("div",{style:{maxHeight:"600px",overflowY:"auto"},children:[l&&e("div",{style:{padding:"40px",textAlign:"center",color:"#64748b"},children:"Loading real rides..."}),!l&&r.length===0&&e("div",{style:{padding:"40px",textAlign:"center",color:"#64748b"},children:"No active rides at the moment"}),r.map(c=>t("div",{onClick:()=>i(c.id),style:{padding:"20px",borderBottom:"1px solid #f1f5f9",cursor:"pointer",backgroundColor:o===c.id?"#eff6ff":"white",transition:"all 0.2s ease"},onMouseEnter:m=>{o!==c.id&&(m.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:m=>{o!==c.id&&(m.currentTarget.style.backgroundColor="white")},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{fontWeight:"700",color:"#3b82f6"},children:["#",c.id.toString().padStart(4,"0")]}),t("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",backgroundColor:`${p(c.status)}20`,color:p(c.status)},children:[h(c.status),c.status.replace("_"," ").charAt(0).toUpperCase()+c.status.replace("_"," ").slice(1)]})]}),e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981"},children:c.fare})]}),t("div",{style:{marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e(Qe,{size:14,color:"#64748b"}),e("span",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:c.riderName})]}),c.driverName&&t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(Ze,{size:14,color:"#64748b"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:c.driverName})]})]}),t("div",{style:{fontSize:"12px",color:"#64748b",lineHeight:"1.4"},children:[t("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px",marginBottom:"4px"},children:[e($e,{size:12,color:"#10b981",style:{marginTop:"2px",flexShrink:0}}),e("span",{children:c.pickup})]}),t("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px"},children:[e(Rr,{size:12,color:"#ef4444",style:{marginTop:"2px",flexShrink:0}}),e("span",{children:c.dropoff})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #f1f5f9"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(St,{size:12,color:"#64748b"}),e("span",{style:{fontSize:"12px",color:"#64748b"},children:c.estimatedTime})]}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:c.distance})]})]},c.id))]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0"},children:o?t("div",{children:[e("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1e293b",margin:0},children:["Ride Details #",o.toString().padStart(4,"0")]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{style:{padding:"8px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e(No,{size:12}),"Call"]}),t("button",{style:{padding:"8px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e(Mr,{size:12}),"Message"]})]})]})}),e("div",{style:{padding:"20px"},children:(()=>{const c=r.find(m=>m.id===o);return c?e("div",{children:t("div",{style:{marginBottom:"24px"},children:[t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",backgroundColor:`${p(c.status)}20`,color:p(c.status),marginBottom:"16px"},children:[h(c.status),c.status.replace("_"," ").charAt(0).toUpperCase()+c.status.replace("_"," ").slice(1)]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[t("div",{children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"4px"},children:"RIDER"}),e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:c.riderName}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:["ID: ",c.riderId]})]}),t("div",{children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"4px"},children:"DRIVER"}),e("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:c.driverName||"Searching..."}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:c.driverId?`ID: ${c.driverId}`:"No driver assigned"})]})]}),t("div",{style:{marginBottom:"20px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600",marginBottom:"8px"},children:"ROUTE"}),t("div",{style:{marginBottom:"12px"},children:[t("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"8px"},children:[e($e,{size:16,color:"#10b981",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b",marginBottom:"2px"},children:"Pickup Location"}),e("div",{style:{fontSize:"13px",color:"#64748b"},children:c.pickup})]})]}),t("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[e(Rr,{size:16,color:"#ef4444",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1e293b",marginBottom:"2px"},children:"Dropoff Location"}),e("div",{style:{fontSize:"13px",color:"#64748b"},children:c.dropoff})]})]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",paddingTop:"16px",borderTop:"1px solid #f1f5f9"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:c.fare}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Fare"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#3b82f6"},children:c.distance}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Distance"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",color:"#f59e0b"},children:c.estimatedTime}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"ETA"})]})]})]})}):null})()})]}):t("div",{style:{padding:"60px 20px",textAlign:"center",color:"#64748b"},children:[e(Ze,{size:48,color:"#e2e8f0",style:{marginBottom:"16px"}}),e("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"4px"},children:"Select a ride to view details"}),e("div",{style:{fontSize:"14px"},children:"Click on any active ride to see detailed information"})]})})]})]})},Pp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState("all");s.exports.useEffect(()=>{l()},[]);const l=()=>{const x=JSON.parse(localStorage.getItem("ride_history")||"[]").map(C=>({...C,bookedAt:new Date(C.bookedAt),completedAt:new Date(C.completedAt)}));i(x)},d=o.filter(u=>{const x=new Date,C=u.completedAt;switch(r){case"this-week":const F=new Date(x.getTime()-6048e5);return C>=F;case"this-month":const k=new Date(x.getTime()-30*24*60*60*1e3);return C>=k;default:return!0}}),p=d.reduce((u,x)=>u+x.finalFare,0),h=d.length,c=u=>{alert(`Receipt for ride ${u.id} would be downloaded`)},m=(u,x)=>{const C=o.map(F=>F.id===u?{...F,rating:x}:F);i(C),localStorage.setItem("ride_history",JSON.stringify(C))};return t("div",{style:{maxWidth:"800px",margin:"0 auto",background:"#f8fafc",minHeight:"100vh"},children:[t("div",{style:{background:"white",padding:"20px",borderBottom:"1px solid #e2e8f0"},children:[e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",marginBottom:"16px"},children:"Ride History"}),t("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[t("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"12px",flex:1,textAlign:"center"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#3b82f6"},children:h}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:"Total Rides"})]}),t("div",{style:{background:"#f0fdf4",padding:"16px",borderRadius:"12px",flex:1,textAlign:"center"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:["$",p.toFixed(2)]}),e("div",{style:{fontSize:"14px",color:"#64748b"},children:"Total Spent"})]})]}),e("div",{style:{display:"flex",gap:"8px"},children:[{key:"all",label:"All Time"},{key:"this-week",label:"This Week"},{key:"this-month",label:"This Month"}].map(({key:u,label:x})=>e("button",{onClick:()=>n(u),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:r===u?"#3b82f6":"#f1f5f9",color:r===u?"white":"#64748b",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:x},u))})]}),e("div",{style:{padding:"20px"},children:d.length===0?t("div",{style:{background:"white",borderRadius:"12px",padding:"40px",textAlign:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e(Ze,{size:48,color:"#d1d5db",style:{margin:"0 auto 16px"}}),e("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"No rides found"}),e("p",{style:{fontSize:"14px",color:"#6b7280"},children:"Your completed rides will appear here"})]}):e("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:d.map(u=>t("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{children:[t("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:["$",u.finalFare.toFixed(2)]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[u.completedAt.toLocaleDateString()," at ",u.completedAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),t("button",{onClick:()=>c(u),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#374151"},children:[e(Lo,{size:16}),"Receipt"]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600"},children:u.driver.name[0]}),t("div",{style:{flex:1},children:[e("div",{style:{fontWeight:"600",color:"#1e293b"},children:u.driver.name}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[u.driver.vehicle.color," ",u.driver.vehicle.model]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(Zt,{size:16,color:"#f59e0b",fill:"#f59e0b"}),e("span",{style:{fontSize:"14px",fontWeight:"500"},children:u.driver.rating})]})]}),t("div",{style:{marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e($e,{size:14,color:"#10b981"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:"From:"}),e("span",{style:{fontSize:"14px"},children:u.pickup.address})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e($e,{size:14,color:"#ef4444"}),e("span",{style:{fontSize:"14px",color:"#64748b"},children:"To:"}),e("span",{style:{fontSize:"14px"},children:u.destination.address})]})]}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"20px"},children:u.paymentMethod.icon}),t("span",{style:{fontSize:"14px",color:"#64748b"},children:["Paid with ",u.paymentMethod.name]})]}),!u.rating&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#64748b"},children:"Rate:"}),[1,2,3,4,5].map(x=>e("button",{onClick:()=>m(u.id,x),style:{background:"none",border:"none",cursor:"pointer",padding:"2px"},children:e(Zt,{size:16,color:"#d1d5db"})},x))]}),u.rating&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#64748b"},children:"Your rating:"}),e("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(x=>e(Zt,{size:14,color:"#f59e0b",fill:x<=u.rating?"#f59e0b":"none"},x))})]})]})]},u.id))})})]})},_p=()=>{const[o,i]=s.exports.useState(!1),[r,n]=s.exports.useState(""),[l,d]=s.exports.useState({siteName:"RideFlow Admin",siteDescription:"Advanced Ride-Sharing Management Platform",defaultTimezone:"America/Los_Angeles",currency:"USD",language:"en",maintenanceMode:!1,debugMode:!1}),[p,h]=s.exports.useState({baseFare:2.5,perMileRate:1.85,perMinuteRate:.35,bookingFee:1.5,cancellationFee:3,maxRideRadius:25,allowScheduledRides:!0,acceptPets:!1,acceptTeens:!1,surgeMultiplierMax:3,driverCommission:75}),[c,m]=s.exports.useState({emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,riderNotifications:!0,driverNotifications:!0,adminAlerts:!0,systemMaintenanceAlerts:!0,paymentFailureAlerts:!0}),[u,x]=s.exports.useState({requireTwoFactor:!1,sessionTimeout:60,maxLoginAttempts:5,passwordMinLength:8,requirePasswordComplexity:!0,allowRememberMe:!0,apiRateLimit:100,enableAuditLogging:!0}),[C,F]=s.exports.useState({defaultMapType:"roadmap",enableTraffic:!0,enableTransit:!0,defaultZoom:13,enableGeolocation:!0,mapProvider:"google",updateInterval:5e3,showDriverLocations:!0});s.exports.useEffect(()=>{(()=>{const R=localStorage.getItem("admin_general_settings"),j=localStorage.getItem("admin_ride_settings"),V=localStorage.getItem("admin_notification_settings"),le=localStorage.getItem("admin_security_settings"),ce=localStorage.getItem("admin_map_settings"),ee=localStorage.getItem("admin_settings_last_saved");R&&d(JSON.parse(R)),j&&h(JSON.parse(j)),V&&m(JSON.parse(V)),le&&x(JSON.parse(le)),ce&&F(JSON.parse(ce)),ee&&n(ee)})()},[]);const k=(M,R)=>{d(j=>({...j,[M]:R}))},w=(M,R)=>{h(j=>({...j,[M]:R}))},b=(M,R)=>{m(j=>({...j,[M]:R}))},f=(M,R)=>{x(j=>({...j,[M]:R}))},z=(M,R)=>{F(j=>({...j,[M]:R}))},y=async()=>{i(!0),await new Promise(R=>setTimeout(R,1500)),localStorage.setItem("admin_general_settings",JSON.stringify(l)),localStorage.setItem("admin_ride_settings",JSON.stringify(p)),localStorage.setItem("admin_notification_settings",JSON.stringify(c)),localStorage.setItem("admin_security_settings",JSON.stringify(u)),localStorage.setItem("admin_map_settings",JSON.stringify(C));const M=new Date().toLocaleString();localStorage.setItem("admin_settings_last_saved",M),n(M),i(!1),$("\u2705 All settings saved successfully!","success")},B=()=>{confirm("Are you sure you want to reset all settings to default values? This action cannot be undone.")&&(d({siteName:"RideFlow Admin",siteDescription:"Advanced Ride-Sharing Management Platform",defaultTimezone:"America/Los_Angeles",currency:"USD",language:"en",maintenanceMode:!1,debugMode:!1}),h({baseFare:2.5,perMileRate:1.85,perMinuteRate:.35,bookingFee:1.5,cancellationFee:3,maxRideRadius:25,allowScheduledRides:!0,acceptPets:!1,acceptTeens:!1,surgeMultiplierMax:3,driverCommission:75}),$("\u{1F504} Settings reset to defaults","info"))},$=(M,R)=>{const j=document.createElement("div");j.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${R==="success"?"#10b981":R==="error"?"#ef4444":R==="warning"?"#f59e0b":"#3b82f6"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,j.textContent=M,document.body.appendChild(j);const V=document.createElement("style");V.textContent=`
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
      }
    `,document.head.appendChild(V),setTimeout(()=>{document.body.contains(j)&&document.body.removeChild(j),document.head.contains(V)&&document.head.removeChild(V)},4e3)},X=({checked:M,onChange:R})=>e("div",{onClick:()=>R(!M),style:{width:"44px",height:"24px",backgroundColor:M?"#10b981":"#d1d5db",borderRadius:"12px",position:"relative",cursor:"pointer",transition:"all 0.2s ease"},children:e("div",{style:{width:"20px",height:"20px",backgroundColor:"white",borderRadius:"50%",position:"absolute",top:"2px",left:M?"22px":"2px",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})});return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"System Settings"}),t("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:["Configure platform settings and preferences",r&&t("span",{style:{marginLeft:"16px",fontSize:"14px",color:"#10b981"},children:["Last saved: ",r]})]})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("button",{onClick:B,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#6b7280",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(Qi,{size:16}),"Reset to Defaults"]}),t("button",{onClick:y,disabled:o,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.7:1},children:[o?e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}):e(Cn,{size:16}),o?"Saving...":"Save All Settings"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ar,{size:20,color:"#3b82f6"}),"General Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Site Name"}),e("input",{type:"text",value:l.siteName,onChange:M=>k("siteName",M.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Site Description"}),e("textarea",{value:l.siteDescription,onChange:M=>k("siteDescription",M.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Default Timezone"}),t("select",{value:l.defaultTimezone,onChange:M=>k("defaultTimezone",M.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e("option",{value:"America/Denver",children:"Mountain Time"}),e("option",{value:"America/Chicago",children:"Central Time"}),e("option",{value:"America/New_York",children:"Eastern Time"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Currency"}),t("select",{value:l.currency,onChange:M=>k("currency",M.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"USD",children:"USD ($)"}),e("option",{value:"EUR",children:"EUR (\u20AC)"}),e("option",{value:"GBP",children:"GBP (\xA3)"}),e("option",{value:"CAD",children:"CAD ($)"})]})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Maintenance Mode"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Disable public access to the platform"})]}),e(X,{checked:l.maintenanceMode,onChange:M=>k("maintenanceMode",M)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Debug Mode"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Enable detailed logging and error reporting"})]}),e(X,{checked:l.debugMode,onChange:M=>k("debugMode",M)})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ze,{size:20,color:"#3b82f6"}),"Ride Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:p.baseFare,onChange:M=>w("baseFare",parseFloat(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Per Mile Rate ($)"}),e("input",{type:"number",step:"0.05",value:p.perMileRate,onChange:M=>w("perMileRate",parseFloat(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Per Minute Rate ($)"}),e("input",{type:"number",step:"0.05",value:p.perMinuteRate,onChange:M=>w("perMinuteRate",parseFloat(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Driver Commission (%)"}),e("input",{type:"number",min:"50",max:"95",value:p.driverCommission,onChange:M=>w("driverCommission",parseInt(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Accept Pets"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Allow riders to bring pets on rides"})]}),e(X,{checked:p.acceptPets,onChange:M=>w("acceptPets",M)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Accept Teens"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Allow unaccompanied minors (13-17) to book rides"})]}),e(X,{checked:p.acceptTeens,onChange:M=>w("acceptTeens",M)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Allow Scheduled Rides"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Enable advance booking of rides"})]}),e(X,{checked:p.allowScheduledRides,onChange:M=>w("allowScheduledRides",M)})]})]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Cr,{size:20,color:"#3b82f6"}),"Notification Settings"]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(c).map(([M,R])=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b",textTransform:"capitalize"},children:M.replace(/([A-Z])/g," $1").trim()}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:M.includes("Admin")?"Administrative notifications":M.includes("System")?"System maintenance alerts":M.includes("Payment")?"Payment failure notifications":"General platform notifications"})]}),e(X,{checked:R,onChange:j=>b(M,j)})]},M))})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ti,{size:20,color:"#3b82f6"}),"Security Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Session Timeout (minutes)"}),e("input",{type:"number",min:"15",max:"480",value:u.sessionTimeout,onChange:M=>f("sessionTimeout",parseInt(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Max Login Attempts"}),e("input",{type:"number",min:"3",max:"10",value:u.maxLoginAttempts,onChange:M=>f("maxLoginAttempts",parseInt(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Require Two-Factor Authentication"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Force all users to enable 2FA"})]}),e(X,{checked:u.requireTwoFactor,onChange:M=>f("requireTwoFactor",M)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Enable Audit Logging"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Log all administrative actions"})]}),e(X,{checked:u.enableAuditLogging,onChange:M=>f("enableAuditLogging",M)})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e($e,{size:20,color:"#3b82f6"}),"Map Settings"]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Default Map Type"}),t("select",{value:C.defaultMapType,onChange:M=>z("defaultMapType",M.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"roadmap",children:"Roadmap"}),e("option",{value:"satellite",children:"Satellite"}),e("option",{value:"hybrid",children:"Hybrid"}),e("option",{value:"terrain",children:"Terrain"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Update Interval (ms)"}),e("input",{type:"number",min:"1000",max:"30000",step:"1000",value:C.updateInterval,onChange:M=>z("updateInterval",parseInt(M.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Enable Traffic Layer"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Show real-time traffic information"})]}),e(X,{checked:C.enableTraffic,onChange:M=>z("enableTraffic",M)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Show Driver Locations"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Display live driver positions on map"})]}),e(X,{checked:C.showDriverLocations,onChange:M=>z("showDriverLocations",M)})]})]})]})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},Lp=()=>{s.exports.useState("today");const[o,i]=s.exports.useState(null),[r,n]=s.exports.useState(!1),l=async p=>{n(!0);try{const c=await(await fetch("/api/payments/test/simulate-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rideId:"test_ride_123",amount:25.5,paymentMethodId:"pm_test_visa_4242",scenario:p})})).json();i(c)}catch(h){console.error("Payment test failed:",h),i({error:"Test failed"})}finally{n(!1)}};return t("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b"},children:"Payment Management"}),e("p",{style:{color:"#64748b",marginBottom:"32px"},children:"Manage payment methods, view transaction history, and handle billing"}),t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px"},children:"Payment Dashboard"}),e("p",{style:{color:"#64748b"},children:"Payment management features will be implemented here."}),e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",marginTop:"32px"},children:"Payment Testing Interface"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[t("button",{onClick:()=>l("successful_payment"),disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#4CAF50",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Qi,{className:"animate-spin mr-2"}):e(vt,{className:"mr-2"}),"Run Successful Payment Test"]}),t("button",{onClick:()=>l("failed_payment"),disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#f44336",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Qi,{className:"animate-spin mr-2"}):e(ei,{className:"mr-2"}),"Run Failed Payment Test"]}),t("button",{onClick:async()=>{n(!0);try{const h=await(await fetch("/api/payments/test/validate-flow",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rideId:"test_ride_123",paymentMethodId:"pm_test_visa_4242"})})).json();i(h)}catch(p){console.error("Payment validation failed:",p),i({error:"Validation failed"})}finally{n(!1)}},disabled:r,style:{padding:"12px 20px",borderRadius:"8px",backgroundColor:"#ff9800",color:"white",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:[r?e(Qi,{className:"animate-spin mr-2"}):e(Fr,{className:"mr-2"}),"Validate Payment Flow"]})]}),o&&t("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#f0f4f8",borderRadius:"8px"},children:[e("h4",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"12px"},children:"Test Results:"}),o.error?t("div",{style:{color:"#f44336",display:"flex",alignItems:"center"},children:[e(ei,{className:"mr-2"}),t("span",{children:["Error: ",o.error]})]}):e("pre",{style:{color:"#1e293b",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(o,null,2)})]})]})]})},Np=()=>{const[o,i]=s.exports.useState(!1),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState({email:!0,sms:!1,push:!0,marketing:!1}),[p,h]=s.exports.useState(!0),[c,m]=s.exports.useState({name:"Administrator",email:"admin@rideflow.com",phone:"+1 (555) 123-4567",role:"System Administrator",joinDate:"January 15, 2023",location:"San Francisco, CA",timezone:"Pacific Time (PT)",lastLogin:new Date().toLocaleString(),department:"Operations",emergencyContact:{name:"Jane Smith",phone:"+1 (555) 987-6543",relationship:"Supervisor"},permissions:{userManagement:!0,rideManagement:!0,analytics:!0,payments:!0,settings:!0}});s.exports.useEffect(()=>{const z=localStorage.getItem("admin_profile"),y=localStorage.getItem("admin_notifications"),B=localStorage.getItem("admin_2fa");z&&m(JSON.parse(z)),y&&d(JSON.parse(y)),B&&h(JSON.parse(B))},[]);const u=(z,y)=>{m(B=>({...B,[z]:y}))},x=(z,y)=>{m(B=>({...B,emergencyContact:{...B.emergencyContact,[z]:y}}))},C=(z,y)=>{d(B=>({...B,[z]:y}))},F=async()=>{n(!0),await new Promise(z=>setTimeout(z,1e3)),localStorage.setItem("admin_profile",JSON.stringify(c)),localStorage.setItem("admin_notifications",JSON.stringify(l)),localStorage.setItem("admin_2fa",JSON.stringify(p)),i(!1),n(!1),w("\u2705 Profile updated successfully!","success")},k=async()=>{n(!0),await new Promise(y=>setTimeout(y,1500)),h(!p),localStorage.setItem("admin_2fa",JSON.stringify(!p)),n(!1),w(p?"\u{1F513} Two-factor authentication disabled":"\u{1F512} Two-factor authentication enabled","info")},w=(z,y)=>{const B=document.createElement("div");B.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: ${y==="success"?"#10b981":y==="error"?"#ef4444":y==="warning"?"#f59e0b":"#3b82f6"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 10000;
      animation: slideIn 0.3s ease-out;
      max-width: 300px;
    `,B.textContent=z,document.body.appendChild(B);const $=document.createElement("style");$.textContent=`
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
      }
    `,document.head.appendChild($),setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B),document.head.contains($)&&document.head.removeChild($)},4e3)},b=()=>{w("\u{1F504} Password reset email sent to your account!","info")};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Profile Settings"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage your account information and system preferences"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[t("button",{onClick:()=>{const z={profile:c,notifications:l,twoFactorEnabled:p,exportDate:new Date().toISOString()},y=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),B=URL.createObjectURL(y),$=document.createElement("a");$.href=B,$.download="admin-profile-export.json",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(B),w("\u{1F4C4} Profile data exported successfully!","success")},style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#6b7280",color:"white",border:"none",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(dd,{size:16}),"Export Data"]}),t("button",{onClick:()=>o?F():i(!0),disabled:r,style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:o?"#10b981":"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:r?"not-allowed":"pointer",opacity:r?.7:1},children:[r?e("div",{style:{width:"16px",height:"16px",border:"2px solid #ffffff40",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}):o?e(Cn,{size:16}):e(zn,{size:16}),r?"Saving...":o?"Save Changes":"Edit Profile"]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"32px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px",textAlign:"center",height:"fit-content"},children:[t("div",{style:{position:"relative",display:"inline-block",marginBottom:"24px"},children:[e("div",{style:{width:"120px",height:"120px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:"700",color:"white",margin:"0 auto"},children:c.name.split(" ").map(z=>z[0]).join("")}),e("button",{onClick:()=>w("\u{1F4F8} Photo upload feature coming soon!","info"),style:{position:"absolute",bottom:"8px",right:"8px",width:"32px",height:"32px",backgroundColor:"white",border:"2px solid #e2e8f0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e(pi,{size:14,color:"#64748b"})})]}),e("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",marginBottom:"8px"},children:c.name}),e("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"4px"},children:c.role}),t("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"24px"},children:["Member since ",c.joinDate]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"20px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[e(Ti,{size:16,color:"#10b981"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#10b981"},children:"Account Verified"})]}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["Last login: ",c.lastLogin]})]}),e("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t("button",{onClick:b,style:{width:"100%",padding:"12px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e(Sa,{size:16}),"Reset Password"]})})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Personal Information"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(Qe,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Full Name"]}),o?e("input",{type:"text",value:c.name,onChange:z=>u("name",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.name})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(to,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Email Address"]}),o?e("input",{type:"email",value:c.email,onChange:z=>u("email",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.email})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e(No,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Phone Number"]}),o?e("input",{type:"tel",value:c.phone,onChange:z=>u("phone",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.phone})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:[e($e,{size:16,style:{display:"inline",marginRight:"8px",verticalAlign:"middle"}}),"Location"]}),o?e("input",{type:"text",value:c.location,onChange:z=>u("location",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.location})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Department"}),o?t("select",{value:c.department,onChange:z=>u("department",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Operations",children:"Operations"}),e("option",{value:"Engineering",children:"Engineering"}),e("option",{value:"Customer Support",children:"Customer Support"}),e("option",{value:"Finance",children:"Finance"}),e("option",{value:"Marketing",children:"Marketing"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.department})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Timezone"}),o?t("select",{value:c.timezone,onChange:z=>u("timezone",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Pacific Time (PT)",children:"Pacific Time (PT)"}),e("option",{value:"Mountain Time (MT)",children:"Mountain Time (MT)"}),e("option",{value:"Central Time (CT)",children:"Central Time (CT)"}),e("option",{value:"Eastern Time (ET)",children:"Eastern Time (ET)"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.timezone})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Emergency Contact"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Contact Name"}),o?e("input",{type:"text",value:c.emergencyContact.name,onChange:z=>x("name",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.name})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Phone Number"}),o?e("input",{type:"tel",value:c.emergencyContact.phone,onChange:z=>x("phone",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.phone})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Relationship"}),o?t("select",{value:c.emergencyContact.relationship,onChange:z=>x("relationship",z.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"Supervisor",children:"Supervisor"}),e("option",{value:"Manager",children:"Manager"}),e("option",{value:"HR Contact",children:"HR Contact"}),e("option",{value:"Family",children:"Family"}),e("option",{value:"Friend",children:"Friend"})]}):e("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#1e293b"},children:c.emergencyContact.relationship})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"Security & Notifications"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:p?"#f0fdf4":"#fef3c7",borderRadius:"12px",border:`2px solid ${p?"#bbf7d0":"#fde68a"}`},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(Ti,{size:20,color:p?"#10b981":"#f59e0b"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Two-Factor Authentication"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:p?"Your account is protected":"Add an extra layer of security"})]})]}),e("button",{onClick:k,disabled:r,style:{padding:"6px 12px",backgroundColor:p?"#10b981":"#f59e0b",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:r?"not-allowed":"pointer",opacity:r?.7:1},children:p?"Enabled":"Enable"})]}),t("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(Cr,{size:20,color:"#64748b"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:"Notification Preferences"}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Choose how you want to be notified"})]})]}),e("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:Object.entries(l).map(([z,y])=>t("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:y,onChange:B=>C(z,B.target.checked),style:{accentColor:"#3b82f6"}}),e("span",{style:{fontSize:"14px",color:"#374151",textTransform:"capitalize"},children:z==="sms"?"SMS":z})]},z))})]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"32px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e293b",marginBottom:"20px"},children:"System Permissions"}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:Object.entries(c.permissions).map(([z,y])=>t("div",{style:{padding:"12px",backgroundColor:y?"#f0fdf4":"#fef2f2",borderRadius:"8px",border:`2px solid ${y?"#bbf7d0":"#fecaca"}`,textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:y?"#10b981":"#ef4444",marginBottom:"4px",textTransform:"capitalize"},children:z.replace(/([A-Z])/g," $1").trim()}),e("div",{style:{fontSize:"12px",color:"#64748b"},children:y?"\u2713 Granted":"\u2717 Denied"})]},z))})]})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},$p=()=>{const[o,i]=s.exports.useState([{id:"1",type:"message",title:"Message from Alex R.",content:"I'm running 2 minutes late due to traffic. Thanks for your patience!",timestamp:new Date(Date.now()-3e5),read:!1,priority:"high",metadata:{driverId:"alex_r",rideId:"ride_123"}},{id:"2",type:"receipt",title:"Trip Receipt",content:"Your ride to Downtown has been completed. Total: $24.50",timestamp:new Date(Date.now()-18e5),read:!1,priority:"medium",metadata:{amount:24.5,rideId:"ride_122"}},{id:"3",type:"notification",title:"Driver Arrived",content:"Sarah M. has arrived at your pickup location",timestamp:new Date(Date.now()-72e5),read:!0,priority:"high",metadata:{driverId:"sarah_m",location:"Main St & 5th Ave"}},{id:"4",type:"promotion",title:"20% Off Your Next Ride",content:"Use code SAVE20 on your next trip. Valid until midnight!",timestamp:new Date(Date.now()-144e5),read:!0,priority:"low"},{id:"5",type:"alert",title:"Payment Method Updated",content:"Your default payment method has been successfully updated",timestamp:new Date(Date.now()-864e5),read:!0,priority:"medium"}]),[r,n]=s.exports.useState("all"),l=F=>{switch(F){case"message":return e(Mr,{size:20,color:"#3b82f6"});case"notification":return e(Cr,{size:20,color:"#10b981"});case"alert":return e(ei,{size:20,color:"#f59e0b"});case"receipt":return e(_t,{size:20,color:"#8b5cf6"});case"promotion":return e(vt,{size:20,color:"#ef4444"});default:return e(Cr,{size:20,color:"#6b7280"})}},d=F=>{switch(F){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},p=F=>{const w=new Date().getTime()-F.getTime(),b=Math.floor(w/(1e3*60)),f=Math.floor(w/(1e3*60*60)),z=Math.floor(w/(1e3*60*60*24));return b<60?`${b}m ago`:f<24?`${f}h ago`:`${z}d ago`},h=o.filter(F=>{switch(r){case"unread":return!F.read;case"messages":return F.type==="message";case"receipts":return F.type==="receipt";default:return!0}}),c=o.filter(F=>!F.read).length,m=F=>{i(k=>k.map(w=>w.id===F?{...w,read:!0}:w))},u=F=>{i(k=>k.map(w=>w.id===F?{...w,read:!1}:w))},x=F=>{i(k=>k.filter(w=>w.id!==F))};return t("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",padding:"20px",background:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{children:[e("h2",{style:{margin:0,fontSize:"24px",fontWeight:600,color:"#1e293b"},children:"Inbox"}),t("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:[c," unread messages"]})]}),e("button",{onClick:()=>{i(F=>F.map(k=>({...k,read:!0})))},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Mark All Read"})]}),e("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",padding:"0 4px"},children:[{key:"all",label:"All"},{key:"unread",label:`Unread (${c})`},{key:"messages",label:"Messages"},{key:"receipts",label:"Receipts"}].map(({key:F,label:k})=>e("button",{onClick:()=>n(F),style:{background:r===F?"#3b82f6":"white",color:r===F?"white":"#64748b",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px 16px",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s ease"},children:k},F))}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:h.length===0?t("div",{style:{background:"white",borderRadius:"12px",padding:"60px 20px",textAlign:"center",color:"#64748b"},children:[e(kn,{size:48,style:{margin:"0 auto 16px",opacity:.3}}),e("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"No messages"}),e("div",{style:{fontSize:"14px"},children:"Your inbox is empty"})]}):h.map(F=>{var k,w;return e("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:`1px solid ${F.read?"#e2e8f0":"#3b82f6"}`,borderLeft:`4px solid ${d(F.priority)}`,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>!F.read&&m(F.id),children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[e("div",{style:{marginTop:"2px"},children:l(F.type)}),t("div",{style:{flex:1},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e("h3",{style:{margin:0,fontSize:"16px",fontWeight:F.read?500:600,color:"#1e293b"},children:F.title}),!F.read&&e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}})]}),e("p",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#64748b",lineHeight:"1.4"},children:F.content}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#9ca3af"},children:[e(St,{size:12}),p(F.timestamp)]}),((k=F.metadata)==null?void 0:k.location)&&t("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#9ca3af"},children:[e($e,{size:12}),F.metadata.location]}),((w=F.metadata)==null?void 0:w.amount)&&t("div",{style:{background:"#10b981",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:500},children:["$",F.metadata.amount]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("button",{onClick:b=>{b.stopPropagation(),F.read?u(F.id):m(F.id)},style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"4px"},title:F.read?"Mark as unread":"Mark as read",children:e(to,{size:16,color:"#64748b"})}),e("button",{onClick:b=>{b.stopPropagation(),x(F.id)},style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"4px"},title:"Delete",children:e(Rn,{size:16})})]})]})},F.id)})})]})},Op=()=>{const[o,i]=s.exports.useState("week");s.exports.useState(!1),s.exports.useState(!1);const[r,n]=s.exports.useState("overview"),l={today:{period:"Today",totalEarnings:0,rideFare:210,tips:32.5,bonuses:15,fees:-10,netEarnings:237.5,rides:23,hours:8.5,avgPerRide:10.76,avgPerHour:29.12},week:{period:"This Week",totalEarnings:1580.25,rideFare:1320,tips:180.25,bonuses:145,fees:-65,netEarnings:1515.25,rides:156,hours:42.5,avgPerRide:10.13,avgPerHour:37.18},month:{period:"This Month",totalEarnings:6420.8,rideFare:5250,tips:720.8,bonuses:580,fees:-130,netEarnings:6290.8,rides:645,hours:168,avgPerRide:9.95,avgPerHour:38.24},year:{period:"This Year",totalEarnings:48650,rideFare:39800,tips:5240,bonuses:4250,fees:-640,netEarnings:48010,rides:4890,hours:1250,avgPerRide:9.95,avgPerHour:38.92}},d=[{id:"bank1",type:"bank",name:"Chase Bank",details:"****4567",isDefault:!0,isVerified:!0,addedDate:"2023-01-15"},{id:"debit1",type:"debit",name:"GoBank Debit",details:"****8901",isDefault:!1,isVerified:!0,addedDate:"2023-03-20"}],p=[{id:"P001",amount:1515.25,method:"Chase Bank ****4567",status:"completed",date:"2024-01-08",fees:0,reference:"TXN-7891234567"},{id:"P002",amount:1280.5,method:"Chase Bank ****4567",status:"completed",date:"2024-01-01",fees:0,reference:"TXN-7891234566"},{id:"P003",amount:850.75,method:"GoBank Debit ****8901",status:"pending",date:"2024-01-07",fees:.5,reference:"TXN-7891234565"}],h=l[o],c=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),m=x=>{switch(x){case"completed":return"#10b981";case"pending":return"#f59e0b";case"failed":return"#ef4444";default:return"#6b7280"}},u=x=>{switch(x){case"bank":return e(Ii,{size:20});case"debit":return e(Ii,{size:20});case"paypal":return e(gd,{size:20});default:return e(Ii,{size:20})}};return t("div",{style:{maxWidth:"450px",margin:"0 auto",height:"100vh",backgroundColor:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',overflow:"auto"},children:[t("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",color:"white",padding:"16px",position:"sticky",top:0,zIndex:100},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(_t,{size:24}),e("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Driver Earnings"})]}),e("div",{style:{display:"flex",background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"4px"},children:[{key:"overview",label:"Overview",icon:no},{key:"detailed",label:"Details",icon:Xs},{key:"payouts",label:"Payouts",icon:Ii},{key:"tax",label:"Tax",icon:xt}].map(x=>t("button",{onClick:()=>n(x.key),style:{flex:1,background:r===x.key?"rgba(255,255,255,0.2)":"transparent",border:"none",borderRadius:"6px",padding:"8px 4px",color:"white",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",transition:"all 0.2s ease"},children:[e(x.icon,{size:14}),x.label]},x.key))})]}),t("div",{style:{padding:"16px"},children:[r==="overview"&&t(ye,{children:[e("div",{style:{display:"flex",background:"white",borderRadius:"12px",padding:"4px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{key:"today",label:"Today"},{key:"week",label:"Week"},{key:"month",label:"Month"},{key:"year",label:"Year"}].map(x=>e("button",{onClick:()=>i(x.key),style:{flex:1,background:o===x.key?"#3b82f6":"transparent",color:o===x.key?"white":"#6b7280",border:"none",borderRadius:"8px",padding:"10px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:x.label},x.key))}),t("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"16px",padding:"24px",color:"white",marginBottom:"20px",textAlign:"center"},children:[t("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:[h.period," Net Earnings"]}),e("div",{style:{fontSize:"36px",fontWeight:"700",marginBottom:"8px"},children:c(h.netEarnings)}),t("div",{style:{display:"flex",justifyContent:"center",gap:"20px",fontSize:"12px"},children:[t("div",{children:[e("div",{style:{fontWeight:"600"},children:h.rides}),e("div",{style:{opacity:.8},children:"Rides"})]}),t("div",{children:[t("div",{style:{fontWeight:"600"},children:[h.hours,"h"]}),e("div",{style:{opacity:.8},children:"Online"})]}),t("div",{children:[e("div",{style:{fontWeight:"600"},children:c(h.avgPerHour)}),e("div",{style:{opacity:.8},children:"Per Hour"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Earnings Breakdown"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#3b82f6"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Ride Fare"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.rideFare)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Tips"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.tips)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f59e0b"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Bonuses"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(h.bonuses)})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444"}}),e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Platform Fees"})]}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#ef4444"},children:c(h.fees)})]}),e("div",{style:{height:"1px",background:"#e5e7eb",margin:"8px 0"}}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("span",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937"},children:"Net Earnings"}),e("span",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:c(h.netEarnings)})]})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},children:[t("button",{onClick:()=>n("payouts"),style:{background:"white",border:"2px solid #e5e7eb",borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(Ii,{size:20,color:"#3b82f6"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Instant Payout"})]}),t("button",{onClick:()=>n("tax"),style:{background:"white",border:"2px solid #e5e7eb",borderRadius:"12px",padding:"16px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease"},children:[e(xt,{size:20,color:"#f59e0b"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Tax Documents"})]})]})]}),r==="detailed"&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Performance Metrics"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#3b82f6"},children:c(h.avgPerRide)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg per Ride"})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#10b981"},children:c(h.avgPerHour)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg per Hour"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Commission Structure"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"Platform Fee"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Standard commission"})]}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#ef4444"},children:"25%"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f0f9ff",borderRadius:"8px"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"You Keep"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Your earnings"})]}),e("div",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:"75%"})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Weekly Goals"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Rides Goal"}),e("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"156/200"})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:e("div",{style:{width:"78%",height:"100%",background:"linear-gradient(90deg, #3b82f6, #1d4ed8)",borderRadius:"4px"}})})]}),t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Earnings Goal"}),t("span",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:[c(h.netEarnings),"/",c(2e3)]})]}),e("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:e("div",{style:{width:"76%",height:"100%",background:"linear-gradient(90deg, #10b981, #059669)",borderRadius:"4px"}})})]})]})]})]}),r==="payouts"&&t(ye,{children:[t("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"16px",padding:"20px",color:"white",marginBottom:"20px",textAlign:"center"},children:[e("div",{style:{fontSize:"14px",opacity:.9,marginBottom:"8px"},children:"Available for Payout"}),e("div",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"12px"},children:c(h.netEarnings)}),e("button",{style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"10px 20px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Request Instant Payout"})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",margin:0},children:"Payout Methods"}),e("button",{style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"Add Method"})]}),d.map(x=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",border:"2px solid",borderColor:x.isDefault?"#3b82f6":"#e5e7eb",borderRadius:"8px",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{color:"#6b7280"},children:u(x.type)}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:x.name}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[x.details," ",x.isDefault&&"\u2022 Default"]})]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:x.isVerified?e(vt,{size:16,color:"#10b981"}):e(ei,{size:16,color:"#f59e0b"})})]},x.id))]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Payout History"}),p.map(x=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid #e5e7eb"},children:[t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:c(x.amount)}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:[x.method," \u2022 ",x.date]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e("div",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",background:x.status==="completed"?"#f0fdf4":x.status==="pending"?"#fefce8":"#fef2f2",color:m(x.status)},children:x.status})})]},x.id))]})]}),r==="tax"&&t(ye,{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"2024 Tax Summary"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{style:{padding:"16px",background:"#f0f9ff",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1d4ed8"},children:c(48010)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Total Earnings"})]}),t("div",{style:{padding:"16px",background:"#f0fdf4",borderRadius:"8px",textAlign:"center"},children:[e("div",{style:{fontSize:"20px",fontWeight:"700",color:"#059669"},children:c(8640)}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Estimated Tax"})]})]}),t("div",{style:{background:"#fef3c7",borderRadius:"8px",padding:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Cd,{size:16,color:"#d97706"}),e("div",{style:{fontSize:"12px",color:"#92400e"},children:"Tax estimates are based on 18% effective rate. Consult a tax professional for accurate calculations."})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Tax Documents"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(xt,{size:20,color:"#3b82f6"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"2024 1099-NEC"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Available January 31, 2025"})]})]}),e("button",{style:{background:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"not-allowed"},children:"Pending"})]}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(xt,{size:20,color:"#10b981"}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:"2023 1099-NEC"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Tax year 2023 summary"})]})]}),t("button",{style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[e(Lo,{size:12}),"Download"]})]})]})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"#1f2937"},children:"Tax Tips for Drivers"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #3b82f6"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Track Your Mileage"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Business mileage is tax deductible at $0.655 per mile for 2023."})]}),t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #10b981"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Vehicle Expenses"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Gas, maintenance, insurance, and car payments may be deductible."})]}),t("div",{style:{padding:"12px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Quarterly Payments"}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Consider making quarterly estimated tax payments to avoid penalties."})]})]})]})]})]})]})},jp=()=>{const[o,i]=s.exports.useState("LAX"),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState(0),p=[{id:"LAX",name:"Los Angeles International",code:"LAX",queueLength:47,avgWaitTime:"23 min",surgeMultiplier:1.8},{id:"JFK",name:"John F. Kennedy International",code:"JFK",queueLength:32,avgWaitTime:"18 min",surgeMultiplier:1.6},{id:"ORD",name:"O'Hare International",code:"ORD",queueLength:28,avgWaitTime:"15 min",surgeMultiplier:1.5},{id:"ATL",name:"Hartsfield-Jackson Atlanta International",code:"ATL",queueLength:41,avgWaitTime:"20 min",surgeMultiplier:1.4},{id:"DFW",name:"Dallas/Fort Worth International",code:"DFW",queueLength:35,avgWaitTime:"16 min",surgeMultiplier:1.3},{id:"SFO",name:"San Francisco International",code:"SFO",queueLength:39,avgWaitTime:"21 min",surgeMultiplier:1.7},{id:"SEA",name:"Seattle-Tacoma International",code:"SEA",queueLength:26,avgWaitTime:"14 min",surgeMultiplier:1.4},{id:"MIA",name:"Miami International",code:"MIA",queueLength:19,avgWaitTime:"12 min",surgeMultiplier:1.5},{id:"XNA",name:"Northwest Arkansas Regional",code:"XNA",queueLength:8,avgWaitTime:"8 min",surgeMultiplier:1.1}],h=[{id:"1",name:"Michael R.",vehicleType:"Tesla Model 3",queuePosition:1,waitTime:"2 min",earnings:847.5},{id:"2",name:"Sarah L.",vehicleType:"Toyota Camry",queuePosition:2,waitTime:"8 min",earnings:692.3},{id:"3",name:"David K.",vehicleType:"Honda Accord",queuePosition:3,waitTime:"15 min",earnings:523.8},{id:"4",name:"Jennifer M.",vehicleType:"Nissan Altima",queuePosition:4,waitTime:"22 min",earnings:765.9}],c=p.find(x=>x.id===o),m=()=>{n(!0),d(c.queueLength+1)},u=()=>{n(!1),d(0)};return t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e(yr,{size:24,color:"#3b82f6"}),e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Airport Queue System"})]}),e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:p.map(x=>t("button",{onClick:()=>i(x.id),style:{padding:"16px",border:o===x.id?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"12px",background:o===x.id?"#eff6ff":"white",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:[e("div",{style:{fontWeight:"700",color:"#1f2937",marginBottom:"4px"},children:x.code}),e("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:x.name}),t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("span",{style:{fontSize:"14px",color:"#059669"},children:[x.surgeMultiplier,"x surge"]}),t("span",{style:{fontSize:"12px",color:"#6b7280"},children:[x.queueLength," drivers"]})]})]},x.id))})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("h2",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:[c.name," (",c.code,")"]}),e("div",{style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"\u{1F4CD} PICKUP ZONES MAPPED"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"20px"},children:[t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(gi,{size:24,color:"#3b82f6",style:{margin:"0 auto 8px"}}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:c.queueLength}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Drivers in Queue"})]}),t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(St,{size:24,color:"#f59e0b",style:{margin:"0 auto 8px"}}),e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:c.avgWaitTime}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Avg Wait Time"})]}),t("div",{style:{textAlign:"center",padding:"16px",background:"#f3f4f6",borderRadius:"12px"},children:[e(_t,{size:24,color:"#10b981",style:{margin:"0 auto 8px"}}),t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937"},children:[c.surgeMultiplier,"x"]}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:"Surge Multiplier"})]})]}),t("div",{style:{background:"#f0f9ff",borderRadius:"12px",padding:"16px",marginBottom:"16px",border:"2px solid #0ea5e9"},children:[e("div",{style:{fontSize:"14px",fontWeight:"700",color:"#0c4a6e",marginBottom:"8px"},children:"\u{1F4CD} Designated Pickup Zones"}),t("div",{style:{fontSize:"12px",color:"#0369a1",lineHeight:"1.4"},children:[c.code==="XNA"&&"Main Terminal Rideshare Zone \u2022 Ground Transportation Area",c.code==="LAX"&&"LAX-it Rideshare Hub \u2022 Terminal 1, 4, 7 Pickup Areas",c.code==="JFK"&&"Terminal 1, 4, 5, 7, 8 Rideshare Zones",c.code==="ORD"&&"Terminal 1, 2, 3, 5 Rideshare Zones",c.code==="ATL"&&"Terminal North/South Rideshare \u2022 Ground Transportation Center",!["XNA","LAX","JFK","ORD","ATL"].includes(c.code)&&"Multiple terminal pickup zones available"]})]}),r?t("div",{style:{padding:"20px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",borderRadius:"12px",color:"white",textAlign:"center"},children:[e("div",{style:{fontSize:"18px",fontWeight:"700",marginBottom:"8px"},children:"You're in the queue!"}),t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:["#",l]}),t("div",{style:{marginBottom:"16px",opacity:.9},children:["Estimated wait: ",Math.ceil(l*5)," minutes"]}),e("button",{onClick:u,style:{padding:"12px 24px",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",cursor:"pointer"},children:"Leave Queue"})]}):e("button",{onClick:m,style:{width:"100%",padding:"16px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s"},children:"\u{1F6EC} Join Airport Queue"})]}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"Current Queue - Next 4 Drivers"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:h.map(x=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:x.queuePosition===1?"#ecfdf5":"#f9fafb",border:x.queuePosition===1?"2px solid #10b981":"1px solid #e5e7eb",borderRadius:"12px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e("div",{style:{width:"32px",height:"32px",background:x.queuePosition===1?"#10b981":"#6b7280",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"700"},children:x.queuePosition}),t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1f2937"},children:x.name}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:x.vehicleType})]})]}),t("div",{style:{textAlign:"right"},children:[t("div",{style:{fontSize:"14px",fontWeight:"600",color:"#059669"},children:["$",x.earnings.toFixed(2)]}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Wait: ",x.waitTime]})]})]},x.id))})]})]})},Up=()=>{const[o,i]=s.exports.useState("lax"),[r,n]=s.exports.useState(30),[l,d]=s.exports.useState(!0),[p,h]=s.exports.useState(!1),[c,m]=s.exports.useState({name:"",code:"",lat:"",lng:"",radius:"2.5"}),u=[{id:"atl",name:"Hartsfield-Jackson Atlanta International",code:"ATL",coordinates:{lat:33.6407,lng:-84.4277},radius:4.2,surgeMultiplier:1.6,queueLength:52,avgWaitTime:"22 min",demandLevel:"extreme"},{id:"lax",name:"Los Angeles International Airport",code:"LAX",coordinates:{lat:33.9425,lng:-118.4081},radius:3.8,surgeMultiplier:1.8,queueLength:47,avgWaitTime:"23 min",demandLevel:"extreme"},{id:"ord",name:"O'Hare International Airport",code:"ORD",coordinates:{lat:41.9742,lng:-87.9073},radius:4.5,surgeMultiplier:1.7,queueLength:45,avgWaitTime:"21 min",demandLevel:"extreme"},{id:"dfw",name:"Dallas/Fort Worth International",code:"DFW",coordinates:{lat:32.8998,lng:-97.0403},radius:5,surgeMultiplier:1.5,queueLength:38,avgWaitTime:"19 min",demandLevel:"high"},{id:"den",name:"Denver International Airport",code:"DEN",coordinates:{lat:39.8561,lng:-104.6737},radius:4.8,surgeMultiplier:1.4,queueLength:34,avgWaitTime:"17 min",demandLevel:"high"},{id:"jfk",name:"John F. Kennedy International Airport",code:"JFK",coordinates:{lat:40.6413,lng:-73.7781},radius:3.5,surgeMultiplier:1.9,queueLength:43,avgWaitTime:"24 min",demandLevel:"extreme"},{id:"sfo",name:"San Francisco International",code:"SFO",coordinates:{lat:37.6213,lng:-122.379},radius:3.2,surgeMultiplier:1.8,queueLength:41,avgWaitTime:"22 min",demandLevel:"extreme"},{id:"lga",name:"LaGuardia Airport",code:"LGA",coordinates:{lat:40.7769,lng:-73.874},radius:2.5,surgeMultiplier:1.7,queueLength:29,avgWaitTime:"16 min",demandLevel:"high"},{id:"ewr",name:"Newark Liberty International",code:"EWR",coordinates:{lat:40.6895,lng:-74.1745},radius:2.8,surgeMultiplier:1.6,queueLength:31,avgWaitTime:"17 min",demandLevel:"high"},{id:"sea",name:"Seattle-Tacoma International",code:"SEA",coordinates:{lat:47.4502,lng:-122.3088},radius:3.4,surgeMultiplier:1.5,queueLength:28,avgWaitTime:"15 min",demandLevel:"high"},{id:"mia",name:"Miami International Airport",code:"MIA",coordinates:{lat:25.7959,lng:-80.287},radius:3,surgeMultiplier:1.6,queueLength:26,avgWaitTime:"14 min",demandLevel:"high"},{id:"phx",name:"Phoenix Sky Harbor International",code:"PHX",coordinates:{lat:33.4342,lng:-112.008},radius:3.2,surgeMultiplier:1.3,queueLength:22,avgWaitTime:"12 min",demandLevel:"medium"},{id:"iah",name:"George Bush Intercontinental Houston",code:"IAH",coordinates:{lat:29.9844,lng:-95.3414},radius:3.5,surgeMultiplier:1.4,queueLength:25,avgWaitTime:"13 min",demandLevel:"high"},{id:"bos",name:"Boston Logan International",code:"BOS",coordinates:{lat:42.3656,lng:-71.0096},radius:2.9,surgeMultiplier:1.5,queueLength:24,avgWaitTime:"13 min",demandLevel:"high"},{id:"msp",name:"Minneapolis-St. Paul International",code:"MSP",coordinates:{lat:44.8848,lng:-93.2223},radius:3.1,surgeMultiplier:1.2,queueLength:19,avgWaitTime:"11 min",demandLevel:"medium"},{id:"dtw",name:"Detroit Metropolitan Wayne County",code:"DTW",coordinates:{lat:42.2124,lng:-83.3534},radius:3,surgeMultiplier:1.2,queueLength:17,avgWaitTime:"10 min",demandLevel:"medium"},{id:"phl",name:"Philadelphia International",code:"PHL",coordinates:{lat:39.8719,lng:-75.2411},radius:2.7,surgeMultiplier:1.3,queueLength:21,avgWaitTime:"12 min",demandLevel:"medium"},{id:"mcl",name:"Orlando International",code:"MCO",coordinates:{lat:28.4312,lng:-81.3081},radius:2.8,surgeMultiplier:1.4,queueLength:23,avgWaitTime:"13 min",demandLevel:"high"},{id:"slc",name:"Salt Lake City International",code:"SLC",coordinates:{lat:40.7884,lng:-111.9776},radius:2.5,surgeMultiplier:1.1,queueLength:14,avgWaitTime:"9 min",demandLevel:"medium"},{id:"fll",name:"Fort Lauderdale-Hollywood International",code:"FLL",coordinates:{lat:26.0742,lng:-80.1506},radius:2.3,surgeMultiplier:1.3,queueLength:18,avgWaitTime:"11 min",demandLevel:"medium"},{id:"dca",name:"Ronald Reagan Washington National",code:"DCA",coordinates:{lat:38.8512,lng:-77.0402},radius:2.1,surgeMultiplier:1.5,queueLength:26,avgWaitTime:"14 min",demandLevel:"high"},{id:"iad",name:"Washington Dulles International",code:"IAD",coordinates:{lat:38.9531,lng:-77.4565},radius:3.2,surgeMultiplier:1.4,queueLength:22,avgWaitTime:"12 min",demandLevel:"medium"},{id:"mdw",name:"Chicago Midway International",code:"MDW",coordinates:{lat:41.7868,lng:-87.7522},radius:2.2,surgeMultiplier:1.3,queueLength:16,avgWaitTime:"10 min",demandLevel:"medium"},{id:"san",name:"San Diego International",code:"SAN",coordinates:{lat:32.7336,lng:-117.1897},radius:2.4,surgeMultiplier:1.3,queueLength:20,avgWaitTime:"11 min",demandLevel:"medium"},{id:"tpa",name:"Tampa International",code:"TPA",coordinates:{lat:27.9755,lng:-82.5332},radius:2.6,surgeMultiplier:1.2,queueLength:15,avgWaitTime:"9 min",demandLevel:"medium"},{id:"pdx",name:"Portland International",code:"PDX",coordinates:{lat:45.5898,lng:-122.5951},radius:2.3,surgeMultiplier:1.2,queueLength:13,avgWaitTime:"8 min",demandLevel:"medium"},{id:"aus",name:"Austin-Bergstrom International",code:"AUS",coordinates:{lat:30.1975,lng:-97.6664},radius:2.5,surgeMultiplier:1.3,queueLength:18,avgWaitTime:"11 min",demandLevel:"medium"},{id:"msy",name:"Louis Armstrong New Orleans International",code:"MSY",coordinates:{lat:29.9934,lng:-90.258},radius:2.2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"stl",name:"St. Louis Lambert International",code:"STL",coordinates:{lat:38.7487,lng:-90.37},radius:2.4,surgeMultiplier:1.1,queueLength:11,avgWaitTime:"7 min",demandLevel:"low"},{id:"bwi",name:"Baltimore/Washington International Thurgood Marshall",code:"BWI",coordinates:{lat:39.1754,lng:-76.6683},radius:2.5,surgeMultiplier:1.3,queueLength:19,avgWaitTime:"11 min",demandLevel:"medium"},{id:"oak",name:"Oakland International",code:"OAK",coordinates:{lat:37.7214,lng:-122.2208},radius:2.1,surgeMultiplier:1.4,queueLength:16,avgWaitTime:"10 min",demandLevel:"medium"},{id:"sjc",name:"San Jose Mineta International",code:"SJC",coordinates:{lat:37.3639,lng:-121.9289},radius:2,surgeMultiplier:1.3,queueLength:14,avgWaitTime:"9 min",demandLevel:"medium"},{id:"cvg",name:"Cincinnati/Northern Kentucky International",code:"CVG",coordinates:{lat:39.0488,lng:-84.6678},radius:2.3,surgeMultiplier:1.1,queueLength:10,avgWaitTime:"7 min",demandLevel:"low"},{id:"ind",name:"Indianapolis International",code:"IND",coordinates:{lat:39.7173,lng:-86.2944},radius:2.2,surgeMultiplier:1.1,queueLength:9,avgWaitTime:"6 min",demandLevel:"low"},{id:"cmh",name:"John Glenn Columbus International",code:"CMH",coordinates:{lat:39.998,lng:-82.8919},radius:2.1,surgeMultiplier:1.1,queueLength:8,avgWaitTime:"6 min",demandLevel:"low"},{id:"ric",name:"Richmond International",code:"RIC",coordinates:{lat:37.5052,lng:-77.3197},radius:1.8,surgeMultiplier:1,queueLength:6,avgWaitTime:"5 min",demandLevel:"low"},{id:"rdu",name:"Raleigh-Durham International",code:"RDU",coordinates:{lat:35.8776,lng:-78.7875},radius:2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"clt",name:"Charlotte Douglas International",code:"CLT",coordinates:{lat:35.214,lng:-80.9431},radius:2.4,surgeMultiplier:1.3,queueLength:17,avgWaitTime:"10 min",demandLevel:"medium"},{id:"mke",name:"Milwaukee Mitchell International",code:"MKE",coordinates:{lat:42.9472,lng:-87.8966},radius:1.9,surgeMultiplier:1,queueLength:7,avgWaitTime:"5 min",demandLevel:"low"},{id:"buf",name:"Buffalo Niagara International",code:"BUF",coordinates:{lat:42.9405,lng:-78.7322},radius:1.8,surgeMultiplier:1,queueLength:5,avgWaitTime:"4 min",demandLevel:"low"},{id:"rno",name:"Reno-Tahoe International",code:"RNO",coordinates:{lat:39.4991,lng:-119.7681},radius:1.7,surgeMultiplier:1,queueLength:4,avgWaitTime:"4 min",demandLevel:"low"},{id:"xna",name:"Northwest Arkansas Regional",code:"XNA",coordinates:{lat:36.2818,lng:-94.3068},radius:2.2,surgeMultiplier:1.2,queueLength:12,avgWaitTime:"8 min",demandLevel:"medium"},{id:"lit",name:"Bill and Hillary Clinton National/Adams Field",code:"LIT",coordinates:{lat:34.7293,lng:-92.2241},radius:2,surgeMultiplier:1.1,queueLength:8,avgWaitTime:"6 min",demandLevel:"low"},{id:"abq",name:"Albuquerque International Sunport",code:"ABQ",coordinates:{lat:35.0402,lng:-106.6091},radius:1.9,surgeMultiplier:1,queueLength:6,avgWaitTime:"5 min",demandLevel:"low"},{id:"tul",name:"Tulsa International",code:"TUL",coordinates:{lat:36.1984,lng:-95.8881},radius:1.8,surgeMultiplier:1,queueLength:5,avgWaitTime:"4 min",demandLevel:"low"},{id:"okc",name:"Will Rogers World",code:"OKC",coordinates:{lat:35.3931,lng:-97.6007},radius:1.9,surgeMultiplier:1.1,queueLength:7,avgWaitTime:"5 min",demandLevel:"low"},{id:"mci",name:"Kansas City International",code:"MCI",coordinates:{lat:39.2976,lng:-94.7139},radius:2.1,surgeMultiplier:1.1,queueLength:9,avgWaitTime:"6 min",demandLevel:"low"}],x=[{id:"hollywood",name:"Hollywood & Highland",coordinates:{lat:34.1022,lng:-118.339},surgeMultiplier:1.4,demandLevel:"high",estimatedRides:23,avgFare:18.75},{id:"downtown_la",name:"Downtown LA",coordinates:{lat:34.0522,lng:-118.2437},surgeMultiplier:1.2,demandLevel:"medium",estimatedRides:31,avgFare:22.3},{id:"bentonville_square",name:"Bentonville Town Square",coordinates:{lat:36.3729,lng:-94.2088},surgeMultiplier:1.2,demandLevel:"medium",estimatedRides:67,avgFare:28.5},{id:"south_beach",name:"South Beach Miami",coordinates:{lat:25.7907,lng:-80.13},surgeMultiplier:1.6,demandLevel:"high",estimatedRides:42,avgFare:24.8}],C=f=>{switch(f){case"extreme":return"#dc2626";case"high":return"#ea580c";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},F=f=>f>=1.5?"\u{1F525}":f>=1.3?"\u26A1":f>=1.1?"\u{1F4C8}":"\u2705",k={baseFare:2.5,perMileFare:1.25,perMinuteFare:.35,maxSurgeMultiplier:3},w=(f,z=25)=>{const $=k.baseFare+5*k.perMileFare+15*k.perMinuteFare;return`+$${((f-1)*$).toFixed(0)}`};s.exports.useEffect(()=>{console.log("\u{1F5FA}\uFE0F SurgeMap automatic data refresh PAUSED for development")},[r]);const b=()=>{if(c.name&&c.code&&c.lat&&c.lng){const f={id:c.code.toLowerCase(),name:c.name,code:c.code.toUpperCase(),coordinates:{lat:parseFloat(c.lat),lng:parseFloat(c.lng)},radius:parseFloat(c.radius),surgeMultiplier:1,queueLength:0,avgWaitTime:"0 min",demandLevel:"low"};u.push(f),h(!1),m({name:"",code:"",lat:"",lng:"",radius:"2.5"}),console.log(`\u2705 Added new airport: ${c.code}`)}};return t("div",{children:[t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",marginBottom:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e(Bo,{size:24,color:"#dc2626"}),e("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0},children:"Live Surge & Airport Heatmap"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l&&e("button",{onClick:()=>h(!0),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"#10b981",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"+ Add Airport"}),e("div",{style:{width:"8px",height:"8px",background:"#10b981",borderRadius:"50%",animation:"pulse 2s infinite"}}),t("span",{style:{fontSize:"12px",color:"#6b7280"},children:["Updates every ",r,"s"]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[t("button",{onClick:()=>d(!0),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:l?"#3b82f6":"#f3f4f6",color:l?"white":"#6b7280",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e(yr,{size:16}),"Airport Zones"]}),t("button",{onClick:()=>d(!1),style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:l?"#f3f4f6":"#3b82f6",color:l?"#6b7280":"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e($e,{size:16}),"City Zones"]})]}),e("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontSize:"12px",color:"#6b7280"},children:"Surge Level:"}),e("div",{style:{display:"flex",gap:"8px"},children:[{level:"low",color:"#10b981",label:"1.0-1.2x"},{level:"medium",color:"#f59e0b",label:"1.2-1.4x"},{level:"high",color:"#ea580c",label:"1.4-1.7x"},{level:"extreme",color:"#dc2626",label:"1.7x+"}].map(f=>t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e("div",{style:{width:"12px",height:"12px",background:f.color,borderRadius:"2px"}}),e("span",{style:{fontSize:"10px",color:"#6b7280"},children:f.label})]},f.level))})]})})]}),p&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{background:"white",borderRadius:"16px",padding:"24px",width:"400px",maxWidth:"90vw"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"20px",color:"#1f2937"},children:"Add New Airport"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Airport Name"}),e("input",{type:"text",value:c.name,onChange:f=>m({...c,name:f.target.value}),placeholder:"e.g., Memphis International Airport",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Airport Code"}),e("input",{type:"text",value:c.code,onChange:f=>m({...c,code:f.target.value}),placeholder:"e.g., MEM",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",textTransform:"uppercase"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Latitude"}),e("input",{type:"number",step:"0.0001",value:c.lat,onChange:f=>m({...c,lat:f.target.value}),placeholder:"35.0428",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Longitude"}),e("input",{type:"number",step:"0.0001",value:c.lng,onChange:f=>m({...c,lng:f.target.value}),placeholder:"-89.9767",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Geofence Radius (km)"}),e("input",{type:"number",step:"0.1",value:c.radius,onChange:f=>m({...c,radius:f.target.value}),placeholder:"2.5",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[e("button",{onClick:()=>h(!1),style:{flex:1,padding:"12px",background:"#f3f4f6",color:"#6b7280",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),e("button",{onClick:b,style:{flex:1,padding:"12px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Add Airport"})]})]})}),l&&e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px",marginBottom:"20px"},children:u.map(f=>t("div",{onClick:()=>i(f.id),style:{background:o===f.id?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"white",color:o===f.id?"white":"#1f2937",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:o===f.id?"0 8px 30px rgba(59, 130, 246, 0.3)":"0 4px 20px rgba(0,0,0,0.1)",transform:o===f.id?"translateY(-4px)":"none"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e(yr,{size:20}),t("div",{children:[e("div",{style:{fontWeight:"700",fontSize:"16px"},children:f.code}),e("div",{style:{fontSize:"12px",opacity:.8},children:f.name})]})]}),e("div",{style:{fontSize:"20px"},children:F(f.surgeMultiplier)})]}),t("div",{style:{background:o===f.id?"rgba(255,255,255,0.1)":"#f8fafc",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e("div",{style:{fontSize:"12px",opacity:.8,marginBottom:"4px"},children:"GEOFENCE RADIUS"}),t("div",{style:{fontSize:"16px",fontWeight:"700"},children:[f.radius," km"]})]}),t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"4px",color:o===f.id?"white":C(f.demandLevel)},children:[f.surgeMultiplier,"x"]}),t("div",{style:{fontSize:"12px",opacity:.8},children:[w(f.surgeMultiplier)," premium"]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center",padding:"12px",background:o===f.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(gi,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:f.queueLength}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Queue Length"})]}),t("div",{style:{textAlign:"center",padding:"12px",background:o===f.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(St,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:f.avgWaitTime}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Avg Wait"})]})]}),t("div",{style:{marginTop:"12px",padding:"8px 12px",background:o===f.id?"rgba(255,255,255,0.1)":C(f.demandLevel),color:(o===f.id,"white"),borderRadius:"8px",textAlign:"center",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:[f.demandLevel," Demand Zone"]})]},f.id))}),!l&&e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"20px"},children:x.map(f=>t("div",{onClick:()=>i(f.id),style:{background:o===f.id?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"white",color:o===f.id?"white":"#1f2937",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.3s",boxShadow:o===f.id?"0 8px 30px rgba(59, 130, 246, 0.3)":"0 4px 20px rgba(0,0,0,0.1)",transform:o===f.id?"translateY(-4px)":"none"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e($e,{size:20}),e("span",{style:{fontWeight:"600",fontSize:"14px"},children:f.name})]}),e("div",{style:{fontSize:"20px"},children:F(f.surgeMultiplier)})]}),t("div",{style:{textAlign:"center",marginBottom:"16px"},children:[t("div",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"4px",color:o===f.id?"white":C(f.demandLevel)},children:[f.surgeMultiplier,"x"]}),e("div",{style:{fontSize:"12px",opacity:.8},children:"Surge Multiplier"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{style:{textAlign:"center",padding:"12px",background:o===f.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(gi,{size:16,style:{margin:"0 auto 4px",display:"block"}}),e("div",{style:{fontSize:"16px",fontWeight:"700"},children:f.estimatedRides}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Est. Rides"})]}),t("div",{style:{textAlign:"center",padding:"12px",background:o===f.id?"rgba(255,255,255,0.1)":"#f9fafb",borderRadius:"8px"},children:[e(_t,{size:16,style:{margin:"0 auto 4px",display:"block"}}),t("div",{style:{fontSize:"16px",fontWeight:"700"},children:["$",f.avgFare.toFixed(2)]}),e("div",{style:{fontSize:"10px",opacity:.8},children:"Avg Fare"})]})]}),t("div",{style:{marginTop:"12px",padding:"8px 12px",background:o===f.id?"rgba(255,255,255,0.1)":C(f.demandLevel),color:(o===f.id,"white"),borderRadius:"8px",textAlign:"center",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"},children:[f.demandLevel," Demand"]})]},f.id))}),t("div",{style:{background:"white",borderRadius:"16px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"16px"},children:"Live Activity Feed"}),e("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[{time:"1 min ago",message:"LAX surge increased to 1.8x (+$13 premium)",type:"surge",airport:!0},{time:"3 min ago",message:"JFK airport queue: 32 drivers waiting",type:"queue",airport:!0},{time:"5 min ago",message:"SFO geofence activated - high demand detected",type:"geofence",airport:!0},{time:"8 min ago",message:"ORD surge decreased to 1.5x",type:"surge",airport:!0},{time:"12 min ago",message:"Times Square demand spike - 1.9x surge",type:"demand",airport:!1},{time:"15 min ago",message:"DEN airport: 24 drivers in queue",type:"queue",airport:!0},{time:"18 min ago",message:"ATL geofence breach - driver entering zone",type:"geofence",airport:!0}].map((f,z)=>t("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",borderLeft:`4px solid ${f.type==="surge"?"#dc2626":f.type==="queue"?"#3b82f6":f.type==="geofence"?"#8b5cf6":f.type==="demand"?"#f59e0b":"#10b981"}`},children:[e("div",{style:{marginRight:"12px"},children:f.airport?e(yr,{size:16,color:"#6b7280"}):e($e,{size:16,color:"#6b7280"})}),e(St,{size:14,color:"#6b7280",style:{marginRight:"8px"}}),t("div",{style:{flex:1},children:[e("div",{style:{fontSize:"14px",color:"#1f2937"},children:f.message}),e("div",{style:{fontSize:"12px",color:"#6b7280"},children:f.time})]}),f.type==="geofence"&&e("div",{style:{background:"#8b5cf6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600"},children:"GEOFENCE"})]},z))})]})]})},qp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState([]),[l,d]=s.exports.useState(!0),[p,h]=s.exports.useState("all"),[c,m]=s.exports.useState(3),[u,x]=s.exports.useState(!0),[C,F]=s.exports.useState(!0),[k,w]=s.exports.useState(new Set),[b,f]=s.exports.useState(!1),[z,y]=s.exports.useState(null);s.exports.useEffect(()=>{B(),$(),X()},[]);const B=()=>{const T=Zi.getAllMarkets();i(T)},$=async()=>{try{const T=await fetch("/api/admin/surge/zones",{headers:{Authorization:"Bearer demo-rider-token"}});if(T.ok){const H=(await T.json()).zones.map(O=>{var U;return{id:O.id,name:O.zone_name,marketId:((U=O.zone_code)==null?void 0:U.toLowerCase())||"unknown",coordinates:{lat:parseFloat(O.latitude),lng:parseFloat(O.longitude)},radius:parseFloat(O.radius),surgeMultiplier:parseFloat(O.base_multiplier)+1,isManualOverride:!1,demandLevel:O.zone_type==="airport"?"high":"medium",activeDrivers:Math.floor(Math.random()*20)+5,waitingRiders:Math.floor(Math.random()*15)+2,lastUpdated:new Date,isAirport:O.zone_type==="airport",airportCode:O.zone_code,queueLength:O.zone_type==="airport"?Math.floor(Math.random()*50)+10:void 0,avgWaitTime:O.zone_type==="airport"?`${Math.floor(Math.random()*20)+5} min`:void 0}});n(H),console.log(`\u{1F4CA} Loaded ${H.length} real surge zones from database`)}else console.error("Failed to load surge zones"),n([])}catch(T){console.error("Error loading surge zones:",T),n([])}},X=async()=>{try{const T=await fetch("/api/admin/surge/overrides",{headers:{Authorization:"Bearer demo-rider-token"}});if(T.ok){const H=(await T.json()).overrides;n(O=>O.map(U=>{const ge=H.find(Re=>Re.zone_code===U.id||Re.zone_name===U.name);return ge?{...U,surgeMultiplier:parseFloat(ge.manual_multiplier)+1,isManualOverride:!0}:U})),console.log(`\u{1F4CA} Loaded ${H.length} existing manual overrides`)}else console.warn("Failed to load existing overrides, continuing without them")}catch(T){console.warn("Error loading existing overrides:",T)}},M=async()=>{try{f(!0);const T=r.filter(H=>H.isManualOverride||k.has(H.id)).map(H=>({zoneId:H.id,surgeMultiplier:H.surgeMultiplier-1,isManualOverride:H.isManualOverride,overrideReason:"Admin panel manual adjustment"}));console.log(`\u{1F4BE} Saving ${T.length} zone overrides:`,T);const Z=await fetch("/api/admin/surge/bulk-save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo-rider-token"},body:JSON.stringify({overrides:T})});if(Z.ok){const H=await Z.json();console.log(`\u{1F4BE} ${H.message}`),w(new Set),y(new Date)}else throw new Error("Failed to save changes")}catch(T){console.error("Error saving changes:",T),alert("Failed to save changes. Please try again.")}finally{f(!1)}},R=async(T,Z)=>{try{n(H=>H.map(O=>O.id===T?{...O,surgeMultiplier:Z,isManualOverride:!0,lastUpdated:new Date}:O)),w(H=>new Set([...H,T])),console.log(`\u26A1 Surge updated locally for zone ${T}: ${Z}x (unsaved)`)}catch(H){console.error("Error updating surge:",H)}},j=async T=>{try{n(Z=>Z.map(H=>H.id===T?{...H,isManualOverride:!1,lastUpdated:new Date}:H)),w(Z=>new Set([...Z,T])),console.log(`\u{1F504} Surge reset to automatic locally for zone ${T} (unsaved)`)}catch(Z){console.error("Error resetting surge:",Z)}},V=async()=>{try{const T=!l;d(T),(await fetch("/api/admin/surge/global-toggle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo-rider-token"},body:JSON.stringify({enabled:T})})).ok&&console.log(`\u2705 Global surge ${T?"enabled":"disabled"}`)}catch(T){console.error("Error toggling global surge:",T)}},le=async T=>{try{m(T),(await fetch("/api/admin/surge/max-multiplier",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo-rider-token"},body:JSON.stringify({maxMultiplier:T})})).ok&&console.log(`\u2705 Max surge multiplier updated to ${T}x`)}catch(Z){console.error("Error updating max surge:",Z)}},ce=T=>{switch(T){case"extreme":return"#dc2626";case"high":return"#ea580c";case"medium":return"#d97706";case"low":return"#16a34a";default:return"#6b7280"}},ee=T=>T>=2.5?"#dc2626":T>=2?"#ea580c":T>=1.5?"#d97706":"#16a34a",ze=p==="all"?r.filter(T=>C||!T.isAirport):r.filter(T=>T.marketId===p&&(C||!T.isAirport));return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Surge Control Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Monitor and control surge pricing across all markets"})]}),t("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[t("button",{onClick:()=>x(!u),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:u?"#10b981":"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[u?e(wa,{size:16}):e(Od,{size:16}),"Auto Refresh"]}),t("button",{onClick:V,style:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 24px",backgroundColor:l?"#dc2626":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(Fr,{size:16}),l?"Disable":"Enable"," Global Surge"]})]})]}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#1e293b"},children:"Global Surge Settings"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:"24px"},children:[t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Market Filter"}),t("select",{value:p,onChange:T=>h(T.target.value),style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontWeight:"500",backgroundColor:"white"},children:[e("option",{value:"all",children:"All Markets"}),o.map(T=>t("option",{value:T.id,children:[T.city,", ",T.state]},T.id))]})]}),t("div",{children:[e("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Zone Types"}),e("div",{style:{display:"flex",gap:"8px",alignItems:"center",height:"44px"},children:t("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:C,onChange:T=>F(T.target.checked),style:{width:"16px",height:"16px"}}),"Show Airports"]})})]}),t("div",{children:[t("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:["Maximum Surge Multiplier: ",c,"x"]}),e("input",{type:"range",min:"1.0",max:"5.0",step:"0.1",value:c,onChange:T=>le(Number(T.target.value)),style:{width:"100%",height:"6px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[e("span",{children:"1.0x"}),e("span",{children:"5.0x"})]})]}),t("div",{style:{backgroundColor:l?"#dcfce7":"#fef2f2",padding:"16px",borderRadius:"12px",border:`2px solid ${l?"#16a34a":"#dc2626"}`,textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:l?"#15803d":"#dc2626",marginBottom:"4px"},children:"Global Surge Status"}),e("div",{style:{fontSize:"20px",fontWeight:"700",color:l?"#15803d":"#dc2626"},children:l?"ACTIVE":"DISABLED"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e("button",{onClick:M,disabled:k.size===0||b,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 16px",backgroundColor:k.size>0?"#059669":"#9ca3af",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:k.size>0&&!b?"pointer":"not-allowed",opacity:b?.7:1},children:b?t(ye,{children:[e("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Saving..."]}):t(ye,{children:[e(Cn,{size:16}),"Save Changes"]})}),k.size>0&&t("div",{style:{fontSize:"12px",color:"#dc2626",textAlign:"center",fontWeight:"600"},children:[k.size," unsaved change",k.size!==1?"s":""]}),z&&t("div",{style:{fontSize:"12px",color:"#10b981",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[e(vt,{size:12}),"Saved ",z.toLocaleTimeString()]})]})]})]}),e("div",{style:{display:"grid",gap:"16px"},children:ze.map(T=>{var Z;return e("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 150px 150px",gap:"24px",alignItems:"center"},children:[t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e("h4",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:T.isAirport?`${T.airportCode} - ${T.name}`:T.name}),T.isManualOverride&&e("span",{style:{padding:"4px 8px",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:"MANUAL"}),T.isAirport&&e("span",{style:{padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1d4ed8",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:"AIRPORT"}),k.has(T.id)&&e("span",{style:{padding:"4px 8px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"\u25CF UNSAVED"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#6b7280"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e($e,{size:14}),T.isAirport?`${T.radius}km radius`:(Z=o.find(H=>H.id===T.marketId))==null?void 0:Z.city]}),t("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e(St,{size:14}),"Updated ",T.lastUpdated.toLocaleTimeString()]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u{1F697} ",T.isAirport?T.queueLength:T.activeDrivers," ",T.isAirport?"in queue":"drivers"]}),T.isAirport&&T.avgWaitTime&&t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u23F1\uFE0F ",T.avgWaitTime," avg wait"]}),!T.isAirport&&t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#f1f5f9",borderRadius:"6px"},children:["\u{1F464} ",T.waitingRiders," waiting"]}),t("div",{style:{fontSize:"12px",padding:"4px 8px",backgroundColor:`${ce(T.demandLevel)}20`,color:ce(T.demandLevel),borderRadius:"6px",fontWeight:"600"},children:[T.demandLevel.toUpperCase()," DEMAND"]})]})]}),t("div",{style:{textAlign:"center"},children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"Current Surge"}),t("div",{style:{fontSize:"36px",fontWeight:"700",color:ee(T.surgeMultiplier),marginBottom:"4px"},children:[T.surgeMultiplier.toFixed(1),"x"]}),t("div",{style:{fontSize:"12px",color:"#6b7280"},children:["+$",((T.surgeMultiplier-1)*15).toFixed(0)," avg"]})]}),t("div",{children:[e("div",{style:{fontSize:"14px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"Manual Override"}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e("input",{type:"range",min:"1.0",max:c,step:"0.1",value:T.surgeMultiplier,onChange:H=>R(T.id,Number(H.target.value)),style:{width:"100%",height:"4px",borderRadius:"5px",background:"#e5e7eb",outline:"none",cursor:"pointer"}}),t("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#6b7280"},children:[e("span",{children:"1.0x"}),t("span",{children:[c,"x"]})]})]})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t("button",{onClick:()=>j(T.id),disabled:!T.isManualOverride,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",backgroundColor:T.isManualOverride?"#10b981":"#f1f5f9",color:T.isManualOverride?"white":"#9ca3af",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:T.isManualOverride?"pointer":"not-allowed"},children:[e(Xd,{size:12}),"Auto"]}),t("div",{style:{display:"flex",gap:"4px"},children:[e("button",{onClick:()=>R(T.id,Math.min(c,T.surgeMultiplier+.5)),style:{flex:1,padding:"6px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"+0.5x"}),e("button",{onClick:()=>R(T.id,Math.max(1,T.surgeMultiplier-.5)),style:{flex:1,padding:"6px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"-0.5x"})]})]})]})},T.id)})}),t("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"24px",marginTop:"24px",border:"1px solid #e2e8f0"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#1e293b"},children:"Surge Summary"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:ze.filter(T=>T.isManualOverride).length}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Manual Overrides"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[e("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:ze.filter(T=>T.surgeMultiplier>1.5).length}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"High Surge Zones"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:[(ze.reduce((T,Z)=>T+Z.surgeMultiplier,0)/ze.length).toFixed(1),"x"]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Average Surge"})]}),t("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px"},children:[t("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:["$",((ze.reduce((T,Z)=>T+Z.surgeMultiplier,0)/ze.length-1)*15*100).toFixed(0)]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Est. Extra Revenue/Day"})]})]})]})]})},Hp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState(null),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(!1),[c,m]=s.exports.useState(!1);s.exports.useEffect(()=>{u()},[]);const u=()=>{const b=Zi.getAllMarkets();i(b)},x=b=>{switch(b){case"active":return"#10b981";case"pending":return"#f59e0b";case"inactive":return"#ef4444";default:return"#6b7280"}},C=b=>{switch(b){case"active":return e(vt,{size:16});case"pending":return e(St,{size:16});case"inactive":return e(ei,{size:16});default:return e(ei,{size:16})}},F=b=>{const f={id:b.city.toLowerCase().replace(/\s+/g,""),name:b.name,city:b.city,state:b.state,country:b.country,center:{lat:parseFloat(b.lat),lng:parseFloat(b.lng)},radius:parseInt(b.radius),zoom:13,timezone:b.timezone,currency:b.currency,status:"pending",launchedAt:new Date().toISOString().split("T")[0],totalDrivers:0,totalRiders:0,monthlyRides:0,monthlyRevenue:0,config:{baseFare:parseFloat(b.baseFare),perMileFare:parseFloat(b.perMileFare),perMinuteFare:parseFloat(b.perMinuteFare),maxSurgeMultiplier:parseFloat(b.maxSurgeMultiplier),airportFee:parseFloat(b.airportFee),cancellationFee:parseFloat(b.cancellationFee)}};Zi.addMarket(f),u(),d(!1),alert(`Market "${f.name}" added successfully!`)},k=b=>{!r||(Zi.updateMarket(r.id,b),u(),h(!1),n(null),alert("Market updated successfully!"))},w=(b,f)=>{confirm(`Are you sure you want to delete ${f}?`)&&(Zi.deleteMarket(b),u(),alert("Market deleted successfully!"))};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Market Management"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage markets across multiple cities and regions"})]}),t("button",{onClick:()=>d(!0),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(ka,{size:16}),"Add New Market"]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(va,{size:24,color:"#3b82f6"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Total Markets"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:o.length}),t("div",{style:{fontSize:"14px",color:"#6b7280"},children:[o.filter(b=>b.status==="active").length," active"]})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(gi,{size:24,color:"#10b981"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Total Users"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:o.reduce((b,f)=>b+f.totalDrivers+f.totalRiders,0).toLocaleString()}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Across all markets"})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(Ze,{size:24,color:"#f59e0b"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Monthly Rides"})]}),e("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:o.reduce((b,f)=>b+f.monthlyRides,0).toLocaleString()}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"This month"})]}),t("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e(_t,{size:24,color:"#8b5cf6"}),e("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:0},children:"Monthly Revenue"})]}),t("div",{style:{fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:["$",o.reduce((b,f)=>b+f.monthlyRevenue,0).toLocaleString()]}),e("div",{style:{fontSize:"14px",color:"#6b7280"},children:"This month"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Market"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Drivers"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Riders"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Monthly Rides"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Revenue"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Actions"})]})}),e("tbody",{children:o.map(b=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:b.name}),t("div",{style:{fontSize:"12px",color:"#64748b",display:"flex",alignItems:"center",gap:"4px"},children:[e($e,{size:12}),b.city,", ",b.state]})]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${x(b.status)}20`,color:x(b.status)},children:[C(b.status),b.status.charAt(0).toUpperCase()+b.status.slice(1)]})}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:b.totalDrivers.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:b.totalRiders.toLocaleString()}),e("td",{style:{padding:"16px",fontWeight:"600",color:"#1e293b"},children:b.monthlyRides.toLocaleString()}),t("td",{style:{padding:"16px",fontWeight:"600",color:"#10b981"},children:["$",b.monthlyRevenue.toLocaleString()]}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"flex",gap:"8px"},children:[e("button",{onClick:()=>{n(b),m(!0)},style:{padding:"6px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer"},title:"View Details",children:e(Lt,{size:14,color:"#374151"})}),e("button",{onClick:()=>{n(b),h(!0)},style:{padding:"6px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"6px",cursor:"pointer"},title:"Edit Market",children:e(Ud,{size:14,color:"#374151"})}),e("button",{onClick:()=>w(b.id,b.name),style:{padding:"6px",backgroundColor:"#fef2f2",border:"none",borderRadius:"6px",cursor:"pointer"},title:"Delete Market",children:e(Rn,{size:14,color:"#ef4444"})})]})})]},b.id))})]})})}),l&&e(Vp,{onClose:()=>d(!1),onSubmit:F}),p&&r&&e(Gp,{market:r,onClose:()=>{h(!1),n(null)},onSubmit:k}),c&&r&&e(Yp,{market:r,onClose:()=>{m(!1),n(null)}})]})},Vp=({onClose:o,onSubmit:i})=>{const[r,n]=s.exports.useState({name:"",city:"",state:"",country:"USA",lat:"",lng:"",radius:"25",timezone:"America/Chicago",currency:"USD",baseFare:"2.50",perMileFare:"1.25",perMinuteFare:"0.35",maxSurgeMultiplier:"2.5",airportFee:"3.50",cancellationFee:"5.00"});return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:"Add New Market"}),e("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:d=>{d.preventDefault(),i(r)},style:{display:"grid",gap:"16px"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Name"}),e("input",{type:"text",value:r.name,onChange:d=>n({...r,name:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"City"}),e("input",{type:"text",value:r.city,onChange:d=>n({...r,city:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"State/Province"}),e("input",{type:"text",value:r.state,onChange:d=>n({...r,state:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Country"}),t("select",{value:r.country,onChange:d=>n({...r,country:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"USA",children:"United States"}),e("option",{value:"CAN",children:"Canada"}),e("option",{value:"MEX",children:"Mexico"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Service Radius (km)"}),e("input",{type:"number",value:r.radius,onChange:d=>n({...r,radius:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"5",max:"100",required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Latitude"}),e("input",{type:"number",step:"any",value:r.lat,onChange:d=>n({...r,lat:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Longitude"}),e("input",{type:"number",step:"any",value:r.lng,onChange:d=>n({...r,lng:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Timezone"}),t("select",{value:r.timezone,onChange:d=>n({...r,timezone:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"America/Chicago",children:"Central Time"}),e("option",{value:"America/New_York",children:"Eastern Time"}),e("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e("option",{value:"America/Denver",children:"Mountain Time"})]})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Currency"}),t("select",{value:r.currency,onChange:d=>n({...r,currency:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"USD",children:"USD ($)"}),e("option",{value:"CAD",children:"CAD ($)"}),e("option",{value:"EUR",children:"EUR (\u20AC)"})]})]})]}),e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:"16px 0 8px 0"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:r.baseFare,onChange:d=>n({...r,baseFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Mile ($)"}),e("input",{type:"number",step:"0.05",value:r.perMileFare,onChange:d=>n({...r,perMileFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Minute ($)"}),e("input",{type:"number",step:"0.05",value:r.perMinuteFare,onChange:d=>n({...r,perMinuteFare:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Max Surge Multiplier"}),e("input",{type:"number",step:"0.1",value:r.maxSurgeMultiplier,onChange:d=>n({...r,maxSurgeMultiplier:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"1.0",max:"5.0",required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Airport Fee ($)"}),e("input",{type:"number",step:"0.50",value:r.airportFee,onChange:d=>n({...r,airportFee:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Cancellation Fee ($)"}),e("input",{type:"number",step:"0.50",value:r.cancellationFee,onChange:d=>n({...r,cancellationFee:d.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{type:"submit",style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Create Market"}),e("button",{type:"button",onClick:o,style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})})},Gp=({market:o,onClose:i,onSubmit:r})=>{const[n,l]=s.exports.useState({name:o.name,city:o.city,state:o.state,country:o.country,lat:o.center.lat.toString(),lng:o.center.lng.toString(),radius:o.radius.toString(),timezone:o.timezone,currency:o.currency,status:o.status,baseFare:o.config.baseFare.toString(),perMileFare:o.config.perMileFare.toString(),perMinuteFare:o.config.perMinuteFare.toString(),maxSurgeMultiplier:o.config.maxSurgeMultiplier.toString(),airportFee:o.config.airportFee.toString(),cancellationFee:o.config.cancellationFee.toString()}),d=p=>{p.preventDefault();const h={...n,center:{lat:parseFloat(n.lat),lng:parseFloat(n.lng)},radius:parseInt(n.radius),config:{baseFare:parseFloat(n.baseFare),perMileFare:parseFloat(n.perMileFare),perMinuteFare:parseFloat(n.perMinuteFare),maxSurgeMultiplier:parseFloat(n.maxSurgeMultiplier),airportFee:parseFloat(n.airportFee),cancellationFee:parseFloat(n.cancellationFee)}};r(h)};return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Edit Market: ",o.name]}),e("button",{onClick:i,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("form",{onSubmit:d,style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Status"}),t("select",{value:n.status,onChange:p=>l({...n,status:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},children:[e("option",{value:"active",children:"Active"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"inactive",children:"Inactive"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Market Name"}),e("input",{type:"text",value:n.name,onChange:p=>l({...n,name:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Service Radius (km)"}),e("input",{type:"number",value:n.radius,onChange:p=>l({...n,radius:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},min:"5",max:"100",required:!0})]})]}),e("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",margin:"16px 0 8px 0"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Base Fare ($)"}),e("input",{type:"number",step:"0.25",value:n.baseFare,onChange:p=>l({...n,baseFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Mile ($)"}),e("input",{type:"number",step:"0.05",value:n.perMileFare,onChange:p=>l({...n,perMileFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"4px"},children:"Per Minute ($)"}),e("input",{type:"number",step:"0.05",value:n.perMinuteFare,onChange:p=>l({...n,perMinuteFare:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px"},required:!0})]})]}),t("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e("button",{type:"submit",style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Update Market"}),e("button",{type:"button",onClick:i,style:{flex:1,padding:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]})})},Yp=({market:o,onClose:i})=>e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"700px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Market Details: ",o.name]}),e("button",{onClick:i,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Market Information"}),t("p",{children:[e("strong",{children:"Location:"})," ",o.city,", ",o.state,", ",o.country]}),t("p",{children:[e("strong",{children:"Service Radius:"})," ",o.radius," km"]}),t("p",{children:[e("strong",{children:"Timezone:"})," ",o.timezone]}),t("p",{children:[e("strong",{children:"Currency:"})," ",o.currency]}),t("p",{children:[e("strong",{children:"Launched:"})," ",new Date(o.launchedAt).toLocaleDateString()]}),t("p",{children:[e("strong",{children:"Status:"}),e("span",{style:{color:getStatusColor(o.status),fontWeight:"600",marginLeft:"8px"},children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})]})]}),t("div",{children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Performance Metrics"}),t("p",{children:[e("strong",{children:"Total Drivers:"})," ",o.totalDrivers.toLocaleString()]}),t("p",{children:[e("strong",{children:"Total Riders:"})," ",o.totalRiders.toLocaleString()]}),t("p",{children:[e("strong",{children:"Monthly Rides:"})," ",o.monthlyRides.toLocaleString()]}),t("p",{children:[e("strong",{children:"Monthly Revenue:"})," $",o.monthlyRevenue.toLocaleString()]}),t("p",{children:[e("strong",{children:"Avg Revenue per Ride:"})," $",(o.monthlyRevenue/o.monthlyRides).toFixed(2)]})]})]}),t("div",{style:{marginTop:"20px"},children:[e("h4",{style:{margin:"0 0 10px 0",color:"#374151"},children:"Pricing Configuration"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:[t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Base Fare"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",o.config.baseFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Per Mile"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",o.config.perMileFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Per Minute"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",o.config.perMinuteFare]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Max Surge"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:[o.config.maxSurgeMultiplier,"x"]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Airport Fee"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",o.config.airportFee]})]}),t("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[e("div",{style:{fontSize:"12px",color:"#64748b"},children:"Cancellation Fee"}),t("div",{style:{fontSize:"18px",fontWeight:"600"},children:["$",o.config.cancellationFee]})]})]})]})]})}),Jp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState(null),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(""),[c,m]=s.exports.useState("all"),[u,x]=s.exports.useState("all"),[C,F]=s.exports.useState("all"),[k,w]=s.exports.useState(null);s.exports.useEffect(()=>{b()},[]);const b=()=>{i([{id:"DSP_001",caseNumber:"CASE-2024-001234",type:"fare_dispute",status:"open",priority:"medium",rideId:"RIDE_5678",riderId:"R001",riderName:"Alice Johnson",driverId:"D045",driverName:"Mike Rodriguez",reportedBy:"rider",reportedAt:"2024-01-15T14:30:00Z",assignedTo:"admin_001",subject:"Incorrect fare charged for short trip",description:"I was charged $25.50 for a 2-mile trip that should have been around $12. The driver took a longer route than necessary.",requestedRefund:13.5,evidence:[{id:"EV_001",type:"screenshot",url:"/evidence/screenshot1.png",filename:"fare_screenshot.png",uploadedBy:"R001",uploadedAt:"2024-01-15T14:35:00Z",description:"Screenshot of the fare charged"}],messages:[{id:"MSG_001",senderId:"R001",senderName:"Alice Johnson",senderType:"rider",message:"The driver took University Ave instead of the direct route through Main St. This added at least 8 minutes and 1.5 miles to my trip.",sentAt:"2024-01-15T14:40:00Z",isInternal:!1},{id:"MSG_002",senderId:"admin_001",senderName:"Support Team",senderType:"admin",message:"Thank you for reporting this issue. We are reviewing the trip details and will contact the driver for their response.",sentAt:"2024-01-15T15:00:00Z",isInternal:!1}]},{id:"DSP_002",caseNumber:"CASE-2024-001235",type:"driver_behavior",status:"investigating",priority:"high",rideId:"RIDE_5679",riderId:"R002",riderName:"David Chen",driverId:"D046",driverName:"Sarah Wilson",reportedBy:"rider",reportedAt:"2024-01-14T20:45:00Z",assignedTo:"admin_002",subject:"Driver was speeding and using phone while driving",description:"The driver was constantly on their phone during the trip and was driving well above the speed limit. I felt unsafe throughout the ride.",evidence:[],messages:[{id:"MSG_003",senderId:"R002",senderName:"David Chen",senderType:"rider",message:"I have dashcam footage from my phone showing the driver using their device. Can I upload video evidence?",sentAt:"2024-01-14T21:00:00Z",isInternal:!1}]},{id:"DSP_003",caseNumber:"CASE-2024-001236",type:"lost_item",status:"pending_driver",priority:"medium",rideId:"RIDE_5680",riderId:"R003",riderName:"Emma Davis",driverId:"D047",driverName:"John Thompson",reportedBy:"rider",reportedAt:"2024-01-13T16:20:00Z",assignedTo:"admin_001",subject:"Left iPhone in vehicle",description:"I accidentally left my iPhone 14 Pro in the backseat of the vehicle. It's a black phone with a blue case.",evidence:[{id:"EV_002",type:"photo",url:"/evidence/phone_photo.jpg",filename:"my_phone.jpg",uploadedBy:"R003",uploadedAt:"2024-01-13T16:25:00Z",description:"Photo of my phone for identification"}],messages:[]}])},f=R=>({fare_dispute:"#f59e0b",driver_behavior:"#ef4444",rider_behavior:"#f59e0b",vehicle_issue:"#8b5cf6",route_dispute:"#06b6d4",cancellation_dispute:"#6b7280",safety_incident:"#dc2626",lost_item:"#10b981"})[R]||"#6b7280",z=R=>({open:"#f59e0b",investigating:"#3b82f6",pending_rider:"#8b5cf6",pending_driver:"#06b6d4",resolved:"#10b981",closed:"#6b7280"})[R]||"#6b7280",y=R=>({low:"#10b981",medium:"#f59e0b",high:"#ef4444",urgent:"#dc2626"})[R]||"#6b7280",B=R=>R.split("_").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" "),$=o.filter(R=>{const j=R.caseNumber.toLowerCase().includes(p.toLowerCase())||R.riderName.toLowerCase().includes(p.toLowerCase())||R.driverName.toLowerCase().includes(p.toLowerCase())||R.subject.toLowerCase().includes(p.toLowerCase()),V=c==="all"||R.status===c,le=u==="all"||R.type===u,ce=C==="all"||R.priority===C;return j&&V&&le&&ce}),X=(R,j)=>{switch(n(j),w(null),R){case"view":d(!0);break}},M={total:o.length,open:o.filter(R=>R.status==="open").length,investigating:o.filter(R=>R.status==="investigating").length,resolved:o.filter(R=>R.status==="resolved").length,avgResolutionTime:"2.3 days"};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[t("div",{children:[e("h2",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:"0 0 8px 0"},children:"Dispute Resolution Center"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Manage and resolve rider and driver disputes"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Export Report"}),e("button",{style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Bulk Actions"})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#3b82f6",fontSize:"24px",fontWeight:"700"},children:M.total}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Total Disputes"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#f59e0b",fontSize:"24px",fontWeight:"700"},children:M.open}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Open Cases"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#8b5cf6",fontSize:"24px",fontWeight:"700"},children:M.investigating}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Investigating"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#10b981",fontSize:"24px",fontWeight:"700"},children:M.resolved}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Resolved"})]}),t("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",textAlign:"center"},children:[e("div",{style:{color:"#6b7280",fontSize:"24px",fontWeight:"700"},children:M.avgResolutionTime}),e("div",{style:{color:"#64748b",fontSize:"14px"},children:"Avg Resolution"})]})]}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"1px solid #e2e8f0"},children:t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",gap:"16px",alignItems:"end"},children:[t("div",{style:{position:"relative"},children:[e($o,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e("input",{type:"text",placeholder:"Search by case number, names, or subject...",value:p,onChange:R=>h(R.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),t("select",{value:c,onChange:R=>m(R.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"open",children:"Open"}),e("option",{value:"investigating",children:"Investigating"}),e("option",{value:"pending_rider",children:"Pending Rider"}),e("option",{value:"pending_driver",children:"Pending Driver"}),e("option",{value:"resolved",children:"Resolved"}),e("option",{value:"closed",children:"Closed"})]}),t("select",{value:u,onChange:R=>x(R.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Types"}),e("option",{value:"fare_dispute",children:"Fare Dispute"}),e("option",{value:"driver_behavior",children:"Driver Behavior"}),e("option",{value:"rider_behavior",children:"Rider Behavior"}),e("option",{value:"vehicle_issue",children:"Vehicle Issue"}),e("option",{value:"route_dispute",children:"Route Dispute"}),e("option",{value:"cancellation_dispute",children:"Cancellation"}),e("option",{value:"safety_incident",children:"Safety Incident"}),e("option",{value:"lost_item",children:"Lost Item"})]}),t("select",{value:C,onChange:R=>F(R.target.value),style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},children:[e("option",{value:"all",children:"All Priority"}),e("option",{value:"urgent",children:"Urgent"}),e("option",{value:"high",children:"High"}),e("option",{value:"medium",children:"Medium"}),e("option",{value:"low",children:"Low"})]})]})}),e("div",{style:{backgroundColor:"white",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},children:e("div",{style:{overflowX:"auto"},children:t("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e("thead",{children:t("tr",{style:{backgroundColor:"#f8fafc"},children:[e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Case Details"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Type"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Priority"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Status"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Parties"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Reported"}),e("th",{style:{padding:"16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:"Actions"})]})}),e("tbody",{children:$.map(R=>t("tr",{style:{borderTop:"1px solid #f1f5f9"},children:[e("td",{style:{padding:"16px"},children:t("div",{children:[e("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:R.caseNumber}),e("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"2px"},children:R.subject}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["Ride: ",R.rideId]})]})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${f(R.type)}20`,color:f(R.type)},children:B(R.type)})}),e("td",{style:{padding:"16px"},children:e("div",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${y(R.priority)}20`,color:y(R.priority)},children:R.priority.charAt(0).toUpperCase()+R.priority.slice(1)})}),e("td",{style:{padding:"16px"},children:t("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:`${z(R.status)}20`,color:z(R.status)},children:[R.status==="open"&&e(hi,{size:12}),R.status==="investigating"&&e(St,{size:12}),R.status==="resolved"&&e(vt,{size:12}),R.status==="closed"&&e(zr,{size:12}),R.status.replace("_"," ").split(" ").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ")]})}),e("td",{style:{padding:"16px"},children:t("div",{style:{fontSize:"14px"},children:[t("div",{style:{marginBottom:"4px"},children:[e("span",{style:{color:"#64748b"},children:"Rider:"})," ",R.riderName]}),t("div",{children:[e("span",{style:{color:"#64748b"},children:"Driver:"})," ",R.driverName]})]})}),t("td",{style:{padding:"16px"},children:[e("div",{style:{fontSize:"14px",color:"#64748b"},children:new Date(R.reportedAt).toLocaleDateString()}),t("div",{style:{fontSize:"12px",color:"#64748b"},children:["by ",R.reportedBy]})]}),t("td",{style:{padding:"16px",position:"relative"},children:[e("button",{onClick:()=>w(k===R.id?null:R.id),style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer"},children:e(Wr,{size:16,color:"#64748b"})}),k===R.id&&t("div",{style:{position:"absolute",top:"100%",right:"16px",backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"160px"},children:[t("button",{onClick:()=>X("view",R),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},children:[e(Lt,{size:16,color:"#6b7280"}),"View Details"]}),t("button",{onClick:()=>X("assign",R),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px"},children:[e(Qe,{size:16,color:"#6b7280"}),"Assign Agent"]}),t("button",{onClick:()=>X("resolve",R),style:{width:"100%",padding:"12px 16px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#10b981"},children:[e(vt,{size:16}),"Mark Resolved"]})]})]})]},R.id))})]})})}),l&&r&&e(Kp,{dispute:r,onClose:()=>{d(!1),n(null)},onUpdate:R=>{i(o.map(j=>j.id===R.id?R:j))}}),k&&e("div",{onClick:()=>w(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Kp=({dispute:o,onClose:i,onUpdate:r})=>{const[n,l]=s.exports.useState(""),[d,p]=s.exports.useState("details"),[h,c]=s.exports.useState(""),[m,u]=s.exports.useState(""),[x,C]=s.exports.useState(""),F=()=>{if(!n.trim())return;const w={id:`MSG_${Date.now()}`,senderId:"admin_current",senderName:"Support Agent",senderType:"admin",message:n,sentAt:new Date().toISOString(),isInternal:!1},b={...o,messages:[...o.messages,w]};r(b),l(""),alert("Message sent successfully!")},k=()=>{if(!h||!x){alert("Please fill in all resolution fields");return}const w={...o,status:"resolved",resolvedAt:new Date().toISOString(),resolution:x,resolutionType:h,actualRefund:h==="refund"?parseFloat(m)||0:void 0};r(w),alert("Dispute resolved successfully!")};return e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"0",maxWidth:"900px",width:"90%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"24px 24px 0 24px",borderBottom:"1px solid #e2e8f0"},children:[t("div",{children:[t("h3",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:["Case ",o.caseNumber]}),e("p",{style:{fontSize:"14px",color:"#64748b",margin:"4px 0 0 0"},children:o.subject})]}),e("button",{onClick:i,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xD7"})]}),e("div",{style:{display:"flex",borderBottom:"1px solid #e2e8f0",padding:"0 24px"},children:[{id:"details",label:"Details",icon:e(xt,{size:16})},{id:"messages",label:"Messages",icon:e(kn,{size:16})},{id:"evidence",label:"Evidence",icon:e(pi,{size:16})},{id:"resolution",label:"Resolution",icon:e(vt,{size:16})}].map(w=>t("button",{onClick:()=>p(w.id),style:{padding:"12px 16px",border:"none",backgroundColor:"transparent",borderBottom:d===w.id?"2px solid #3b82f6":"2px solid transparent",color:d===w.id?"#3b82f6":"#64748b",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600"},children:[w.icon,w.label]},w.id))}),t("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[d==="details"&&t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[t("div",{children:[e("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Case Information"}),t("div",{style:{display:"grid",gap:"12px"},children:[t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Type: "}),e("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:`${o.type==="safety_incident"?"#dc2626":"#f59e0b"}20`,color:o.type==="safety_incident"?"#dc2626":"#f59e0b"},children:o.type.split("_").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ")})]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Priority: "}),e("span",{style:{color:o.priority==="urgent"?"#dc2626":"#f59e0b"},children:o.priority.charAt(0).toUpperCase()+o.priority.slice(1)})]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Reported by: "}),o.reportedBy]}),t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Date: "}),new Date(o.reportedAt).toLocaleString()]}),o.requestedRefund&&t("div",{children:[e("span",{style:{fontWeight:"600",color:"#64748b"},children:"Requested refund: "}),t("span",{style:{color:"#10b981"},children:["$",o.requestedRefund]})]})]}),e("h4",{style:{margin:"24px 0 16px 0",color:"#374151"},children:"Description"}),e("p",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",margin:0,lineHeight:"1.5"},children:o.description})]}),t("div",{children:[e("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Party Information"}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Qe,{size:16,color:"#3b82f6"}),e("span",{style:{fontWeight:"600"},children:"Rider"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[e("div",{children:o.riderName}),t("div",{children:["ID: ",o.riderId]})]})]}),t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(Ze,{size:16,color:"#10b981"}),e("span",{style:{fontWeight:"600"},children:"Driver"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[e("div",{children:o.driverName}),t("div",{children:["ID: ",o.driverId]})]})]}),t("div",{style:{padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e(wn,{size:16,color:"#f59e0b"}),e("span",{style:{fontWeight:"600"},children:"Ride Details"})]}),t("div",{style:{fontSize:"14px",color:"#64748b"},children:[t("div",{children:["ID: ",o.rideId]}),t("div",{children:["Date: ",new Date(o.reportedAt).toLocaleDateString()]})]})]})]})]})]}),d==="messages"&&t("div",{children:[e("div",{style:{marginBottom:"24px",maxHeight:"400px",overflow:"auto"},children:o.messages.length===0?e("div",{style:{textAlign:"center",color:"#64748b",padding:"40px"},children:"No messages yet. Send the first message to start the conversation."}):o.messages.map(w=>t("div",{style:{marginBottom:"16px",padding:"16px",borderRadius:"8px",backgroundColor:w.senderType==="admin"?"#eff6ff":"#f8fafc",border:"1px solid #e2e8f0"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("span",{style:{fontWeight:"600",color:"#1e293b"},children:w.senderName}),e("span",{style:{fontSize:"12px",padding:"2px 6px",borderRadius:"4px",backgroundColor:w.senderType==="admin"?"#3b82f620":"#64748b20",color:w.senderType==="admin"?"#3b82f6":"#64748b"},children:w.senderType})]}),e("span",{style:{fontSize:"12px",color:"#64748b"},children:new Date(w.sentAt).toLocaleString()})]}),e("p",{style:{margin:0,lineHeight:"1.5"},children:w.message})]},w.id))}),e("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"16px"},children:t("div",{style:{display:"flex",gap:"12px"},children:[e("textarea",{value:n,onChange:w=>l(w.target.value),placeholder:"Type your message...",rows:3,style:{flex:1,padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",resize:"vertical"}}),t("button",{onClick:F,disabled:!n.trim(),style:{padding:"12px 16px",backgroundColor:n.trim()?"#3b82f6":"#e2e8f0",color:n.trim()?"white":"#64748b",border:"none",borderRadius:"8px",cursor:n.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"},children:[e(Ca,{size:16}),"Send"]})]})})]}),d==="evidence"&&t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e("h4",{style:{margin:0},children:"Evidence Files"}),t("button",{style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e(An,{size:16}),"Upload Evidence"]})]}),o.evidence.length===0?t("div",{style:{textAlign:"center",color:"#64748b",padding:"40px",border:"2px dashed #e2e8f0",borderRadius:"8px"},children:[e(pi,{size:48,color:"#e2e8f0",style:{marginBottom:"16px"}}),e("div",{children:"No evidence files uploaded yet."})]}):e("div",{style:{display:"grid",gap:"16px"},children:o.evidence.map(w=>t("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#f8fafc"},children:[t("div",{style:{width:"48px",height:"48px",backgroundColor:"#3b82f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:[w.type==="photo"&&e(pi,{size:20,color:"white"}),w.type==="screenshot"&&e(xt,{size:20,color:"white"}),w.type==="document"&&e(xt,{size:20,color:"white"}),w.type==="audio"&&e(xt,{size:20,color:"white"})]}),t("div",{style:{flex:1},children:[e("div",{style:{fontWeight:"600",marginBottom:"4px"},children:w.filename}),t("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"2px"},children:["Uploaded by ",w.uploadedBy," on ",new Date(w.uploadedAt).toLocaleDateString()]}),w.description&&e("div",{style:{fontSize:"14px",color:"#64748b"},children:w.description})]}),e("button",{style:{padding:"8px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:"View"})]},w.id))})]}),d==="resolution"&&e("div",{children:o.status==="resolved"?t("div",{style:{padding:"20px",backgroundColor:"#ecfdf5",border:"1px solid #10b981",borderRadius:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e(vt,{size:20,color:"#10b981"}),e("span",{style:{fontWeight:"600",color:"#10b981"},children:"Case Resolved"})]}),t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Resolution Type:"})," ",o.resolutionType]}),o.actualRefund&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Refund Amount:"})," $",o.actualRefund]}),t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Resolved on:"})," ",o.resolvedAt?new Date(o.resolvedAt).toLocaleString():"N/A"]}),t("div",{children:[e("strong",{children:"Resolution Notes:"}),e("p",{style:{marginTop:"8px",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e2e8f0"},children:o.resolution})]})]}):t("div",{children:[e("h4",{style:{margin:"0 0 16px 0"},children:"Resolve Dispute"}),t("div",{style:{display:"grid",gap:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Resolution Type"}),t("select",{value:h,onChange:w=>c(w.target.value),style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[e("option",{value:"",children:"Select resolution type"}),e("option",{value:"refund",children:"Issue Refund"}),e("option",{value:"credit",children:"Provide Credit"}),e("option",{value:"warning",children:"Issue Warning"}),e("option",{value:"suspension",children:"Account Suspension"}),e("option",{value:"no_action",children:"No Action Required"})]})]}),h==="refund"&&t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Refund Amount ($)"}),e("input",{type:"number",step:"0.01",value:m,onChange:w=>u(w.target.value),placeholder:"0.00",style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"600",marginBottom:"8px"},children:"Resolution Notes"}),e("textarea",{value:x,onChange:w=>C(w.target.value),placeholder:"Explain the resolution and any actions taken...",rows:4,style:{width:"100%",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",resize:"vertical"}})]}),e("button",{onClick:k,disabled:!h||!x,style:{padding:"12px 24px",backgroundColor:h&&x?"#10b981":"#e2e8f0",color:h&&x?"white":"#64748b",border:"none",borderRadius:"8px",fontWeight:"600",cursor:h&&x?"pointer":"not-allowed"},children:"Resolve Dispute"})]})]})})]})]})})},Xp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState(!0),[l,d]=s.exports.useState(!1),[p,h]=s.exports.useState(null),[c,m]=s.exports.useState({company_name:"",company_email:"",contact_person:"",contact_phone:"",discount_type:"percentage",discount_value:0,valid_days:["monday","tuesday","wednesday","thursday","friday"],start_date:"",end_date:"",is_active:!0,max_discount_amount:0,min_ride_amount:0});s.exports.useEffect(()=>{u()},[]);const u=async()=>{try{const f=await fetch("/api/admin/corporations",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(f.ok){const z=await f.json();i(z.corporations)}else console.error("Failed to fetch corporations")}catch(f){console.error("Error fetching corporations:",f)}finally{n(!1)}},x=async f=>{f.preventDefault();try{const z=p?`/api/admin/corporations/${p.id}`:"/api/admin/corporations",B=await fetch(z,{method:p?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(c)});if(B.ok)await u(),k(),d(!1),h(null);else{const $=await B.json();alert($.error||"Failed to save corporation")}}catch(z){console.error("Error saving corporation:",z),alert("Error saving corporation")}},C=f=>{h(f),m({company_name:f.company_name,company_email:f.company_email||"",contact_person:f.contact_person||"",contact_phone:f.contact_phone||"",discount_type:f.discount_type,discount_value:f.discount_value,valid_days:Array.isArray(f.valid_days)?f.valid_days:JSON.parse(f.valid_days),start_date:f.start_date,end_date:f.end_date||"",is_active:f.is_active,max_discount_amount:f.max_discount_amount||0,min_ride_amount:f.min_ride_amount||0}),d(!0)},F=async f=>{if(!!confirm("Are you sure you want to delete this corporation? This will affect all associated applications."))try{(await fetch(`/api/admin/corporations/${f}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?await u():alert("Failed to delete corporation")}catch(z){console.error("Error deleting corporation:",z),alert("Error deleting corporation")}},k=()=>{m({company_name:"",company_email:"",contact_person:"",contact_phone:"",discount_type:"percentage",discount_value:0,valid_days:["monday","tuesday","wednesday","thursday","friday"],start_date:"",end_date:"",is_active:!0,max_discount_amount:0,min_ride_amount:0})},w=f=>{m(z=>({...z,valid_days:z.valid_days.includes(f)?z.valid_days.filter(y=>y!==f):[...z.valid_days,f]}))},b=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading corporations..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(_o,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Management"})]}),t("button",{onClick:()=>{k(),h(null),d(!0)},style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[e(ka,{size:16}),"Add Corporation"]})]}),l&&t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600"},children:p?"Edit Corporation":"Add New Corporation"}),t("form",{onSubmit:x,children:[t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Company Name *"}),e("input",{type:"text",value:c.company_name,onChange:f=>m(z=>({...z,company_name:f.target.value})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Company Email"}),e("input",{type:"email",value:c.company_email,onChange:f=>m(z=>({...z,company_email:f.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Contact Person"}),e("input",{type:"text",value:c.contact_person,onChange:f=>m(z=>({...z,contact_person:f.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Contact Phone"}),e("input",{type:"tel",value:c.contact_phone,onChange:f=>m(z=>({...z,contact_phone:f.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Discount Type *"}),t("select",{value:c.discount_type,onChange:f=>m(z=>({...z,discount_type:f.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"},children:[e("option",{value:"percentage",children:"Percentage"}),e("option",{value:"fixed_amount",children:"Fixed Amount"})]})]}),t("div",{children:[t("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:["Discount Value * ",c.discount_type==="percentage"?"(%)":"($)"]}),e("input",{type:"number",step:"0.01",value:c.discount_value,onChange:f=>m(z=>({...z,discount_value:parseFloat(f.target.value)||0})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Max Discount ($)"}),e("input",{type:"number",step:"0.01",value:c.max_discount_amount,onChange:f=>m(z=>({...z,max_discount_amount:parseFloat(f.target.value)||0})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Valid Days *"}),e("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:b.map(f=>t("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[e("input",{type:"checkbox",checked:c.valid_days.includes(f),onChange:()=>w(f),style:{margin:0}}),e("span",{style:{fontSize:"14px",textTransform:"capitalize"},children:f})]},f))})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Start Date *"}),e("input",{type:"date",value:c.start_date,onChange:f=>m(z=>({...z,start_date:f.target.value})),required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]}),t("div",{children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"End Date"}),e("input",{type:"date",value:c.end_date,onChange:f=>m(z=>({...z,end_date:f.target.value})),style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px"}})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[e("input",{type:"checkbox",checked:c.is_active,onChange:f=>m(z=>({...z,is_active:f.target.checked})),style:{margin:0}}),e("label",{style:{fontSize:"14px",fontWeight:"500"},children:"Active"})]}),t("div",{style:{display:"flex",gap:"12px"},children:[e("button",{type:"submit",style:{backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:p?"Update Corporation":"Create Corporation"}),e("button",{type:"button",onClick:()=>{d(!1),h(null),k()},style:{backgroundColor:"#6B7280",color:"white",border:"none",borderRadius:"6px",padding:"10px 16px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})]}),t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 120px",gap:"16px",padding:"16px 20px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",fontSize:"12px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:[e("div",{children:"Company"}),e("div",{children:"Discount"}),e("div",{children:"Applications"}),e("div",{children:"Usage"}),e("div",{children:"Status"}),e("div",{children:"Date Range"}),e("div",{children:"Actions"})]}),o.length===0?e("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280",fontSize:"16px"},children:"No corporations configured. Add your first corporate discount program."}):o.map(f=>t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 120px",gap:"16px",padding:"16px 20px",borderBottom:"1px solid #F3F4F6",alignItems:"center"},children:[t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:f.company_name}),t("div",{style:{fontSize:"12px",color:"#6B7280"},children:[f.contact_person&&`${f.contact_person} \u2022 `,f.company_email]})]}),t("div",{style:{fontSize:"14px"},children:[f.discount_type==="percentage"?`${f.discount_value}%`:`$${f.discount_value}`,f.max_discount_amount&&f.discount_type==="percentage"&&t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["Max: $",f.max_discount_amount]})]}),t("div",{style:{fontSize:"14px"},children:[t("div",{children:[f.approved_applications,"/",f.total_applications]}),e("div",{style:{fontSize:"11px",color:"#6B7280"},children:"approved"})]}),t("div",{style:{fontSize:"14px"},children:[t("div",{children:[f.total_usage," rides"]}),t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["$",f.total_savings.toFixed(2)," saved"]})]}),e("div",{children:e("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:f.is_active?"#D1FAE5":"#FEE2E2",color:f.is_active?"#047857":"#DC2626"},children:f.is_active?"Active":"Inactive"})}),t("div",{style:{fontSize:"12px",color:"#6B7280"},children:[e("div",{children:new Date(f.start_date).toLocaleDateString()}),f.end_date&&t("div",{children:["to ",new Date(f.end_date).toLocaleDateString()]})]}),t("div",{style:{display:"flex",gap:"4px"},children:[e("button",{onClick:()=>C(f),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#F3F4F6",cursor:"pointer",color:"#6B7280"},title:"Edit",children:e(zn,{size:14})}),e("button",{onClick:()=>F(f.id),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#FEE2E2",cursor:"pointer",color:"#DC2626"},title:"Delete",children:e(Rn,{size:14})})]})]},f.id))]})]})},Zp=()=>{const[o,i]=s.exports.useState([]),[r,n]=s.exports.useState(!0),[l,d]=s.exports.useState(null),[p,h]=s.exports.useState({status:"",review_notes:"",rejection_reason:""}),[c,m]=s.exports.useState("all");s.exports.useEffect(()=>{u()},[]);const u=async()=>{try{const w=await fetch("/api/admin/corporate-applications",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(w.ok){const b=await w.json();i(b.applications)}else console.error("Failed to fetch applications")}catch(w){console.error("Error fetching applications:",w)}finally{n(!1)}},x=async w=>{if(!p.status){alert("Please select approve or reject");return}if(p.status==="rejected"&&!p.rejection_reason.trim()){alert("Please provide a rejection reason");return}try{const b=await fetch(`/api/admin/corporate-applications/${w}/review`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(b.ok)await u(),d(null),h({status:"",review_notes:"",rejection_reason:""});else{const f=await b.json();alert(f.error||"Failed to review application")}}catch(b){console.error("Error reviewing application:",b),alert("Error reviewing application")}},C=w=>{d(w),h({status:"",review_notes:"",rejection_reason:""})},F=o.filter(w=>c==="all"||w.status===c),k=w=>{switch(w){case"approved":return{bg:"#D1FAE5",text:"#047857"};case"rejected":return{bg:"#FEE2E2",text:"#DC2626"};default:return{bg:"#FEF3C7",text:"#D97706"}}};return r?e("div",{style:{padding:"20px",textAlign:"center"},children:e("div",{style:{fontSize:"18px",color:"#666"},children:"Loading applications..."})}):t("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e(xt,{size:28,color:"#4F46E5"}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Applications"})]}),e("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:t("select",{value:c,onChange:w=>m(w.target.value),style:{padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white"},children:[e("option",{value:"all",children:"All Status"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"approved",children:"Approved"}),e("option",{value:"rejected",children:"Rejected"})]})})]}),t("div",{style:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr 1fr 1fr 1fr 100px",gap:"16px",padding:"16px 20px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",fontSize:"12px",fontWeight:"600",color:"#6B7280",textTransform:"uppercase"},children:[e("div",{children:"Employee"}),e("div",{children:"Company"}),e("div",{children:"Submitted"}),e("div",{children:"Status"}),e("div",{children:"Discount"}),e("div",{children:"Actions"})]}),F.length===0?e("div",{style:{padding:"40px",textAlign:"center",color:"#6B7280",fontSize:"16px"},children:c==="all"?"No corporate discount applications submitted yet.":`No ${c} applications found.`}):F.map(w=>{const b=k(w.status);return t("div",{style:{display:"grid",gridTemplateColumns:"2fr 1.5fr 1fr 1fr 1fr 100px",gap:"16px",padding:"16px 20px",borderBottom:"1px solid #F3F4F6",alignItems:"center"},children:[t("div",{children:[t("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:[w.first_name," ",w.last_name]}),e("div",{style:{fontSize:"12px",color:"#6B7280"},children:w.work_email}),w.employee_id&&t("div",{style:{fontSize:"11px",color:"#6B7280"},children:["ID: ",w.employee_id]})]}),t("div",{children:[e("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"2px"},children:w.company_name}),w.department&&e("div",{style:{fontSize:"12px",color:"#6B7280"},children:w.department})]}),e("div",{style:{fontSize:"12px",color:"#6B7280"},children:new Date(w.created_at).toLocaleDateString()}),e("div",{children:e("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:b.bg,color:b.text,textTransform:"capitalize"},children:w.status})}),e("div",{style:{fontSize:"14px",fontWeight:"600"},children:w.discount_type==="percentage"?`${w.discount_value}%`:`$${w.discount_value}`}),e("div",{children:t("button",{onClick:()=>C(w),style:{padding:"6px 12px",border:"none",borderRadius:"6px",backgroundColor:"#4F46E5",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},title:"Review Application",children:[e(Lt,{size:12}),"Review"]})})]},w.id)})]}),l&&e("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#1F2937",margin:0},children:"Corporate Discount Application"}),e("button",{onClick:()=>d(null),style:{padding:"6px",border:"none",borderRadius:"4px",backgroundColor:"#F3F4F6",cursor:"pointer",color:"#6B7280"},children:e(io,{size:16})})]}),t("div",{style:{marginBottom:"24px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(Qe,{size:16}),"Employee Information"]}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("strong",{children:"Name:"})," ",l.first_name," ",l.last_name]}),t("div",{children:[e("strong",{children:"Personal Email:"})," ",l.rider_email]}),t("div",{children:[e("strong",{children:"Work Email:"})," ",l.work_email]}),l.employee_id&&t("div",{children:[e("strong",{children:"Employee ID:"})," ",l.employee_id]}),l.department&&t("div",{style:{gridColumn:"1 / -1"},children:[e("strong",{children:"Department:"})," ",l.department]})]})}),t("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e(_o,{size:16}),"Company & Discount Information"]}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t("div",{children:[e("strong",{children:"Company:"})," ",l.company_name]}),t("div",{children:[e("strong",{children:"Discount:"})," ",l.discount_type==="percentage"?`${l.discount_value}%`:`$${l.discount_value}`]}),t("div",{style:{gridColumn:"1 / -1"},children:[e("strong",{children:"Submitted:"})," ",new Date(l.created_at).toLocaleString()]})]})}),e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Work ID Verification"}),e("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:l.work_id_image_url?t("div",{children:[e("p",{style:{marginBottom:"8px",color:"#6B7280"},children:"Work ID Image uploaded. Click to view:"}),e("a",{href:l.work_id_image_url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"8px 16px",backgroundColor:"#4F46E5",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},children:"View Work ID Image"})]}):e("p",{style:{color:"#6B7280"},children:"No work ID image uploaded"})}),l.status!=="pending"&&t("div",{children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Review Information"}),t("div",{style:{backgroundColor:"#F9FAFB",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Status:"}),e("span",{style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:k(l.status).bg,color:k(l.status).text,textTransform:"capitalize"},children:l.status})]}),l.reviewed_at&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Reviewed:"})," ",new Date(l.reviewed_at).toLocaleString()]}),l.review_notes&&t("div",{style:{marginBottom:"8px"},children:[e("strong",{children:"Review Notes:"})," ",l.review_notes]}),l.rejection_reason&&t("div",{children:[e("strong",{children:"Rejection Reason:"})," ",l.rejection_reason]})]})]})]}),l.status==="pending"&&t("div",{children:[e("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Review Application"}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Decision *"}),t("div",{style:{display:"flex",gap:"12px"},children:[t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"decision",value:"approved",checked:p.status==="approved",onChange:w=>h(b=>({...b,status:w.target.value}))}),t("span",{style:{fontSize:"14px",color:"#047857",fontWeight:"600"},children:[e(ci,{size:16,style:{display:"inline",marginRight:"4px"}}),"Approve"]})]}),t("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[e("input",{type:"radio",name:"decision",value:"rejected",checked:p.status==="rejected",onChange:w=>h(b=>({...b,status:w.target.value}))}),t("span",{style:{fontSize:"14px",color:"#DC2626",fontWeight:"600"},children:[e(io,{size:16,style:{display:"inline",marginRight:"4px"}}),"Reject"]})]})]})]}),t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Review Notes"}),e("textarea",{value:p.review_notes,onChange:w=>h(b=>({...b,review_notes:w.target.value})),placeholder:"Optional notes about this decision...",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),p.status==="rejected"&&t("div",{style:{marginBottom:"16px"},children:[e("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Rejection Reason *"}),e("textarea",{value:p.rejection_reason,onChange:w=>h(b=>({...b,rejection_reason:w.target.value})),placeholder:"Please explain why this application is being rejected...",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})]}),t("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e("button",{onClick:()=>d(null),style:{padding:"10px 16px",border:"1px solid #D1D5DB",borderRadius:"6px",backgroundColor:"white",color:"#6B7280",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancel"}),e("button",{onClick:()=>x(l.id),style:{padding:"10px 16px",border:"none",borderRadius:"6px",backgroundColor:p.status==="approved"?"#047857":"#DC2626",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:p.status==="approved"?"Approve Application":"Reject Application"})]})]})]})})]})},Qp=()=>{const o=Er(),[i,r]=s.exports.useState(null),[n,l]=s.exports.useState("idle"),[d,p]=s.exports.useState(""),[h,c]=s.exports.useState(""),[m,u]=s.exports.useState(!1),[x,C]=s.exports.useState(null),F=async()=>{if(!!h.trim()){u(!0);try{const b=await fetch(`/api/driver/rider-corporate-info/${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const f=await b.json();r(f)}else alert("No corporate discount found for this rider"),r(null)}catch(b){console.error("Error looking up rider:",b),alert("Error looking up rider information")}finally{u(!1)}}},k=async b=>{if(!!i){l("verifying");try{const f=await fetch("/api/driver/verify-badge",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({riderId:i.rider_id,corporateApplicationId:i.id,verificationStatus:b,notes:d})});if(f.ok){const z=await f.json();C(z),l(b)}else l("failed"),alert("Failed to verify badge")}catch(f){console.error("Verification error:",f),l("failed")}}},w=()=>{r(null),l("idle"),p(""),c(""),C(null)};return t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px"},children:[t("button",{onClick:()=>o("/driver"),style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"8px 16px",borderRadius:"12px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:b=>{b.target.style.background="white",b.target.style.transform="translateY(-1px)"},onMouseOut:b=>{b.target.style.background="rgba(255, 255, 255, 0.9)",b.target.style.transform="translateY(0)"},children:[e(dn,{size:20}),"Back to Driver App"]}),e("div",{style:{height:"24px",width:"1px",background:"rgba(255, 255, 255, 0.3)"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Badge Verification"})]}),t("div",{style:{maxWidth:"800px",margin:"20px auto",background:"white",borderRadius:"20px",padding:"30px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"20px"},children:e(pi,{size:40,color:"white"})}),e("h1",{style:{fontSize:"28px",fontWeight:"bold",color:"#2D3748",marginBottom:"10px"},children:"Badge Verification"}),e("p",{style:{color:"#718096",fontSize:"16px"},children:"Verify employee work badge to extend corporate discount eligibility"})]}),n==="idle"&&t("div",{children:[t("div",{style:{background:"#F7FAFC",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#2D3748",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(Qe,{size:20}),"Step 1: Look Up Rider"]}),t("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e("input",{type:"text",placeholder:"Enter Rider ID or email",value:h,onChange:b=>c(b.target.value),style:{flex:1,padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}}),e("button",{onClick:F,disabled:m,style:{padding:"12px 24px",background:"#4299E1",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer",opacity:m?.6:1},children:m?"Looking up...":"Lookup"})]})]}),e("div",{style:{background:"#EDF2F7",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"2px dashed #CBD5E0"},children:t("p",{style:{margin:0,fontSize:"14px",color:"#4A5568"},children:[e("strong",{children:"Demo:"}),' Use rider ID "550e8400-e29b-41d4-a716-446655440002" to test the verification workflow']})}),i&&t("div",{children:[t("div",{style:{background:"#F0FFF4",border:"2px solid #68D391",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#22543D",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(_o,{size:20}),"Corporate Information Found"]}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[t("div",{children:[e("strong",{children:"Company:"}),e("br",{}),i.company_name]}),t("div",{children:[e("strong",{children:"Employee Email:"}),e("br",{}),i.work_email]}),t("div",{children:[e("strong",{children:"Department:"}),e("br",{}),i.department||"Not specified"]}),t("div",{children:[e("strong",{children:"Current Expiry:"}),e("br",{}),e("span",{style:{color:new Date(i.discount_end_date)>new Date?"#22543D":"#C53030",fontWeight:"bold"},children:new Date(i.discount_end_date).toLocaleDateString()})]}),t("div",{children:[e("strong",{children:"Discount:"}),e("br",{}),i.discount_percentage?`${i.discount_percentage}% off`:`$${i.discount_fixed_amount} off`]})]}),i.work_id_image_url&&t("div",{style:{marginTop:"20px"},children:[e("strong",{children:"Registered Work Badge:"}),e("br",{}),e("img",{src:`/${i.work_id_image_url}`,alt:"Work Badge",style:{maxWidth:"200px",maxHeight:"200px",border:"2px solid #E2E8F0",borderRadius:"8px",marginTop:"10px"}})]})]}),t("div",{style:{background:"#FFFAF0",border:"2px solid #F6AD55",padding:"20px",borderRadius:"12px"},children:[t("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#C05621",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e(hi,{size:20}),"Step 2: Verify Physical Badge"]}),e("p",{style:{color:"#744210",marginBottom:"15px",lineHeight:"1.5"},children:"Ask the passenger to show their physical work badge. Compare it with the registered image above. Check that the name, company, and photo match."}),t("div",{style:{marginBottom:"15px"},children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"5px",color:"#744210"},children:"Verification Notes (optional):"}),e("textarea",{value:d,onChange:b=>p(b.target.value),placeholder:"Add any notes about the verification...",style:{width:"100%",padding:"10px",border:"2px solid #E2E8F0",borderRadius:"8px",resize:"vertical",minHeight:"80px"}})]}),t("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[t("button",{onClick:()=>k("verified"),style:{padding:"15px 30px",background:"#48BB78",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[e(vt,{size:20}),"Badge Verified"]}),t("button",{onClick:()=>k("failed"),style:{padding:"15px 30px",background:"#F56565",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[e(zr,{size:20}),"Badge Invalid"]})]})]})]})]}),n==="verifying"&&t("div",{style:{textAlign:"center",padding:"40px"},children:[e("div",{style:{width:"60px",height:"60px",border:"4px solid #E2E8F0",borderTop:"4px solid #4299E1",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e("h3",{style:{fontSize:"20px",color:"#2D3748",marginBottom:"10px"},children:"Processing Verification..."}),e("p",{style:{color:"#718096"},children:"Recording badge verification and updating expiry date"})]}),(n==="verified"||n==="failed")&&x&&t("div",{children:[t("div",{style:{background:n==="verified"?"#F0FFF4":"#FED7D7",border:`2px solid ${n==="verified"?"#68D391":"#FC8181"}`,padding:"30px",borderRadius:"12px",textAlign:"center",marginBottom:"20px"},children:[e("div",{style:{fontSize:"60px",marginBottom:"20px"},children:n==="verified"?"\u2705":"\u274C"}),e("h3",{style:{fontSize:"24px",fontWeight:"bold",color:n==="verified"?"#22543D":"#C53030",marginBottom:"15px"},children:n==="verified"?"Badge Verified Successfully!":"Badge Verification Failed"}),n==="verified"&&t("div",{style:{background:"white",padding:"20px",borderRadius:"8px",marginTop:"20px"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"10px"},children:[e(wn,{size:20,color:"#22543D"}),e("strong",{children:"Discount Extended"})]}),t("p",{style:{margin:0,color:"#4A5568"},children:["New expiry date: ",e("strong",{children:new Date(x.newExpiryDate).toLocaleDateString()}),e("br",{}),"Extended by: ",t("strong",{children:[x.verification.days_extended," days"]})]})]})]}),e("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:e("button",{onClick:w,style:{padding:"12px 24px",background:"#4299E1",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Verify Another Badge"})})]})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})},eu=()=>{const o=Er(),[i,r]=s.exports.useState(null),[n,l]=s.exports.useState(null),[d,p]=s.exports.useState(!1),[h,c]=s.exports.useState(!1),[m,u]=s.exports.useState([]),[x,C]=s.exports.useState({corporationId:"",workEmail:"",employeeId:"",department:""}),F=s.exports.useRef(null);s.exports.useEffect(()=>{k()},[]);const k=async()=>{try{const y=await fetch("/api/corporations/available",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||"demo-rider-token"}`}});if(y.ok){const B=await y.json();u(B.corporations||[])}}catch(y){console.error("Error fetching corporations:",y)}},w=y=>{const B=y.target.files[0];if(B){r(B);const $=new FileReader;$.onload=X=>{l(X.target.result)},$.readAsDataURL(B)}},b=y=>{y.preventDefault();const B=y.dataTransfer.files[0];if(B&&B.type.startsWith("image/")){r(B);const $=new FileReader;$.onload=X=>{l(X.target.result)},$.readAsDataURL(B)}},f=y=>{y.preventDefault()},z=async y=>{if(y.preventDefault(),!i||!x.corporationId||!x.workEmail){alert("Please fill in all required fields and select a work badge photo");return}p(!0);try{const B=new FormData;B.append("workBadge",i),B.append("corporationId",x.corporationId),B.append("workEmail",x.workEmail),B.append("employeeId",x.employeeId),B.append("department",x.department);const $=await fetch("/api/corporate/upload-badge",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||"demo-rider-token"}`},body:B});if($.ok)c(!0),r(null),l(null),C({corporationId:"",workEmail:"",employeeId:"",department:""}),F.current&&(F.current.value="");else{const X=await $.json();alert(`Upload failed: ${X.error}`)}}catch(B){console.error("Upload error:",B),alert("Upload failed. Please try again.")}finally{p(!1)}};return h?t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)"},children:[t("div",{style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t("button",{onClick:()=>o("/rider"),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:y=>y.target.style.background="#f7fafc",onMouseOut:y=>y.target.style.background="none",children:[e(dn,{size:20}),"Back to Rider App"]}),e("div",{style:{height:"24px",width:"1px",background:"#e2e8f0"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Application Submitted"})]}),t("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"40px",background:"linear-gradient(135deg, #D6F5D6 0%, #A8E6A8 100%)",borderRadius:"20px",textAlign:"center",border:"2px solid #68D391"},children:[e("div",{style:{fontSize:"80px",marginBottom:"20px"},children:"\u2705"}),e("h2",{style:{fontSize:"28px",fontWeight:"bold",color:"#22543D",marginBottom:"15px"},children:"Work Badge Uploaded Successfully!"}),e("p",{style:{fontSize:"16px",color:"#2F855A",marginBottom:"30px",lineHeight:"1.5"},children:"Your corporate discount application has been submitted for review. An admin will verify your work badge and approve your application within 24-48 hours."}),e("button",{onClick:()=>c(!1),style:{padding:"12px 24px",background:"#48BB78",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Upload Another Badge"})]})]}):t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)"},children:[t("div",{style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t("button",{onClick:()=>o("/rider"),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",color:"#4a5568",fontSize:"16px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:y=>y.target.style.background="#f7fafc",onMouseOut:y=>y.target.style.background="none",children:[e(dn,{size:20}),"Back to Rider App"]}),e("div",{style:{height:"24px",width:"1px",background:"#e2e8f0"}}),e("h1",{style:{fontSize:"18px",fontWeight:"600",color:"#2d3748",margin:0},children:"Corporate Discount Application"})]}),t("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"30px",background:"white",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},children:[t("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"60px",height:"60px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",marginBottom:"15px"},children:e(yd,{size:30,color:"white"})}),e("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#2D3748",marginBottom:"8px"},children:"Apply for Corporate Discount"}),e("p",{style:{color:"#718096",fontSize:"14px"},children:"Upload your work badge to get approved for corporate discounts"})]}),t("form",{onSubmit:z,children:[t("div",{style:{marginBottom:"20px"},children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Select Your Company *"}),t("select",{value:x.corporationId,onChange:y=>C({...x,corporationId:y.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px",background:"white"},children:[e("option",{value:"",children:"Choose your company..."}),m.map(y=>t("option",{value:y.id,children:[y.company_name," - ",y.discount_type==="percentage"?`${y.discount_value}% off`:`$${y.discount_value} off`]},y.id))]})]}),t("div",{style:{marginBottom:"20px"},children:[t("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:[e(to,{size:16,style:{display:"inline",marginRight:"5px"}}),"Work Email Address * (for Verification purposes only)"]}),e("input",{type:"email",value:x.workEmail,onChange:y=>C({...x,workEmail:y.target.value}),placeholder:"your.name@company.com",required:!0,style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}})]}),t("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[t("div",{children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Employee ID (Optional)"}),e("input",{type:"text",value:x.employeeId,onChange:y=>C({...x,employeeId:y.target.value}),placeholder:"e.g., EMP001",style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px"}})]}),t("div",{children:[e("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:"Department"}),t("select",{value:x.department,onChange:y=>C({...x,department:y.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E2E8F0",borderRadius:"8px",fontSize:"16px",background:"white"},children:[e("option",{value:"",children:"Select Department..."}),e("option",{value:"Accounting & Finance",children:"Accounting & Finance"}),e("option",{value:"Administration",children:"Administration"}),e("option",{value:"Business Development",children:"Business Development"}),e("option",{value:"Customer Service",children:"Customer Service"}),e("option",{value:"Data Science & Analytics",children:"Data Science & Analytics"}),e("option",{value:"Engineering",children:"Engineering"}),e("option",{value:"Executive",children:"Executive"}),e("option",{value:"Facilities & Operations",children:"Facilities & Operations"}),e("option",{value:"Human Resources",children:"Human Resources"}),e("option",{value:"Information Technology",children:"Information Technology"}),e("option",{value:"Legal",children:"Legal"}),e("option",{value:"Marketing",children:"Marketing"}),e("option",{value:"Product Management",children:"Product Management"}),e("option",{value:"Purchasing & Procurement",children:"Purchasing & Procurement"}),e("option",{value:"Quality Assurance",children:"Quality Assurance"}),e("option",{value:"Research & Development",children:"Research & Development"}),e("option",{value:"Sales",children:"Sales"}),e("option",{value:"Security",children:"Security"}),e("option",{value:"Supply Chain & Logistics",children:"Supply Chain & Logistics"}),e("option",{value:"Training & Development",children:"Training & Development"}),e("option",{value:"Other",children:"Other"})]})]})]}),t("div",{style:{marginBottom:"30px"},children:[t("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#2D3748",fontSize:"14px"},children:[e(pi,{size:16,style:{display:"inline",marginRight:"5px"}}),"Upload Work Badge Photo *"]}),e("div",{onDrop:b,onDragOver:f,style:{border:"2px dashed #CBD5E0",borderRadius:"12px",padding:"40px",textAlign:"center",background:n?"#F7FAFC":"#FAFAFA",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{var y;return(y=F.current)==null?void 0:y.click()},children:n?t("div",{children:[e("img",{src:n,alt:"Work badge preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",marginBottom:"15px",border:"2px solid #E2E8F0"}}),e("p",{style:{color:"#4A5568",fontSize:"14px",margin:0},children:"Click to change photo"})]}):t("div",{children:[e(An,{size:40,color:"#A0AEC0",style:{marginBottom:"15px"}}),e("p",{style:{color:"#4A5568",fontSize:"16px",margin:"0 0 8px 0",fontWeight:"bold"},children:"Click to upload or drag and drop"}),e("p",{style:{color:"#718096",fontSize:"14px",margin:0},children:"PNG, JPG up to 10MB"})]})}),e("input",{ref:F,type:"file",accept:"image/*",onChange:w,style:{display:"none"}})]}),e("div",{style:{background:"#EBF8FF",border:"1px solid #BEE3F8",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:t("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[e(ei,{size:20,color:"#3182CE",style:{marginTop:"2px",flexShrink:0}}),t("div",{children:[e("p",{style:{margin:"0 0 8px 0",fontWeight:"bold",color:"#2B6CB0",fontSize:"14px"},children:"Important Requirements:"}),t("ul",{style:{margin:0,paddingLeft:"20px",color:"#2C5282",fontSize:"13px",lineHeight:"1.4"},children:[e("li",{children:"Photo must clearly show your name and company"}),e("li",{children:"Badge must be current and valid"}),e("li",{children:"Use your official work email address"}),e("li",{children:"Admin review takes 24-48 hours"})]})]})]})}),e("button",{type:"submit",disabled:d||!i||!x.corporationId||!x.workEmail,style:{width:"100%",padding:"15px",background:d?"#A0AEC0":"#4299E1",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:d?t(ye,{children:[e("div",{style:{width:"20px",height:"20px",border:"2px solid #ffffff40",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Submitting Application..."]}):t(ye,{children:[e(ci,{size:20}),"Enroll in Corporate Discount Program"]})})]}),e("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})]})},tu=()=>t("div",{style:{padding:"20px",backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e("h1",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"20px",color:"#1e293b"},children:"Top-Down Car Designs"}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Vehicle Types"}),t("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"center"},children:[t("div",{style:{textAlign:"center"},children:[e(at,{type:"compact",color:"#3b82f6",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Compact"})]}),t("div",{style:{textAlign:"center"},children:[e(at,{type:"sedan",color:"#10b981",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Sedan"})]}),t("div",{style:{textAlign:"center"},children:[e(at,{type:"suv",color:"#f59e0b",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"SUV"})]}),t("div",{style:{textAlign:"center"},children:[e(at,{type:"luxury",color:"#000000",size:40}),e("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:"Luxury"})]})]})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Color Variations"}),e("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:["#3b82f6","#ef4444","#10b981","#f59e0b","#6b7280","#8b5cf6","#000000","#ffffff"].map((i,r)=>e(at,{color:i,size:35},r))})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Directional Orientations"}),e("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"center"},children:[0,45,90,135,180,225,270,315].map(i=>t("div",{style:{textAlign:"center"},children:[e(at,{rotation:i,color:"#6366f1",size:35}),t("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:[i,"\xB0"]})]},i))})]}),t("div",{style:{marginBottom:"40px"},children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"With Turn Signals"}),t("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[e(at,{color:"#ef4444",size:50,showIndicators:!0}),e(at,{color:"#10b981",size:50,rotation:90,showIndicators:!0})]})]}),t("div",{children:[e("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"Size Variations"}),t("div",{style:{display:"flex",gap:"20px",alignItems:"end"},children:[e(at,{color:"#8b5cf6",size:20}),e(at,{color:"#8b5cf6",size:30}),e(at,{color:"#8b5cf6",size:40}),e(at,{color:"#8b5cf6",size:50}),e(at,{color:"#8b5cf6",size:60})]})]})]}),iu=()=>{const o=Er();return e("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:t("div",{style:{backgroundColor:"white",borderRadius:"20px",padding:"40px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",textAlign:"center"},children:[t("div",{style:{marginBottom:"30px"},children:[e("h1",{style:{fontSize:"64px",fontWeight:"700",color:"#4F46E5",margin:0,lineHeight:"1"},children:"\u03C0"}),e("h2",{style:{fontSize:"24px",fontWeight:"600",color:"#1e293b",margin:"10px 0 5px 0"},children:"Pi VIP Rideshare"}),e("p",{style:{fontSize:"16px",color:"#64748b",margin:0},children:"Choose your app to get started"})]}),t("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t("button",{onClick:()=>o("/rider"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#2563eb",i.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#3b82f6",i.currentTarget.style.transform="translateY(0)"},children:[e(Qe,{size:24}),e("span",{children:"Book a Ride"})]}),t("button",{onClick:()=>o("/driver"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#059669",i.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#10b981",i.currentTarget.style.transform="translateY(0)"},children:[e(Ze,{size:24}),e("span",{children:"Start Driving"})]}),t("button",{onClick:()=>o("/dashboard"),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px 24px",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"12px",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#7c3aed",i.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#8b5cf6",i.currentTarget.style.transform="translateY(0)"},children:[e(no,{size:24}),e("span",{children:"Admin Dashboard"})]})]}),e("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:t("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e($e,{size:16}),"Premium rideshare platform"]})})]})})},ou=()=>{const[o,i]=s.exports.useState(null),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState(!1);return s.exports.useEffect(()=>{const c=/iPad|iPhone|iPod/.test(navigator.userAgent);d(c);const m=u=>{u.preventDefault(),i(u),n(!0)};return window.addEventListener("beforeinstallprompt",m),()=>{window.removeEventListener("beforeinstallprompt",m)}},[]),t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{fontSize:"64px",marginBottom:"10px"},children:"\u03C0"}),e("h1",{style:{color:"white",fontSize:"48px",margin:"0",fontWeight:"700"},children:"Pi VIP Rider"}),e("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"18px",margin:"10px 0"},children:"Premium Rideshare Experience"})]}),e("div",{style:{width:"300px",height:"600px",background:"white",borderRadius:"30px",padding:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",marginBottom:"40px",position:"relative",overflow:"hidden"},children:t("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"\u{1F697}"}),e("h3",{style:{color:"#1e293b",fontSize:"24px",marginBottom:"10px"},children:"Book Your Ride"}),e("p",{style:{color:"#64748b",fontSize:"16px",lineHeight:"1.5",padding:"0 20px"},children:"Premium vehicles, professional drivers, real-time tracking, and seamless payments"}),e("div",{style:{background:"#3b82f6",color:"white",padding:"12px 24px",borderRadius:"25px",marginTop:"20px",fontSize:"16px",fontWeight:"600"},children:"Get Started"})]})}),t("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[e("h2",{style:{color:"#1e293b",fontSize:"24px",textAlign:"center",marginBottom:"20px",fontWeight:"600"},children:"Install Pi VIP Rider App"}),r&&t("button",{onClick:async()=>{if(o){o.prompt();const{outcome:c}=await o.userChoice;c==="accepted"&&(i(null),n(!1))}},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",marginBottom:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e(Lo,{size:24}),"Install App Now"]}),l&&t("div",{style:{background:"#f1f5f9",borderRadius:"15px",padding:"20px",marginBottom:"15px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e(ba,{size:20,color:"#1e293b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:"iOS Installation:"})]}),t("ol",{style:{color:"#64748b",margin:0,paddingLeft:"20px"},children:[t("li",{children:["Tap the Share button ",e("span",{style:{fontSize:"18px"},children:"\u2B06\uFE0F"})]}),e("li",{children:'Select "Add to Home Screen"'}),e("li",{children:'Tap "Add" to install'})]})]}),t("button",{onClick:()=>{window.location.href="/rider"},style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#2563eb",onMouseLeave:c=>c.currentTarget.style.background="#3b82f6",children:[e(za,{size:24}),"Open Rider App"]}),t("div",{style:{marginTop:"25px"},children:[e("h3",{style:{color:"#1e293b",fontSize:"18px",marginBottom:"15px"},children:"Features:"}),e("div",{style:{display:"grid",gap:"10px"},children:["\u{1F697} Book rides instantly","\u{1F4CD} Real-time tracking","\u{1F6E3}\uFE0F Multiple stops with voice input","\u{1F4B3} Secure payments","\u2B50 Rate your experience","\u{1F3AF} Favorite locations","\u{1F3E2} Corporate discounts"].map((c,m)=>e("div",{style:{color:"#64748b",fontSize:"16px"},children:c},m))})]})]}),e("div",{style:{marginTop:"20px"},children:e(Ir,{url:"https://c3ae5066-b07d-4ca3-8a63-d0ea5329a006-00-3c9c4iku143gi.sisko.replit.dev/rider",size:180})}),e("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center",color:"white"},children:t("p",{style:{margin:"0",fontSize:"14px",opacity:"0.9"},children:[e("strong",{children:"Demo Account:"})," demo@rider.com | Password: password"]})})]})},ru=()=>{const[o,i]=s.exports.useState(null),[r,n]=s.exports.useState(!1),[l,d]=s.exports.useState(!1);return s.exports.useEffect(()=>{const c=/iPad|iPhone|iPod/.test(navigator.userAgent);d(c);const m=u=>{u.preventDefault(),i(u),n(!0)};return window.addEventListener("beforeinstallprompt",m),()=>{window.removeEventListener("beforeinstallprompt",m)}},[]),t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[t("div",{style:{textAlign:"center",marginBottom:"40px"},children:[e("div",{style:{fontSize:"64px",marginBottom:"10px"},children:"\u03C0"}),e("h1",{style:{color:"white",fontSize:"48px",margin:"0",fontWeight:"700"},children:"Pi VIP Driver"}),e("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"18px",margin:"10px 0"},children:"Start Earning Premium"})]}),e("div",{style:{width:"300px",height:"600px",background:"white",borderRadius:"30px",padding:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",marginBottom:"40px",position:"relative",overflow:"hidden"},children:t("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"\u{1F699}"}),e("h3",{style:{color:"#1e293b",fontSize:"24px",marginBottom:"10px"},children:"Drive & Earn"}),e("p",{style:{color:"#64748b",fontSize:"16px",lineHeight:"1.5",padding:"0 20px"},children:"Premium earnings, flexible schedule, instant payouts, and professional support"}),e("div",{style:{background:"#10b981",color:"white",padding:"12px 24px",borderRadius:"25px",marginTop:"20px",fontSize:"16px",fontWeight:"600"},children:"Start Driving"})]})}),t("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},children:[e("h2",{style:{color:"#1e293b",fontSize:"24px",textAlign:"center",marginBottom:"20px",fontWeight:"600"},children:"Install Pi VIP Driver App"}),r&&t("button",{onClick:async()=>{if(o){o.prompt();const{outcome:c}=await o.userChoice;c==="accepted"&&(i(null),n(!1))}},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",marginBottom:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e(Lo,{size:24}),"Install App Now"]}),l&&t("div",{style:{background:"#f1f5f9",borderRadius:"15px",padding:"20px",marginBottom:"15px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e(ba,{size:20,color:"#1e293b"}),e("span",{style:{fontWeight:"600",color:"#1e293b"},children:"iOS Installation:"})]}),t("ol",{style:{color:"#64748b",margin:0,paddingLeft:"20px"},children:[t("li",{children:["Tap the Share button ",e("span",{style:{fontSize:"18px"},children:"\u2B06\uFE0F"})]}),e("li",{children:'Select "Add to Home Screen"'}),e("li",{children:'Tap "Add" to install'})]})]}),t("button",{onClick:()=>{window.location.href="/driver"},style:{width:"100%",background:"#10b981",color:"white",border:"none",borderRadius:"15px",padding:"16px",fontSize:"18px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"background 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.background="#059669",onMouseLeave:c=>c.currentTarget.style.background="#10b981",children:[e(za,{size:24}),"Open Driver App"]}),t("div",{style:{background:"#f0fdf4",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center"},children:[e(_t,{size:32,color:"#10b981",style:{marginBottom:"10px"}}),e("h3",{style:{color:"#1e293b",fontSize:"18px",margin:"0 0 10px"},children:"Premium Earnings"}),t("p",{style:{color:"#64748b",fontSize:"14px",margin:0},children:["Earn up to ",e("strong",{children:"$35/hour"})," with surge pricing and tips"]})]}),t("div",{style:{marginTop:"25px"},children:[e("h3",{style:{color:"#1e293b",fontSize:"18px",marginBottom:"15px"},children:"Driver Benefits:"}),e("div",{style:{display:"grid",gap:"10px"},children:["\u{1F4B0} Instant payouts","\u{1F4CA} Earnings tracking","\u{1F5FA}\uFE0F Smart routing & multiple stops","\u{1F3C6} Performance bonuses","\u{1F6E1}\uFE0F Insurance coverage","\u{1F4DE} 24/7 support"].map((c,m)=>e("div",{style:{color:"#64748b",fontSize:"16px"},children:c},m))})]})]}),e("div",{style:{marginTop:"20px"},children:e(Ir,{url:"https://c3ae5066-b07d-4ca3-8a63-d0ea5329a006-00-3c9c4iku143gi.sisko.replit.dev/driver",size:180})}),e("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"15px",padding:"20px",marginTop:"20px",textAlign:"center",color:"white"},children:t("p",{style:{margin:"0",fontSize:"14px",opacity:"0.9"},children:[e("strong",{children:"Demo Account:"})," demo@driver.com | Password: password"]})})]})};function nu(){return e(xs,{children:t(Vl,{children:[e(we,{path:"/",element:e(iu,{})}),e(we,{path:"/download-rider",element:e(ou,{})}),e(we,{path:"/download-driver",element:e(ru,{})}),e(we,{path:"/rider",element:e(zp,{})}),e(we,{path:"/rider/auth",element:e(Rp,{})}),e(we,{path:"/rider/badge-upload",element:e(eu,{})}),e(we,{path:"/driver",element:e(Ip,{})}),e(we,{path:"/driver/earnings",element:e(Op,{})}),e(we,{path:"/driver/documents",element:e(Oa,{})}),e(we,{path:"/airport-queue",element:e(jp,{})}),e(we,{path:"/car-demo",element:e(tu,{})}),t(we,{path:"/dashboard",element:e(kc,{}),children:[e(we,{index:!0,element:e(bp,{})}),e(we,{path:"drivers",element:e(Ep,{})}),e(we,{path:"riders",element:e(Dp,{})}),e(we,{path:"rides",element:e(Bp,{})}),e(we,{path:"analytics",element:e(Wp,{})}),e(we,{path:"dispatch",element:e(Mp,{})}),e(we,{path:"history",element:e(Pp,{})}),e(we,{path:"settings",element:e(_p,{})}),e(we,{path:"payment",element:e(Lp,{})}),e(we,{path:"profile",element:e(Np,{})}),e(we,{path:"inbox",element:e($p,{})}),e(we,{path:"markets",element:e(Hp,{})}),e(we,{path:"surge-map",element:e(Up,{})}),e(we,{path:"surge-control",element:e(qp,{})}),e(we,{path:"disputes",element:e(Jp,{})}),e(we,{path:"corporations",element:e(Xp,{})}),e(we,{path:"corporate-applications",element:e(Zp,{})}),e(we,{path:"driver-badge-verification",element:e(Qp,{})})]})]})})}const au=document.getElementById("root"),lu=ia(au);lu.render(e(nu,{}));
